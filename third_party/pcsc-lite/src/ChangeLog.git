commit 7135021f5cefab900ddef89cdbfc9aef14671e6a (HEAD -> master, tag: 1.9.1, zotac/master, origin/master, origin/HEAD, github/master)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 16 17:24:35 2021 +0100

    Release 1.9.1
    
    Signed-off-by: Ludovic Rousseau <ludovic.rousseau@free.fr>

 ChangeLog    | 15 +++++++++++++++
 configure.ac |  2 +-
 2 files changed, 16 insertions(+), 1 deletion(-)

commit 31174db97053a676521eb8601be8c2c9898f7afb
Author: Maksim Ivanov <emaxx@google.com>
Date:   Tue Jan 12 00:33:02 2021 +0100

    Add missing includes
    
    atrhandler.h:
    * include wintypes.h for DWORD, etc.;
    
    configfile.h:
    * include readerfactory.h for SerialReader;
    
    dyn_generic.h:
    * include wintypes.h for LONG;
    
    eventhandler.h:
    * include pcsclite.h for MAX_READERNAME, etc.;
    * include readerfactory.h for READER_CONTEXT;
    * include wintypes.h for UCHAR, etc.;
    
    hotplug.h:
    * include wintypes.h for LONG, etc.;
    
    ifdwrapper.h:
    * include ifdhandler.h for SCARD_IO_HEADER, etc.;
    * include readerfactory.h for READER_CONTEXT;
    * include wintypes.h for LONG, etc.;
    
    prothandler.h:
    * include readerfactory.h for ReaderContext;
    * include wintypes.h for DWORD, etc.;
    
    winscard_msg.h:
    * include pcsclite.h for MAX_READERNAME;
    * include wintypes.h for LONG, etc.;
    
    winscard_svc.h:
    * include stdint.h for uint32_t;
    * include wintypes.h for LONG.

 src/atrhandler.h   | 2 ++
 src/configfile.h   | 2 ++
 src/dyn_generic.h  | 2 ++
 src/eventhandler.h | 4 ++++
 src/hotplug.h      | 2 ++
 src/ifdwrapper.h   | 4 ++++
 src/prothandler.h  | 3 +++
 src/winscard_msg.h | 3 +++
 src/winscard_svc.h | 4 ++++
 9 files changed, 26 insertions(+)

commit 113f74a1d7189ced85038b890253f2f3b477c3f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 2 15:06:18 2021 +0100

    hotplug libusb: support CCIDCLASSDRIVER
    
    Try to use a (CCID) class driver if a specific driver fails to use the
    reader.
    
    This may happen if both acsccid and ccid drivers are installed.
    acsccid should be used first.
    
    This feature was present in src/hotplug_libudev.c but not yet in
    src/hotplug_libusb.c.
    
    " ccid vs acsccid - miss probing #26 "
    https://github.com/acshk/acsccid/issues/26

 src/hotplug_libusb.c | 165 +++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 120 insertions(+), 45 deletions(-)

commit bc5a78acbc99ef23af8c6e3cb09900eb07fc25cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 2 11:49:48 2021 +0100

    Fix compiler warnings
    
    Temporarily disable GCC warnings. The internal_error() function does not
    have the correct prototype but that is not an issue since no parameter
    is used.
    
    libpcscspy.c:118:27: warning: cast between incompatible function types from ‚ÄòLONG (*)(void)‚Äô {aka ‚Äòlong int (*)(void)‚Äô} to ‚ÄòLONG (*)(DWORD,  const void *, const void *, SCARDCONTEXT *)‚Äô {aka ‚Äòlong int (*)(long unsigned int,  const void *, const void *, long int *)‚Äô} [-Wcast-function-type]
      118 |  .SCardEstablishContext = (p_SCardEstablishContext(*))internal_error,
          |                           ^
    libpcscspy.c:119:25: warning: cast between incompatible function types from ‚ÄòLONG (*)(void)‚Äô {aka ‚Äòlong int (*)(void)‚Äô} to ‚ÄòLONG (*)(SCARDCONTEXT)‚Äô {aka ‚Äòlong int (*)(long int)‚Äô} [-Wcast-function-type]
      119 |  .SCardReleaseContext = (p_SCardReleaseContext(*))internal_error,
          |                         ^
    libpcscspy.c:120:25: warning: cast between incompatible function types from ‚ÄòLONG (*)(void)‚Äô {aka ‚Äòlong int (*)(void)‚Äô} to ‚ÄòLONG (*)(SCARDCONTEXT)‚Äô {aka ‚Äòlong int (*)(long int)‚Äô} [-Wcast-function-type]
      120 |  .SCardIsValidContext = (p_SCardIsValidContext(*))internal_error,
          |                         ^
    etc.

 src/spy/libpcscspy.c | 3 +++
 1 file changed, 3 insertions(+)

commit 4f7bf5c9a3acb80d6d8dea7256376a759e270b57
Author: Vincent JARDIN <vjardin@free.fr>
Date:   Sat Dec 12 22:03:43 2020 +0000

    Fix compilation warning
    
    Just log in case of any errors.
    
    hotplug_libusb.c:509:3: warning: ignoring return value of ‚Äòread‚Äô, declared with attribute warn_unused_result [-Wunused-result]
      509 |   read(pipefd[0], &c, 1);
    
    hotplug_libusb.c:431:2: warning: ignoring return value of ‚Äòwrite‚Äô, declared with attribute warn_unused_result [-Wunused-result]
      431 |  write(pipefd[1], &c, 1);
    
    hotplug_libusb.c:466:3: warning: ignoring return value of ‚Äòpipe‚Äô, declared with attribute warn_unused_result [-Wunused-result]
      466 |   pipe(rescan_pipe);
    
    hotplug_libusb.c:702:3: warning: ignoring return value of ‚Äòwrite‚Äô, declared with attribute warn_unused_result [-Wunused-result]
      702 |   write(rescan_pipe[1], &dummy, sizeof(dummy));

 src/hotplug_libusb.c | 21 +++++++++++++++++----
 1 file changed, 17 insertions(+), 4 deletions(-)

commit 471bb3658bc4264b23ad34aad919d4ea802d6549
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 12 15:01:42 2020 +0100

    Fix compiler warning
    
    prothandler.c: In function ‚ÄòPHSetProtocol‚Äô:
    ../src/PCSC/debuglog.h:107:53: warning: format ‚Äò%d‚Äô expects argument of type ‚Äòint‚Äô, but argument 6 has type ‚ÄòLONG‚Äô {aka ‚Äòlong int‚Äô} [-Wformat=]
     #define Log2(priority, fmt, data) log_msg(priority, "%s:%d:%s() " fmt, __FILE__, __LINE__, __FUNCTION__, data)
                                                         ^~~~~~~~~~~~~
    prothandler.c:129:5: note: in expansion of macro ‚ÄòLog2‚Äô
         Log2(PCSC_LOG_INFO, "PTS protocol failed (%d)", rv);
         ^~~~
    prothandler.c:129:48: note: format string is defined here
         Log2(PCSC_LOG_INFO, "PTS protocol failed (%d)", rv);
                                                   ~^
                                                   %ld

 src/prothandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d58577093f56dbcfbf754940f885ed8fcdba206
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 7 22:12:04 2020 +0100

    PHSetProtocol(): supports T=0&1 cards on T=0 reader
    
    The change in CCID driver 8dda13221e44c33180911045f08a758d23cb65c6
    allows the driver to reject the requested protocol.
    But maybe another protocol could be used instead.
    
    It is now possible to use a card supporting both T=0 and T=1 on a T=0
    only reader. T=1 will be tried (as preferred protocol). The reader will
    report an error. T=0 will be used instead.
    
    Thanks to Micha≈Ç Skalski for the bug report
    "reader-proto-not-supported-fix: change returned value to
    IFD_NOT_SUPPORTED if reader does not support protocol #77"
    https://github.com/LudovicRousseau/CCID/pull/77

 src/prothandler.c | 45 ++++++++++++++++++++++++++++-----------------
 1 file changed, 28 insertions(+), 17 deletions(-)

commit b10b9bb45ad4ad2af095335153d3ebd448dc8c8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 7 21:42:53 2020 +0100

    ATRDecodeAtr: log the default protocol using T=x notation
    
    Instead of:
    atrhandler.c:222:ATRDecodeAtr() CurrentProtocol: 1, AvailableProtocols: 3
    we now have:
    atrhandler.c:222:ATRDecodeAtr() CurrentProtocol: T=0, AvailableProtocols: 3

 src/atrhandler.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7e1a89013054fd04fb7e341e4d3c86d94eb1dfba
Author: Olivier Martin <olivier@labapart.com>
Date:   Tue Oct 27 21:41:15 2020 +0100

    readerfactory: Make sure a freed Reader Context is not accessed
    
    When multiple readers are instanciated on the computer, we have
    multiple `READER_CONTEXT`.
    The first removal (likely) frees the first READER_CONTEXT instance.
    On the removal of the second instance, `RFRemoveReader()` goes
    through each `READER_CONTEXT` instance including the first instance
    that has been freed.
    
    Valgrind shows the error:
    
    ```
    00000665 [120043264] pcscdaemon.c:227:signal_thread() Preparing for suicide
    01001380 [67533568] readerfactory.c:1361:RFCleanupReaders() entering cleaning function
    00000334 [67533568] readerfactory.c:1370:RFCleanupReaders() Stopping reader: First PCD 00 00
    00002433 [67533568] readerfactory.c:614:RFRemoveReader() UnrefReader() count was: 1
    00000768 [67533568] eventhandler.c:175:EHDestroyEventHandler() Stomping thread.
    00000254 [67533568] ifd-vpcd.c:290:IFDHGetCapabilities() unknown tag 4017
    00000290 [67533568] ifd-vpcd.c:290:IFDHGetCapabilities() unknown tag 4018
    00000273 [67533568] eventhandler.c:204:EHDestroyEventHandler() Waiting polling thread
    00304949 [130553600] eventhandler.c:504:EHStatusHandlerThread() Die
    00033452 [67533568] eventhandler.c:215:EHDestroyEventHandler() Thread stomped.
    00000391 [67533568] readerfactory.c:1134:RFUnInitializeReader() Attempting shutdown of First PCD 00 00.
    00004501 [67533568] readerfactory.c:614:RFRemoveReader() UnrefReader() count was: 1
    00000057 [67533568] eventhandler.c:175:EHDestroyEventHandler() Stomping thread.
    00000046 [67533568] ifd-vpcd.c:290:IFDHGetCapabilities() unknown tag 4017
    00000044 [67533568] ifd-vpcd.c:290:IFDHGetCapabilities() unknown tag 4018
    00000042 [67533568] eventhandler.c:204:EHDestroyEventHandler() Waiting polling thread
    00394441 [138946304] eventhandler.c:504:EHStatusHandlerThread() Die
    00001272 [67533568] eventhandler.c:215:EHDestroyEventHandler() Thread stomped.
    00000200 [67533568] readerfactory.c:1134:RFUnInitializeReader() Attempting shutdown of First PCD 00 01.
    00000838 [67533568] readerfactory.c:991:RFUnloadReader() Unloading reader driver.
    00030272 [67533568] readerfactory.c:1370:RFCleanupReaders() Stopping reader: Second 00 00
    ==8630== Invalid read of size 8
    ==8630==    at 0x1116F3: RFRemoveReader (readerfactory.c:602)
    ==8630==    by 0x112A2B: RFCleanupReaders (readerfactory.c:1378)
    ==8630==    by 0x10BC8D: SVCServiceRunLoop (pcscdaemon.c:123)
    ==8630==    by 0x10BC8D: main (pcscdaemon.c:779)
    ==8630==  Address 0x667b7d8 is 280 bytes inside a block of size 440 free'd
    ==8630==    at 0x4C30D3B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
    ==8630==    by 0x112A61: RFCleanupReaders (readerfactory.c:1383)
    ==8630==    by 0x10BC8D: SVCServiceRunLoop (pcscdaemon.c:123)
    ==8630==    by 0x10BC8D: main (pcscdaemon.c:779)
    ==8630==  Block was alloc'd at
    ==8630==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
    ==8630==    by 0x11025D: RFAllocateReaderSpace (readerfactory.c:142)
    ==8630==    by 0x10B758: main (pcscdaemon.c:637)
    ==8630==
    00001158 [67533568] readerfactory.c:614:RFRemoveReader() UnrefReader() count was: 1
    00000074 [67533568] eventhandler.c:175:EHDestroyEventHandler() Stomping thread.
    ```

 src/readerfactory.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 0d2e66e76282f0800bd6333cd18d0cdca4798185
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 4 22:21:40 2020 +0100

    pcscd: update pcsclite-muscle mailing list address
    
    Bugs should be reported to pcsclite-muscle@lists.infradead.org.
    The list on alioth is dead since 2018.

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0680e8366e710f9310d3f108309fdfd24d18741a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 15 10:17:11 2020 +0200

    Use correct type for IFD* functions
    
    Fix the ifdwrapper.h header file so the functions types correspond to
    what we have in ifdwrapper.c since the commit
    eecf6856b9d5c81ef4b3caa53cfc38d3075ca339
    
    The compilation was broken on macOS with:
    ifdwrapper.c:67:14: error: conflicting types for 'IFDSetPTS'
    RESPONSECODE IFDSetPTS(READER_CONTEXT * rContext, DWORD dwProtocol,
                 ^
    ./ifdwrapper.h:52:7: note: previous declaration is here
            LONG IFDSetPTS(READER_CONTEXT *, DWORD, UCHAR, UCHAR, UCHAR, UCHAR);
                 ^
    
    Compilation was correct on GNU/Linux but incorrect on macOS because we
    have:
        typedef long RESPONSECODE;
    For both macOS and GNU/Linux.
    
    and
        typedef int32_t LONG;
    for maCOS and
        typedef long LONG;
    For GNU/LInux
    
    So on macOS LONG and RESPONSECODE types are not equivalent.

 src/ifdwrapper.h | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 4e30dc5d39147ab71235fe51a6097fd6dad004b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 7 10:25:22 2020 +0200

    New UT to test card removal during APDU exchange

 UnitaryTests/transmit_card_removed.py | 109 ++++++++++++++++++++++++++++++++++
 1 file changed, 109 insertions(+)

commit 17be9f8540113c2efac1b7d6c6ddc6c98b52bf4a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 4 12:14:29 2020 +0200

    Update reader state when a card is removed during an exchange
    
    If the smart card is removed during an APDU exchange we may receive
    SCARD_E_NO_SMARTCARD. In this case we shall update the reader state to
    indicate the card has been removed.
    
    We shall do that *before* the next loop in EHStatusHandlerThread() so
    that a call to SCardStatus() immediatly after the SCardTransmit() will
    return the correct state.
    
    This new mechanism is also implemented in the CCID driver version
    1.4.34.
    
    Thanks to Marc Kewitz for the bug report
    "[Pcsclite-muscle] Race condition during readerstate update"
    http://lists.infradead.org/pipermail/pcsclite-muscle/2020-August/001107.html

 src/winscard.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 0962ba390af8348160608ed9b335ddffd3a46e2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 4 12:13:16 2020 +0200

    IFDTransmit(): convert IFD_ICC_NOT_PRESENT into SCARD_E_NO_SMARTCARD
    
    The CCID driver can now reports IFD_ICC_NOT_PRESENT when a card is
    removed during an APDU exchange.

 src/ifdwrapper.c | 3 +++
 1 file changed, 3 insertions(+)

commit c90e0bb9f54d194668e7a43761e2c89ce8083049
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 25 10:48:42 2020 +0200

    IFDPowerICC() returns IFD_SUCCESS in case of success
    
    IFDPowerICC() returns a RESPONSECODE type so IFD_SUCCESS instead of
    SCARD_S_SUCCESS in case of success.
    
    This is not really important since RESPONSECODE and LONG are the same
    type and IFD_SUCCESS and SCARD_S_SUCCESS are both equal to 0 but it is
    nicer code.

 src/winscard.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit eecf6856b9d5c81ef4b3caa53cfc38d3075ca339
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 25 10:47:33 2020 +0200

    Use correct type for IFD* functions
    
    The IFD* functions return a RESPONSECODE since they wrap the driver
    functions.
    
    This is not really important since RESPONSECODE and LONG are the same
    type but it is nicer code.

 src/ifdwrapper.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit fc134f85a9a6725e72ce4049d3128b01fc85b3d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 25 10:36:21 2020 +0200

    Do not report an error if the wrong interface is used by the driver
    
    With composite USB devices the pcscd daemon does not know which USB
    interface correspond to the CCID reader. So all the interfaces are tried
    and this generated critical errors in the logs.
    
    Like:
    00000005 readerfactory.c:1110:RFInitializeReader() Open Port 0x200000 Failed (usb:096e/080a:libudev:0:/dev/bus/usb/003/013)
    00000002 readerfactory.c:375:RFAddReader() FT ePass2003Auto init failed.
    
    When the driver reports IFD_NO_SUCH_DEVICE then the logs now have a
    PCSC_LOG_INFO level so are no more displayed in red and no more present
    by default.
    
    Fixes Salsa issue #8
    https://salsa.debian.org/rousseau/PCSC/-/issues/8
    "Do not report an error if the wrong interface is used by the driver"

 src/readerfactory.c | 32 +++++++++++++++++++++-----------
 1 file changed, 21 insertions(+), 11 deletions(-)

commit 60836402e24bce2c1ab5bf1d61296e1cb01303fc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Aug 8 17:40:28 2020 +0200

    Remove duplicate code
    
    Thanks to Valerii Zapodovnikov for the bug report
    "Code cleanup"
    https://salsa.debian.org/rousseau/PCSC/-/issues/19
    
    " https://salsa.debian.org/rousseau/PCSC/-/blob/master/src/readerfactory.c#L1108
    Why rContext->slot is assigned the same value; twice? "

 src/readerfactory.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 278b55a87a5f4b9bd86513f7d8f9ab7d66558602
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Aug 8 17:37:40 2020 +0200

    EHUnregisterClientForEvent: correctly handle EHTryToUnregisterClientForEvent
    
    EHTryToUnregisterClientForEvent() returns SCARD_S_SUCCESS or
    SCARD_F_INTERNAL_ERROR but never a negative value.
    
    Thanks to Valerii Zapodovnikov for the bug report
    "Code cleanup"
    https://salsa.debian.org/rousseau/PCSC/-/issues/19
    
    " https://salsa.debian.org/rousseau/PCSC/-/blob/master/src/eventhandler.c#L107
    rv < 0 is always false, because on line 94 there SCARD_F_INTERNAL_ERROR
    is ((LONG)0x80100001 and SCARD_S_SUCCESS is ((LONG)0x00000000). "

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fab036232bb01f6c77ace554b17352eb4ab50e8a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Aug 8 15:16:24 2020 +0200

    PHSetProtocol: use symbolic name instead of number
    
    Replace 0 by SCARD_PROTOCOL_UNDEFINED to make the code more readable.

 src/prothandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a706455f31178ab35f07e3e6e76bd4a35d7ef3da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Aug 8 15:11:53 2020 +0200

    ATRDecodeAtr: always initialize the return values
    
    Always set a value to availableProtocols and currentProtocol before any
    return in error.
    
    Thanks to Maksim Ivanov for the bug report
    "[Pcsclite-muscle] Missing checks of ATRDecodeAtr returns"
    http://lists.infradead.org/pipermail/pcsclite-muscle/2020-July/001097.html
    
    " Hello,
    
    The callers of the ATRDecodeAtr() function (SCardConnect() and
    SCardReconnect() in winscard.c) don't check its return value, which
    might potentially cause reads of uninitialized variables
    |availableProtocols| and |defaultProtocol| and unexpected side
    effects.
    
    Regards,
    Maksim "

 src/atrhandler.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 38dfe5c1f474db519e1f7e31cf714ba5d4c6cfa4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 5 18:57:30 2020 +0200

    Fix a hang in SCardTransmit()
    
    In some special conditions it is possible to make SCardTransmit() to
    hang forever in pcscd and generates a denial of service.
    
    I was able to reproduce the problem using a sample C code.
    
    Thanks to Maksim Ivanov for the bug report
    "[Pcsclite-muscle] Potential hang in SCardTransmit"
    http://lists.infradead.org/pipermail/pcsclite-muscle/2020-July/001096.html
    
    " Hello,
    
    It seems that there's (at least half-hypothetical) scenario when
    SCardTransmit may hang.
    
    The combination is:
    the service's |readerState| is (SCARD_PRESENT | SCARD_POWERED |
    SCARD_NEGOTIABLE);
    the service's |cardProtocol| is SCARD_PROTOCOL_UNDEFINED (right after
    power-up);
    the caller's |pioSendPci->dwProtocol| is SCARD_PROTOCOL_ANY_OLD.
    
    In that case, the hang happens in the loop that attempts to find the
    highest bit in the |cardProtocol| value; it doesn't handle the case
    when the latter is zero:
    https://salsa.debian.org/rousseau/PCSC/-/blob/467df10d439f6d739cd48a51f2b3dd543b1a64ce/src/winscard.c#L1583
    
    P.S. Sorry if I misunderstood something and this case can never occur
    in practice.
    
    Regards,
    Maksim "

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 36bc9446b40fa3c6ac12312b934f4d7131659087
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 5 17:59:41 2020 +0200

    Do not (possibly) lock a reader if allocating hCard fails
    
    In case of SCardConnect() the reader may be locked in
    SCARD_SHARE_EXCLUSIVE mode if internal SCardConnect() works but
    MSGAddHandle() fails because the list of handle is full.
    
    You need to start pcscd with "--max-card-handle-per-reader n" with
    n > 200 or the 200 limit (default value) will be hit in internal
    SCardConnect() and MSGAddHandle() would not be called.
    
    Thanks to Maksim Ivanov for the bug report
    "[Pcsclite-muscle] SCardConnect behavior with invalid contexts"
    http://lists.infradead.org/pipermail/pcsclite-muscle/2020-July/001095.html
    
    " Hello,
    
    I believe that there's a potential problem with the SCardConnect
    implementation that it doesn't check the received SCARDCONTEXT
    *before* executing the command. This might result in an unexpected
    state, where the SCardConnect() caller receives an error code
    meanwhile the connection to the card is actually established (which,
    for example, might be an exclusive connection that prevents anyone
    else from connecting to the card).
    
    In detail, the ContextThread() function in winscard_svc.c, when
    receiving the SCARD_CONNECT command, calls first SCardConnect() from
    winscard.c, and then MSGAddHandle(). The former ignores SCARDCONTEXT
    and, if possible, establishes a connection to the card. The latter
    does check the SCARDCONTEXT value, but this happens after the
    connection is already established, and its error is just returned to
    the caller (without closing the just-opened connection).
    
    Would it make sense to add a check of SCARDCONTEXT before calling
    SCardConnect(), and/or to call SCardDisconnect() if MSGAddHandle()
    fails?
    
    Regards,
    Maksim "

 src/winscard_svc.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 467df10d439f6d739cd48a51f2b3dd543b1a64ce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 6 21:09:49 2020 +0200

    hotplug_libusb: fix compiler warning
    
    hotplug_libusb.c: In function ‚ÄòHPRescanUsbBus‚Äô:
    hotplug_libusb.c:372:8: warning: passing argument 4 of ‚ÄòHPAddHotPluggable‚Äô discards ‚Äòconst‚Äô qualifier from pointer target type [-Wdiscarded-qualifiers]
      372 |        &config_desc->interface[interface],
          |        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    hotplug_libusb.c:125:52: note: expected ‚Äòstruct libusb_interface *‚Äô but argument is of type ‚Äòconst struct libusb_interface *‚Äô
      125 |  const char bus_device[], struct libusb_interface *idesc,
          |                           ~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~

 src/hotplug_libusb.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d31384b3ce59e2bff1773f9a0ed5383dda4a9a31
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 6 21:01:42 2020 +0200

    hotplug_libusb: use libusb_error_name() to log errors in text
    
    libusb provides libusb_error_name() to display a human readable version
    of the error code returned by libusb.
    
    LIBUSB_ERROR_NO_DEVICE is easier to understand than -4.

 src/hotplug_libusb.c | 25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)

commit 1eb91726162e58f732d8787c734594588f78ce12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 6 20:52:24 2020 +0200

    hotplug_libusb: Code reformat

 src/hotplug_libusb.c | 63 ++++++++++++++++++++++++++++++++++------------------
 1 file changed, 41 insertions(+), 22 deletions(-)

commit 3e2106ebb9be1e030619ee70b2c8901e2f019e97
Author: Francesco Lattanzio <franz.lattanzio@gmail.com>
Date:   Sun Jul 5 18:40:38 2020 +0200

    hotplug_libusb: add interface name to reader name
    
    Add the name of the interface to the full name of the reader, if not
    disabled.

 src/hotplug_libusb.c | 58 ++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 45 insertions(+), 13 deletions(-)

commit aa1bf3083463bcf9169566e400c7b5d3e4c7cca5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 2 19:46:46 2020 +0200

    Fix compiler warning
    
    hotplug_linux.c: In function ‚ÄòHPEstablishUSBNotifications‚Äô:
    hotplug_linux.c:305:46: warning: ‚Äò%s‚Äô directive output may be truncated writing up to 255 bytes into a region of size between 0 and 4095 [-Wformat-truncation=]
      305 |      snprintf(filename, sizeof filename, "%s/%s",
          |                                              ^~
    hotplug_linux.c:305:6: note: ‚Äòsnprintf‚Äô output between 2 and 4352 bytes into a destination of size 4096
      305 |      snprintf(filename, sizeof filename, "%s/%s",
          |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      306 |       dirpath, entryB->d_name);
          |       ~~~~~~~~~~~~~~~~~~~~~~~~

 src/hotplug_linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 199f8455745654d3856251a949ad630c4d1a3c13
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 2 19:44:36 2020 +0200

    Fix compiler warning
    
    hotplug_libusb.c: In function ‚ÄòHPSearchHotPluggables‚Äô:
    hotplug_libusb.c:498:4: warning: cast between incompatible function types from ‚Äòvoid (*)(int *)‚Äô to ‚Äòvoid * (*)(void *)‚Äô [-Wcast-function-type]
      498 |    (PCSCLITE_THREAD_FUNCTION( )) HPEstablishUSBNotifications, pipefd);
          |    ^

 src/hotplug_libusb.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 12f6c20a6f826d0f1a912e9cf2e329dc7c307c83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 2 19:42:18 2020 +0200

    Fix compiler warning
    
    hotplug_libusb.c: In function ‚ÄòHPRescanUsbBus‚Äô:
    hotplug_libusb.c:586:47: warning: ‚Äò%s‚Äô directive output may be truncated writing up to 127 bytes into a region of size 126 [-Wformat-truncation=]
      586 |     snprintf(fullname, sizeof(fullname), "%s (%s)",
          |                                               ^~
      587 |      driver->readerName, serialNumber);
          |                          ~~~~~~~~~~~~
    hotplug_libusb.c:586:5: note: ‚Äòsnprintf‚Äô output 4 or more bytes (assuming 131) into a destination of size 128
      586 |     snprintf(fullname, sizeof(fullname), "%s (%s)",
          |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      587 |      driver->readerName, serialNumber);
          |      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69082a68f0fe2939a658f4f0857095e5b887a10d
Author: Francesco Lattanzio <franz.lattanzio@gmail.com>
Date:   Sun Jun 28 08:54:33 2020 +0200

    hotplug_libusb: remove obsolete libhal scheme
    
    libhal has been deprecated long ago and CCID does not support its device
    name scheme anymore.
    
    From the github pull request:
    " I have a dual interface reader (HID's OMNIKEY 5422).
    When I plug it on a Linux machine I can access both interfaces.
    When I plug it on a FreeBSD machine I can only access one of them (the
    contact-less one).
    
    Debugging the PCSC Daemon, revealed the problem being in
    "src/hotplug_libusb.c"'s HPAddHotPluggable() function: when a single
    interface reader in plugged, a "libusb-1.0" device name scheme will be
    used when invoking driver's IFDHCreateChannelByName(), whereas, if a
    multi-interface reader is plugged, a "libhal" scheme is used instead.
    
    But CCID (the driver I use for OMNIKEY 5422), does not know how to fully
    parse a "libhal" device name, it can only parse the "usb:XXXX/YYYY:"
    part, so the interface number is lost.
    
    There are two possible solution to this issue:
    
    1. prevent the PCSC Daemon from building "libhal" device names
    2. add support in CCID to fully parse a "libhal" device name
    
    Although the second solution is more conservative as it would prevent
    any driver relying on a "libhal" device name scheme from breaking, I
    chose to implement the first solution for the following reasons:
    
    - if I read correctly the "Changelog" file, support for libhal has been
      deprecated since 2011
    - it looks like support for the "libhal" scheme was added with commit
      36fc3a6 because the "libusb" scheme, as implemented in the CCID
      driver, lacked support for specifying the interface number -- this is
      no more a problem as commit 8c57dcc (of the CCID project) added it
    - support for the "libhal" scheme was removed from CCID with commit
      e468eef, so I guess there would be no point in adding it again "
    
    Note that the interface number is still present in the "libusb-1.0"
    scheme since we use:
      snprintf(deviceName, sizeof(deviceName), "usb:%04x/%04x:libusb-1.0:%s",
       desc.idVendor, desc.idProduct, bus_device);
    with:
      snprintf(bus_device, BUS_DEVICE_STRSIZE, "%d:%d:%d",
        bus_number, device_address, interface);
    
    A big thank to Francesco Lattanzio for the patch.
    https://github.com/LudovicRousseau/PCSC/pull/79

 src/hotplug_libusb.c | 25 ++++++-------------------
 1 file changed, 6 insertions(+), 19 deletions(-)

commit a82fbdd722f515a65e0d924227f55e06a2da2fb9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 14 16:58:24 2020 +0200

    Remove outdated and useless README.DAEMON
    
    This doc documents "./configure --enable-daemon" which is no more
    available since 2002 and 52c8e4ff51f687fa73044f889ef0dbbb9b59c205

 doc/Makefile.am   |  2 +-
 doc/README.DAEMON | 15 ---------------
 2 files changed, 1 insertion(+), 16 deletions(-)

commit e796a0f12fbefa459bff0d25e27089615fa91f21 (tag: 1.9.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 14 15:26:31 2020 +0200

    Release 1.9.0
    
    Signed-off-by: Ludovic Rousseau <ludovic.rousseau@free.fr>

 ChangeLog    | 9 +++++++++
 configure.ac | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit 047789c4f1a05be3023e1fc842520b506c14b79b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 13 18:54:42 2020 +0200

    hotplug_macosx: handle UTF-8 in ifdFriendlyName
    
    If CFStringGetCStringPtr() fails then we try to copy the sting using
    kCFStringEncodingUTF8 encoding.
    
    This allows to get reader friendly name like "SoloKeys Solo üêù".

 src/hotplug_macosx.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 6d0b16784ac226746c79ca4bd2c6fb5e31c6b114
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 13 18:29:20 2020 +0200

    hotplug_macosx: parse PCSCLITE_HP_DROPDIR only once
    
    No need to re-parse PCSCLITE_HP_DROPDIR (driver directory) for each
    reader connected or disconnected.
    Reading the Info.plist at startup is enough.

 src/hotplug_macosx.c | 37 ++++++++++++++-----------------------
 1 file changed, 14 insertions(+), 23 deletions(-)

commit 8d19fb00a6a93f0c7c579f26eb19f3863d8d8808
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 13 18:31:26 2020 +0200

    hotplug_macos: ignore invalid Info.plist entries
    
    If an entry can't be parsed then ignore it instead of crashing.
    
    It can be the case if the driver Info.plist contains non-ASCII characters in ifdFriendlyName for example.
    
    See "Unicode in USB Product string not supported."
    https://salsa.debian.org/rousseau/PCSC/-/issues/18

 src/hotplug_macosx.c | 2 ++
 1 file changed, 2 insertions(+)

commit 434f75ec42a9c170bda7cb676cad5313aed52f0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 16 11:20:49 2020 +0200

    tokenparser: accept any Unicode character in a reader name
    
    A reader name is no more limited to a subset of ASCII characters.
    It is now possible to use emoticons or non-latin alphabets.
    
    Fixes Salsa issue "Unicode in USB Product string not supported."
    https://salsa.debian.org/rousseau/PCSC/-/issues/18

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4452a074bd98432ff79174d675e23cf1ab5ecc65
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 16 10:40:15 2020 +0200

    Fix compiler warning
    
    configfile.l: In function ‚Äòevaluatetoken‚Äô:
    configfile.l:229:14: warning: passing argument 1 of ‚Äòtok_error‚Äô discards ‚Äòconst‚Äô qualifier from pointer target type [-Wdiscarded-qualifiers]
        tok_error("No Memory");
                  ^~~~~~~~~~~
    configfile.l:61:22: note: expected ‚Äòchar *‚Äô but argument is of type ‚Äòconst char *‚Äô
     void tok_error(char *pcToken_error);
                    ~~~~~~^~~~~~~~~~~~~

 src/configfile.l | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8630b0539541e5d2d724a1f9619ff82b20df247e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 16 10:37:39 2020 +0200

    Remove now useless variable
    
    winscard_clnt.c: In function ‚ÄòSCardEndTransaction‚Äô:
    winscard_clnt.c:1251:6: warning: unused variable ‚Äòrandnum‚Äô [-Wunused-variable]
      int randnum;
          ^~~~~~~

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit f86ca45bb4b861484b889a664517aee886e92c81
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 16 10:35:57 2020 +0200

    c.sh: use configuration for a Debian amd64 system

 c.sh | 4 ++++
 1 file changed, 4 insertions(+)

commit 05d48e5c13305d3772d147a95a5f73cc10079147
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 8 16:41:53 2020 +0200

    SCardEndTransaction(): greatly improve performances
    
    Remove a (hopfully) useless delay.
    
    The function is now orders of magnitude faster (x300 to x600 on
    average).
    
    Fixes https://salsa.debian.org/rousseau/PCSC/-/issues/17
    " SYS_USleep in SCardEndTransaction in winscard_clnt.c causing slowness
    in Firefox "

 src/winscard_clnt.c | 5 -----
 1 file changed, 5 deletions(-)

commit 4e8d758b4c0f9a28db096b4785391fb47278690d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 16 14:07:43 2020 +0200

    getAttrib.py: port to Python3

 UnitaryTests/SCardGetAttrib.py | 4 ++--
 UnitaryTests/getAttrib.py      | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 1600021b8e5f72bfad11937e6c7fd118524726b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 15 14:10:49 2020 +0200

    SCardGetAttrib: SCARD_ATTR_CHANNEL_ID returns the port, not address

 UnitaryTests/SCardGetAttrib.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit dcdd4f81fa12690f3910f57eeb1b8456c7f746e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 15:28:24 2020 +0200

    SCardGetAttrib: add test for SCARD_ATTR_CHANNEL_ID

 UnitaryTests/SCardGetAttrib.py | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 92d71207048563eee3033a4280eef95d30b4f7eb (github/pr/76)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 17 21:42:13 2020 +0100

    Fix a memory leak from a polkit call
    
    The value returned by polkit_authority_check_authorization_sync() was
    not deallocated.
    
    Thanks to Lionel Victor for the bug report.

 src/auth.c | 3 +++
 1 file changed, 3 insertions(+)

commit 562ef23bc7eab3d5cc49c38f7ac0c6341ade1130
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 8 22:29:49 2020 +0100

    Use /run instead of /var/run by default
    
    From https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard :
    " In FHS 3.0, /var/run is replaced by /run; a system should either
    continue to provide a /var/run directory, or provide a symbolic link
    from /var/run to /run, for backwards compatibility. "

 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b0c2f30c2bfe7f22fe1b985e647c6cb61cc66275 (tag: 1.8.26)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 3 17:29:44 2020 +0100

    Release 1.8.26
    
    Signed-off-by: Ludovic Rousseau <ludovic.rousseau@free.fr>

 ChangeLog    | 19 +++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 20 insertions(+), 1 deletion(-)

commit 1015741a8360c5655652764f052521a3308ef53b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 3 15:36:50 2020 +0100

    Enable reader filtering by default
    
    The reader filtering feature is described in "Remove and/or customize
    PC/SC reader names"
    https://ludovicrousseau.blogspot.com/2015/12/remove-andor-customize-pcsc-reader-names.html
    
    This feature is requested in packages by some users.
    In Debian bug #947883 " Enable reader name filter in pcscd "
    https://bugs.debian.org/947883
    
    In Arch Linux bug 51912 " [pcsclite] Enable 'filter' support "
    https://bugs.archlinux.org/task/51912
    
    And also in Ubuntu bug 1857118 " Build pcscd with --enable-filter option "
    https://bugs.launchpad.net/bugs/1857118
    
    To avoid that each GNU/Linux distribution change the packaging
    configuration to enable the feature I decided to enable the feature by
    default in the upstream project.
    
    This change should not have any bad side effect. Only root can modify
    the configuration file /etc/default/pcscd or the systemd file
    /etc/systemd/system/pcscd.service.d/override.conf
    
    For systemd use: "sudo systemctl edit pcscd" to add something like:
    [Service]
    Environment=PCSCLITE_FILTER_IGNORE_READER_NAMES=Nitrokey
    
    You can get the previous behavior by using ./configure --disable-filter

 configure.ac | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 1da5eb1874a49c1e7de993aaff23b92bbcc572f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 14 15:10:40 2019 +0100

    reader.h: add URL for wLangId documentation

 src/PCSC/reader.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 20385efba2075d4c13acfea43d0abc8c38d8c106
Author: Gabriele Svelto <gsvelto@mozilla.com>
Date:   Mon Oct 28 14:29:07 2019 +0100

    Use poll() instead of select()
    
    From [Pcsclite-muscle] select()-induced crashes (and attached tentative fix)
    http://lists.infradead.org/pipermail/pcsclite-muscle/2019-November/001199.html
    
    " Hello all,
    we tracked down some crashes in Firefox [1] to the use of select() and
    its related macros in the libpcslite library. Recent versions of glibc
    added checks to ensure that the values of the file descriptors passed to
    the FD_SET(), FD_CLR() and FD_ISSET() macros have values lower than the
    FD_SETSIZE constant. If the file descriptor value is found to be higher
    than FD_SETSIZE then abort() gets called which is ultimately what we're
    seeing in Firefox.
    
    I have attached a patch that replaces the select() calls with poll()
    which does not suffer from this problem. Unfortunately I don't have a
    smartcard reader on hand so I can't test the patch myself.
    
    Cheers,
    
     Gabriele Svelto
    
    [1] select() crashes in libpcslite
        https://bugzilla.mozilla.org/show_bug.cgi?id=1591876
    "
    
    Fixes github issue https://github.com/LudovicRousseau/PCSC/issues/51
    "Using 'select' in libpcsclite can be problematic for application opening a large number of file descriptors #51"

 src/winscard_msg.c | 61 +++++++++++++++++++++++++++---------------------------
 1 file changed, 31 insertions(+), 30 deletions(-)

commit 864f955fb5fa785d664ba1fad1570ee1fcafdae8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 18:08:58 2019 +0200

    Doxygen: fix SCardGetAttrib() documentation
    
    PCSC/src/winscard_clnt.c:2415: warning: return value 'SCARD_E_INSUFFICIENT_BUFFER' of SCardGetAttrib has multiple documentation sections
    PCSC/src/winscard_clnt.c:2415: warning: return value 'SCARD_E_NOT_TRANSACTED' of SCardGetAttrib has multiple documentation sections

 src/winscard_clnt.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 92b0f88c380c54f8109bd43e13144ab5c98bbf77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 18:04:00 2019 +0200

    Doxygen: fix InitializeSocket() documentation
    
    PCSC/src/winscard_msg_srv.c:122: warning: return value '-1' of InitializeSocket has multiple documentation sections
    PCSC/src/winscard_msg_srv.c:122: warning: return value '-1' of InitializeSocket has multiple documentation sections

 src/winscard_msg_srv.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit aa6a701fe771ce740f7e906b7f41ba4f26bc5564
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 18:02:42 2019 +0200

    Doxygen: fix MessageSend() documentation
    
    PCSC/src/winscard_msg.c:354: warning: return value 'SCARD_F_COMM_ERROR' of MessageSend has multiple documentation sections

 src/winscard_msg.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 025c941759ffbc5aeca6919cced4c308a8baca2a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 18:01:26 2019 +0200

    Doxygen: fix MessageReceiveTimeout() documentation
    
    PCSC/src/winscard_msg.c:194: warning: return value 'SCARD_F_COMM_ERROR' of MessageReceiveTimeout has multiple documentation sections

 src/winscard_msg.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit e231920500490ce9d9b896917c1992efd383444c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 18:00:29 2019 +0200

    Doxygen: fix MessageReceive() documentation
    
    PCSC/src/winscard_msg.c:453: warning: return value 'SCARD_F_COMM_ERROR' of MessageReceive has multiple documentation sections

 src/winscard_msg.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 4c12b456e4973dad5550fdfd4adffeced9e39cb2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 17:58:14 2019 +0200

    Doxygen: fix ClientSetupSession() documentation
    
    PCSC/src/winscard_msg.c:119: warning: return value '-1' of ClientSetupSession has multiple documentation sections
    PCSC/src/winscard_msg.c:119: warning: return value '-1' of ClientSetupSession has multiple documentation sections

 src/winscard_msg.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 63da545834167e50dbc55a9172a686886162b599
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 17:55:36 2019 +0200

    Doxygen: fix ClientSetupSession() documentation
    
    PCSC/src/winscard_msg.c:174: warning: documented empty return type of  ClientCloseSession

 src/winscard_msg.c | 1 -
 1 file changed, 1 deletion(-)

commit f4643c3809f9fcf05847041e82753c407cd7e834
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 17:54:17 2019 +0200

    Doxygen: fix SCardRemoveContext documentation
    
    PCSC/src/winscard_clnt.c:3351: warning: documented empty return type of  SCardRemoveContext

 src/winscard_clnt.c | 3 ---
 1 file changed, 3 deletions(-)

commit 98f4aa682a3778f9f0b44b4d289aab0d25521cdd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 17:50:40 2019 +0200

    Doxygen: update config file from version 1.8.7 to 1.8.16

 doc/doxygen.conf.in | 546 ++++++++++++++++++++++++++++++++++------------------
 1 file changed, 359 insertions(+), 187 deletions(-)

commit e8abd1c1375b4f6d86a1a8718351f499eae5b1e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 17:38:37 2019 +0200

    Doxygen: fix doc of IFDHSetCapabilities()
    
    IFDHSetCapabilities() is not called from SCardGetAttrib() but from
    SCardSetAttrib().

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3896019ce7cbc8899d7150544dde6b0d619eeb27
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 11 15:44:16 2019 +0200

    Exit with EXIT_SUCCESS on shutdown to please systemd
    
    From Jakub Jelen nice bug report:
    " The pcscd daemon exits with exit code 1 when it is killed by systemd,
    which confuses system thinking that there was some failure on the exit:
    
    Sep 11 13:22:54 workstation-uefi pcscd[8750]: 08450216 pcscdaemon.c:193:signal_thread() Received signal: 15
    Sep 11 13:22:54 workstation-uefi pcscd[8750]: 00000015 pcscdaemon.c:213:signal_thread() Direct suicide
    Sep 11 13:22:54 workstation-uefi pcscd[8750]: 00000004 pcscdaemon.c:786:at_exit() cleaning /var/run/pcscd
    Sep 11 13:22:54 workstation-uefi systemd[1]: Stopping PC/SC Smart Card Daemon...
    Sep 11 13:22:54 workstation-uefi systemd[1]: pcscd.service: Main process exited, code=exited, status=1/FAILURE
    Sep 11 13:22:54 workstation-uefi systemd[1]: pcscd.service: Failed with result 'exit-code'.
    Sep 11 13:22:54 workstation-uefi systemd[1]: Stopped PC/SC Smart Card Daemon.
    
    Reading through the code, it looks like it exits always with 1 (except
    for the alarm) so I think we should either
    
    - modify the shipped systemd service file to mark the exit code 1 as a
      successful exit code using SuccessExitStatus or - sign in front of
      ExecStart.
    - modify the pcscd to exit "cleanly" in case of termination by systemd.
    
    I do not have any strong opinions which way is more correct, nor the
    systemd maintainers do so this is merely cosmetic issue avoiding bogus
    error messages filling log files on every reboot.
    
    Initially filled as a Fedora bug:
    https://bugzilla.redhat.com/show_bug.cgi?id=1751153 "
    
    I implemented the second solution.
    
    Fixes https://github.com/LudovicRousseau/PCSC/issues/70
    "Unclean exit when the pcscd is killed by systemd (for example on reboot)"

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit 142bc175a209b97853ec4b543177d426718dce98
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 1 14:35:05 2019 +0200

    spy: fix minor warning
    
    Use %08lX for rv codes (LONG)
    
    Thanks to Coverity:
    CID 1453383 (#1 of 1): Invalid type in argument to printf format specifier (PRINTF_ARGS)
    invalid_type: Argument rv to format specifier %08X was expected to have type unsigned int but has type long.

 src/spy/libpcscspy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9500c617f6e32b366b37c08ec893c29389cdc3d5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 1 14:25:43 2019 +0200

    spy: fix year-2038 issue by using long instead of int
    
    .tv_sec and .tv_usec in struct timeval may be long (and should be) to
    avoid the year-2038 problem.
    
    Thanks to Coverity:
    CID 1453385 (#1 of 1): Invalid type in argument to printf format specifier (PRINTF_ARGS)
    invalid_type: Argument profile_time.tv_usec to format specifier %d was expected to have type int but has type long.
    
    CID 1453384 (#1 of 1): Invalid type in argument to printf format specifier (PRINTF_ARGS)
    invalid_type: Argument profile_time.tv_sec to format specifier %d was expected to have type int but has type long.

 src/spy/libpcscspy.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 62e1fb077e9017f6320b5d933498af764a61739e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 21 22:34:43 2019 +0200

    polkit: log the error message if polkit_authority_get_sync() fails
    
    If ever polkit_authority_get_sync() should fail we should log the
    error message returned by the function to help debug.

 src/auth.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit c07cf7de43607720fd3954977672f39ae9f13249
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 21 14:47:53 2019 +0200

    pcscd: log an explicit message if client/server protocol mismatch
    
    If the libpcsclite (client) and pcscd (server) use different
    communication protocols then a more explicit critical log message is
    emitted:
    winscard_svc.c:383:ContextThread() Communication protocol mismatch!
    
    We still get the protocol version for debug:
    winscard_svc.c:385:ContextThread() Client protocol is 4:5
    winscard_svc.c:387:ContextThread() Server protocol is 4:5

 src/winscard_svc.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit e1d4e1b9fc93cf222ae952ae01228c978924ad22
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 21 14:42:32 2019 +0200

    SCardEstablishContext() returns SCARD_E_SERVICE_STOPPED
    
    If the client and server uses 2 different communication protocol
    version then SCardEstablishContext() now returns
    SCARD_E_SERVICE_STOPPED instead of SCARD_E_NO_SERVICE.
    
    The idea is to differentiate 2 cases:
    - pcscd is not running => SCARD_E_NO_SERVICE
    - protocol mismatch => SCARD_E_SERVICE_STOPPED
    
    It is "common" that users re-install pcsc-lite on a system but with a
    different version and in a different place.

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 03f2134db460737a0797cf30ccf54b898210901d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 21 14:34:39 2019 +0200

    UnitaryTests: add definition of CPPFLAGS for C++ code
    
    Samples written in C++ uses CPPFLAGS to find the pcsc-lite headers and
    library.

 UnitaryTests/Makefile | 1 +
 1 file changed, 1 insertion(+)

commit 3afbec34c6deeff29a45c94cdef375e03b93c19b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 20 09:08:27 2019 +0200

    Guard definition of PCSC_API: Fix compiler warning
    
    When compiling CCID on macOS I got:
    In file included from ccid_usb.c:34:
    ./misc.h:47:9: warning: 'PCSC_API' macro redefined [-Wmacro-redefined]
            ^
    /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/System/Library/Frameworks/PCSC.framework/Headers/pcsclite.h:51:9: note:
          previous definition is here
            ^

 src/misc.h | 2 ++
 1 file changed, 2 insertions(+)

commit 836872f97ef0e8775a8bc538e32eeb6449908ddd
Author: Rapha√´l Jakse <raphael.gitlab@jakse.fr>
Date:   Sun Jun 16 20:00:56 2019 +0200

    Guard NDEBUG behind an ifdef in tokenparser
    
    Needed for Android as NDEBUG is already defined.

 src/tokenparser.l | 2 ++
 1 file changed, 2 insertions(+)

commit 285007c02dfac88cbabf2b056aa181190c4324d1
Author: Rapha√´l Jakse <raphael.gitlab@jakse.fr>
Date:   Sun Jun 16 17:37:35 2019 +0200

    Guard NDEBUG behind an ifdef
    
    Needed for Android as NDEBUG is already defined.

 src/simclist.c | 2 ++
 1 file changed, 2 insertions(+)

commit e6aae093c063ce3cde4a6c4997d8d547e2dd62b3
Author: Rapha√´l Jakse <raphael.gitlab@jakse.fr>
Date:   Sun Jun 16 17:37:23 2019 +0200

    Add casts to fix unmatched signs in integer comparisons
    
    Android compilation failed with:
    external/pcsc-lite/src/simclist.c:1342:17: error: comparison of integers of different signs: 'ssize_t' (aka 'int') and 'uint32_t' (aka 'unsigned int') [-Werror,-Wsign-compare]
                    READ_ERRCHECK(fd, buf, header.elemlen);

 src/simclist.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit c3f6b132ca1050123896e4d6a8be2372ec63d5cf
Author: Rapha√´l Jakse <raphael.gitlab@jakse.fr>
Date:   Sun Jun 16 17:19:39 2019 +0200

    Fix buffsize size
    
    Android compilation failed with:
    external/pcsc-lite/src/simclist.c:1225:21: error: in call to 'write', 'count' bytes overflows the given object
                        WRITE_ERRCHECK(fd, & bufsize, sizeof(size_t));

 src/simclist.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7256a30482b5ae6b62b1f018a4bfb1010873497f
Author: David Ward <david.ward@ll.mit.edu>
Date:   Sun Jun 2 23:20:29 2019 -0400

    pcsc-spy: Reformat 4 spaces to 1 tab

 src/spy/libpcscspy.c | 264 +++++++++++++++++++++++++--------------------------
 1 file changed, 132 insertions(+), 132 deletions(-)

commit 9e905fcad63d7884c1252f5fbeeec0332e98a5ea
Author: David Ward <david.ward@ll.mit.edu>
Date:   Sun Jun 2 22:46:37 2019 -0400

    pcsc-spy: Adjust code to handle autoallocated buffers
    
    No functional change. This is intended to improve understanding of
    the code when comparing it with the relevant API documentation.

 src/spy/libpcscspy.c | 20 +++++++++++---------
 1 file changed, 11 insertions(+), 9 deletions(-)

commit cf0d3b127376d45ea5b75d7ca2a0badd24fc6291
Author: David Ward <david.ward@ll.mit.edu>
Date:   Sat May 25 22:41:32 2019 -0400

    pcsc-spy: Do not read output buffer after error
    
    If either SCardListReaderGroups() or SCardListReaders() returns an
    error, the output buffer is not valid and should not be read.

 src/spy/libpcscspy.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit f759792e0855281c38f5efd45952701d85048c5a
Author: Jakub Jelen <jjelen@redhat.com>
Date:   Thu May 30 09:58:23 2019 +0200

    configfile: Avoid memory leaks in case of realloc failure (cppcheck warning)
    
    The original patch was written by Bob Relyea for RHEL package, but I tweaked it
    a bit to make sure it builds without warnings.
    
    Signed-off-by: Jakub Jelen <jjelen@redhat.com>

 src/configfile.l | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 4369771cf1a9e68c67a311eb6b52c1650d5de3aa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 17 19:03:11 2019 +0200

    Doxygen: fix a reference
    
    PCSC/src/winscard_clnt.c:2332: warning: unable to resolve reference to `SCARD_ATTR_DEVICE_FRIENDLY_NAME\n' for \ref command

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5345cf56907768d71ec443347ed94e9ef92f32fa
Author: Fabrice Fontaine <fontaine.fabrice@gmail.com>
Date:   Fri May 17 15:48:35 2019 +0200

    Add --disable-documentation option
    
    This option allows the user to disable man pages which can be useful if
    podman is not available
    
    Signed-off-by: Fabrice Fontaine <fontaine.fabrice@gmail.com>

 configure.ac        | 7 +++++++
 src/spy/Makefile.am | 2 ++
 2 files changed, 9 insertions(+)

commit efc56971cb8f8bf9cb44090bb3851d8c1d2a00f7 (tag: 1.8.25)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 25 20:56:43 2019 +0100

    Release 1.8.25

 ChangeLog    | 9 +++++++++
 configure.ac | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit d627aee864c3e9ce40e375fcc0e34a7855b6f0f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 24 14:51:41 2019 +0100

    pcscd.socket.in: explicitly set socket file mode
    
    Fixes Debian #924914
    Thanks to Mathias Behrle for the patch

 etc/pcscd.socket.in | 1 +
 1 file changed, 1 insertion(+)

commit b9e6fe054c2ce883ce6070d4a5761d9d1e1da1bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 22 10:39:14 2019 +0100

    pcsc-spy: always a total time of execution
    
    Use the latest function return to compute the total execution time.
    
    Now the total time is always available. If the latest PC/SC command
    does not return (because the process has been interrupted) the total
    time may be a bit shorter than expected but it is less problematic than
    no total tiem at all.

 src/spy/pcsc-spy | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

commit 9561e5562d5fb00540589ccb9e4744366ec4b310
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 22 10:21:35 2019 +0100

    pcsc-spy: fix a typo in a comment

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e641eaa72530bd8188ff584e33d06bf60a384995
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 16 11:03:19 2019 +0100

    Doc: more explicit documentation for ‚àí‚àíauto‚àíexit
    
    pcscd does not exit after 60 seconds but after 60 seconds of inactivity
    after the release of the last PC/SC context.
    If you start pcscd with ‚àí‚àíauto‚àíexit but do run any PC/SC application
    then pcscd will NOT exit after 60 seconds.
    
    Thanks to Matthias Apitz for the bug report.

 doc/pcscd.8.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 36c8eae890dc81f0e25ebf0be1c6a969ffd9543a
Author: vegaMato <localhost@azet.sk>
Date:   Tue Dec 18 18:37:22 2018 +0100

    Remove usage of function chmod(2) to use fchmod(2)
    
    Race condition possibility; CWE-362: Concurrent Execution using Shared
    Resource with Improper Synchronization ('Race Condition')
    
    Thanks to PA193 project
    https://github.com/vegaMato/PCSC-lite-project-tasks

 src/pcscdaemon.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 430043842e05a300f1dda1b93fcfa8fceadd81e5
Author: St4lkerino <denis.varga97@gmail.com>
Date:   Tue Dec 18 19:22:32 2018 +0100

    Fix realloc(3) error handling
    
    From realloc(3) manpage:
           The realloc() function returns a pointer to the newly allocated memory,
           which  is  suitably  aligned for any built-in type and may be different
           from ptr, or NULL if the request fails.  If size was equal to 0, either
           NULL  or  a  pointer  suitable  to be passed to free() is returned.  If
           realloc() fails, the original block is left untouched; it is not  freed
           or moved.
    
    If realloc() fails then the memory that was previously allocated needs
    to be freed, or it will create a memory leak.
    
    It was not a real problem because if realloc(3) failed then pcscd would
    exit immediatly and the memory would not leak for a long time.
    
    Thanks to PA193 project
    https://github.com/vegaMato/PCSC-lite-project-tasks

 src/hotplug_libudev.c | 8 ++++++--
 src/hotplug_libusb.c  | 6 ++++--
 2 files changed, 10 insertions(+), 4 deletions(-)

commit ad8c6fb98d29ccca5c5ae5287311b845f42853f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 3 19:11:55 2019 +0100

    pcscd: update copyright dates returned by --version

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ea89e0598f86e56d51126addcbab97c4d722cd79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 15 13:43:10 2018 +0100

    log: on GNU/Linux a pthread_t is unsigned
    
    Do not log the thread id as a signed integer.
    We should not have logs like:
    00000012 [-1211058432] pcscdaemon.c:352:main() Force colored logs

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9d5572b85c1f827e8e7075e34d4c11293188963e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 12 17:45:05 2018 +0100

    .gitignore: ignore doc/api

 .gitignore | 1 +
 1 file changed, 1 insertion(+)

commit 4e736c11d6414b1bc2cc8cccbde1f784e08e2dd7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 7 09:28:12 2018 +0100

    Remove 2 outdated comments about card always powered on
    
    Since "Card auto power on and off" feature as been introduced in 2010
    the card is _not_ always powered.
    
    Thanks to Jan Parcel for the bug report.

 src/winscard.c | 6 ------
 1 file changed, 6 deletions(-)

commit 53ab2bc875d24c80d2069440cf2a9ec95eda892d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 26 15:04:55 2018 +0100

    MSGRemoveContext: remove dead code
    
    Issue found by Coverity:
    >>>     CID 1441490:  Code maintainability issues  (UNUSED_VALUE)
    >>>     Assigning value "2148532329L" to "rv" here, but that stored value is overwritten before it can be used.

 UnitaryTests/SCardBeginTransaction_SharedMode.py | 2 +-
 src/winscard_svc.c                               | 2 --
 2 files changed, 1 insertion(+), 3 deletions(-)

commit dd34cb3695cfee90e4cc8720446b1116ca19e2d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 15 11:54:31 2018 +0100

    Fix resource leak if SCardEstablishContext() fails
    
    When SCardEstablishContext() failed after the connection to the daemon
    was made (for example when polkit is used) then the socket to the daemon
    was not closed.
    
    Thanks to MartinN-n for the bug report
    "Leaking sockets #50"
    https://github.com/LudovicRousseau/PCSC/issues/50

 src/winscard_clnt.c | 24 ++++++++++++++++++------
 1 file changed, 18 insertions(+), 6 deletions(-)

commit 73d95ada3221c060cbd7b6aa2375453f9d0e359b (tag: 1.8.24)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 12 10:43:51 2018 +0200

    Release 1.8.23

 ChangeLog    | 13 +++++++++++++
 configure.ac |  2 +-
 2 files changed, 14 insertions(+), 1 deletion(-)

commit eaaf8edac2a960feb884bcf4cd90720757fca0bb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 12 11:00:56 2018 +0200

    Fix compiler warning: output may be truncated
    
    winscard_msg.c: In function ‚ÄòClientSetupSession‚Äô:
    winscard_msg.c:134:2: warning: ‚Äòstrncpy‚Äô output may be truncated copying 108 bytes from a string of length 109 [-Wstringop-truncation]
      strncpy(svc_addr.sun_path, socketName, sizeof(svc_addr.sun_path));
      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    The source was sizeof(struct sockaddr_un) bytes long.
    But the destination was sizeof(svc_addr.sun_path) bytes long only.
    
    svc_addr is a struct sockaddr_un but the sun_path field is shorter (1
    byte shorter according to the compiler) than the complete struct
    sockaddr_un.

 src/winscard_msg.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 2bef09483a51c9835ae70f4647791c9c00b98861
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 12 10:53:41 2018 +0200

    Fix compiler warning: cast between incompatible function
    
    hotplug_libudev.c: In function ‚ÄòHPRegisterForHotplugEvents‚Äô:
    hotplug_libudev.c:769:3: warning: cast between incompatible function types from ‚Äòvoid (*)(void *)‚Äô to ‚Äòvoid * (*)(void *)‚Äô [-Wcast-function-type]
       (PCSCLITE_THREAD_FUNCTION( )) HPEstablishUSBNotifications, udev_monitor))
       ^

 src/hotplug_libudev.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3c80087b60fa30b45ee240f3c58a8562275c08f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 12 10:52:47 2018 +0200

    Fix compiler warning: cast between incompatible function
    
    eventhandler.c: In function ‚ÄòEHSpawnEventHandler‚Äô:
    eventhandler.c:234:3: warning: cast between incompatible function types from ‚Äòvoid (*)(READER_CONTEXT *)‚Äô {aka ‚Äòvoid (*)(struct ReaderContext *)‚Äô} to ‚Äòvoid * (*)(void *)‚Äô [-Wcast-function-type]
       (PCSCLITE_THREAD_FUNCTION( ))EHStatusHandlerThread, (LPVOID) rContext);
       ^

 src/eventhandler.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d6ba979b448901a063af537ef8ad68ca0b76727a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 12 10:51:48 2018 +0200

    Fix compiler warning: cast between incompatible function
    
    winscard_svc.c: In function ‚ÄòCreateContextThread‚Äô:
    winscard_svc.c:237:3: warning: cast between incompatible function types from ‚Äòvoid (*)(void *)‚Äô to ‚Äòvoid * (*)(void *)‚Äô [-Wcast-function-type]
       (PCSCLITE_THREAD_FUNCTION( )) ContextThread, (LPVOID) newContext);
       ^

 src/winscard_svc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0984e0f4a03e5e29bb5725b6f149f56c9e9c73c2
Author: Mateusz Piotrowski <0mp@FreeBSD.org>
Date:   Tue Oct 9 12:10:13 2018 +0200

    Remove license information for src/sd-daemon.{c,h}
    
    Those files were removed in 30e10951.

 COPYING | 24 ------------------------
 1 file changed, 24 deletions(-)

commit db6b67acf7027ecbc275cdb8242cddf3e6508b26
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 8 14:41:53 2018 +0200

    Rename POWER_STATE_INUSE -> POWER_STATE_IN_USE

 src/pcscd.h.in | 2 +-
 src/winscard.c | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 5467a3896755f05e406fda15be090b9376909d6e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 8 14:29:20 2018 +0200

    UT for SCardReconnect(): suspend card auto power off
    
    Check the card is not auto powered off after 5 seconds when
    SCardReconnect() is used.

 UnitaryTests/CheckAutoPowerOff.py | 91 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 91 insertions(+)

commit 02dd27bfd19a88c051b91885472e5f6144f7a0a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 8 14:24:18 2018 +0200

    SCardReconnect(): suspend card auto power off
    
    When the card is reconnected the power state must be changed to
    POWER_STATE_INUSE so that card auto power off is not triggered.
    
    See associated Unitary Test CheckAutoPowerOff.py
    
    Thanks to Christophe Ferrando for the bug report

 src/winscard.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit c3bcdeb702658cd6233133b5f092292c9360a7d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 4 15:12:19 2018 +0200

    MSGRemoveContext(): always disconnect the card
    
    We need to call SCardDisconnect() in all cases so that the card use
    counter is always decremented when a client disappear.
    
    - when no lock is in use
    - when a lock is in use
      - but the lock is held by another context
      - the lock is held by the current context
    
    The bug effect was that smart card auto power off was not working
    correctly.

 src/winscard_svc.c | 3 +++
 1 file changed, 3 insertions(+)

commit 46d174c492791bdb8205f29b3d5bfd903f4a798d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 4 14:45:12 2018 +0200

    MSGRemoveContext(): Do not reset the card if no lock
    
    If the card was not locked (PC/SC transaction) then no need to reset it
    when the context is released.

 src/winscard_svc.c | 46 +++++++++++++++++++++++++++-------------------
 1 file changed, 27 insertions(+), 19 deletions(-)

commit c2d79706d8074cc19c6d1e0a1b7a08137936911c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 4 14:36:27 2018 +0200

    MSGRemoveContext(): disconnect also if no lock is ongoing
    
    If SCardDisconnect() is not called by the application it should be
    called by pcscd to enable card auto power off.
    
    This fixes a regression added by 57092b3.

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dde4deb7f709c2a54d791249a3e08f94a3763ca5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 2 14:30:11 2018 +0200

    Unit Test for bug fixed in 57092b3

 UnitaryTests/SCardBeginTransaction_SharedMode.py | 132 +++++++++++++++++++++++
 1 file changed, 132 insertions(+)

commit 57092b35cab35a9d939cd9094c49d8ecac85f1d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 2 14:22:48 2018 +0200

    MSGRemoveContext(): only release a owned transaction
    
    SCardReleaseContext() shall NOT release a lock (PC/SC transaction)
    owned by another context.
    
    Thanks to Frederic Hoerni for the bug report
    "[Pcsclite-muscle] closing client cancels ongoing transaction"
    http://lists.infradead.org/pipermail/pcsclite-muscle/2018-September/001126.html

 src/winscard_svc.c | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit ea1ecdeb0fcfb77863ac03615f2c82b48d9a9c9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 15 18:20:46 2018 +0200

    Add the thread id in the log lines

 src/debuglog.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit ded26af34a07d4bde9e86334519dc1799fbe6633
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 27 16:29:37 2018 +0200

    Fix compiler warning: missing field 'rv' initializer
    
    winscard_svc.c:814:44: warning: missing field 'rv' initializer
          [-Wmissing-field-initializers]
            struct wait_reader_state_change waStr = {0};
                                                      ^

 src/winscard_svc.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit e632d595fc7f1a7be73353ba2c9d89b509389917
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 27 16:28:35 2018 +0200

    Fix compiler warning missing field 'rv' initializer
    
    winscard_svc.c:428:47: warning: missing field 'rv' initializer
          [-Wmissing-field-initializers]
                                    struct wait_reader_state_change waStr = {0};

 src/winscard_svc.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 54224a4cbf60f95f2da5f0978c62656f3369b700
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 27 16:00:49 2018 +0200

    Fix SCardGetStatusChange() broken in a previous patch 984f84df
    
    The patch in 984f84df10e2d0f432039e3b31f94c74e95092eb broke the
    execution of SCardGetStatusChange() when SCardCancel() is used.
    
    The client was waiting for a message that was never sent by the server.
    
    Fortunately the broken code was never released in a stable version of
    pcsc-lite.
    
    Thanks to Sam Van Den Berge for the bug report
    "[Pcsclite-muscle] SCardCancel broken"
    http://lists.infradead.org/pipermail/pcsclite-muscle/2018-July/001096.html
    
    Hello,
    
    It seems like SCardGetStatusChange is currently broken.
    This can be tested with UnitaryTests/SCardCancel.
    
    Before commit 984f84df10e2d0f432039e3b31f94c74e95092eb:
    
    $ LD_LIBRARY_PATH=../src/.libs/ ./SCardCancel
    SCardEstablishContext:[0x00000000] Command successful.
    Press Enter to cancel within 3 seconds
    Entering blocking call
    
    Calling SCardCancel...
    SCardGetStatusChange:[0x80100002] Command cancelled.
    Blocking call canceled
    Good
    SCardCancel:[0x00000000] Command successful.
    SCardReleaseContext:[0x00000000] Command successful.
    Waiting thread...
    
    After commit 984f84df10e2d0f432039e3b31f94c74e95092eb:
    
    $ LD_LIBRARY_PATH=../src/.libs/ ./SCardCancel
    SCardEstablishContext:[0x00000000] Command successful.
    Press Enter to cancel within 3 seconds
    Entering blocking call
    
    Calling SCardCancel...
    SCardCancel:[0x00000000] Command successful.
    
    <<<<<<<<< SCardGetStatusChange hangs here >>>>>>>>>
    
    I don't have a fix but I just wanted to report this. Besides this big
    thank you for all your great work!
    
    Kr,
    Sam.

 src/winscard_clnt.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit ddf725874447a339f4ed69c70e1ad70b3d6c4d1c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 17:16:03 2018 +0200

    Doxygen: documentation moved to pcsclite.apdu.fr
    
    Update the update.sh script to update the Doxygen documentation pages.

 doc/update.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 01677078a426d82f913ca43583390f6cb9e5b29c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 16:31:30 2018 +0200

    Allow "=" in serial driver filenames
    
    For example the configuration:
    LIBPATH       /tmp/lib/pcsc/drivers/lib=ccid.dylib
    failed with:
    00000057 configfile.l:165:evaluatetoken() Error with library /tmp/lib/pcsc/drivers/lib: No such file or directory
    
    The problem was detected on Android 8.0 with file names such as:
    /data/app/com.baimobile.android.enterprise.credential.service-4wM9GBtoaS74ZiA0Y25YuQ==/lib/arm64/lib_some_reader_driver.so
    
    Thanks to Alan Kozlay for the bug report and patch.

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 08664ae6e9b442ce6e6d54385dcba4d9cb70b2ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 16:28:13 2018 +0200

    Doxygen: fix warning
    
    PCSC/src/PCSC/ifdhandler.h:84: warning: Unsupported xml/html tag
    <string> found

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d412c4bb65cc26f124fd5adb5f81299b08789d8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 16:23:39 2018 +0200

    Doxygen: do not document disabled functions
    
    If USE_LIBSYSTEMD is not defined then ListenExistingSocket() is not
    implemented and the associated Doxygen documentation should not be
    present.
    
    Fix Doxygen warning:
    PCSC/src/winscard_msg_srv.c:193: warning: argument 'fd' of command @param is not found in the argument list of ProcessEventsServer(uint32_t *pdwClientID)

 src/winscard_msg_srv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e4f50dc1cf264e0159524043a6f5fc1263942c32
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 16:19:55 2018 +0200

    Doxygen: Use " " for FRIENDLYNAME
    
    The FRIENDLYNAME declaration for reader.conf files must use " " if space
    characters are present in the name.

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f14658076f12dde739a0e94a71036f62f83b1259
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 28 11:32:21 2018 +0200

    Makefile.am: do not distribute DRIVERS
    
    The DRIVERS files has been removed because it was obsolete. Do not
    include it in the generated tarball.

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5616594ce51a9b1e1fa6d913b3f8001289924a15
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 21 23:06:44 2018 +0200

    ifdhandler.h: fix PC/SC Driver Developers Kit URL
    
    It is now at https://muscle.apdu.fr/musclecard.com/sourcedrivers.html

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e93d7199fe69f35267421b51e673eca3b0e18b49
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 21 23:05:52 2018 +0200

    HELP: fix Musle mailing list information
    
    Move from muscle@lists.musclecard.com to pcsclite-muscle@lists.infradead.org

 HELP | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit dd40b62179791d108de37dc164da672a12b39064
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 21 23:01:51 2018 +0200

    DRIVERS: remove outdated file
    
    Fixes issue #37
    "drivers aren't available at given location"
    https://github.com/LudovicRousseau/PCSC/issues/37

 DRIVERS | 28 ----------------------------
 1 file changed, 28 deletions(-)

commit 378ed84c4cfa0b373b793e62540549bf0eeb9b79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 18 17:54:07 2018 +0200

    Fix project URL
    
    Move from pcsclite.alioth.debian.org to pcsclite.apdu.fr

 UnitaryTests/BufferOverflow_SCardControl.c   | 2 +-
 UnitaryTests/BufferOverflow_SCardGetAttrib.c | 2 +-
 UnitaryTests/BufferOverflow_SCardTransmit.c  | 2 +-
 doc/example/pcsc_demo.c                      | 2 +-
 doc/org.debian.pcsc-lite.policy              | 2 +-
 doc/pcscd.8.in                               | 2 +-
 src/PCSC/debuglog.h                          | 2 +-
 src/PCSC/ifdhandler.h                        | 7 +++----
 src/PCSC/pcsclite.h.in                       | 2 +-
 src/PCSC/reader.h                            | 2 +-
 src/PCSC/winscard.h                          | 2 +-
 src/PCSC/wintypes.h                          | 2 +-
 src/atrhandler.c                             | 2 +-
 src/atrhandler.h                             | 2 +-
 src/auth.c                                   | 2 +-
 src/auth.h                                   | 2 +-
 src/configfile.h                             | 2 +-
 src/configfile.l                             | 2 +-
 src/debug.c                                  | 2 +-
 src/debuglog.c                               | 2 +-
 src/dyn_generic.h                            | 2 +-
 src/dyn_hpux.c                               | 2 +-
 src/dyn_macosx.c                             | 2 +-
 src/dyn_unix.c                               | 2 +-
 src/error.c                                  | 2 +-
 src/eventhandler.c                           | 2 +-
 src/eventhandler.h                           | 2 +-
 src/hotplug.h                                | 2 +-
 src/hotplug_generic.c                        | 2 +-
 src/hotplug_libudev.c                        | 2 +-
 src/hotplug_libusb.c                         | 2 +-
 src/hotplug_linux.c                          | 2 +-
 src/hotplug_macosx.c                         | 2 +-
 src/ifdwrapper.c                             | 2 +-
 src/ifdwrapper.h                             | 2 +-
 src/misc.h                                   | 2 +-
 src/parser.h                                 | 2 +-
 src/pcscd.h.in                               | 2 +-
 src/pcscdaemon.c                             | 2 +-
 src/prothandler.c                            | 2 +-
 src/prothandler.h                            | 2 +-
 src/readerfactory.c                          | 2 +-
 src/readerfactory.h                          | 2 +-
 src/strlcpycat.h                             | 2 +-
 src/sys_generic.h                            | 2 +-
 src/sys_unix.c                               | 2 +-
 src/testpcsc.c                               | 2 +-
 src/tokenparser.l                            | 2 +-
 src/utils.c                                  | 2 +-
 src/utils.h                                  | 2 +-
 src/utils/formaticc.c                        | 2 +-
 src/utils/installifd.c                       | 2 +-
 src/winscard.c                               | 2 +-
 src/winscard_clnt.c                          | 2 +-
 src/winscard_msg.c                           | 2 +-
 src/winscard_msg.h                           | 2 +-
 src/winscard_msg_srv.c                       | 2 +-
 src/winscard_svc.c                           | 2 +-
 src/winscard_svc.h                           | 2 +-
 59 files changed, 61 insertions(+), 62 deletions(-)

commit 78505c8b025454de296331652b767e7bd198e593
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 18 17:26:13 2018 +0200

    README.md: Fix project URL
    
    Move from pcsclite.alioth.debian.org to pcsclite.apdu.fr

 README.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 984f84df10e2d0f432039e3b31f94c74e95092eb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 23 10:03:21 2018 +0200

    Fix a rare race condition in SCardGetStatusChange()
    
    Thanks to Maximilian Stein for the patch
    
    [Pcsclite-muscle] Rare race condition in SCardGetStatusChange()
    http://lists.infradead.org/pipermail/pcsclite-muscle/2018-April/001068.html
    
    " Hello all,
    
    recently we stumbled upon another (rare) race condition in the
    SCardGetStatusChange() function. I especially ask Maksim Ivanov and
    Florian Kaiser kindly to share their opinion about the problem and the
    proposed fix, since they did a good job in improving
    SCardGetStatusChange/SCardCancel in the recent past.
    
    The problem:
    The problem is basically the small gap between fetching the reader
    states from pcscd [winscard_clnt.c:1741 and 2119] and registering for
    event notifications [winscard_clnt.c:2070]. If a notification is sent in
    this time period, SCardGetStatusChange() will sleep until another event
    or the internal time-out is reached. Consider the following flow of
    execution and events:
    
    Precondition: [client] knows the current state of all readers from a
    previous call to SCardGetStatusChange() and no changes happened since
    then. Basically consider a thread that monitors the reader states which
    calls SCardGetStatusChange() in a loop.
    1. [client] calls SCardGetStatusChange() and fetches the reader states
    from pcscd (line 1741). The fetched states are equal to the already
    known states.
    2. [pcscd] notices a change in any terminal state (smartcard movement or
    number of connected clients to the smartcard changes) and sends a signal
    to all *registered* clients via EHSignalEventToClients(). [client] is
    not yet registered for event notifications, so EHSignalEventToClients()
    won't send anything.
    3. [client] continues execution and compares the given reader states to
    the states fetched before [pcscd] noticed the change. The states are
    equal so it registers for event notifications (line 2070). No
    notification was sent, so [client] sleeps until the internal time-out
    (60 seconds) is reached.
    4. [client] reaches the internal time-out and fetches the current reader
    states from [pcscd]. Now the states are different and
    SCardGetStatusChange returns.
    
    In the end the state change is noticed thanks to the internal polling
    mechanism, but in automated environments, 60 seconds is a very long time
    until a state change is detected. The error is most likely to occur if
    multiple readers are used and state changes are frequent. Even more
    likely it occurs if reader state polling is used by pcscd, i.e. when the
    IFD handler does not support asynchronous card event notification (no
    capability TAG_IFD_POLLING_THREAD_WITH_TIMEOUT). Then multiple readers
    can accumulate their events to be processed in a very small time frame.
    
    Suggestion for a fix:
    The proposed fix makes fetching the reader states and registering for
    event notifications an atomic action. The command
    CMD_WAIT_READER_STATE_CHANGE expected no return value anyway, so I made
    it return the reader states equal to CMD_GET_READERS_STATE. The action
    is protected by the ClientsWaitingForEvent_lock in eventhandler.c, which
    prevents parallel calls of MSGSignalClient() via
    EHSignalEventToClients(). This is necessary to prevent a signal before
    the reader states are sent, which would appear as garbage in the client
    socket.
    
    With the proposed fix, the client is registered for events after the
    reader states were fetched. So if any difference is found in the local
    and remote state (so that SCardGetStatusChange() returns) we have to
    unregister from events. This was not necessary before, but works just
    like unregistering after a timeout. This could be refined by checking
    why the loop was exited and only unregister if necessary.
    
    Unfortunately the proposed fix will slightly alter the internal protocol
    between libpcsclite and pcscd, breaking statically linked client
    applications with newer pcscd versions.
    
    Further related thoughts:
    I'm a bit uncertain if my proposed fix works nicely with SCardCancel(),
    because I can think of one very rare situation when
    SCardGetStatusChange() times out and unregisters from event
    notifications, then gets cancelled but is not informed about that. Then
    it re-registers for notifications, because no changes happened. Thus it
    will not returned despite it was cancelled. But this should have been an
    issue even before my fix.
    
    I think the notification mechanism could be improved by using "response
    headers" analogous to the server side, or just an additional field
    "command" in the data structs. This way every message related to reader
    state events could be identified by the client and handled respectively.
    As I understand it, some of the past issues were because of signal,
    cancel or stop-reader-state-change messages messing up the client socket
    data. With a command field it can be decided what data the client
    received, and what data is still expected to be received.
    
    Best regards
    Maximilian Stein "

 src/eventhandler.c  |  2 ++
 src/winscard_clnt.c | 79 ++++++++++++++++++++++++++++++++++++-----------------
 src/winscard_msg.h  |  2 +-
 src/winscard_svc.c  | 31 +++++++++++++--------
 src/winscard_svc.h  |  1 +
 5 files changed, 78 insertions(+), 37 deletions(-)

commit 0127d3c73d0ad2072407d880b92baf454992b27d
Author: Nicolas Dusart <dusartnicolas@gmail.com>
Date:   Wed Mar 21 18:00:26 2018 +0100

    Simclist: avoid to divide by zero in list_findpos()
    
    A division by zero with float is undefined in C.
    For example gcc 6.3.0 reports (when detected):
    dividebyzero.c:5:20: warning: division by zero [-Wdiv-by-zero]
      float a = (float)1/0;
    
    But the code does NOT crash. The value of a is just infinity.
    
    The problem is when Free Pascal runtime is used. In this case the code crashed.

 src/simclist.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 2f99e761e000c2c0ef1eb3bd6954b770ac294f22
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 2 15:21:25 2018 +0100

    pcsc-spy: correctly handle incomplete log file
    
    If the application is interrupted in the middle of a PC/SC call then we
    do not get the returned values of the PC/SC call.
    The total execution time is then not known and -1 seconds is displayed
    instead.

 src/spy/pcsc-spy | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit cc70541a47058fc0c6f16a964c75dfcd5b7c88e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 19 16:13:42 2017 +0100

    systemd pcscd.service: add Documentation key
    
    For now the documentation refers to pcscd(8) manpage.

 etc/pcscd.service.in | 1 +
 1 file changed, 1 insertion(+)

commit 09f0f85b86e7488cf26642dd17150f76bed5300c (tag: 1.8.23)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 18 19:56:49 2017 +0100

    Release 1.8.23

 ChangeLog    | 8 ++++++++
 configure.ac | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 1dde8427236fa988e9f488baa46d7316691a5555
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 14 15:09:25 2017 +0100

    spy: add support SCardStatus() with NULL pcbAtrLen
    
    If an application calls SCardStatus() with pcbAtrLen = NULL then the trace
    interpretation was wrong.
    
    The problematic trace was:
    7F9414EF6700@>|1510667088|620972|SCardStatus
    7F9414EF6700@0x7B0DDEA3
    7F9414EF6700@NULL
    7F9414EF6700@NULL
    7F9414EF6700@NULL
    7F9414EF6700@""
    7F9414EF6700@NULL
    7F9414EF6700@NULL
    7F9414EF6700@NULL
    7F9414EF6700@<|1510667088|621107|SCardStatus|Command successful.|0x00000000
    
    SCardStatus
     i hCard: 0x7B0DDEA3
     i pcchReaderLen NULL
     i pcbAtrLen NULL
     o cchReaderLen NULL
     o mszReaderName ""
     o dwState NULL
     o dwProtocol NULL
     o bAtrLen NULL
     o bAtr
     => Command successful. (SCARD_S_SUCCESS [0x00000000])  [0.000135]
    
    In the trace above the value bAtr is not known (bAtrLen has no value) so
    nothing is displayed.
    
    A more classic trace is:
    7FF91179D700@>|1510668989|105007|SCardStatus
    7FF91179D700@0x2E753ED9
    7FF91179D700@0x00000000
    7FF91179D700@0x00000000
    7FF91179D700@0x0000001D
    7FF91179D700@NULL
    7FF91179D700@0x00050034
    7FF91179D700@0x00000001
    7FF91179D700@0x00000014
    7FF91179D700@NULL
    7FF91179D700@<|1510668989|105301|SCardStatus|Command successful.|0x00000000
    7FF91179D700@>|1510668989|105306|SCardStatus
    7FF91179D700@0x2E753ED9
    7FF91179D700@0x0000001D
    7FF91179D700@0x00000021
    7FF91179D700@0x0000001D
    7FF91179D700@Gemalto PC Twin Reader 00 00
    7FF91179D700@0x00050034
    7FF91179D700@0x00000001
    7FF91179D700@0x00000014
    7FF91179D700@3B 7F 96 00 00 80 31 80 65 B0 85 03 00 EF 12 0F FE 82 90 00
    7FF91179D700@<|1510668989|105365|SCardStatus|Command successful.|0x00000000
    
    giving:
    SCardStatus
     i hCard: 0x2E753ED9
     i pcchReaderLen 0x00000000 (0)
     i pcbAtrLen 0x00000000 (0)
     o cchReaderLen 0x0000001D (29)
     o mszReaderName NULL
     o dwState 0x00050034 (327732)
     o dwProtocol 0x00000001 (1)
     o bAtrLen 0x00000014 (20)
     o bAtr NULL
     => Command successful. (SCARD_S_SUCCESS [0x00000000])  [0.000294]
    SCardStatus
     i hCard: 0x2E753ED9
     i pcchReaderLen 0x0000001D (29)
     i pcbAtrLen 0x00000021 (33)
     o cchReaderLen 0x0000001D (29)
     o mszReaderName Gemalto PC Twin Reader 00 00
     o dwState 0x00050034 (327732)
     o dwProtocol 0x00000001 (1)
     o bAtrLen 0x00000014 (20)
     o bAtr 3B 7F 96 00 00 80 31 80 65 B0 85 03 00 EF 12 0F FE 82 90 00
     => Command successful. (SCARD_S_SUCCESS [0x00000000])  [0.000059]

 src/spy/pcsc-spy | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 661c56584f3806ca47944a2c989eb79b9b89b74d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 14 13:32:17 2017 +0100

    spy: add support of Ubuntu
    
    On Ubuntu libpcsclite.so.1 is in /lib/... but libpcscspy.so is in
    /usr/lib/...
    The 2 libraries are not in the same directory.

 src/spy/install_spy.sh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit c19857227058b38a37f19e4e6bf83bb4a93ecb7f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 26 15:13:54 2017 +0200

    SCardGetStatusChange(): fix comment
    
    After cancellable is set to FALSE then SCardCancel() will just return
    immediatly with success.

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7424c7a32006c332383e9d17827b700dc369913f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 19 22:18:16 2017 +0200

    .gitignore: remove no more present files

 .gitignore | 2 --
 1 file changed, 2 deletions(-)

commit 180e5c678365b7d1b078f49b0ae881d3ce6f10a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 19 22:09:37 2017 +0200

    .gitignore: sort lines

 .gitignore | 56 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 28 insertions(+), 28 deletions(-)

commit 0e5ef3e2cb399c472ca91fb1270ac3e294bbd9d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 19 22:07:31 2017 +0200

    .gitignore: ignore generated files

 .gitignore | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 1324532eee4342aa17ad16617c8d6ae03b3e4b96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 21 13:13:08 2017 +0200

    RFAddReader(): simplify code
    
    The cases rv != IFD_SUCCESS and dwGetSize != 1 are already managed by
    the previous if(). So no need to test again these values.

 src/readerfactory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5905bbe11414c131a32a7d84829eaa5d060bd55d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 21 13:10:52 2017 +0200

    Fix compiler warning (gcc 7)
    
    Use an intermediate variable nbSlots.
    
    readerfactory.c: In function ‚ÄòRFAddReader‚Äô:
    readerfactory.c:457:51: warning: ‚Äò%02X‚Äô directive output may be truncated writing between 2 and 8 bytes into a region of size 3 [-Wformat-truncation=]
       snprintf(tmpReader + strlen(tmpReader) - 2, 3, "%02X", j);
                                                       ^~~~
    readerfactory.c:457:50: note: directive argument in the range [1, 2147483646]
       snprintf(tmpReader + strlen(tmpReader) - 2, 3, "%02X", j);
                                                      ^~~~~~
    In file included from /usr/include/stdio.h:938:0,
                     from readerfactory.c:43:
    /usr/include/x86_64-linux-gnu/bits/stdio2.h:64:10: note: ‚Äò__builtin___snprintf_chk‚Äô output between 3 and 9 bytes into a destination of size 3
       return __builtin___snprintf_chk (__s, __n, __USE_FORTIFY_LEVEL - 1,
              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            __bos (__s), __fmt, __va_arg_pack ());
            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 src/readerfactory.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit f1fa9106513ac6990719c677f053bdee558c661d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 1 10:11:29 2017 +0200

    configure.ac: fix typo in help message

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8946edadaca353d65112664a5fcd7bbe1be54ed5 (zotac/fix)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 12 17:59:48 2017 +0200

    simclist: fix a potential memory leak
    
    Changes in a801c6e613fde89c09c755a20003ab82fd6a5c47 added tests and
    returns in case of errors.
    
    If something fails in list_insert_at() we must free the memory allocated
    for the new element (that was not inserted).

 src/simclist.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 30e10951f81b9480e788965f89d0d4d0aee909c0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 13 17:52:13 2017 +0200

    Use libsystemd instead sd-daemon.{c,h}
    
    Remove files src/sd-daemon.{c,h} and use libsystemd to get
    sd_listen_fds() and sd_is_socket() implementations.
    So we do not have to maintain systemd specific code.
    
    Use --disable-systemd if you do not have libsystemd available. In that
    case I think you do not use systemd either.

 configure.ac           |  12 ++
 src/Makefile.am        |  10 +-
 src/pcscdaemon.c       |   8 +-
 src/sd-daemon.c        | 526 -------------------------------------------------
 src/sd-daemon.h        | 277 --------------------------
 src/winscard_msg_srv.c |   6 +-
 6 files changed, 26 insertions(+), 813 deletions(-)

commit 696023944649e0c52802e20994fb78d6b24d4efd (tag: 1.8.22)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 17 08:56:54 2017 +0200

    Release 1.8.22
    
    Signed-off-by: Ludovic Rousseau <ludovic.rousseau@free.fr>

 ChangeLog    | 6 ++++++
 configure.ac | 2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 7307cc4a80f887ef59487d7b8edf104fb56f13ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 15 14:50:28 2017 +0200

    UnitaryTests/SCardCancel.c: test for SCardCancel
    
    Check that the fix in 81d52b98d84be900c6a6532d10d1fe88eac092cf works as
    expected.

 UnitaryTests/Makefile      |  1 +
 UnitaryTests/SCardCancel.c | 88 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 89 insertions(+)

commit 7a3738d2f8e48c669b0e3f485cb9dcabeffc941a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 15 14:45:48 2017 +0200

    fix SCardCancel() that was broken in version 1.8.21
    
    Changes in 9a21c82330fc4b73ac00faf2c5cf948da5f8ab07 broke
    SCardCancel().
    The problem was that SCardCancel() was blocked until
    SCardGetStatusChange() had finished. This is stupid because
    SCardCancel() is supposed to cancel SCardGetStatusChange().
    
    Thanks to Ran Benita for the bug report
    "[Pcsclite-muscle] A recent change causes SCardCancel() to block?"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/2017-June/000921.html

 src/winscard_clnt.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 88a53f3ed21aa645e7c65661162f832a053fb9de
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 9 09:58:52 2017 +0200

    RFAddReader: more correctly detect duplicate readers
    
    To detect a duplicate reader, checking the reader name and port is,
    sometimes, not enough.
    
    The problem was when two readers are removed and re-inserted immediately.
    One of the 2 readers may not yet be completely removed (from pcscd point
    of view) when it is asked to insert it again.
    
    Fixes #20
    "Reader not detected when disconnecting / connecting usb hub"
    https://github.com/LudovicRousseau/PCSC/issues/20

 src/readerfactory.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 251771ad2c6278f460a995fb07ee02281930f987
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 6 17:53:52 2017 +0200

    DebugLogSetLevel: PCSC_LOG_INFO is "info"
    
    Level name "notice" was used for PCSC_LOG_INFO. We now use the label
    "info".

 src/debuglog.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fa313f5442e78d312e18e025906a0ab43aa27a5e
Author: Maximilian Stein <Maximilian.Stein@secunet.com>
Date:   Wed May 3 15:29:45 2017 +0200

    Enable info level logging

 src/pcscdaemon.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit f47cccffcb534a7bd3528790d55d7ce5a71d70de (tag: 1.8.21)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 20 17:11:50 2017 +0200

    Release 1.8.21
    
    Signed-off-by: Ludovic Rousseau <ludovic.rousseau@free.fr>

 ChangeLog    | 18 ++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 19 insertions(+), 1 deletion(-)

commit a801c6e613fde89c09c755a20003ab82fd6a5c47
Author: Frank Morgner <frankmorgner@gmail.com>
Date:   Wed Apr 12 16:08:53 2017 +0200

    simclist: handle faults during memory allocation
    
    fixes several situations that cause segmentation faults

 src/simclist.c | 111 +++++++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 81 insertions(+), 30 deletions(-)

commit 8edd183ec82c826b228fd599d5529a0f111cd97b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 18 13:14:58 2017 +0200

    Doxygen: add a sample code of multi-string use
    
    Add a sample code of how to parse the multi-string returned by
    SCardListReaders().

 src/winscard_clnt.c | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit fd1e32d0b524325a88e7e5b25a8cc2bd897ae668
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 13 21:38:40 2017 +0200

    SCardDisconnect(): refactoring code
    
    Handle the error cases for SCARD_UNPOWER_CARD and SCARD_RESET_CARD in
    the same code block. This avoids code duplication.

 src/winscard.c | 38 ++++++++++++++------------------------
 1 file changed, 14 insertions(+), 24 deletions(-)

commit 8edae1590448eb0519924434f7ba897ceef8d890
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 13 21:24:40 2017 +0200

    SCardDisconnect(): fix status update for SCARD_UNPOWER_CARD
    
    Store the value returned by IFDPowerICC(, IFD_POWER_DOWN, ).
    This value is then used later to decide if the powering down was a
    success or not and set the card status accordingly.
    
    The problem was detected by pcsc_scan stress code. If a SCardTransmit()
    fails because the card is removed then SCardDisconnect() is called to
    unpower the card.
    Because the card is removed the powering down fails but the card status
    was not correctly updated.

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6cba8a28c66b836244d920ebe0b9010b2302fc93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 13 21:20:05 2017 +0200

    Revert "SCardDisconnect(): fix ATR update for SCARD_UNPOWER_CARD"
    
    This reverts commit 70468bfaa08eae5715312de43aecb873a2df115f.

 src/winscard.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 70468bfaa08eae5715312de43aecb873a2df115f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 12 15:16:34 2017 +0200

    SCardDisconnect(): fix ATR update for SCARD_UNPOWER_CARD
    
    When the card is disconnected with SCARD_RESET_CARD or
    SCARD_UNPOWER_CARD then disable the current ATR early in the code and in
    all cases.
    
    The problem was that the ATR was disabled only in the case
    SCARD_RESET_CARD and only in case of failure.
    So if SCARD_UNPOWER_CARD was used the ATR was still considered as valid,
    even if the card was no more powered.

 src/winscard.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 582408c38397b7f36a30ec05cdbda06008d834ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 15:22:00 2017 +0200

    Remove dead code
    
    If rv indicates an error then the program has already exited using
    test_rv(rv, hContext, PANIC);

 src/testpcsc.c | 6 ------
 1 file changed, 6 deletions(-)

commit 091d501225eb1eef5535f4f7e0e07a0ae8cf909e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 15:16:19 2017 +0200

    DebugLogSetCategory() returns void now
    
    The value returned by DebugLogSetCategory() was ignored.
    Now the DebugLogSetCategory() function returns void.

 src/PCSC/debuglog.h | 2 +-
 src/debuglog.c      | 6 ++----
 src/pcscdaemon.c    | 2 +-
 3 files changed, 4 insertions(+), 6 deletions(-)

commit 6afb6cbfa029a3b52ef0b0e9b7f76b9c9d88dd18
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 15:07:28 2017 +0200

    Remove useless PMRegisterForPowerEvents()
    
    Remove the complete powermgt_generic.[c,h] files.
    
    powermgt_macosx.c has been removed in April 2009
    in c199045d62e2255ec07d49becff4f94d67943676.
    
    Since then no power management was used in pcsc-lite.

 src/Makefile.am        |  2 --
 src/pcscdaemon.c       |  6 ------
 src/powermgt_generic.c | 54 --------------------------------------------------
 src/powermgt_generic.h | 44 ----------------------------------------
 4 files changed, 106 deletions(-)

commit f65dcd88221e07a9d18b4d8856bf266b1bb2459e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 15:00:31 2017 +0200

    Remove useless RFDestroyReaderHandle()
    
    The function RFDestroyReaderHandle() does nothing. So just remove it.

 src/readerfactory.c | 6 ------
 src/readerfactory.h | 1 -
 src/winscard.c      | 3 ---
 3 files changed, 10 deletions(-)

commit bf89546ea67334a708cc9c904d53a4068733474a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:57:49 2017 +0200

    SCardCleanContext() returns void now
    
    The value returned by SCardCleanContext() was ignored.
    Now the SCardCleanContext() function returns void.

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit a7e8bd92ebea20c7b284aa7b9e600cd1ceb958c0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:56:48 2017 +0200

    SCardRemoveContext() returns void now
    
    The value returned by SCardRemoveContext() was ignored.
    Now the SCardRemoveContext() function returns void.

 src/winscard_clnt.c | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit fa41a2adf64ad0ca8f9daa8b1db3f46c172cc5bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:54:34 2017 +0200

    ClientCloseSession() returns void now
    
    The value returned by ClientCloseSession() was ignored.
    Now the ClientCloseSession() function returns void.

 src/winscard_clnt.c | 2 +-
 src/winscard_msg.c  | 4 ++--
 src/winscard_msg.h  | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 784f217350d8657c69e62aea2a1a483b288df09e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:52:43 2017 +0200

    RFSetReaderEventState() returns void now
    
    The value returned by RFSetReaderEventState() was ignored.
    Now the RFSetReaderEventState() function returns void.

 src/readerfactory.c | 4 ++--
 src/readerfactory.h | 2 +-
 src/winscard.c      | 6 +++---
 3 files changed, 6 insertions(+), 6 deletions(-)

commit d3b1b7217325f67db27a6d5519294c5b65003266
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:50:05 2017 +0200

    SCardRemoveHandle() returns void now
    
    The value returned by SCardRemoveHandle() was ignored.
    Now the SCardRemoveHandle() function returns void.

 src/winscard_clnt.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a1a7ca2803f0f87dc2371eaf2572abc7795fd98a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:47:44 2017 +0200

    SCardLockThread() and SCardUnlockThread() returns void now
    
    The value returned by SCardLockThread() and SCardUnlockThread() was
    ignored.
    Now the SCardLockThread() and SCardUnlockThread() functions returns
    void.

 src/winscard_clnt.c | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit 440f15e433123b7e99d37ba772a16662e4b838c0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:45:26 2017 +0200

    MSGCleanupClient() returns void now
    
    The value returned by MSGCleanupClient() was ignored.
    Now the MSGCleanupClient() function returns void.

 src/winscard_svc.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit c5881b330443d5ed64307b580310d93a13e66aab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:38:12 2017 +0200

    EHSignalEventToClients() returns void now
    
    The value returned by EHSignalEventToClients() was ignored.
    Now the EHSignalEventToClients() function returns void.

 src/eventhandler.c  | 17 +++++++----------
 src/eventhandler.h  |  2 +-
 src/readerfactory.c |  2 +-
 3 files changed, 9 insertions(+), 12 deletions(-)

commit 2e5a0c53d92328099bf39441121754e41116da4c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:34:08 2017 +0200

    Minor code reformat

 src/pcscdaemon.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 2d64467399d286e79328d0f5caba7f67692dd0da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 14:31:18 2017 +0200

    EHDestroyEventHandler() returns void now
    
    The value returned by EHDestroyEventHandler() was ignored.
    Now the EHDestroyEventHandler() function returns void.

 src/eventhandler.c  | 6 +++---
 src/eventhandler.h  | 2 +-
 src/readerfactory.c | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit b024b2ac275eaefecb2553710242d29f607a376f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 11:01:49 2017 +0200

    IFDPowerICC(): Fix internal use of IFDStatusICC()
    
    IFDStatusICC() is not a IFDHandler function but a ifdwrapper function.
    It returns SCARD_* values and not IFD_* values.
    
    By luck, the code was not broken because we have
    IFD_SUCCESS = SCARD_S_SUCCESS = 0

 src/ifdwrapper.c | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

commit cbe677fc8fe94663fa70c5179385b17bdb7debec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 11 10:30:03 2017 +0200

    Fix SCardGetStatusChange() when a reader is removed
    
    Because of a race condition, a smart card reader removal may, in some
    conditions, not be detected on the client side.
    
    The problem is that when a reader is removed the clients are notified
    (using EHSignalEventToClients() function) two times:
    - the first time in EHStatusHandlerThread() from eventhandler.c just
      before the event thread exists,
    - the second time in removeReader() from readerfactory.c after the
      reader has been removed
    
    The problem is that the first time the clients are notified the reader
    state has not yet changed. The reader is still visible by the clients.
    If a client is slow to register to new events it may miss the second
    notification and then wait "forever" in SCardGetStatusChange()
    ("forever" is defined as 60 seconds here as it is the event loop timeout).
    
    The solution is to removed the first (in fact useless) notification.
    
    Thanks to Maximilian Stein for the bug report and patch
    "[Pcsclite-muscle] Race condition with SCardGetStatusChange() when USB
    Reader is removed"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170508/000855.html

 src/eventhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit 36bf013a76ba953992ef1413878ac4866852fcc8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 4 10:00:02 2017 +0200

    Doxygen: fix typo

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1928b55be239fdd853c67bcc355c59d908978d71
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 4 09:51:16 2017 +0200

    removeReader(): reformat code
    
    The complete function code was inside a { } block.
    I removed the { } block and one level of indentation.

 src/readerfactory.c | 110 ++++++++++++++++++++++++++--------------------------
 1 file changed, 54 insertions(+), 56 deletions(-)

commit 789dae8a8acf8d1693597159d7d590a96bdd6424
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 4 09:47:16 2017 +0200

    Do not check RFUnInitializeReader() return value
    
    RFUnInitializeReader() always returns SCARD_S_SUCCESS so it is useless
    to check the returned value.
    
    RFUnInitializeReader() now returns void instead.

 src/readerfactory.c | 10 +++-------
 src/readerfactory.h |  2 +-
 2 files changed, 4 insertions(+), 8 deletions(-)

commit 59489545659447d297e51f3c3c281f377d350851
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 20 10:33:22 2017 +0200

    pcsc-spy: port to Python3
    
    On Python3 the Queue module is called queue.
    
    The program now works with Python 2.7 and Python 3.4.
    
    Thanks to Johannes Meixner for the bug report
    "Make pcsc-spy python3-ready"
    https://github.com/LudovicRousseau/PCSC/issues/19

 src/spy/pcsc-spy | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit dc30c32973f91b61916db1fd17528b99cb7190ce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 20 10:29:43 2017 +0200

    pcsc-spy: use print as a function
    
    Migrate from print "foobar" to print("foobar") to make the code more
    Python3.

 src/spy/pcsc-spy | 120 +++++++++++++++++++++++++++++--------------------------
 1 file changed, 63 insertions(+), 57 deletions(-)

commit aee7bd1666f39088c968107c19d945da59287bfd
Author: Ludovic Rousseau <ludovic.rousseau+github@gmail.com>
Date:   Thu Apr 6 20:18:33 2017 +0200

    README.md: add Code Climate badge

 README.md | 1 +
 1 file changed, 1 insertion(+)

commit 1ac4b7da5f17883968950a6f88b19320ca21f846
Author: Ludovic Rousseau <ludovic.rousseau+github@gmail.com>
Date:   Thu Apr 6 20:17:33 2017 +0200

    Create README.md
    
    New file so that github displays a nice project presentation.

 README.md | 8 ++++++++
 1 file changed, 8 insertions(+)

commit a58854e085be7054213a128bdc227916bd84ccc6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 29 10:11:10 2017 +0200

    Doxygen: Improve documentation about SCardCancel()
    
    SCardCancel() cancels only one specific SCardGetStatusChange() call, not
    *all* the currently running SCardGetStatusChange() calls.

 src/winscard_clnt.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 9311af0419da38e2c10842456694d0c15b78150e
Author: Martin Paljak <martin@martinpaljak.net>
Date:   Wed Mar 29 10:39:58 2017 +0300

    Doxygen: Improve documentation about SCardCancel()
    
    SCardCancel() MUST be called with the same SCARDCONTEXT as
    SCardGetStatusChange().

 src/winscard_clnt.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 62ecbe87bfbecc0706f110738e0f609d848d0bd3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 16:01:44 2017 +0100

    --enable-embedded: fix compiler warning
    
    winscard_svc.c: In function ‚ÄòContextsDeinitialize‚Äô:
    winscard_svc.c:150:6: warning: variable ‚ÄòlistSize‚Äô set but not used [-Wunused-but-set-variable]
      int listSize;
          ^~~~~~~~

 src/winscard_svc.c | 3 +++
 1 file changed, 3 insertions(+)

commit ad7f77fa498f8901983ed0406cea1bf6602a5bd7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 16:00:13 2017 +0100

    --enable-embedded: fix compiler warning
    
    winscard.c: In function ‚ÄòSCardReleaseContext‚Äô:
    winscard.c:220:39: warning: unused parameter ‚ÄòhContext‚Äô [-Wunused-parameter]
     LONG SCardReleaseContext(SCARDCONTEXT hContext)
                                           ^~~~~~~~

 src/winscard.c | 3 +++
 1 file changed, 3 insertions(+)

commit 8b41f649b65079ec232bf584ed0ca5cc066fcb94
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 15:59:03 2017 +0100

    --enable-embedded: fix compiler warning
    
    hotplug_libudev.c: In function ‚Äòget_driver‚Äô:
    hotplug_libudev.c:269:14: warning: unused parameter ‚Äòdevpath‚Äô [-Wunused-parameter]
      const char *devpath, struct _driverTracker **classdriver)
                  ^~~~~~~

 src/hotplug_libudev.c | 3 +++
 1 file changed, 3 insertions(+)

commit d64a505d24cd11bc3d8e879fff4ba3675be9bcfc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 15:57:12 2017 +0100

    --enable-embedded: fix compiler warning
    
    eventhandler.c: In function ‚ÄòEHStatusHandlerThread‚Äô:
    eventhandler.c:248:14: warning: variable ‚ÄòreaderName‚Äô set but not used [-Wunused-but-set-variable]
      const char *readerName;
                  ^~~~~~~~~~

 src/eventhandler.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 37cee3b3c45520c06e9c39d034771e6cba58a1e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 15:55:30 2017 +0100

    --enable-embedded: fix compiler warning
    
    dyn_unix.c: In function ‚ÄòDYN_GetAddress‚Äô:
    dyn_unix.c:85:30: warning: unused parameter ‚Äòmayfail‚Äô [-Wunused-parameter]
      const char *pcFunction, int mayfail)
                                  ^~~~~~~

 src/dyn_unix.c | 3 +++
 1 file changed, 3 insertions(+)

commit 24cf3ad628028376cc9645bacfaec8a58cfc15a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 15:52:49 2017 +0100

    --enable-embedded: fix compiler warning
    
    configfile.l: In function ‚Äòtok_error‚Äô:
    configfile.l:259:22: warning: unused parameter ‚Äòtoken_error‚Äô [-Wunused-parameter]
     {
                          ^

 src/configfile.l | 3 +++
 1 file changed, 3 insertions(+)

commit aa4907aaecc73680a4ac557cd0a9a00a563302d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 1 15:50:18 2017 +0100

    --enable-embedded: fix compiler warning
    
    winscard_msg.c: In function ‚ÄòMessageReceiveTimeout‚Äô:
    winscard_msg.c:193:46: warning: unused parameter ‚Äòcommand‚Äô [-Wunused-parameter]
     INTERNAL LONG MessageReceiveTimeout(uint32_t command, void *buffer_void,
                                                  ^~~~~~~

 src/winscard_msg.c | 3 +++
 1 file changed, 3 insertions(+)

commit 35d660edb22ccae8a2e1d3e86316d15c7d33205b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 16:34:57 2017 +0100

    Rename BufferOverflow2.c -> BufferOverflow_SCardTransmit.c

 UnitaryTests/{BufferOverflow2.c => BufferOverflow_SCardTransmit.c} | 0
 UnitaryTests/Makefile                                              | 2 +-
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 30ece5141a55aa57976b5c50e32159c6de0de108
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 16:33:52 2017 +0100

    Rename BufferOverflow.c -> BufferOverflow_SCardGetAttrib.c

 UnitaryTests/{BufferOverflow.c => BufferOverflow_SCardGetAttrib.c} | 0
 UnitaryTests/Makefile                                              | 2 +-
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 4c57679826bf1fbfda995a7869f8a19c572a2784
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 16:31:47 2017 +0100

    Add BufferOverflow_SCardControl.c test code
    
    Test for the patch implemented in 09cf6c7de55f1b4ab1d8a3f86c7a56d7a8621538

 UnitaryTests/BufferOverflow_SCardControl.c | 81 ++++++++++++++++++++++++++++++
 UnitaryTests/Makefile                      |  1 +
 2 files changed, 82 insertions(+)

commit 09cf6c7de55f1b4ab1d8a3f86c7a56d7a8621538
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 16:24:53 2017 +0100

    SCardControl() may return SCARD_E_INSUFFICIENT_BUFFER
    
    SCardControl() now correctly returns SCARD_E_INSUFFICIENT_BUFFER when
    pbRecvBuffer is not big enough to receive the card response.
    
    The CCID driver does the check and correctly and returned
    CM_IOCTL_GET_FEATURE_REQUEST in such a case but not all IFD Handler may
    be smart enough.
    
    This change is similar to the same change for SCardTransmit() done in
    8eb9ea1b354b050f997d003cf3b0c5b56f29f9f7 (29 mai 2015)
    
    Thanks to Maximilian Stein for the patch
    "[Pcsclite-muscle] SCardControl() should return SCARD_E_INSUFFICIENT_BUFFER similar to SCardTransmit()"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170213/000815.html

 src/winscard_clnt.c | 2 +-
 src/winscard_svc.c  | 8 +++++++-
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 7c232a11e2e5515fd886733b3e382fc91ea0a8ab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 16 11:56:32 2017 +0100

    Python 3: port FEATURE_CCID_ESC_COMMAND_Gemalto_features.py

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 1c5426260c8e74e4bdfe2bbd27eb4336f49cc7ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 16 00:17:42 2017 +0100

    Python 3: fix SCardGetStatusChange()
    
    The SCardGetStatusChange() readerstatelist argument must be a list.
    With Python 3 a dict.values() if of type dict_values instead of list in
    Python 2. So we force a conversion into a list using list().

 UnitaryTests/SCardCancel.py           | 6 ++++--
 UnitaryTests/SCardCancel3.py          | 6 ++++--
 UnitaryTests/SCardGetStatusChange.py  | 6 ++++--
 UnitaryTests/SCardGetStatusChange2.py | 3 ++-
 4 files changed, 14 insertions(+), 7 deletions(-)

commit 5a8bacfed5ea046559efac090824630b219474e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 16 00:06:54 2017 +0100

    Python 3: use PEP 3110 exception format
    
    Use the "new" syntax "except Exception as message:" supported since
    Python 2.6
    
      File "SCardCancel2.py", line 47
        except Exception, message:
                        ^
    SyntaxError: invalid syntax

 UnitaryTests/SCardCancel2.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 317b673868a0bf6bdc798414bdc5d8e32cfaa663
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 15 23:51:14 2017 +0100

    pep8: fix warning
    
    MCT_ReaderDirect.py:70:5: E265 block comment should start with '# '

 UnitaryTests/MCT_ReaderDirect.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a15f6012bcedb871fad486a68bada20fb08e1ca3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 15 23:50:05 2017 +0100

    pep8: fix warnings
    
    SCardBlockingBehaviourTest.py:132:1: E265 block comment should start with '# '
    SCardBlockingBehaviourTest.py:214:5: E265 block comment should start with '# '
    SCardBlockingBehaviourTest.py:241:9: E265 block comment should start with '# '

 UnitaryTests/SCardBlockingBehaviourTest.py | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit cc912f8c051f57208756a44780aabea28438d884
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 15 23:48:57 2017 +0100

    pep8: fix warning
    
    ThreadSafe.py:44:9: E265 block comment should start with '# '

 UnitaryTests/ThreadSafe.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 44d400f0072c3a8ab1eb2aa6b225fa82a34d0808
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 15 23:48:03 2017 +0100

    pep8: fix warning
    
    ThreadSafeConnect.py:72:1: E302 expected 2 blank lines, found 1

 UnitaryTests/ThreadSafeConnect.py | 1 +
 1 file changed, 1 insertion(+)

commit 876403e6a48070f26fb7eb1211b7bb2df5e52ed1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 15 23:45:00 2017 +0100

    UnitaryTests: Python3: use print() function
    
    Use:
    from __future__ import print_function
    to make the same Python code to work with both Python 2 and Python 3.

 .../FEATURE_CCID_ESC_COMMAND_Gemalto_features.py   | 77 +++++++++++-----------
 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Xiring.py    | 11 ++--
 UnitaryTests/FEATURE_GET_TLV_PROPERTIES.py         |  9 +--
 UnitaryTests/MCT_ReaderDirect.py                   | 28 ++++----
 UnitaryTests/SCardBeginTransaction_Disconnect.py   |  5 +-
 .../SCardBeginTransaction_ExclusiceMode.py         |  5 +-
 UnitaryTests/SCardBeginTransaction_Reset.py        | 11 ++--
 UnitaryTests/SCardBeginTransaction_deadlock.py     | 35 +++++-----
 UnitaryTests/SCardBlockingBehaviourTest.py         | 49 +++++++-------
 UnitaryTests/SCardCancel.py                        | 13 ++--
 UnitaryTests/SCardCancel2.py                       |  9 +--
 UnitaryTests/SCardCancel3.py                       | 21 +++---
 UnitaryTests/SCardConnect_DIRECT.py                | 13 ++--
 UnitaryTests/SCardConnect_DIRECT2.py               | 11 ++--
 UnitaryTests/SCardEndTransaction_extra_call.py     | 15 +++--
 UnitaryTests/SCardExclusiveBehaviour.py            | 21 ++++--
 UnitaryTests/SCardGetAttrib.py                     | 11 ++--
 UnitaryTests/SCardGetStatusChange.py               | 15 +++--
 UnitaryTests/SCardGetStatusChange2.py              | 15 +++--
 UnitaryTests/SCardReconnect.py                     |  7 +-
 UnitaryTests/SCardStatus.py                        | 29 ++++----
 UnitaryTests/SCard_fork.py                         | 25 +++----
 UnitaryTests/ThreadSafe.py                         |  7 +-
 UnitaryTests/ThreadSafeConnect.py                  | 15 +++--
 UnitaryTests/control_get_firmware.py               | 13 ++--
 UnitaryTests/control_switch_interface.py           | 15 +++--
 UnitaryTests/getAttrib.py                          | 12 ++--
 UnitaryTests/reset_card.py                         |  9 +--
 UnitaryTests/stress_apdu.py                        | 15 +++--
 UnitaryTests/stress_get_firmware.py                | 11 ++--
 UnitaryTests/transmit_loop.py                      |  7 +-
 31 files changed, 290 insertions(+), 249 deletions(-)

commit 25f9089e5c9c082b3c88f3687bdb27db048cc9a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 27 11:01:41 2017 +0100

    Doxygen: fix SCardGetAndLockContext() documentation

 src/winscard_clnt.c | 19 ++++++++++++++-----
 1 file changed, 14 insertions(+), 5 deletions(-)

commit 8193d6fad84539af03a329e0f6911125f96497d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 27 10:43:35 2017 +0100

    Client side: SCardGetAndLockContext() always locks
    
    SCardGetAndLockContext() has the lock parameter removed and now always
    lock.
    
    From Maksim Ivanov:
       Also it may be advisable to change the SCardGetAndLockContext
       function interface so that it's more difficult to use it in thread-unsafe
       manner: remove the second parameter "int lock" and make the
       locking behavior the default one, and introduce another function
       that does no locks and returns a boolean instead of an
       SCONTEXTMAP* pointer.
    
    Thanks to Maksim Ivanov for the proposal
    "[Pcsclite-muscle] Data races related to SCardCancel"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000789.html

 src/winscard_clnt.c | 19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)

commit ccfcd6e75ba9ccb5da02e18e5af909d8ec5f146a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 27 10:36:02 2017 +0100

    Client side: add and use SCardGetContextValidity()
    
    SCardGetContextValidity(hContext) returns a boolean and does not take
    any lock.
    It is similar to SCardGetAndLockContext(hContext, FALSE)
    
    Thanks to Maksim Ivanov for the idea
    "[Pcsclite-muscle] Data races related to SCardCancel"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000789.html

 src/winscard_clnt.c | 28 ++++++++++++++++++++++------
 1 file changed, 22 insertions(+), 6 deletions(-)

commit 9a21c82330fc4b73ac00faf2c5cf948da5f8ab07
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 27 10:26:11 2017 +0100

    SCardCancel(): fix a possible use after free
    
    From Maksim Ivanov:
    " It seems that there are still some issues with regard to the blocking
    requests cancellation functionality in PC/SC-Lite:
    
    2. Use-after-free possible in SCardCancel.
    
       This is probably a low-severity issue, as the deallocated memory will
       be accessed only for reading an int, which would be then used for
       deciding whether to fail fast or to send a request to the daemon
       (the latter is expected to fail anyway).
    
    For #2, the suggestion is to move the reading of the
       currentContextMap->cancellable flag under the clientMutex lock.
    
       Also it may be advisable to change the SCardGetAndLockContext
       function interface so that it's more difficult to use it in thread-unsafe
       manner: remove the second parameter "int lock" and make the
       locking behavior the default one, and introduce another function
       that does no locks and returns a boolean instead of an
       SCONTEXTMAP* pointer. "
    
    Thanks to Maksim Ivanov for the bug report and solution
    "[Pcsclite-muscle] Data races related to SCardCancel"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000789.html

 src/winscard_clnt.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit b662aa1ae24267150d816a08f757b1c1539411ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 27 09:39:40 2017 +0100

    ContextThread(): fix a SCARD_CANCEL race bug
    
    From Maksim Ivanov:
    " It seems that there are still some issues with regard to the blocking
    requests cancellation functionality in PC/SC-Lite:
    
    1. Extra SCARD_E_CANCELLED events may be sent by the daemon to the
       client that was previously performing an SCardGetStatusChange call.
    
       One scenario is that two concurrent SCardCancel calls succeeding
       simultaneously, and another scenario is an SCardCancel call
       succeeding simultaneously with an event sending from the status
       handler thread.
    
       As a result, the app<->daemon communication will break.
    
    Suggested solutions:
    
    For #1, suggesting to change the SCARD_CANCEL handler to firstly do
       EHUnregisterClientForEvent, and, only if it returns success, then
       send the SCARD_E_CANCELLED event to the client. "
    
    Now MSGSignalClient() is called only if EHUnregisterClientForEvent()
    succeeds i.e. the client was still blocked in a SCardGetStatusChange().
    
    If SCardGetStatusChange() was already canceled or finished then we do not
    signal the client.
    
    Thanks to Maksim Ivanov for the bug report and solution
    "[Pcsclite-muscle] Data races related to SCardCancel"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000789.html

 src/winscard_svc.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit ed741436fd6ce048b73b0d3e1b343c7aea7691cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 27 09:34:44 2017 +0100

    ContextThread(): minor code reformat
    
    Set SCARD_E_INVALID_HANDLE as a default return value for SCARD_CANCEL.
    
    This change will be needed later in the next commits.

 src/winscard_svc.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 651cf79f4b80a7c72f097e6a598b6199a753c063
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 22 16:47:13 2017 +0100

    Doxygen: better pcsc_stringify_error() documentation
    
    pcsc_stringify_error() uses Thread-Local Storage (TLS) for the returned
    buffer.
    
    Thanks to Maksim Ivanov
    "[Pcsclite-muscle] pcsc_stringify_error thread safety"
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000788.html

 src/error.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 9726152f2c6767f0fa3103ad307dc28ef7923852
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 17:16:16 2017 +0100

    Fix compilation error with GCC 4.9
    
    GCC 4.9 does not like when "__thread" is before "static"
    
    error.c: In function 'pcsc_stringify_error':
    error.c:81:2: error: '__thread' before 'static'
      __thread static char strError[75];
      ^
    
    clang 8.0 accept both constructions.

 src/error.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b27f0e54194dcfb4db8179dceede8a649141fea4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 17:10:51 2017 +0100

    pcsc_stringify_error() now returns a const char *
    
    The pcsc_stringify_error() function returns a C-string stored in a
    static buffer. The buffer should NOT be modified outside of
    pcsc_stringify_error().
    
    Thanks to Nikos Mavrogiannopoulos for the idea
    "[Pcsclite-muscle] pcsc_stringify_error thread safety"
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000785.html

 src/PCSC/pcsclite.h.in | 2 +-
 src/error.c            | 4 ++--
 src/spy/libpcscspy.c   | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit eab1d67295e4e1d5c12bbca77bc57c50fd384a4e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 16:58:29 2017 +0100

    pcsc_stringify_error(): use Thread-local storage
    
    " The pcsc_stringify_error() function in the PC/SC-Lite implementation
    uses a statically allocated buffer. This means that the buffer may be
    used simultaneously when the function is called from multiple threads
    concurrently.
    Therefore, the returned message may be spoiled, e.g.:
    "Internal error.ul"
    or
    "Command cancell"
    In the worst-case scenario, the application may read an unbounded
    string (with the terminating null character missing). "
    
    Thanks to Maksim Ivanov fro the bug report
    "[Pcsclite-muscle] pcsc_stringify_error thread safety"
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000781.html
    
    and Ivo Raisr (and Nikos Mavrogiannopoulos) for the solution
    "[Pcsclite-muscle] pcsc_stringify_error thread safety"
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20170116/000782.html

 src/error.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 980fdc357bc36e3f608462a1d7bcb182b1bacdae (tag: 1.8.20)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 30 18:10:07 2016 +0100

    Release 1.8.20

 ChangeLog    | 5 +++++
 configure.ac | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 3aaab9d998b5deb16a246cc7517e44144d281d3b
Author: Peter Wu <peter@lekensteyn.nl>
Date:   Sun Dec 25 23:37:51 2016 +0100

    SCard: check for a valid hContext handles
    
    Reject invalid (zero) hContext handles and log the event.

 src/winscard_svc.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 697fe05967af7ea215bcd5d5774be587780c9e22
Author: Peter Wu <peter@lekensteyn.nl>
Date:   Sun Dec 25 23:31:24 2016 +0100

    SCardReleaseContext: prevent use-after-free of cardsList
    
    Once MSGRemoveContext is invoked (via SCARD_RELEASE_CONTEXT),
    cardsList is freed. A repeated invocation of SCARD_RELEASE_CONTEXT (with
    an empty context handle) results in a use-after-free followed by a
    double-free.
    
    After MSGRemoveContext, invocation of SCardEstablishContext enable
    further use-after-free of cardsList in MSGCheckHandleAssociation,
    MSGRemoveContext, MSGAddHandle, MSGRemoveHandle.
    
    To avoid this problem, destroy the list only when the client connection
    is terminated.

 src/winscard_svc.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit c10dac9ce97ed3fda204fd73ef1f19ac4446426d (tag: 1.8.19)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 9 10:07:52 2016 +0100

    Release 1.8.19

 ChangeLog    | 12 ++++++++++++
 configure.ac |  2 +-
 2 files changed, 13 insertions(+), 1 deletion(-)

commit 152a53e5151f4f81c572dfeae02d5e0ea8eebccf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 8 14:48:21 2016 +0100

    SCardGetStatusChange(): Fix the fix for a race condition
    
    The change in 4e2a563c8ed4353ad013de85b71aac12ec599f82 is not correct.
    
    WRITE_BODY() is a macro composed of 2 lines of C so we can't use:
    "if (test)
        WRITE_BODY()"
    
    As is is interpreted as:
    "if (test)
        instruction1;
    instruction2;"
    
    For that to work we need to:
    - use { } around WRITE_BODY()
    or
    - define WRITE_BODY() as a C instruction
    
    Defining WRITE_BODY() as a C instruction (a "do {} while(0)") is the
    best option as it will prevent the same bug to appear again.
    
    Thanks to Florian Kaiser (again) for the patch
    "[Pcsclite-muscle] [PATCH] fix racecondition between winscard server and
    clients"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20161205/000775.html

 src/winscard_svc.c | 82 ++++++++++++++++++++++++++++++------------------------
 1 file changed, 45 insertions(+), 37 deletions(-)

commit 4e2a563c8ed4353ad013de85b71aac12ec599f82
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 6 16:47:43 2016 +0100

    SCardGetStatusChange(): Fix a (rare) race condition
    
    " After the client timed out it sends a CMD_STOP_WAITING_READER_STATE_CHANGE.
    Sometimes an event occurs which triggers MSGSignalClient, which unregisters the
    client from events and sends a wait_reader_state_change message to the client.
    The client interprets this message as an answer to its
    CMD_STOP_WAITING_READER_STATE_CHANGE.
    
    If we send another wait_reader_state_change message to the client it stays in
    its buffer until another Command is issued and this message appears as leading
    garbage in the commands answer.
    
    Therefore we should not send the wait_reader_state_change message here, if the
    client has already been unregisterd from events. "
    
    Thanks to Florian Kaiser for the patch
    "[Pcsclite-muscle] [PATCH] fix racecondition between winscard server and clients"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20161128/000772.html

 src/winscard_svc.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 93fee94dcd6acc77b1f962aa20be244e3c39a75f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 3 19:51:55 2016 +0100

    ContextThread(): Fix comment
    
    Thanks to Florian Kaiser for the patch
    "[Pcsclite-muscle] [PATCH] fix racecondition between winscard server and
    clients"
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20161128/000772.html

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b703805510b814b78967c7e84ad3a477cb8fc10e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 16:43:25 2016 +0100

    pcsc-spy: log the thread number in the results
    
    The "Results sorted by total execution time" are displayed for each
    thread found. Now the thread index is also displayed to make it more
    explicit why different results are displayed.
    
    We now have something like:
    Thread 1/3
    Results sorted by total execution time
    total time: 0.002176 sec
    0.000554 sec (  2 calls) 25.46% SCardListReaders
    0.000529 sec (  3 calls) 24.31% SCardConnect
    0.000251 sec (  1 calls) 11.53% SCardEstablishContext
    0.000196 sec (  3 calls)  9.01% SCardDisconnect
    0.000081 sec (  1 calls)  3.72% SCardReleaseContext
    
    Thread 2/3
    Results sorted by total execution time
    total time: 0.002176 sec
    0.000720 sec (  3 calls) 33.09% SCardConnect
    0.000390 sec (  2 calls) 17.92% SCardListReaders
    0.000250 sec (  3 calls) 11.49% SCardDisconnect
    0.000177 sec (  1 calls)  8.13% SCardEstablishContext
    0.000065 sec (  1 calls)  2.99% SCardReleaseContext
    
    Thread 3/3
    Results sorted by total execution time
    total time: 0.002176 sec
    0.000499 sec (  3 calls) 22.93% SCardConnect
    0.000456 sec (  1 calls) 20.96% SCardEstablishContext
    0.000347 sec (  2 calls) 15.95% SCardListReaders
    0.000275 sec (  3 calls) 12.64% SCardDisconnect
    0.000050 sec (  1 calls)  2.30% SCardReleaseContext
    
    Thanks to Oliver Graute for the "bug" request
    "[Pcsclite-muscle] High CPU load with pcscd and Kerkey security Module"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20161121/000766.html

 src/spy/pcsc-spy | 4 ++++
 1 file changed, 4 insertions(+)

commit 5c7f9665358b55d320cfefb2276348a53a59da33
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 16 14:34:39 2016 +0100

    Doxygen: Revert SCardConnect() within a transaction
    
    It looks like this difference is NOT confirmed.
    
    Thanks to Michael Traut for the update.
    "[Pcsclite-muscle] Difference from Windows' implementation with regard
    to PC/SC shared mode"
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20161024/000743.html

 src/winscard_clnt.c | 6 ------
 1 file changed, 6 deletions(-)

commit dd69aff59f46a81b3ec2b971e30889056aee7ee0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 15 09:43:31 2016 +0100

    Doxygen: improve IFDHGetCapabilities() documentation
    
    Document the expected returned values.

 src/PCSC/ifdhandler.h | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit aa9db5f12b892c94585452fc106d48f064bc0f60
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 26 12:06:15 2016 +0200

    Doxygen: document SCardConnect() within a transaction
    
    SCardConnect() does not behave as on Windows when a transaction is
    running.
    
    Thanks to Maksim Ivanov for the "bug" report
    "[Pcsclite-muscle] Difference from Windows' implementation with regard
    to PC/SC shared mode"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20161017/000738.html

 src/winscard_clnt.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 45dd695d05742b039384951e130570aed289d7ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 19 18:38:18 2016 +0200

    pcsc-spy: fix display of execution time
    
    The execution time is displayed in seconds and micro-seconds.
    1 micro-second is 10E-6 second, not 10E-9.

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f42ec9361bde72e738885856b2f534022c013671
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 28 09:54:49 2016 +0200

    Doxygen: add a link to the "differences" chapter
    
    It is now possible to easily reference the "Known differences with
    Microsoft Windows WinSCard implementation" chapter.
    
    The URL is
    http://pcsclite.alioth.debian.org/api/group__API.html#differences

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit db9d22e3a38e713d8150b5fddc124cc57c4e89e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 28 09:28:12 2016 +0200

    Doxygen: SCARD_E_NOT_READY is never returned
    
    SCardConnect() and SCardReconnect() will never return SCARD_E_NOT_READY.
    So remove this return value from the Doxygen documentation.
    
    In fact SCARD_E_NOT_READY is not used by any pcsc-lite function.

 src/winscard_clnt.c | 2 --
 1 file changed, 2 deletions(-)

commit 00c5acb113b5b96226f6d791da6ee6e31c948137
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 23 19:13:50 2016 +0200

    pcscd: do not check the process is setuid to limit rights
    
    pcscd is no more installed as setuid or setgid to allow auto start.
    "Configuring your system for pcscd auto-start"
    https://ludovicrousseau.blogspot.fr/2010/12/configuring-your-system-for-pcscd-auto.html
    
    pcscd is now started on demand as root by systemd
    "pcscd auto start using systemd"
    https://ludovicrousseau.blogspot.fr/2011/11/pcscd-auto-start-using-systemd.html
    
    It is no more needed to check pcscd is setuid/setgid to limit its
    possibilities.
    
    The change was made in cac146d23b899c46e9db7f6409a905e115ef921f (Aug 16
    2010) and is not reverted.

 src/pcscdaemon.c | 20 --------------------
 1 file changed, 20 deletions(-)

commit da8448b4effeb607f173233e725214275795a7a4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 23 19:08:23 2016 +0200

    ChangeLog: convert to UTF-8
    
    The file was using Latin-1 or ISO-8859 encoding.

 ChangeLog | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 29ead37d5b4e41178a30fb390f64a51de98ff547
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 25 14:51:41 2016 +0200

    winscard.h: fix SCardGetStatusChange() prototype
    
    Use "SCARD_READERSTATE *" instead of "LPSCARD_READERSTATE" for the
    rgReaderStates parameter to match the definition of
    SCardGetStatusChange() in winscard_clnt.c.
    
    The Doxygen page for winscard.h now does point to the documentation of
    SCardGetStatusChange().
    
    Even if the 2 types are, in fact, the same Doxygen was confused.

 src/PCSC/winscard.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0cd6b659868fd7eccc0c1c20e67623cf6e32edba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 25 14:48:01 2016 +0200

    Doxygen: SCardGetStatusChange() may return SCARD_E_UNKNOWN_READER
    
    Document that SCARD_E_UNKNOWN_READER is a possible return value.
    
    Thanks to Maksim Ivanov for the bug report
    "[Pcsclite-muscle] Small doc improvement for SCardGetStatusChange"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160822/000697.html

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit f9971f6577997929be74f2feb708e09121db6aaa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 25 10:11:25 2016 +0200

    Fix capitalisation issues in license text
    
    All the licence text was in lower case.
    I guess that was because of a wrong manupilation of vim.

 UnitaryTests/stress_apdu.py         | 16 ++++++++--------
 UnitaryTests/stress_get_firmware.py | 16 ++++++++--------
 2 files changed, 16 insertions(+), 16 deletions(-)

commit 12ed49c6130da8e0365db02b289feb99b54d1d96 (tag: 1.8.18)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 10 20:33:07 2016 +0200

    Release 1.8.18

 ChangeLog    | 9 +++++++++
 configure.ac | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit daae836ffc4a8ac0199a1aa16a0282806cbd4af4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 5 16:44:51 2016 +0200

    SCardDisconnect(): fix compiler warnings
    
    winscard.c: In function ‚ÄòSCardDisconnect‚Äô:
    winscard.c:912:5: warning: format ‚Äò%d‚Äô expects argument of type ‚Äòint‚Äô, but argument 6 has type ‚ÄòLONG‚Äô [-Wformat=]
         Log3(PCSC_LOG_ERROR, "Error powering down card: %d 0x%04X",
         ^
    winscard.c:912:5: warning: format ‚Äò%X‚Äô expects argument of type ‚Äòunsigned int‚Äô, but argument 7 has type ‚ÄòLONG‚Äô [-Wformat=]

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b25f2d5a3822b9eed4f64f3052e54230af292af2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 5 16:23:20 2016 +0200

    SCardDisconnect(): much faster SCARD_UNPOWER_CARD
    
    When SCardDisconnect() is used with SCARD_UNPOWER_CARD we just power
    down the card and do not power it up again.
    
    The idea is to be faster and gain some milliseconds.
    The code to power up the card on demand was already present since 2010
    with the card auto power on and off mechanism.
    
    Before the change: SCardDisconnect(SCARD_UNPOWER_CARD) in 61 ms
    After the change: SCardDisconnect(SCARD_UNPOWER_CARD) in 1.4 ms
    
    Improvement factor (for the card used) = 61/1.4 = x44
    
    If you use a card that is slower to power up then the gain is even higher.
    
    Thanks to Christophe Ferrando from Sylyca for the patch.

 src/winscard.c | 22 +---------------------
 1 file changed, 1 insertion(+), 21 deletions(-)

commit a8358bc84be4c8870cb4955f4e106f4d46740cfd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 5 16:16:13 2016 +0200

    SCardConnect(): do not use a local readerState
    
    We do want to change the value of rContext->readerState->readerState after
    the power up, not just the value of the local copy.
    
    I am not sure the code was broken but it will help make the next patch
    work.

 src/winscard.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit 7084732383a7d97caf50350b4b0b95d9c22f42ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:46:24 2016 +0200

    cleanup: remove unused function from configure.ac
    
    Some system functions presence where tested using AC_CHECK_FUNCS() but
    the functions were no more used in the code.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4882c37ab7df63be7090addf936e1b795467ab75
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:43:59 2016 +0200

    cleanup: remove unused headers from sys_unix.c

 src/sys_unix.c | 12 ------------
 1 file changed, 12 deletions(-)

commit 3a4134432613e73baa8cbe2206f4e2a365c356ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:39:51 2016 +0200

    Doxygen: add documentation for SYS_RandomInt()

 src/sys_unix.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit d62561e1baaaa2a1138caf243994aef09931bfcd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:31:15 2016 +0200

    cleanup: remove declaration of SYS_Daemon()
    
    SYS_Daemon() code was removed in 12f1f0e4ff330bacc28254519293bf0e3e1fd047
    (June 2010) but its declaration was still present in sys_generic.h

 src/sys_generic.h | 2 --
 1 file changed, 2 deletions(-)

commit 8e820796b338cb1048c51ec462446f61a3979835
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:29:49 2016 +0200

    main(): Init the PRNG from a safe place
    
    The PRNG init is now done before any client can connect to the daemon.
    
    Thanks to Maksim Ivanov for the idea
    "[Pcsclite-muscle] Possible generation of duplicate SCARDHANDLE"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160801/000686.html

 src/pcscdaemon.c | 3 +++
 1 file changed, 3 insertions(+)

commit 8b80aa4900cd60ab075802bdcc5a996027d0c74e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:23:37 2016 +0200

    SYS_InitRandom(): new function to init the PRNG
    
    The Pseudo Random Number Generator now has an independent function to
    initialize its internal state.
    
    The PRNG init was done in the first call to SYS_RandomInt().
    A problem could appear when SYS_RandomInt() is called for the first time
    at the same time from 2 clients.
    
    Thanks to Maksim Ivanov for the idea
    "[Pcsclite-muscle] Possible generation of duplicate SCARDHANDLE"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160801/000686.html

 src/sys_generic.h |  2 +-
 src/sys_unix.c    | 15 ++++++---------
 2 files changed, 7 insertions(+), 10 deletions(-)

commit bb07a905c896e7a67e3d7b37a24b3637ada0546d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 11:00:04 2016 +0200

    SCardConnect(): Fix a possible duplicated hCard context
    
    It was possible for 2 applications to call SCardConnect() at the same
    time and that the same random hCard handle is generated and used for
    the 2 applications.
    
    The solution is to serialize the 2 generations of hCard handles. The
    second randomly generated handle will be found as already used and
    another handle will be generated.
    
    Thanks to Maksim Ivanov for the bug report
    "[Pcsclite-muscle] Possible generation of duplicate SCARDHANDLE"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160801/000673.html

 src/winscard.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit e34065edb88c14e16248e1c266d2f499a6476935
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 30 16:56:15 2016 +0200

    FEATURE_GET_TLV_PROPERTIES.py: update copyright date

 UnitaryTests/FEATURE_GET_TLV_PROPERTIES.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8bdfcd57dfcf9c062a3ab99a859acdcb7cd2db5a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 30 16:55:39 2016 +0200

    FEATURE_GET_TLV_PROPERTIES.py: for each reader
    
    Display the properties for each connected reader.

 UnitaryTests/FEATURE_GET_TLV_PROPERTIES.py | 30 +++++++++++++++++-------------
 1 file changed, 17 insertions(+), 13 deletions(-)

commit b136ffd7e2cf543184504c7e14f90036b0275643
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 30 16:53:15 2016 +0200

    FEATURE_GET_TLV_PROPERTIES.py: remove extra import
    
    Do not import symbols not used.

 UnitaryTests/FEATURE_GET_TLV_PROPERTIES.py | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit e78449ce37f453516e46d78ad0b99e01db32727b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 17 22:21:01 2016 +0200

    ThreadCreate(): fix stack size on Solaris
    
    A stack_size of 0 indicates the default size on Solaris.
    The default size is 2 MB so more than 256 KB. Do not shrink it.
    
    Thanks to Ivo Raisr for the bug report.

 src/utils.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d707446143114f579e78e5d652946f142e28847a
Author: Richard PALO <richard@NetBSD.org>
Date:   Wed Jun 1 07:15:22 2016 +0200

    configfile.l: Fix issue on SunOS
    
    Update HAVE_STRUCT_DIRENT guard.
    The previous patch fa52ae4e1f1ae3c35596e9aedaa3ce30fc5ceef9 was not
    correct.

 src/configfile.l | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ab23479d27d32d0b62c609997e14c38fef6e5928
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 31 20:17:10 2016 +0200

    Fix compilation on FreeBSD: alloca.h does not exist
    
    On FreeBSD alloca.h does not exist and alloca(3) is declared in
    stdlib.h (already included by src/readerfactory.c).
    
    Thanks to Tilman Keskinoz for the bug report.

 configure.ac        | 2 +-
 src/readerfactory.c | 4 +++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit f74dc1feea4c7a2345abb3e1861b350d46946c86 (tag: 1.8.17)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 29 14:11:21 2016 +0200

    Release 1.8.17

 ChangeLog    | 11 +++++++++++
 configure.ac |  2 +-
 2 files changed, 12 insertions(+), 1 deletion(-)

commit 0ba8145d814b846f2f2c2c59ad82e34f1253159a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 27 18:57:19 2016 +0200

    Doxygen: improve SCardGetStatusChange example
    
    Show how to wait for a card insertion.

 src/winscard_clnt.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 687128ad9a377a27bd93e542fc096530534dc101
Author: Richard PALO <richard@NetBSD.org>
Date:   Sat Apr 23 18:13:37 2016 +0200

    Fix SunOS compilation error
    
    Avoid visibility issues on SunOS on either gcc or studio
    by using a guard stipulating minimum versions for each compiler
    needed to support __attribute__((visibility("hidden")) or equivalent

 src/misc.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 9be0451909b73a4f52e42c01915683954d7d0a84
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 7 11:54:14 2016 +0200

    Fix end of function comment

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f3a6ccac63abd4d7d0e4eeced059128919286bab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 20 17:07:03 2016 +0200

    Unit Test for 74656f24
    
    SCardEndTransaction(): no card action in a transaction

 UnitaryTests/SCardBeginTransaction_Reset.py | 85 +++++++++++++++++++++++++++++
 1 file changed, 85 insertions(+)

commit 74656f24db3da1532040a1775ceffa225fbc3d00
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 20 17:02:40 2016 +0200

    SCardEndTransaction(): no card action in a transaction
    
    If a transaction is ongoing then another SCardEndTransaction() should
    not reset or unpower the card.
    In that case SCARD_E_SHARING_VIOLATION is returned and the transaction
    is not ended.

 src/winscard.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit b7a4f8f47c1c57b56dfe6cd1088f68b845016d9b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 20 16:19:56 2016 +0200

    RFUnlockSharing: handle SCARD_SHARE_EXCLUSIVE
    
    When a card is connected using SCARD_SHARE_EXCLUSIVE then
    RFUnlockSharing() called by SCardEndTransaction() should not be able to
    remove the exclusive access.
    
    The bug was detected because the following sequence worked but should
    not:
    SCardConnect(..., SCARD_SHARE_EXCLUSIVE, ...);
    SCardEndTransaction();
    
    An error was reported only on the second SCardEndTransaction() call.
    
    Now the first call to SCardEndTransaction() will fail and the card
    connection will stay exclusive.
    
    Thanks to Christophe Ferrando for the bug report in "[Pcsclite-muscle]
    SCARD_E_NOT_TRANSACTED"
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160516/000598.html

 src/readerfactory.c | 22 ++++++++++++++++------
 1 file changed, 16 insertions(+), 6 deletions(-)

commit 88b2085b9c60c7a99aa1306187ad77ce1670a8eb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 20 15:39:20 2016 +0200

    SCardGetAttrib.py: display the values in ASCII
    
    Display the attributes values also in ASCII.
    
    The output is now something like:
    PC/SC Readers: ['Gemalto PC Twin Reader (70D7E2EE) 00 00']
    reader: Gemalto PC Twin Reader (70D7E2EE) 00 00
    0x10103 [55, 48, 68, 55, 69, 50, 69, 69, 0] 37 30 44 37 45 32 45 45 00
    70D7E2EE
    0x90303 [59, 167, 0, 64, 24, 128, 101, 162, 8, 1, 1, 82] 3B A7 00 40 18
    80 65 A2 08 01 01 52 ;ÔøΩ@ÔøΩeR

 UnitaryTests/SCardGetAttrib.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b1effd21528d27dfa016c2752cf3e4cb973240f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 22 15:45:01 2016 +0200

    pcscd.h.in: remove extra spaces

 src/pcscd.h.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 77740786d5450273fad1400322918f5a276b3131
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 25 11:31:44 2016 +0200

    SCardGetAttrib.py: also use SCARD_ATTR_ATR_STRING
    
    Try to use both attributes SCARD_ATTR_VENDOR_IFD_SERIAL_NO and
    SCARD_ATTR_ATR_STRING
    
    Not all devices have a serial number so SCARD_ATTR_VENDOR_IFD_SERIAL_NO
    may just return an empty buffer.
    
    SCARD_ATTR_ATR_STRING should always work when a card is inserted (and
    the CCID driver is used).

 UnitaryTests/SCardGetAttrib.py | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit fa52ae4e1f1ae3c35596e9aedaa3ce30fc5ceef9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 24 19:04:04 2016 +0200

    Fix use of d_type field on SunOS
    
    SunOS does not provide the d_type field in a directory entry.
    
    The code now checks that d_type is available using
    AC_STRUCT_DIRENT_D_TYPE and use it conditionnaly.
    
    Fix compilation error on SunOS:
    configfile.l: In function 'DBGetReaderListDir':
    configfile.l:293:16: error: 'struct dirent' has no member named 'd_type'
        if (direntry->d_type == DT_UNKNOWN)
                    ^
    configfile.l:293:28: error: 'DT_UNKNOWN' undeclared (first use in this function)
        if (direntry->d_type == DT_UNKNOWN)
                                ^
    configfile.l:293:28: note: each undeclared identifier is reported only once for each function it appears in
    configfile.l:312:17: error: 'struct dirent' has no member named 'd_type'
         if (direntry->d_type != DT_REG)
                     ^
    configfile.l:312:29: error: 'DT_REG' undeclared (first use in this function)
         if (direntry->d_type != DT_REG)
                                 ^
    
    Thanks to risto3 for the bug report
    https://github.com/LudovicRousseau/PCSC/issues/6

 configure.ac     | 1 +
 src/configfile.l | 4 ++++
 2 files changed, 5 insertions(+)

commit 88acbfa03b98f28567c2438ea7aca6447488c0af
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 24 18:55:45 2016 +0200

    Fix compiler warnings on SunOS
    
    utils.c: In function 'SendHotplugSignal':
    utils.c:97:3: warning: format '%d' expects argument of type 'int', but argument 6 has type 'pid_t' [-Wformat=]
       Log2(PCSC_LOG_INFO, "Send hotplug signal to pcscd (pid=%d)", pid);
       ^
    utils.c:100:4: warning: format '%d' expects argument of type 'int', but argument 6 has type 'pid_t' [-Wformat=]
        Log3(PCSC_LOG_CRITICAL, "Can't signal pcscd (pid=%d): %s",
        ^

 src/utils.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 2360debebf1c35c8599cd2e0fc484e5f5029ab87
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 24 18:52:45 2016 +0200

    Fix compiler warning on SunOS
    
    pcscdaemon.c: In function 'main':
    pcscdaemon.c:402:5: warning: format '%d' expects argument of type 'int', but argument 6 has type 'pid_t' [-Wformat=]
         Log2(PCSC_LOG_CRITICAL,
         ^

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit abe436e38aa58cb1140eff0d497ba721474c7703
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 24 18:46:53 2016 +0200

    Fix signal handler by using only allowed functions
    
    The signals are now treated in a special thread created just for that purpose.
    
    Thanks to Andre Florath for the bug report
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160404/000561.html
    
    [Pcsclite-muscle] pcscd jams when using '--auto-exit'
    
    Andre Florath andre at florath.net
    Sat Apr 9 06:06:44 UTC 2016
    
    Hello!
    
    Since some time I have problems with pcscd. I'm using pcscd in
    conjunction with online banking and after a short period of working it
    stops and jams the banking application.
    
    A 'strace' to the pcscd showed that it is still running somewhere
    deep in the USB stack.
    
    The problem is, when manually running the the pcscd, there is no
    problem at all - only when running from systemd.
    Therefore I searched for the differences and found one: the
    '--auto-exit'. Downloaded the source and had a closer look.
    
    What I understand from the source code is, that when '--auto-exit' is
    given, a SIGALRM is generated which (should) terminate the process.
    
    I have noticed that the signal handler 'signal_trap()' uses some
    function calls that are not allowed in signal handlers; like:
    * syslog()
    * gettimeofday()
    * remove()
    
    Using this creates undefined behavior.
    (Please see 'man 7 signal' for a complete list of system calls that
    are not allowed in signal handlers.)
    
    I found a workaround for the issue.
    Changed the service file to:
    
    ===
    [Unit]
    Description=PC/SC Smart Card Daemon
    
    [Service]
    ExecStart=/usr/sbin/pcscd --foreground --debug -a
    ExecReload=/usr/sbin/pcscd --hotplug
    
    [Install]
    Also=pcscd.socket
    ===
    
    and disabling the pcscd.socket gives me a stable system.
    (Yes - pcscd is now started at boot time and runs the whole time
     - which is fine for me.)
    
    If you need more information, please drop me a note.
    
    Kind regards
    
    Andre

 src/pcscdaemon.c | 170 ++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 111 insertions(+), 59 deletions(-)

commit b48ff146f979cd3323845e1c19d1c1629d2ae037
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 24 18:25:03 2016 +0200

    Check alloca(3) is available
    
    The code uses alloca(3) so we check in ./configure that this function is
    available.

 configure.ac | 1 +
 1 file changed, 1 insertion(+)

commit 890f7edbd931467fd381739257ac1e1f335eb64a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 23 15:57:46 2016 +0200

    readerfactory: fix compilation warning on SunOS
    
    The code uses alloca() so we #include "alloca.h"
    
    readerfactory.c: In function 'RFAddReader':
    readerfactory.c:211:2: warning: implicit declaration of function 'alloca' [-Wimplicit-function-declaration]
      readerName = alloca(strlen(readerNameLong)+1);
      ^
    readerfactory.c:211:15: warning: incompatible implicit declaration of built-in function 'alloca'
      readerName = alloca(strlen(readerNameLong)+1);
                   ^

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 2269f10c2d2c5be1308d59469722024650a19b6d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 13 18:29:53 2016 +0200

    SCardConnect(): fix a Valgrind warning
    
    ==19635== Memcheck, a memory error detector
    ==19635== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
    ==19635== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
    ==19635== Command: /usr/rtests/bin/Pkcs11UnitTest.X64 pkcs11_common
    ==19635==
    Running pkcs11_common
    pkcs11_common::testGetInfo==19635== Syscall param socketcall.sendto(msg) points to uninitialised byte(s)
    ==19635== at 0x605A1F7: send (send.c:32)
    ==19635== by 0xBC47CE6: ??? (in /lib/x86_64-linux-gnu/libpcsclite.so.1.0.0)
    ==19635== by 0xBC47E22: ??? (in /lib/x86_64-linux-gnu/libpcsclite.so.1.0.0)
    ==19635== by 0xBC43BBE: SCardConnect (in /lib/x86_64-linux-gnu/libpcsclite.so.1.0.0)
    ...
    
    The field scConnectStruct.szReader (containing the reader name) was not
    completely initialized.
    
    Thanks to Andrey Roussev for the patch
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160404/000560.html

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit d6c7215335fe04abfd91206349c7d674de7bfcaa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 31 16:43:16 2016 +0200

    Doxygen: SCardGetAttrib() *pcbAttrLen contains the buffer size
    
    On return *pcbAttrLen contains the actual length of the received
    attribute.
    
    If the buffer was not big enough the error SCARD_E_INSUFFICIENT_BUFFER
    is returned and *pcbAttrLen contains the expected size.

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e64629f80a4639836399493ef5c3c717571ffc96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 31 16:11:44 2016 +0200

    SCardGetAttrib(): set pcbAttrLen when buffer is too small
    
    When the user provides a pbAttr[] buffer too small then the error code
    SCARD_E_INSUFFICIENT_BUFFER is returned and the correct buffer size
    value is set in pcbAttrLen.
    
    Before the change the value of pcbAttrLen was not changed so the user
    had no idea what the correct value should be.

 src/winscard_clnt.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 84a9441d52e72e1fbec6aa2b0dd6db27d3f5ce38
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 31 11:42:39 2016 +0200

    Doxygen: SCardGetAttrib() pbAttr can be NULL
    
    If pbAttr is NULL then the correct buffer size is indicated in
    pcbAttrLen.
    
    Also modify the example to use the double call.

 src/winscard_clnt.c | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

commit 55fa57fc691b732535fc3384a214b1daa133a127 (tag: 1.8.16)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 20 16:57:30 2016 +0100

    Release 1.8.16

 ChangeLog    | 13 +++++++++++++
 configure.ac |  2 +-
 2 files changed, 14 insertions(+), 1 deletion(-)

commit f017742e379668d37fe7f9a054cdd4168fde51a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 20 16:56:40 2016 +0100

    Fix compiler warning
    
    dyn_macosx.c:115:6: warning: unused parameter 'mayfail' [-Wunused-parameter]
            int mayfail)
                ^

 src/dyn_macosx.c | 1 +
 1 file changed, 1 insertion(+)

commit 4d7abdeff7808b1ab545a98733282d421e751a0e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 20 16:47:05 2016 +0100

    dyn_*: Fix compiler warnings
    
    DYN_* functions now return a LONG instead of an int
    
    dyn_unix.c:59:10: warning: implicit conversion from 'LONG' (aka 'long') to 'int'
          changes value from 2148532244 to -2146435052 [-Wconstant-conversion]
                    return SCARD_F_UNKNOWN_ERROR;
                    ~~~~~~ ^~~~~~~~~~~~~~~~~~~~~
    ../src/PCSC/pcsclite.h:147:33: note: expanded from macro 'SCARD_F_UNKNOWN_ERROR'
                                             ^~~~~~~~~~~~~~~~
    dyn_unix.c:77:10: warning: implicit conversion from 'LONG' (aka 'long') to 'int'
          changes value from 2148532244 to -2146435052 [-Wconstant-conversion]
                    return SCARD_F_UNKNOWN_ERROR;
                    ~~~~~~ ^~~~~~~~~~~~~~~~~~~~~
    ../src/PCSC/pcsclite.h:147:33: note: expanded from macro 'SCARD_F_UNKNOWN_ERROR'
                                             ^~~~~~~~~~~~~~~~
    dyn_unix.c:105:8: warning: implicit conversion from 'LONG' (aka 'long') to 'int'
          changes value from 2148532244 to -2146435052 [-Wconstant-conversion]
                    rv = SCARD_F_UNKNOWN_ERROR;
                       ~ ^~~~~~~~~~~~~~~~~~~~~
    ../src/PCSC/pcsclite.h:147:33: note: expanded from macro 'SCARD_F_UNKNOWN_ERROR'
                                             ^~~~~~~~~~~~~~~~

 src/dyn_generic.h | 6 +++---
 src/dyn_hpux.c    | 6 +++---
 src/dyn_unix.c    | 8 ++++----
 3 files changed, 10 insertions(+), 10 deletions(-)

commit 152746d73149dff6218667b83b053233f2d3d476
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 18 13:43:58 2016 +0100

    linux hotplug: handle error in parsing drivers
    
    The error returned by HPReadBundleValues() was not checked in
    HPSearchHotPluggables().
    
    We now check that at least 1 driver has been found before starting the
    notification thread.
    
    Thanks to Maksim Ivanov for the bug report
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160314/000550.html

 src/hotplug_linux.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit 9d0438ae384c33276d671cdf0830fe5d51901192
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 18 13:29:35 2016 +0100

    libusb hotplug: handle error in parsing drivers
    
    If HPReadBundleValues() returned an error (-1) it was considered as a
    correct value in HPSearchHotPluggables()
    
    We now check that at least 1 driver has been found.
    
    Thanks to Maksim Ivanov for the bug report
    https://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160314/000550.html

 src/hotplug_libusb.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 6cd24b9c83513c207cff39afbf9b653cbf8d004a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 16:25:57 2016 +0100

    Doxygen: improve documentation
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000545.html

 src/winscard_clnt.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit f3adfd0dc4d8047d0a52c6f6270be74a4df82e9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 16:17:58 2016 +0100

    Doxygen: improve SCardGetAttrib() documentation
    
    SCardGetAttrib() can also return:
    - SCARD_E_UNSUPPORTED_FEATURE the dwAttrId attribute is not supported by
      the driver
    - SCARD_E_NOT_TRANSACTED the driver returned an error

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit f649b29424dc55c63c8bbf7c6006e3cb2cb686e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 11:49:12 2016 +0100

    Unitary test for SCardCancel
    
    Test the bug fix in 57b0ba5a200bcbf1c489d39261340324392a8e8a

 UnitaryTests/SCardCancel3.py | 96 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 96 insertions(+)

commit 57b0ba5a200bcbf1c489d39261340324392a8e8a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 11:40:09 2016 +0100

    SCardCancel was not correctly handled
    
    When a SCardGetStatusChange() was cancelled then a next PC/SC call
    after the SCardGetStatusChange() may fail with a strange error code if
    the event waited in SCardGetStatusChange() occurs.
    
    " Looks like there is a bug related to the management of the blocking
    requests and of their cancellation.
    
    The reproduce steps are the following. Two threads: thread 1 and
    thread 2. Thread 2 calls SCardGetStatusChange and blocks (with waiting
    for some event X). Thread 1 calls SCardCancel. Thread 2 unblocks from
    SCardGetStatusChange due to the cancellation, and starts issuing other
    PC/SC-Lite API calls. After that, something that triggers the event X
    happens. After that the PC/SC-Lite API calls that thread 2 is making
    start to break (they return inconsistent results).
    
    The underlying reason is that cancellation in the current
    implementation of the PC/SC-Lite service does not unsubscribe the
    client from the list of clients waiting for events. So, when the event
    finally occurs, the event response is written into the client's
    socket, even if the cancellation had already happened before. Putting
    unexpected data into the socket shifts the responses of all further
    PC/SC-Lite API calls made by that client.
    
    If the analysis above is correct, then the correct fix would be
    probably just adding a "EHTryToUnregisterClientForEvent(fd)" statement
    into the handler of the SCARD_CANCEL message in function ContextThread
    (file winscard_svc.c). "
    
    Thanks to Maksim Ivanov for the bug report and patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000538.html

 src/winscard_svc.c | 4 ++++
 1 file changed, 4 insertions(+)

commit ea0a50bf2088906d888cf1888b4439f3391eb111
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 10:36:56 2016 +0100

    Enable Trace and Profile features using compiler flags
    
    " I have a couple of small suggestions regarding the tracing feature of
    the PC/SC-Lite's client side library. This feature is controlled by
    the "DO_TRACE" preprocessor definition.
    
    First, it's impossible to trigger this feature using the compiler
    flags: for some reason, the winscard_clnt.c file contains directive
    "#undef DO_TRACE". If it were a commented "#define" directive, then
    this would be more useful: the feature could be triggered both by
    editing the source file and by modifying the compiler flags. "
    
    The code now uses
    //#define DO_TRACE
    instead of
    
    It is now possible to enable this feature using the compiler flag
    -DDO_TRACE without modifying the source code.
    
    Same thing for DO_PROFILE.
    
    Thanks to Maksim Ivanov for the bug idea
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000537.html

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 43bac6981940ae3e8f05122342df6515aacb7fe8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 10:24:59 2016 +0100

    Doxygen: fix SCardListReaderGroups() documentation
    
    The error code SCARD_E_INVALID_PARAMETER is returned if mszGroups is
    NULL _and_ *pcchGroups == SCARD_AUTOALLOCATE.
    
    Having mszGroups == NULL is the normal way to get the string size in the
    pcchGroups parameter.
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000536.html

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aed8486d13da8de4a77b620e28c617cc9cb18cd9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 10:09:27 2016 +0100

    Doxygen: SCardTransmit pioRecvPci is optional
    
    The parameter pioRecvPci of SCardTransmit() is optional and can be NULL.
    
    In fact this parameter is not used/modified by pcsc-lite or the libccid
    driver.
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000536.html

 src/winscard_clnt.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit bfc6c15ec7b5941efaa48a1c1e5ff7d2cd8b0fa4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 10:02:02 2016 +0100

    Doxygen: pioSendPci argument of SCardTransmit is [in] only
    
    The argument pioSendPci of SCardTransmit() is not [in,out] but [in]
    only.
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000536.html

 src/winscard_clnt.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 2a80f615fc5084838a9c299609fa468772fae71b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 09:54:12 2016 +0100

    Doxygen: SCardStatus() reader name arg is a C-string
    
    The szReaderName argument of the SCardStatus() function is a
    NUL-terminated C-string, not a multi string as documented.
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000536.html

 src/testpcsc.c      | 16 ++++++++--------
 src/winscard.c      |  4 ++--
 src/winscard_clnt.c | 14 +++++++-------
 3 files changed, 17 insertions(+), 17 deletions(-)

commit a9dbb3c3ca1527228711f3e6c61fee15a1a80971
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 09:43:53 2016 +0100

    make definition of SCARD_SCOPE_GLOBAL public
    
    Move the definition of SCARD_SCOPE_GLOBAL from an internal header file
    to a public header file (pcsclite.h).
    SCARD_SCOPE_GLOBAL is now defined with the other SCARD_SCOPE_* values
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000536.html

 src/PCSC/pcsclite.h.in | 1 +
 src/pcscd.h.in         | 2 --
 2 files changed, 1 insertion(+), 2 deletions(-)

commit f590a950283ca46cb0f3e8b3a640254c61f31ff2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 11 09:35:12 2016 +0100

    Doxygen: SCardGetStatusChange() may return SCARD_E_CANCELLED
    
    Thanks to Maksim Ivanov for the bug report
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20160307/000536.html

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 56d59036d1c7be91fc480e861644e5d96cbdc377
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 29 18:02:20 2016 +0100

    pcscd --version: update copyright date
    
    I worked on the code from 2001 to 2015.

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f4354e5b1293173fa3dc14aa28471193a29e36ea (tag: 1.8.15)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 25 21:24:27 2015 +0100

    Release 1.8.15

 ChangeLog    | 8 ++++++++
 configure.ac | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 5ad0431b9fe0c2a661e81ac8cc3ed52c436934e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 21 22:21:04 2015 +0100

    Add support of remove and/or customize PC/SC reader names
    
    To enable these two features you need to configure pcsc-lite with
    --enable-filter.
    
    Ignore some readers
    ===================
    If the environment variable PCSCLITE_FILTER_IGNORE_READER_NAMES is
    defined then it contains a list of patterns separated by the character
    ":".
    If a pattern is found in a PC/SC reader name then this reader is ignored
    and will not be reported by SCardListReaders() or any other PC/SC calls.
    
    Extend reader names
    ===================
    To differentiate the PC/SC reader names one idea is to use the host name
    of the system. If the IT department is doing correctly his job every
    laptop should have a different host name.
    
    If the environment variable PCSCLITE_FILTER_EXTEND_READER_NAMES is
    defined then it contains a string that will be added at the end of the
    PC/SC reader names.
    The computer host name is available in the variable $HOSTNAME. If you
    want to have a space character between the PC/SC reader name and host
    name you define PCSCLITE_FILTER_EXTEND_READER_NAMES as:
    " $HOSTNAME".
    
    See also
    http://ludovicrousseau.blogspot.fr/2015/12/remove-andor-customize-pcsc-reader-names.html

 configure.ac        | 12 +++++++++++
 src/readerfactory.c | 62 ++++++++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 71 insertions(+), 3 deletions(-)

commit 415aa5316b6392df2a6d6ea1e4343663daf41f9b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 17:04:50 2015 +0100

    hotplug_libudev.c: rename i into index
    
    To avoid reproducing the problem fixed in
    acb04f9ca3e20bde5290cd81f5091ca30b3e97db the variable i in renamed
    index. i is not a general/reusable variable.

 src/hotplug_libudev.c | 36 ++++++++++++++++++------------------
 1 file changed, 18 insertions(+), 18 deletions(-)

commit ed077d6cfa6a27221730e417bb2758bf78e11549
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 16:57:44 2015 +0100

    hotplug_libudev.c: handle reader addition failure
    
    If RFAddReader() fails then the readerTracker[] entry must be cleaned.
    On exit pcscd will then not try to remove a non present reader.

 src/hotplug_libudev.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit acb04f9ca3e20bde5290cd81f5091ca30b3e97db
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 16:53:08 2015 +0100

    hotplug_libudev.c: Fix asprintf(3) use
    
    The value returned by asprintf() is stored in i but i is also later used
    as the readerTracker[] index.
    
    The code was then completely broken. The code now uses a different
    variable.

 src/hotplug_libudev.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 285d7d631d4f63561e39fb6d768cb756ef5b9bd1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 09:27:14 2015 +0100

    Comments: Remove the $Id$ tag
    
    The $Id$ tag was used by subversion (svn) to indicate the file revision.
    This tag is now useless with git.

 DRIVERS                  | 2 --
 README                   | 3 ---
 doc/example/pcsc_demo.c  | 2 --
 src/PCSC/debuglog.h      | 2 --
 src/PCSC/ifdhandler.h    | 2 --
 src/PCSC/pcsclite.h.in   | 2 --
 src/PCSC/reader.h        | 2 --
 src/PCSC/winscard.h      | 2 --
 src/PCSC/wintypes.h      | 2 --
 src/README_INTERNALS.txt | 2 --
 src/atrhandler.c         | 2 --
 src/atrhandler.h         | 2 --
 src/configfile.h         | 2 --
 src/configfile.l         | 2 --
 src/debug.c              | 2 --
 src/debuglog.c           | 2 --
 src/dyn_generic.h        | 2 --
 src/dyn_hpux.c           | 2 --
 src/dyn_macosx.c         | 2 --
 src/dyn_unix.c           | 2 --
 src/error.c              | 2 --
 src/eventhandler.c       | 2 --
 src/eventhandler.h       | 2 --
 src/hotplug.h            | 2 --
 src/hotplug_generic.c    | 2 --
 src/hotplug_libudev.c    | 2 --
 src/hotplug_libusb.c     | 2 --
 src/hotplug_linux.c      | 2 --
 src/hotplug_macosx.c     | 2 --
 src/ifdwrapper.c         | 2 --
 src/ifdwrapper.h         | 2 --
 src/misc.h               | 2 --
 src/parser.h             | 2 --
 src/pcscd.h.in           | 2 --
 src/pcscdaemon.c         | 2 --
 src/powermgt_generic.c   | 2 --
 src/powermgt_generic.h   | 2 --
 src/prothandler.c        | 2 --
 src/prothandler.h        | 2 --
 src/readerfactory.c      | 2 --
 src/readerfactory.h      | 2 --
 src/spy/libpcscspy.c     | 2 --
 src/spy/pcsc-spy         | 2 --
 src/strlcpycat.h         | 2 --
 src/sys_generic.h        | 2 --
 src/sys_unix.c           | 2 --
 src/testpcsc.c           | 2 --
 src/tokenparser.l        | 2 --
 src/utils.c              | 2 --
 src/utils.h              | 2 --
 src/utils/formaticc.c    | 2 --
 src/utils/installifd.c   | 2 --
 src/winscard.c           | 2 --
 src/winscard_clnt.c      | 2 --
 src/winscard_msg.c       | 2 --
 src/winscard_msg.h       | 2 --
 src/winscard_msg_srv.c   | 2 --
 src/winscard_svc.c       | 2 --
 src/winscard_svc.h       | 2 --
 59 files changed, 119 deletions(-)

commit df879ec11c6c80dc70439ab433a055497000023d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 20 17:47:58 2015 +0200

    pcscdaemon: update bug report list address
    
    The list <muscle@lists.musclecard.com> is dead since a few years now.
    Bugs should be reported to <pcsclite-muscle@lists.alioth.debian.org>
    (after you have subscribed to the list)

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f0dc9aabbdd533eac5bcdb2049519f6f1bcb607
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 15:34:42 2015 +0200

    Doxygen: remove cross references
    
    The API documentation do not need to include:
    - functions calling the documented function
    - functions called internally by the documented function
    
    The Doxygen documentation is now shorter with no extra/useless
    information.

 doc/doxygen.conf.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0f90f0b9b85d38fdcac3aa9f4028d770f305978e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 15:24:16 2015 +0200

    Doxygen: create a ErrorCode group
    
    Group all the PC/SC error codes in one group to make it easy to search
    for a particular error code.

 src/PCSC/pcsclite.h.in | 69 +++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 68 insertions(+), 1 deletion(-)

commit 1991c0be56d075fbb86357adf4e1590b225e1f9c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 15:07:43 2015 +0200

    Doxygen: add a missing parameter documentation
    
    Fix doxygen warning:
    PCSC/src/winscard_clnt.c:3215: warning: The following parameters of SCardGetAndLockContext(SCARDCONTEXT hContext, int lock) are not documented:
      parameter 'lock'

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit 433b6e36012eb589a2dc0eeca3b20d07514d3df6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 12 19:19:49 2015 +0200

    ChangeLog.git: include tags
    
    Use "--decorate=short" to include tags in the output like:
    commit 2891196bc817619c465920651d342a856d0551a3 (tag: pcsc-1.8.14)

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7eba88330cd4fad6b95cd6f49fe30df435d560cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 27 11:21:14 2015 +0200

    hotplug_libudev.c: fix compiler warnings
    
    hotplug_libudev.c: In function ‚ÄòHPAddDevice‚Äô:
    hotplug_libudev.c:443:2: warning: ignoring return value of ‚Äòasprintf‚Äô, declared with attribute warn_unused_result [-Wunused-result]
      asprintf(&deviceName, "usb:%04x/%04x:libudev:%d:%s",
      ^
    hotplug_libudev.c:475:3: warning: ignoring return value of ‚Äòasprintf‚Äô, declared with attribute warn_unused_result [-Wunused-result]
       asprintf(&result, "%s [%s]", fullname, sInterfaceName);
       ^
    hotplug_libudev.c:491:4: warning: ignoring return value of ‚Äòasprintf‚Äô, declared with attribute warn_unused_result [-Wunused-result]
        asprintf(&result, "%s (%s)", fullname, sSerialNumber);
        ^
    
    Check the value returned by asprintf(3) and exit if it fails.

 src/hotplug_libudev.c | 22 +++++++++++++++++++---
 1 file changed, 19 insertions(+), 3 deletions(-)

commit 79410aac02a370d6d92106c015f01ec1491d31ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 9 10:21:49 2015 +0200

    pcscd: do not write to a closed file handle
    
    " In case of receiving a signal to terminate after init has been
    completed, at_exit() is called and tries to write to a closed pipe.
    
    This patch simply set pipe to -1 in order to invalidate it after
    closing.  Pipe value checks are already present in the code. "
    
    Signed-off-by: Herve Codina <Herve.CODINA@celad.com>

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit 1f37c57feb81e8d263c696a845c4d054bdc11d0c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 7 15:04:12 2015 +0200

    tokenparser.l: config.h is a local file
    
    Use "config.h" instead of <config.h> so that the config.h is found in
    the local source directory.
    
    The problem was reported with HandlerTest that do not use -I. as
    compiler argument. The error was:
    tokenparser.l:45:20: fatal error: config.h: No such file or directory
     #include <config.h>
                        ^
    compilation terminated.

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2891196bc817619c465920651d342a856d0551a3 (tag: 1.8.14)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 5 12:55:15 2015 +0200

    Release 1.8.14

 ChangeLog    | 17 +++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 18 insertions(+), 1 deletion(-)

commit adacc765364284840762da3867e9cab7e3eb2b92
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Fri Jun 26 15:17:35 2015 +0200

    Initialize readerStates[].eventCounter to 0
    
    The field readerStates[].eventCounter was not initialized. It was not a
    real problem since the exact value is not used, only a value increment
    is used.
    
    The only problematic case was if readerStates[].eventCounter value is
    greater than 2^16. In that case the function SCardGetStatusChange() is
    no more able to detect card movement and would return immediatly.
    
    See also the previous patch.
    
    Thanks to Alan for the bug report.

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 75652c447c9d2b2f042fe01fbbcff40c79902e05
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Fri Jun 26 15:03:00 2015 +0200

    SCardGetStatusChange(): fix card movement bug
    
    The card movement counter eventCounter is a uint32_t and this value is
    also storded in the upper 16 bits of dwEventState.
    
    dwEventState should be copied in dwCurrentState by the application
    before the next call to SCardGetStatusChange().
    
    The upper 16 bits of dwCurrentState are then compared to eventCounter to
    detect a card movement.
    
    The alrogithm works fine if eventCounter can be stored on a 16-bits
    integer. The function SCardGetStatusChange() will return immediatly if
    eventCounter is greater than 2^16 even if no card movement happened.
    This is because eventCounter will always be different to the lowest
    16-bits of eventCounter stored in dwCurrentState.
    
    The patch resets eventCounter to 0 after 0xFFFF so its value can always
    be stored in a 16-bits integer.
    
    Thanks to Alan for the bug report
    https://alioth.debian.org/tracker/index.php?func=detail&aid=314929&group_id=30105&atid=410085
    [#314929] logic error in the implementation of the READER_STATE.eventCounter feature

 src/eventhandler.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 7a905f4bf5e917240c3529f0def63aafb40fe098
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Fri Jun 26 10:31:34 2015 +0200

    format display of SCARD_ATTR_VENDOR_IFD_VERSION
    
    Display the value of SCARD_ATTR_VENDOR_IFD_VERSION using the documented
    format: MM.mm.bbbb where MM = major version, mm = minor version, and
    bbbb = build number.

 src/testpcsc.c | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 459497acacf92c08183d47ea4fbc459476b3d4f4
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Fri Jun 26 10:17:50 2015 +0200

    Correctly display SCARD_ATTR_VENDOR_IFD_VERSION attribute
    
    The API documentation says about SCARD_ATTR_VENDOR_IFD_VERSION:
    Vendor-supplied interface device version (DWORD in the form 0xMMmmbbbb
    where MM = major version, mm = minor version, and bbbb = build number).
    
    But the CCID driver uses a fixed size of 4 bytes and type uint32_t to
    store the result.
    It works on 32-bits system but is wrong on some 64-bits systems (GNU Linux,
    not Mac OS X).
    
    On systems with sizeof(DWORD) = 64 the display of the value was
    incorrect.

 src/testpcsc.c | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit e607d167da9134a36987233ec4f3cf4a902bb2f5
Author: Ludovic Rousseau <lroussea@imacdelicretina.gemalto.com>
Date:   Thu Jun 25 14:04:35 2015 +0200

    FEATURE_CCID_ESC_COMMAND_Gemalto_features.py: add LANGIDs pdf URL
    
    Add USB_LANGIDs PDF URL so I do not have to search it again for the next
    LANGID I am looking for.

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 1 +
 1 file changed, 1 insertion(+)

commit 832c0bf87f157736e78cdfcbf733a67e74515869
Author: Ludovic Rousseau <lroussea@imacdelicretina.gemalto.com>
Date:   Thu Jun 25 14:02:35 2015 +0200

    FEATURE_CCID_ESC_COMMAND_Gemalto_features.py: add "Spanish"
    
    Add the "Spanish (Traditional Sort)" in USBLangID dictionnary.

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 1 +
 1 file changed, 1 insertion(+)

commit 85d8dea93679c98b9673e71dd0d1b9cf793b6db0
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Tue Jun 23 14:50:22 2015 +0200

    Threading: lock the card context in a safe way
    
    Functions working on hCard now acquire the context lock while the
    global thread lock is held.
    
    This will avoid the context to be released between the context retrieval
    and context lock. The code was ugly with a new call to
    SCardGetContextAndChannelFromHandle() to check that the context was
    still valid.
    
    This patch similar than the one in
    9681246742b812ba1b8acbe8892d8aa755215059 for hContext.
    
    Thanks to Luc Mazardo for the bug report.
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20150608/000395.html

 src/winscard_clnt.c | 187 ++++++++--------------------------------------------
 1 file changed, 27 insertions(+), 160 deletions(-)

commit 9681246742b812ba1b8acbe8892d8aa755215059
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Tue Jun 23 09:21:25 2015 +0200

    Threading: lock the PC/SC context in a safe way
    
    Functions working on hContext now acquire the context lock while the
    global thread lock is held.
    
    This will avoid the context to be released between the context retrieval
    and context lock. The code was ugly with a new call to
    SCardGetContext()to check that the context was still valid.
    
    Thanks to Luc Mazardo for the bug report.
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20150608/000395.html

 src/winscard_clnt.c | 81 ++++++++++-------------------------------------------
 1 file changed, 15 insertions(+), 66 deletions(-)

commit 7a023f9c8a769f9d1ae6dcdc80e8ced381908a0d
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Tue Jun 23 13:54:25 2015 +0200

    Add new API traces calls
    
    Add API_TRACE_IN/API_TRACE_OUT for functions:
    - SCardReconnect()
    - SCardBeginTransaction()
    - SCardEndTransaction()

 src/winscard_clnt.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit c7f396f23923a07b4055500d45ba04d8bcf9ddab
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Mon Jun 15 14:25:18 2015 +0200

    Doxygen: fix typo
    
    And make it explicit that wa are talking about PC/SC transactions.

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fb38b061843212b3dd5908f344edd2f3f397dce5
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Tue Jun 9 16:05:09 2015 +0200

    Doxygen: SCardReconnect() do not release locks
    
    Document a new difference between pcsc-lite and Windows winscard.
    
    Any transaction help by the process is still valid after
    SCardReconnect() returned. On Windows the transactions are released and
    a new call to SCardBeginTransaction() must be done.

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 040a4fa25e2896e80d341c5e1a822d1d04c57e55
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Thu Jun 4 11:11:03 2015 +0200

    Doxygen: fix SCardEndTransaction() documentation
    
    The disposition IS used and the dwDisposition parameter HAS an effect.
    
    The mis-documentation was present since the Doxygen introduction in
    2005.
    https://anonscm.debian.org/cgit/pcsclite/PCSC.git/diff/src/winscard_clnt.c?id=f53ee3d89881da56e5b90d7cedb218dcc5024237

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit 7b11b1f2cf201ad403db02723edb68a192aefde2
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Tue Jun 2 11:37:19 2015 +0200

    SCardReconnect.py: Fix typo in comment

 UnitaryTests/SCardReconnect.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8eb9ea1b354b050f997d003cf3b0c5b56f29f9f7
Author: Ludovic Rousseau <ludovic.rousseau@gmail.com>
Date:   Fri May 29 10:01:43 2015 +0200

    SCardTransmit() may return SCARD_E_INSUFFICIENT_BUFFER
    
    SCardTransmit() now correctly returns SCARD_E_INSUFFICIENT_BUFFER when
    pcbRecvLength is not big enough to receive the card response.
    
    The APDU is succesfully exchanged with the card but the card response is
    lost since the client application buffer is not large enough to receive
    it.
    
    Before this patch an error was reported in the CCID driver and the
    application got a SCARD_E_NOT_TRANSACTED error instead.
    
    Now the expected size is available in pcbRecvLength for the application
    to adapt its buffer size and, possibly, recall SCardTransmit().
    
    Thanks to Mironenko for the bug report
    https://github.com/LudovicRousseau/CCID/pull/5

 UnitaryTests/BufferOverflow2.c | 86 ++++++++++++++++++++++++++++++++++++++++++
 UnitaryTests/Makefile          |  1 +
 src/winscard_clnt.c            |  2 +-
 src/winscard_svc.c             |  8 +++-
 4 files changed, 95 insertions(+), 2 deletions(-)

commit e2752b7b26b0fc6cbee5f66be501396245cefee1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 15 17:59:08 2015 +0200

    Use correct prototype for pcsc_stringify_error()
    
    If NO_LOG is defined the code failed to build on Mac OS X:
    error.c:53:16: error: conflicting types for 'pcsc_stringify_error'
    PCSC_API char* pcsc_stringify_error(const long pcscError)
                   ^
    ../src/PCSC/pcsclite.h:237:7: note: previous declaration is here
    char *pcsc_stringify_error(const LONG);
          ^
    1 error generated.
    
    The prototype used in the case of NO_LOG was not the same as in the normal
    case: "long" instead of "LONG".
    
    Thanks to Frank Morgner for the bug report.
    https://github.com/LudovicRousseau/PCSC/pull/1

 src/error.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7b22153844b6246e79c1fd12220c867663e6cb4b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 2 16:12:10 2015 +0200

    Generate a ChangeLog using git instead of svn
    
    The repository moved from SVN to GIT. So the ChangeLog is now called
    ChangeLog.git and is generated using git.

 Makefile.am | 18 ++++--------------
 1 file changed, 4 insertions(+), 14 deletions(-)

commit ef0bec5ddd3ecdd758b28ce4d2a13e5a6b01e969
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 23 08:32:50 2015 +0000

    Add Language Identifiers for Czech and Slovak
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7103 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 899f91be9619910e028c3218d3ac87a6757dc657
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 24 15:12:10 2015 +0000

    Check PCSCv2_PART10_PROPERTY_wIdVendor is returned
    
    Some drivers do not return a value for PCSCv2_PART10_PROPERTY_wIdVendor.
    We must check the value exist before using it.
    
    Use "key in dict" instead of try/except to know a key is defined.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7096 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_get_firmware.py | 29 +++++++++++++++++------------
 1 file changed, 17 insertions(+), 12 deletions(-)

commit e4c0bcbe8d1e78f5ff4e830ca3e718203992cef4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 15:55:51 2015 +0000

    Do not call SCardCheckDaemonAvailability() twice
    
    Doing a second call to SCardCheckDaemonAvailability() if the first one
    failed is no more needed since revision 5384.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7078 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ----
 1 file changed, 4 deletions(-)

commit 89298d5e4ee195f03d2763146c8345175ea03495
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 15:53:51 2015 +0000

    Update Doxygen doc for SCardCheckDaemonAvailability()
    
    The function do not return SCARD_E_INVALID_HANDLE since revision 5384.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7077 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ----
 1 file changed, 4 deletions(-)

commit 8964779f0c5be833c90bbba341df3c39780c88f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 20:30:19 2014 +0000

    Unlist strlcat and strlcpy related files
    
    No need to ignore ignore strlcat and strlcpy object files.
    The source files are no more used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7076 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .gitignore | 4 ----
 1 file changed, 4 deletions(-)

commit afc3f76e068628d8aafb2f153ef80d6fe73b387b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 20:27:34 2014 +0000

    Unlist strlcat.c and strlcpy.c
    
    These files are no more used by pcscd and libpcsclite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7075 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 4 ----
 1 file changed, 4 deletions(-)

commit ff0dad4bc05495291abbed6bfdedeeba4f6530b3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 20:25:22 2014 +0000

    Remove src/strlcat.c and src/strlcpy.c license
    
    Theses files are no more included in pcsc-lite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7074 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING | 16 ----------------
 1 file changed, 16 deletions(-)

commit 5c6eb3ab572d069ad99c0c5722ea5d09171167fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 20:22:57 2014 +0000

    Do not check for strlcpy strlcat functions
    
    strlcpy and strlcat are no more used in pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7073 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.ac | 3 ---
 1 file changed, 3 deletions(-)

commit c1c4293f59d8bbfa928ff1bbacfbbe5cf32a8dbd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 20:21:09 2014 +0000

    Remove strlcpy.c and strlcpycat.h
    
    pcsc-lite do not use strlcpy(3) any more.
    We can remove these files from the distribution.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7072 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 ---
 1 file changed, 3 deletions(-)

commit d6a9b4b154e1e765ac3775e0f63d78982ea6aa48
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 19:25:40 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7071 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 8590b83a2a5e9059f7234d27113da3cefec7c8d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 18:00:29 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7070 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit dc8f29f02b9b29cd6f855440f5ff4a7b94996d07
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:57:54 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7069 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 14d3cf8b8dc849c12061d52f55501899f71112bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:55:09 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7068 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 0fec8cdaf00251bdf7b223ee35ba67f068243b51
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:50:26 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7067 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit faf58b42712a4fb89861bb11f137a5a6be60d7a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:43:42 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7066 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 83 +++++++++++++++++++++++++++++++++----------------------------
 1 file changed, 45 insertions(+), 38 deletions(-)

commit e7bd8d111c2d554b4a619f98eed976d772c6d83b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:33:21 2014 +0000

    Remove extra #include
    
    #include "strlcpycat.h" is not needed here. No strl* function is called
    in this source code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7065 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c    | 1 -
 src/hotplug_libudev.c | 1 -
 2 files changed, 2 deletions(-)

commit dd75c7f6d8d978d784992fe1069716ac950cbaae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:29:59 2014 +0000

    Do not use strlcpy(3)
    
    Remove the dependency.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7064 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 7a50286d5b5c79516062b779574f94d1b799c3a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 17:13:19 2014 +0000

    Remove extra #include
    
    #include "strlcpycat.h" is not needed here. No strl* function is called
    in this source code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7062 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 1 -
 1 file changed, 1 deletion(-)

commit 8db475dd95e27a122922ccd05c10c0b91b1d2745
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 12:38:35 2014 +0000

    Initialize fullname just in case
    
    strdup(3) and asprintf(3) may fail. This case is not managed by the code
    but at least a NULL value should make the code crash.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7061 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1953142389773d29530b21afd2eb7d39f0cb35ef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 12:36:55 2014 +0000

    Use GNU asprintf(3) to generate the deviceName
    
    The deviceName is no more limited to MAX_DEVICENAME characters.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7060 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit 997026a5679e5cb7b96906f388cdc2fdd2a283af
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 12:22:13 2014 +0000

    Remove strlcat(3) copy
    
    Since revision 7058 strlcat(3) is no more used in pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7059 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am |  2 --
 src/strlcat.c   | 63 ---------------------------------------------------------
 2 files changed, 65 deletions(-)

commit e059002daef85325a6b6ae810d32e41848b2e70e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 12:19:43 2014 +0000

    Use asprintf(3) (from GNU) instead of strlcat(3)
    
    http://lwn.net/Articles/612627/
    " strlcpy() in glibc
    
    Posted Sep 19, 2014 23:34 UTC (Fri) by Koromix (subscriber, #71455)
    In reply to: strlcpy() in glibc by epa
    Parent article: Adding strlcpy() to glibc
    
    None that I know of. When I manipulate dynamic raw C strings I go for
    one of these:
    - asprintf is great, you can't abuse it
    - malloc + a suite of stpcpy
    - strdup (with in-place characters substitutions on the copy if needed,
      such as fixing slashes in paths)
    
    I almost never use strcat because stpcpy is more efficient.
    
    This is enough when your code does little string handling (some
    identifiers, a few paths here and there). Beyond that, it's inefficient
    and insecure and you better use another language (C++) or at the very
    least a higher-level string handling code/library.
    
    Note that for cross-platform code you may need to provide fallback
    implementations of asprintf and stpcpy/stpncpy. "
    
    With this patch we can remove our own copy (from OpenBSD) of strlcat(3).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7058 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 27 +++++++++++++++++++--------
 1 file changed, 19 insertions(+), 8 deletions(-)

commit d17bd2a9abe6b573b65b03c31d016b20349c51e1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 31 11:49:17 2014 +0000

    Simplify code of DebugLogSetCategory()
    
    Remove the use of strlcat(3)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7057 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 10 +---------
 1 file changed, 1 insertion(+), 9 deletions(-)

commit a634851704d6a7e2fe6e828b4de17623c3198d66
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 20 15:13:49 2014 +0000

    --hotplug is only for non-USB readers
    
    For now --hotplug is only usable when hotplug_libusb.c is used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7055 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 772edc852c912670577ddbdd4c565731ab5334fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 11 14:51:17 2014 +0000

    Change the default PolKit policy
    
    Use no:no:yes instead of auth_admin:auth_admin:yes as suggested by
    Stanislav Brabec
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20141208/000267.html
    
    This change is related to the PolKit change in revision 7050.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7051 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/org.debian.pcsc-lite.policy | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 81c67cbe5b425bc398d9983c77a6e13e9f664a68
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 4 09:11:26 2014 +0000

    Allow to use pcscd in a remote session
    
    " Current implementation of polkit support disallows auth by
    challenge/response, effectively turning "auth_admin" present in the
    default policy to "no".
    
    Attached patch makes possible to use polkit challenge/response agent to
    be authorized.
    
    It makes possible to use pcscd in a remote session (providing admin
    password to the agent).
    
    Possible problem: If the authorization agent is present and active,
    polkit_authority_check_authorization_sync() could take a long time (the
    time of users' response). If the next request comes in the same time, it
    is postponed until the previous one is handled. (Actions done by root
    are not postponed.) "
    
    Thanks to Stanislav Brabec for the patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20141201/000247.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7050 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/auth.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 235b1cc8c67f28ecc3687f79446d6d19d5acc491
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 4 09:09:40 2014 +0000

    Fix typos in comments
    
    Thanks to David Woodhouse for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7049 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cfe1af31e823662e7c073b6439aee5f99eeabb34
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 18 08:16:54 2014 +0000

    Fix typos in comments
    
    Thanks to David Woodhouse for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7043 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 798639e22aeee39f0a35dd7bc9bac0df6e9794c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 14 09:08:41 2014 +0000

    Specify the character set used for reader names
    
    - PC/SC reader names are using UTF-8.
    
    - Info.plist reader names must use the ASCII character set.
      Or even a subset of ASCII.
    
    Since ASCII is a subset of UTF-8 we are fine. Reader names may become
    full UTF-8 in a later version of pcsc-lite.
    
    Thanks to David Woodhouse for the idea
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20141110/000243.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7041 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 ++
 src/winscard_clnt.c   | 3 +++
 2 files changed, 5 insertions(+)

commit aa3058d6f848c8c5bb446713b17f0c48a6713f70 (tag: 1.8.13)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 7 12:18:04 2014 +0000

    Release 1.8.13
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7036 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 9 +++++++++
 configure.ac | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit 89776012839e50e8df8f974a62913d99f41056a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 7 12:13:40 2014 +0000

    Fix compiler warnings
    
    auth.c: In function ‚ÄòIsClientAuthorized‚Äô:
    auth.c:151:33: warning: unused parameter ‚Äòsocket‚Äô [-Wunused-parameter]
     unsigned IsClientAuthorized(int socket, const char* action, const char* reader)
                                     ^
    auth.c:151:53: warning: unused parameter ‚Äòaction‚Äô [-Wunused-parameter]
     unsigned IsClientAuthorized(int socket, const char* action, const char* reader)
                                                         ^
    auth.c:151:73: warning: unused parameter ‚Äòreader‚Äô [-Wunused-parameter]
     unsigned IsClientAuthorized(int socket, const char* action, const char* reader)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7035 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/auth.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 11e7cf2bb4211f81b6f5569c8c96f3ed9885326d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 7 12:10:52 2014 +0000

    Fix compiler warning
    
    auth.c:150:10: warning: no previous prototype for ‚ÄòIsClientAuthorized‚Äô [-Wmissing-prototypes]
     unsigned IsClientAuthorized(int socket, const char* action, const char* reader)
              ^
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7034 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 src/auth.c      | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit b9c5b8f1d01fa37ffa7b329619f22fb8f9c6ab45
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 7 10:04:52 2014 +0000

    Fix again libudev hotplug
    
    The change in revision 7028 broke the fix introduced in revision 6951.
    
    Thanks again to Stefani Seibold for the new fix
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20141103/000226.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7033 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 55 +++++++++++++++++++++++++++------------------------
 1 file changed, 29 insertions(+), 26 deletions(-)

commit 641de01d6abef09b3db6af8361a0982f2c3aad1d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 6 14:57:11 2014 +0000

    Do not access pipefd[] after use
    
    It is NOT safe to pass to a thread a pointer to a locally allocated array.
    When the caller exits the scope of the array then the memory is reused.
    So any reference to the array becomes illegal memory access.
    
    Thanks to Maximilian Stein for the patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20141103/000218.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7029 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 5764a393663791b83134a1ca60b682a7df3d7acb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 6 14:24:02 2014 +0000

    Scan the USB bus at least once before accepting client connections
    
    The bug was introduced in pcsc-lite version 1.8.12 with revision 6951.
    
    Closes Alioth bug [#314869] pcscd: Socket activation not working on first try
    https://alioth.debian.org/tracker/index.php?func=detail&aid=314869&group_id=30105&atid=410085
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7028 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit a82a908265888fdaff098f63e74b9006c470bfb7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 6 13:56:10 2014 +0000

    Use ldconfig(8) to find the directory containing libpcsclite.so.1
    
    On a Debian system (using multiarch) the directory is no more /usr/lib
    but /usr/lib/x86_64-linux-gnu on a 64-bits Intel system.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7027 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/install_spy.sh   | 14 +++++++++++++-
 src/spy/uninstall_spy.sh | 14 +++++++++++++-
 2 files changed, 26 insertions(+), 2 deletions(-)

commit d067ec8ed7f13eddd5a066998e928474a9e84b79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 6 09:08:07 2014 +0000

    Do not log an error when pcscd is started by systemd
    
    If pcscd is started by systemd then /var/run/pcscd/pcscd.comm exists but
    /var/run/pcscd/pcscd.pid do not exists yet. So an error was logged:
    pcscd[2536]: 00000000 utils.c:87:GetDaemonPid() Can't open /var/run/pcscd/pcscd.pid: No such file or directory
    
    Now /var/run/pcscd/pcscd.pid is used only if pcscd is NOT started by
    systemd.
    
    Close Alioth bug [#314862] Should not log an error Can't open /var/run/pcscd/pcscd.pid when started by systemd
    https://alioth.debian.org/tracker/index.php?func=detail&aid=314862&group_id=30105&atid=410085
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7026 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 40bc07dd4c6092b431b0673ca619e6390b87ed12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 22 15:06:26 2014 +0000

    Use \- for -
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7016 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 822ca7b877f2fde198211247ef5494b2dfd08f64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 22 15:04:20 2014 +0000

    Add documentation for --reader-name-no-interface
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7015 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 3 +++
 1 file changed, 3 insertions(+)

commit fef803a7aa60d0bba8c9e4fdb4bdfffaca4e464b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 22 15:03:18 2014 +0000

    dd documentation for --reader-name-no-serial
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7014 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 3 +++
 1 file changed, 3 insertions(+)

commit e78be691c5285a3a99d45a6438195ad0bdca6049
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 22 15:01:17 2014 +0000

    Add documentation for --auto-exit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7013 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 4 ++++
 1 file changed, 4 insertions(+)

commit 8ed4b289005e87c0cdece2a563d55a67f0282db8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 2 09:48:08 2014 +0000

    Add licenses for files from other projects
    
    src/auth.c and src/auth.h are from Red Hat
    src/sd-daemon.c and src/sd-daemon.h are from systemd
    src/simclist.c and src/simclist.h are from SimCList
    src/strlcpy.3, src/strlcat.c and src/strlcpy.c are from OpenBSD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7007 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING | 88 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 88 insertions(+)

commit d11260d2a4e73999faebd20d725734ec5464e4db
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 2 09:41:13 2014 +0000

    Add missing 3-clause BSD license
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7006 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

commit 8a78f90db82f85ad78ab259ce880cf17ae559b60
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 2 09:36:15 2014 +0000

    Add GNU GPL v3 license header
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7005 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit 1e3864854bab68937cc673f108d81451f53dd370
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 2 09:26:36 2014 +0000

    Make the license more 3-clause BSD like
    
    The line "Changes to this license can be made only by the copyright
    author with explicit written consent." was present in the pcsc-lite
    license from the origin of the project (at least since the initial
    version of COPYING in the VCS in March 2002).
    
    This line is not present in the 3-clause BSD license
    http://en.wikipedia.org/wiki/BSD_licenses
    
    The change has been approved by David Corcoran, initial author of
    pcsc-lite.
    
    The change was requested by Oracle about the headers files winscard.h
    and pcsclite.h " To include in OpenJDK, Oracle needs the right to
    relicense under other terms."
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7004 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING                                    | 3 ---
 UnitaryTests/SCardBlockingBehaviourTest.py | 3 ---
 UnitaryTests/SCardExclusiveBehaviour.py    | 3 ---
 src/PCSC/debuglog.h                        | 3 ---
 src/PCSC/ifdhandler.h                      | 3 ---
 src/PCSC/pcsclite.h.in                     | 3 ---
 src/PCSC/reader.h                          | 3 ---
 src/PCSC/winscard.h                        | 3 ---
 src/PCSC/wintypes.h                        | 3 ---
 src/atrhandler.c                           | 3 ---
 src/atrhandler.h                           | 3 ---
 src/configfile.h                           | 3 ---
 src/configfile.l                           | 3 ---
 src/debug.c                                | 3 ---
 src/debuglog.c                             | 3 ---
 src/dyn_generic.h                          | 3 ---
 src/dyn_hpux.c                             | 3 ---
 src/dyn_macosx.c                           | 3 ---
 src/dyn_unix.c                             | 3 ---
 src/error.c                                | 3 ---
 src/eventhandler.c                         | 3 ---
 src/eventhandler.h                         | 3 ---
 src/hotplug.h                              | 3 ---
 src/hotplug_generic.c                      | 3 ---
 src/hotplug_libudev.c                      | 3 ---
 src/hotplug_libusb.c                       | 3 ---
 src/hotplug_linux.c                        | 3 ---
 src/hotplug_macosx.c                       | 3 ---
 src/ifdwrapper.c                           | 3 ---
 src/ifdwrapper.h                           | 3 ---
 src/lassert.h                              | 3 ---
 src/misc.h                                 | 3 ---
 src/parser.h                               | 3 ---
 src/pcsc-wirecheck-gen.c                   | 3 ---
 src/pcscdaemon.c                           | 3 ---
 src/powermgt_generic.c                     | 3 ---
 src/powermgt_generic.h                     | 3 ---
 src/prothandler.c                          | 3 ---
 src/prothandler.h                          | 3 ---
 src/readerfactory.c                        | 3 ---
 src/readerfactory.h                        | 3 ---
 src/strlcpycat.h                           | 3 ---
 src/sys_generic.h                          | 3 ---
 src/sys_unix.c                             | 3 ---
 src/testpcsc.c                             | 3 ---
 src/tokenparser.l                          | 3 ---
 src/utils.c                                | 3 ---
 src/utils.h                                | 3 ---
 src/utils/formaticc.c                      | 3 ---
 src/utils/installifd.c                     | 3 ---
 src/winscard.c                             | 3 ---
 src/winscard_clnt.c                        | 3 ---
 src/winscard_msg.c                         | 3 ---
 src/winscard_msg.h                         | 3 ---
 src/winscard_msg_srv.c                     | 3 ---
 src/winscard_svc.c                         | 3 ---
 src/winscard_svc.h                         | 3 ---
 57 files changed, 171 deletions(-)

commit fb079dda961491c85a97502c6bd27c2d0be6d909
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 24 13:08:09 2014 +0000

    The GPL license has been moved to the root directory
    
    And version is now 3.0 instead of 2.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@7001 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am             | 1 +
 doc/example/Makefile.am | 3 ---
 2 files changed, 1 insertion(+), 3 deletions(-)

commit 0842328655f97d7b00be25619df407b8d1589f51 (tag: 1.8.12)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 24 13:03:57 2014 +0000

    Release 1.8.12
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6999 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 8 ++++++++
 configure.ac | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 3e52017868f900ff5c1b932913deb325b8c8dcfa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 19 16:10:02 2014 +0000

    Fix pyflakes warning
    
    SCardConnect_DIRECT2.py:36: 'sys' imported but unused
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6997 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT2.py | 1 -
 1 file changed, 1 deletion(-)

commit cd50343d6b43e8a1d82e06e200d695f1ad6b2162
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 19 16:09:23 2014 +0000

    Fix pyflakes warning
    
    SCardGetAttrib.py:25: 'sys' imported but unused
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6996 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardGetAttrib.py | 1 -
 1 file changed, 1 deletion(-)

commit fa5115b76783bb2ea5475b9edc2eb744df184472
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 19 16:06:13 2014 +0000

    Fix pyflakes warning
    
    SCardBlockingBehaviourTest.py:234: local variable 'hresult' is assigned to but never used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6995 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBlockingBehaviourTest.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 788f0761d2e41c47b3ca68339e68f73689e5deff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 19 16:04:48 2014 +0000

    Fix pyflakes warning
    
    SCardBlockingBehaviourTest.py:249: local variable 'hresult' is assigned to but never useX
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6994 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBlockingBehaviourTest.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f439cbd18e7784bc2a023790aca3ad97c3699f39
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 19 16:02:09 2014 +0000

    Fix stupid bug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6993 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_get_firmware.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 737394bf662beff58ec5cdcdc519506e9bd147d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 17 13:16:12 2014 +0000

    Do not use FreeSans.ttf anymore
    
    Warning: doxygen no longer ships with the FreeSans font.
    You may want to clear or change DOT_FONTNAME.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6991 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 02bee5cc2b70403a8f0d70ee321e15bad5f425f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 17 13:12:35 2014 +0000

    Update from Doxygen 1.8.1.1 to 1.8.7
    
    Used "doxygen -u"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6990 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2354 +++++++++++++++++++++++++++++++--------------------
 1 file changed, 1437 insertions(+), 917 deletions(-)

commit 74e384f77ed79301b341b91b2b17082cdc69acf2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 17 13:01:38 2014 +0000

    Fix Doxygen for SCardGetStatusChange()
    
    A value of 0 for dwTimeout is not equivalent of INFINITE but of 0 ms.
    
    Thanks to helpcrypto for the bug report.
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20140915/000141.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6989 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da9dac160226d51a3d9d60add7e141fd4fc56ba4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 17 07:54:37 2014 +0000

    Update driver web page
    
    http://www.musclecard.com/drivers.html is no more available. A copy is
    available at http://pcsclite.alioth.debian.org/musclecard.com/drivers.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6987 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 5d3e6b5f81259dc3d488ded0ab59d09ba05e9ad2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 15 08:04:47 2014 +0000

    Use <config.h> instead of "config.h"
    
    https://www.gnu.org/software/autoconf/manual/autoconf-2.65/html_node/Configuration-Headers.html
      With the appropriate -I option, you can use #include <config.h>.
      Actually, it's a good habit to use it, because in the rare case when
      the source directory contains another config.h, the build directory
      should be searched first.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6986 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcpy.c     | 2 +-
 src/tokenparser.l | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 02ff548c5dd87978e2529b5ab1c10a7405268248
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 15 08:03:41 2014 +0000

    Fix error reported by flake8
    
    pcsc-spy:795:20: E711 comparison to None should be 'if cond is None:'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6985 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bd3f60de8346a4836aa2412b7758ff04e621ec52
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 09:21:27 2014 +0000

    Unitary Test for change in revision 6978
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6979 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/Makefile |  3 ++-
 UnitaryTests/exec.c   | 55 +++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 57 insertions(+), 1 deletion(-)

commit bdd9aa76acfe277b978ccd19e5751f958749c238
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 09:18:06 2014 +0000

    Create the libpcsclite/pcscd socket with the SOCK_CLOEXEC flag
    
    The communication socket between libpcsclite and pcscd is created with
    the SOCK_CLOEXEC flag added so the socket is automatically closed when
    the process (or its childs) calls exec().
    
    The problem happens when an application does exec() without cleaning its
    use of libpcsclite using SCardReleaseContext(). I could not reproduce a
    real problem but it has been reported on the field with a closed source
    application.
    
    Thanks to Stefani Seibold for the bug report and patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6978 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 23192fddfcbba1b31f8ffc95f2d1366dc7a81d29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 1 14:52:42 2014 +0000

    Remove extra spaces at end of lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6965 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h    |  6 +++---
 src/PCSC/ifdhandler.h  | 16 ++++++++--------
 src/PCSC/pcsclite.h.in |  4 ++--
 src/auth.h             |  2 +-
 4 files changed, 14 insertions(+), 14 deletions(-)

commit a9bf717855688d15b286005f51fe48dfb85c8169
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 7 12:59:33 2014 +0000

    Udev is a global variable
    
    Rename udev as Udev to make it more explicit it is a global variable.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6953 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 1b28f8cf724b14459745fde3b6817d910ed2886a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 7 12:57:09 2014 +0000

    Add a missing break;
    
    I removed the line when testing the code. This bug is mine, not
    Stefani's
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6952 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 1 +
 1 file changed, 1 insertion(+)

commit 4971882325b775afff7071867355342a0d1744f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 7 12:54:03 2014 +0000

    Revamp libudev hotplug
    
    " Hi,
    
    this is a complete revamp of src/hotplug_libudev.c hotplug handling.
    This patch fix a lot of race conditions and make the code a bit cleaner.
    
    The following benefits will be achieved:
    
    - udev events will be handled seperatly, a "add" event will only add a
    device and a "remove" will now only remove the device. So the whole
    bookkeeping is now done by the udev daemon, there is no more need to
    track the state of the device. Also it fix a race where udev had yet not
    finished the plug event and the device is not full accessible.
    
    - fix the race gap between the coldplug scan and the activating of the
    monitoring hotplug events. Now the monitoring will be first activated
    and the the coldplug scan will be done. So there is a small change that
    a device will be added during the coldplug scan. For this the
    HPAddDevice() function needs to check for duplicate adds of a device.
    But that is common design of libudev usage.
    
    - No more mutex needed since there is no more concurrency, because the
    coldplug scan will be no done inside the thread.
    
    - Do not start the thread detached since there is no way to do a
    synchronized stop of the thread. The HPStopHotPluggables() will now wait
    until the thread is gone. So it is save to free memory of structures
    since no one is access them.
    
    - Remove the cooperative thread cancellation by AraKiriHotPlug. Despite
    the non political correctness it will not work as expected, because the
    select() system call will block infinitly. Using the pthread_cancel()
    mechanism will do a better and safer job.
    
    - Add signal safety to the select() system call. A EINTR should not lead
    in a termination of the thread.
    
    - Fix a typo: pluggble > plugable
    
    - Make less error prone for unexpected libudev return values. Check all
    return values of udev_...() functions against NULL.
    
    - Fix resource leak in hotplug thread. The udev_device_unref() was never
    called on event "remove".
    
    - Cleanup HPStopHotPluggables() function, which release now all
    allocated resources, including udev. It also will not crash when in
    HPRegisterForHotplugEvents() was not able to acquire resources.
    
    - Replace the prehistoric select() by poll(), which is faster and
    consumes less memory.
    
    Changlog:
    
    V1 4-Aug-2014
            first release
    V2 5-Aug-2014
            Fix coding style. Optimize HPRemoveDevice()
            Cleanup HPStopHotPluggables()
            Fix a resource leak not calling udev_device_unref() in case of "add" or "remove" event.
    V3 5-Aug-2014
            Fix resource leak in HPStopHotPluggables(), release udev
            Fix error handling in HPRegisterForHotplugEvents() and HPStopHotPluggables()
            Revert unneeded RFRemoveReader() in HPRegisterForHotplugEvents()
    
    - Stefani
    
    Signed-off-by: Stefani Seibold <stefani at seibold.net> "
    
    Thanks to Stefani Seibold for the patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20140804/000093.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6951 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 358 ++++++++++++++++++++++++++------------------------
 1 file changed, 183 insertions(+), 175 deletions(-)

commit 254b9e343522a385ad2af636dfc1956ec67f9cac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 21:01:43 2014 +0000

    Adjust the thread stack size
    
    The size of 4 MB is not needed and too big (see revision 6948).
    By default the thread stack size is:
    - 8 MB on Debian GNU/Linux
    - 256 KB on Mac OS X 10.9
    - 80 KB on musl, but it is not enough for pcsc-lite
    
    256 KB (like on Mac OS X 10.9) is enough for musl.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6950 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit bfc6ce17dfb947da3b32f328e7d7851d96861106
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 14:26:41 2014 +0000

    Factorize error code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6949 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 20 +++++---------------
 1 file changed, 5 insertions(+), 15 deletions(-)

commit cd5a8b1cec23f3231a19f2bd2a12dc8fed2e864f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 14:18:06 2014 +0000

    Increase the thread stack size to at least 4 MB
    
    " Recently I tried to run it on a non-glibc system using musl instead.
    Turns out musl has a default stacksize of 80KB instead of the
    multi-megabyte we are used to in glibc. This leads to segfaults when
    pcscd tries to allocate buffers on the stack. To fix this i applied the
    following patch:
    https://github.com/stef/aports/blob/master/main/pcsc-lite/musl-stacksize.patch
    
    I would be very thankful if you would incorporate this "upstream" so
    that other musl users can happily enjoy pcsc and friends. "
    
    Thanks to Stefan Marsiske for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6948 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)

commit 63dba923c08b2d46a669af30b30547636d4d3e93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 29 08:33:27 2014 +0000

    Add ReiserFS support (and maybe some other strange file systems)
    
    "the attached patch fixes incorrect use of the dirent::d_type field. As
    documented in readdir(3) d_type may be set to DT_UNKNOWN, which
    applications must handle properly.
    
    The effect of the bug is that config files are skipped in case the
    config directory is located on a file system that doesn't support d_type
    (e.g. ReiserFS)."
    
    Thanks to Ingo Weinhold for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6944 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 34 +++++++++++++++++++++++++++-------
 1 file changed, 27 insertions(+), 7 deletions(-)

commit e84f71af281d4a349eadaeab1a3ddb9889d58db7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 13 15:57:38 2014 +0000

    Change return value of IsClientAuthorized()
    
    The version of IsClientAuthorized() when PolicyKit is not used was not
    similar to the other version.
    
    Fixes Debian bug #751517
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6918 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/auth.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0031a6092b28749ff64313b0fdc0df7be98fe2d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 5 09:34:15 2014 +0000

    Check udev functions for errors
    
    Prevent the crash reported at:
    https://bugzilla.redhat.com/show_bug.cgi?id=1071243
    
    Thanks to Nikos Mavrogiannopoulos for the patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20140602/000039.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6911 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit ed2508f319452b52a2511564a8c9e1b8d10569e5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 18 19:12:51 2014 +0000

    Move the GNU GPL v3 license in the project root directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6888 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/GPL-3.0.txt => GPL-3.0.txt | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit 2f3599a3e69b71ab5fd37be3c9719e48807ae395
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 18 19:12:24 2014 +0000

    Some files are under GNU GPL v3+ license
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6887 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING | 6 ++++++
 1 file changed, 6 insertions(+)

commit a0c3349bdc379e7d3402578003c3e182c0d41ba7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 18 19:04:19 2014 +0000

    Replase GNU GPL v2 by GPL v3 license text
    
    Since revision 6003 (2011-10-05) pcsc_demo.c moved from GNU GPL v2+ to
    GNU GPL v3+
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6886 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/GPL-2       | 340 ------------------------
 doc/example/GPL-3.0.txt | 674 ++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 674 insertions(+), 340 deletions(-)

commit 3bba4666b0941c9696dcf191cd926859d9728f9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 26 09:36:01 2014 +0000

    Remove reference about "new MuscleCard" applet
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6861 0ce88b0d-b2fd-0310-8134-9614164e65ea

 NEWS | 5 -----
 1 file changed, 5 deletions(-)

commit 8f71c5f2f17ce3e75af08c62954eabff82a6dbd0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 20 14:02:47 2014 +0000

    Make --disable-polkit
    
    Thanks to Diego Elio Petten√≤ for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6859 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b8a328f5275792032b86fe965a6a4bb561fa7bf1 (tag: 1.8.11)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 14 16:14:37 2014 +0000

    Release 1.8.11
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6853 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 8 ++++++++
 configure.ac | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 8f55bf6f961e8a392644b635770d268202297d25
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 14 15:46:13 2014 +0000

    Replace old linuxnet.com domaine name
    
    Mailing list moved from sclinux@linuxnet.com to
    muscle@lists.musclecard.com
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6852 0ce88b0d-b2fd-0310-8134-9614164e65ea

 HELP | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit bc24ebfd6127063d418429f68ab1e2ce672af9e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 14 15:43:32 2014 +0000

    Replace old linuxnet.com domaine name
    
    web site moved from http://www.linuxnet.com to
    http://pcsclite.alioth.debian.org/pcsclite.html
    
    David email moved tom corcoran@linuxnet.com to corcoran@musclecard.com
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6851 0ce88b0d-b2fd-0310-8134-9614164e65ea

 AUTHORS                       |  2 +-
 COPYING                       |  2 +-
 DRIVERS                       | 10 +++++-----
 README                        |  2 +-
 UnitaryTests/BufferOverflow.c |  2 +-
 doc/example/pcsc_demo.c       |  2 +-
 src/PCSC/debuglog.h           |  4 ++--
 src/PCSC/ifdhandler.h         |  4 ++--
 src/PCSC/pcsclite.h.in        |  4 ++--
 src/PCSC/reader.h             |  4 ++--
 src/PCSC/winscard.h           |  4 ++--
 src/PCSC/wintypes.h           |  4 ++--
 src/atrhandler.c              |  4 ++--
 src/atrhandler.h              |  4 ++--
 src/auth.c                    |  2 +-
 src/auth.h                    |  2 +-
 src/configfile.h              |  4 ++--
 src/configfile.l              |  4 ++--
 src/debug.c                   |  4 ++--
 src/debuglog.c                |  4 ++--
 src/dyn_generic.h             |  4 ++--
 src/dyn_hpux.c                |  4 ++--
 src/dyn_macosx.c              |  4 ++--
 src/dyn_unix.c                |  4 ++--
 src/error.c                   |  4 ++--
 src/eventhandler.c            |  4 ++--
 src/eventhandler.h            |  4 ++--
 src/hotplug.h                 |  4 ++--
 src/hotplug_generic.c         |  4 ++--
 src/hotplug_libudev.c         |  2 +-
 src/hotplug_libusb.c          |  4 ++--
 src/hotplug_linux.c           |  4 ++--
 src/hotplug_macosx.c          |  4 ++--
 src/ifdwrapper.c              |  4 ++--
 src/ifdwrapper.h              |  4 ++--
 src/misc.h                    |  2 +-
 src/parser.h                  |  2 +-
 src/pcscd.h.in                |  2 +-
 src/pcscdaemon.c              |  6 +++---
 src/powermgt_generic.c        |  4 ++--
 src/powermgt_generic.h        |  4 ++--
 src/prothandler.c             |  4 ++--
 src/prothandler.h             |  4 ++--
 src/readerfactory.c           |  4 ++--
 src/readerfactory.h           |  4 ++--
 src/strlcpycat.h              |  2 +-
 src/sys_generic.h             |  4 ++--
 src/sys_unix.c                |  4 ++--
 src/testpcsc.c                |  4 ++--
 src/tokenparser.l             |  4 ++--
 src/utils.c                   |  2 +-
 src/utils.h                   |  2 +-
 src/utils/README              |  2 +-
 src/utils/formaticc.c         |  4 ++--
 src/utils/installifd.c        |  6 +++---
 src/winscard.c                |  4 ++--
 src/winscard_clnt.c           |  4 ++--
 src/winscard_msg.c            |  4 ++--
 src/winscard_msg.h            |  4 ++--
 src/winscard_msg_srv.c        |  4 ++--
 src/winscard_svc.c            |  4 ++--
 src/winscard_svc.h            |  4 ++--
 62 files changed, 114 insertions(+), 114 deletions(-)

commit 320a5e4b1163b027747f3bc20a116f4aaf8d1502
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 14 15:25:52 2014 +0000

    Fix Muscle URL
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6850 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/auth.c | 2 +-
 src/auth.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 230fcfdfe61183361fa72097129ad3e068f90c79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 11 10:49:20 2014 +0000

    Add polkit support
    
    See doc/README.polkit
    
    Thanks to Nikos Mavrogiannopoulos for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2013-q4/0097.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6842 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.ac                    |  25 +++++++
 doc/Makefile.am                 |  14 +++-
 doc/README.polkit               |  39 ++++++++++
 doc/org.debian.pcsc-lite.policy |  30 ++++++++
 src/Makefile.am                 |   6 +-
 src/auth.c                      | 155 ++++++++++++++++++++++++++++++++++++++++
 src/auth.h                      |  35 +++++++++
 src/winscard_svc.c              |  21 ++++++
 8 files changed, 322 insertions(+), 3 deletions(-)

commit 806fb5ad7fca2ef3179c60dc8b539425f2fddc52
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 11 09:45:54 2014 +0000

    SCARD_CONNECT: force a NUL byte to terminate the reader name
    
    The client part may send us anything. So we must enfore the reader name
    is a NUL-byte terminated C-string.
    
    Thanks to Nikos Mavrogiannopoulos for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6841 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 1 +
 1 file changed, 1 insertion(+)

commit 07acaa448b59b7574ed0a17a12340065aadb1e4b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 8 15:28:45 2014 +0000

    Reformat for a better HTML output
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6838 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.pod | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 8618dca79e15940a0a7eee53d73241fe98087dad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 13 15:21:25 2014 +0000

    Include the COPYING file in header of file
    
    It will be easier to know the licence used by a file when used outside
    of pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6822 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h      | 26 ++++++++++++++++++++++++++
 src/PCSC/ifdhandler.h    | 26 ++++++++++++++++++++++++++
 src/PCSC/pcsclite.h.in   | 26 ++++++++++++++++++++++++++
 src/PCSC/reader.h        | 26 ++++++++++++++++++++++++++
 src/PCSC/winscard.h      | 26 ++++++++++++++++++++++++++
 src/PCSC/wintypes.h      | 26 ++++++++++++++++++++++++++
 src/atrhandler.c         | 26 ++++++++++++++++++++++++++
 src/atrhandler.h         | 26 ++++++++++++++++++++++++++
 src/configfile.h         | 26 ++++++++++++++++++++++++++
 src/configfile.l         | 26 ++++++++++++++++++++++++++
 src/debug.c              | 26 ++++++++++++++++++++++++++
 src/debuglog.c           | 26 ++++++++++++++++++++++++++
 src/dyn_generic.h        | 26 ++++++++++++++++++++++++++
 src/dyn_hpux.c           | 26 ++++++++++++++++++++++++++
 src/dyn_macosx.c         | 26 ++++++++++++++++++++++++++
 src/dyn_unix.c           | 26 ++++++++++++++++++++++++++
 src/error.c              | 26 ++++++++++++++++++++++++++
 src/eventhandler.c       | 26 ++++++++++++++++++++++++++
 src/eventhandler.h       | 26 ++++++++++++++++++++++++++
 src/hotplug.h            | 26 ++++++++++++++++++++++++++
 src/hotplug_generic.c    | 26 ++++++++++++++++++++++++++
 src/hotplug_libudev.c    | 26 ++++++++++++++++++++++++++
 src/hotplug_libusb.c     | 26 ++++++++++++++++++++++++++
 src/hotplug_linux.c      | 26 ++++++++++++++++++++++++++
 src/hotplug_macosx.c     | 26 ++++++++++++++++++++++++++
 src/ifdwrapper.c         | 26 ++++++++++++++++++++++++++
 src/ifdwrapper.h         | 26 ++++++++++++++++++++++++++
 src/lassert.h            | 27 +++++++++++++++++++++++++++
 src/misc.h               | 26 ++++++++++++++++++++++++++
 src/parser.h             | 26 ++++++++++++++++++++++++++
 src/pcsc-wirecheck-gen.c | 27 +++++++++++++++++++++++++++
 src/pcscdaemon.c         | 26 ++++++++++++++++++++++++++
 src/powermgt_generic.c   | 26 ++++++++++++++++++++++++++
 src/powermgt_generic.h   | 26 ++++++++++++++++++++++++++
 src/prothandler.c        | 26 ++++++++++++++++++++++++++
 src/prothandler.h        | 26 ++++++++++++++++++++++++++
 src/readerfactory.c      | 26 ++++++++++++++++++++++++++
 src/readerfactory.h      | 26 ++++++++++++++++++++++++++
 src/strlcpycat.h         | 26 ++++++++++++++++++++++++++
 src/sys_generic.h        | 26 ++++++++++++++++++++++++++
 src/sys_unix.c           | 26 ++++++++++++++++++++++++++
 src/testpcsc.c           | 26 ++++++++++++++++++++++++++
 src/tokenparser.l        | 26 ++++++++++++++++++++++++++
 src/utils.c              | 26 ++++++++++++++++++++++++++
 src/utils.h              | 26 ++++++++++++++++++++++++++
 src/utils/formaticc.c    | 26 ++++++++++++++++++++++++++
 src/utils/installifd.c   | 26 ++++++++++++++++++++++++++
 src/winscard.c           | 26 ++++++++++++++++++++++++++
 src/winscard_clnt.c      | 26 ++++++++++++++++++++++++++
 src/winscard_msg.c       | 26 ++++++++++++++++++++++++++
 src/winscard_msg.h       | 26 ++++++++++++++++++++++++++
 src/winscard_msg_srv.c   | 26 ++++++++++++++++++++++++++
 src/winscard_svc.c       | 26 ++++++++++++++++++++++++++
 src/winscard_svc.h       | 26 ++++++++++++++++++++++++++
 54 files changed, 1406 insertions(+)

commit 3e4e237a4277bcbcd9dd5a9780a4d734c20facec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 20 10:19:01 2013 +0000

    SCardListReaders(): fix a memory leak in case of error
    
    Check mszReaders is valid before allocating memory.
    
    Thanks to Ignacio Casal for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2013-q4/0084.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6810 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 96fad202ae6dd98eb77344653f62570f473ff0d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 3 07:58:33 2013 +0000

    Add header directory for sys/types.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6804 0ce88b0d-b2fd-0310-8134-9614164e65ea

 splint.sh | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 556dbcaec42f3cfdc36b1fd0567521ef3eebcee9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 3 07:51:18 2013 +0000

    Remove very old files used to build on Solaris
    
    " Adding make-dirs plus Makefiles for certain configurations when people
    don't want to try and fix autoconf "
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6803 0ce88b0d-b2fd-0310-8134-9614164e65ea

 make-dirs/Makefile.solaris | 24 ------------------------
 make-dirs/README           |  5 -----
 make-dirs/config.h         | 38 --------------------------------------
 3 files changed, 67 deletions(-)

commit 7735095554d83ab630674c96fac7f59985bbda3e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 2 10:37:22 2013 +0000

    Do not log a critical error if symbol IFDHCreateChannelByName is not
    found in a driver.
    
    Drivers using API v2 of IFDHandler (like openct-ifd.bundle) do not
    provide a IFDHCreateChannelByName symbol. A critical error should not be
    logged since it is a normal behavior.
    
    DYN_GetAddress() has a new parameter: mayfail, to indicate if dlsym(3)
    may fail or not.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6802 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_generic.h   | 2 +-
 src/dyn_hpux.c      | 6 ++++--
 src/dyn_macosx.c    | 3 ++-
 src/dyn_unix.c      | 6 ++++--
 src/readerfactory.c | 8 ++++----
 5 files changed, 15 insertions(+), 10 deletions(-)

commit d87d75a1cabcfe9b62d2f1cfe9c8fb51d6f399e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 24 14:04:14 2013 +0000

    CHANNELID and DEVICENAME are both optional but not at the same time
    
    If the driver uses DEVICENAME you can ignore/unset CHANNELID.
    If the driver uses CHANNELID you can ignore/unset DEVICENAME.
    But you shall configure at least one of the two parameters.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6785 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit 9e409c17cee98b335ff81561686486dbff07fea3 (tag: 1.8.10)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 19 16:36:57 2013 +0000

    Release 1.8.10
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6779 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 7 +++++++
 configure.ac | 2 +-
 2 files changed, 8 insertions(+), 1 deletion(-)

commit e8aa17b99013b6836ce32c4500ab762f5f81e46c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 19 16:32:38 2013 +0000

    Fix typo in log message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6778 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c2cf225eb8ec4c1caa5da068aa28cc2db2a15565
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 18 11:55:13 2013 +0000

    Display the reader name, Pid and Vid
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6775 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit c5fa38e97e410597081fb992c95db4f500c9cdf4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 18 11:36:41 2013 +0000

    Update the error message if FEATURE_CCID_ESC_COMMAND is not available
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6773 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ebb1b1bc1d762705d51ea6667fc70c52580c7c09
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 18 11:35:33 2013 +0000

    Add more feature parsing
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6772 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .../FEATURE_CCID_ESC_COMMAND_Gemalto_features.py   | 71 ++++++++++++++++------
 1 file changed, 54 insertions(+), 17 deletions(-)

commit 6535d883c9a360f9cda644bb9663e0229d68fdde
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 17 13:02:41 2013 +0000

    Do not export log_msg() symbol
    
    PCSC_API must be undefined so that log_msg() declaration in
    PCSC/debuglog.h is not external but internal.
    
    Fix alioth bug [#314494] log_msg should NOT be exported by libpscslite.so.1
    https://alioth.debian.org/tracker/index.php?func=detail&aid=314494&group_id=30105&atid=410085
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6771 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 2 ++
 1 file changed, 2 insertions(+)

commit 190ff98475471aebae1ab1cebf2c30ca3ca43c8e (tag: 1.8.9)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 16 14:28:36 2013 +0000

    Release 1.8.9
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6769 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 45 +++++++++++++++++++++++++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 46 insertions(+), 1 deletion(-)

commit 0d8aa0662455356ca664c9a12881fdf9bb4f5794
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 12:57:03 2013 +0000

    Use the COUNT_OF macro
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6759 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c         | 3 ++-
 src/debuglog.c      | 2 +-
 src/hotplug_linux.c | 4 ++--
 3 files changed, 5 insertions(+), 4 deletions(-)

commit 7847b99eccb9e9862a21db8f8744de0ecfa14370
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 1 12:55:58 2013 +0000

    Add COUNT_OF macro
    
    This macro returns the number of elements in an array.
    
    See http://stackoverflow.com/questions/1598773
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6758 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 4 ++++
 1 file changed, 4 insertions(+)

commit 674622d814afc5313644b505c5c4826138cef1d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 12 14:52:08 2013 +0000

    Add support of --reader-name-no-serial and --reader-name-no-interface
    
    It is now possible to NOT add the USB serial number of the reader using
    --reader-name-no-serial
    
    It is now possible to NOT add the CCID interface name of the reader using
    --reader-name-no-interface
    
    See also "What is in a PC/SC reader name?"
    http://ludovicrousseau.blogspot.fr/2010/05/what-is-in-pcsc-reader-name.html
    
    Closes Alioth bug [#314338] Add an option to remove serial number and interface name from the PC/CS reader name
    https://alioth.debian.org/tracker/index.php?func=detail&aid=314338&group_id=30105&atid=410088
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6750 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 15 +++++++--------
 src/hotplug_libusb.c  |  7 +++----
 src/pcscdaemon.c      | 16 +++++++++++++++-
 3 files changed, 25 insertions(+), 13 deletions(-)

commit 5c8ed79c89be2219f48aec9cbbe1481cfe36d748
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 10 18:31:48 2013 +0000

    Unitary test for the correction in revision 6748
    
    SCardEndTransaction() should return SCARD_E_NOT_TRANSACTED if called
    more times than SCardBeginTransaction()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6749 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardEndTransaction_extra_call.py | 60 ++++++++++++++++++++++++++
 1 file changed, 60 insertions(+)

commit ccc1571ed38131a76a328046fc151b636a974b54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 10 18:28:44 2013 +0000

    Return an error if SCardEndTransaction() is called with no corresponding
    SCardBeginTransaction()
    
    This is done in two steps:
    - RFUnlockSharing() returns an error if a reader is unlocked when it was
      not (or no more) previously locked
    - SCardEndTransaction() checks the value returned by RFUnlockSharing()
      and returns an error if RFUnlockSharing() failed
    
    Thanks to Markus Heintel for the initial patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6748 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 9 +++++++--
 src/winscard.c      | 9 ++++++++-
 2 files changed, 15 insertions(+), 3 deletions(-)

commit 2a85b30660648a71ab3cc087a9abb17686062236
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 26 15:08:52 2013 +0000

    Document --max-thread, --max-card-handle-per-thread and --max-card-handle-per-reader
    
    Closes bug [#314308] "Document --max-thread,
    --max-card-handle-per-thread and --max-card-handle-per-reader in
    pcscd(8)"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6744 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit d68ff5d317022a55ab2b639919f273f6292ff76b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 26 14:47:05 2013 +0000

    Document --force-reader-polling
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6743 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 3 +++
 1 file changed, 3 insertions(+)

commit 362fc8da4ed28497b4b121830390fd77a7259f0e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 26 14:46:03 2013 +0000

    Document short options -e, --error and -C, --critical
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6742 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a879c36915e81af6bb33ce191d2fe99107ca01d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 26 14:44:12 2013 +0000

    Add documentation for -T, --color
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6741 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 3 +++
 1 file changed, 3 insertions(+)

commit 2f0f9267455887d1f5cbaeaa357361c2792d4b2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 23 08:19:08 2013 +0000

    Fix a memory leak in case of error
    
    When SCARD_AUTOALLOCATE is used we check the parameter is valid and
    return in case it is not _before_ calling malloc.
    
    Detected by "clang --analyze"
    winscard_clnt.c:1566:9: warning: Potential leak of memory pointed to by 'bufReader'
         rv = SCARD_E_INVALID_PARAMETER;
              ^~~~~~~~~~~~~~~~~~~~~~~~~
    
    winscard_clnt.c:1594:9: warning: Potential leak of memory pointed to by 'bufAtr'
         rv = SCARD_E_INVALID_PARAMETER;
              ^~~~~~~~~~~~~~~~~~~~~~~~~
    
    winscard_clnt.c:3141:9: warning: Potential leak of memory pointed to by 'buf'
          rv = SCARD_E_INVALID_PARAMETER;
               ^~~~~~~~~~~~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6734 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)

commit 8942d6049586f34ace0c1c4cdbf3609fc8e4e597
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 12 13:21:40 2013 +0000

    Display SCardTransmit() error code (if any)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6727 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit d65abf9dabb2cc486b2a77b5194aca88336259f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 12 13:20:22 2013 +0000

    Allow comments starting with #
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6726 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 7647b0ddd97bc6b6a0ecbf132188008a7805e26b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 12 12:53:58 2013 +0000

    Display APDU sent and data received
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6725 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit dc60d45ed65fdce7558a97ed3ede7a39fd9b265d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 12 12:42:01 2013 +0000

    Add more error code management
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6724 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 59 ++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 39 insertions(+), 20 deletions(-)

commit f1831de4f7e740330f0ea78b54578155c29b4d93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 12 09:44:43 2013 +0000

    Mac OS X port
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6723 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 493dc11ecef243aa8ff532986ee9cd9c147ff2f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 7 16:50:19 2013 +0000

    Fix compiler warning
    
    configfile.l: In function ‚Äòevaluatetoken‚Äô:
    configfile.l:186: warning: initialization discards qualifiers from pointer target type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6719 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5e2668ab57230150b70cfed6615d046d7d3489ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 5 19:11:47 2013 +0000

    Fix memory leak
    
    Call yylex_destroy() after the lexer is used.
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6712 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l  | 1 +
 src/tokenparser.l | 1 +
 2 files changed, 2 insertions(+)

commit aef84e2263cf95263e948d269060a4a53e396faf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 5 18:59:56 2013 +0000

    Create and use EHDeinitializeEventStructures(): fix memory leak
    
    The structures allocated in EHInitializeEventStructures() were never
    released.
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6711 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 8 ++++++++
 src/eventhandler.h | 1 +
 src/pcscdaemon.c   | 2 ++
 3 files changed, 11 insertions(+)

commit bf4c5d03168e14bf64db011869c49edc3f3960f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 5 18:53:24 2013 +0000

    SVCServiceRunLoop(): be able to quit earlier
    
    The daemon is now able to quit (test the arakiri flag) even before
    SVCServiceRunLoop() has been called.
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6710 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit 2627ba0ef1a11d6295f4240eeaccb29f85fa582c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 5 18:49:31 2013 +0000

    ContextsDeinitialize(): fix a memory leak
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6709 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 ++
 1 file changed, 2 insertions(+)

commit 4a1412293846dd7219394e05f266f432d4e22347
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 5 18:42:29 2013 +0000

    RFCleanupReaders(): fix a memory leak
    
    Free the ConfigFile C-string if needed
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6708 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit a500a7613786a4b35efbd23c51c593514621913d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 5 18:38:40 2013 +0000

    RFCleanupReaders(): fix a memory leak
    
    The sReadersContexts[i] structure allocated in RFAllocateReaderSpace()
    was never released on exit.
    
    This is not really a problem unless you embedd pcscd in another process
    and do init/deinit pcscd without exiting the process (as maybe used on
    Android or iOS).
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6707 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit e0d558cf16ca8f5ceed9f0e04dcf897b01303044
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 1 09:25:47 2013 +0000

    Fix memory leaks
    
    Free the malloc-ed strings.
    
    The strings are only allocated _once_ when the config files in
    /etc/reader.conf.d/ are parsed. This is not really a problem unless you
    embedd pcscd in another process and do init/deinit pcscd without exiting
    the process (as maybe used on Android or iOS).
    
    Thanks to Alan Kozlay for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6703 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit d04cc74a995caca7aec979d35338103ed13be233
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 31 17:16:54 2013 +0000

    Fix compiler warnings
    
    pcscdaemon.c: In function ‚Äòmain‚Äô:
    pcscdaemon.c:547:12: attention : declaration of ‚Äòr‚Äô shadows a previous local [-Wshadow]
    pcscdaemon.c:152:6: attention : shadowed declaration is here [-Wshadow]
    pcscdaemon.c:637:11: attention : declaration of ‚Äòr‚Äô shadows a previous local [-Wshadow]
    pcscdaemon.c:152:6: attention : shadowed declaration is here [-Wshadow]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6702 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 5994b622fb098001c461b241b6ead068b83fc513
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 13:10:21 2013 +0000

    Fix compiler warning
    
    atrhandler.c: In function ‚ÄòATRDecodeAtr‚Äô:
    atrhandler.c:88:19: warning: variable ‚ÄòTCi‚Äô set but not used [-Wunused-but-set-variable]
    atrhandler.c:88:14: warning: variable ‚ÄòTBi‚Äô set but not used [-Wunused-but-set-variable]
    
    We don't use TBi and TCi but we must calculate them because of the p++
    in the formulae.
    
    See revision 5808 to know why these values are important.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6701 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 5 +++++
 1 file changed, 5 insertions(+)

commit b61e1310a78c85ebf7a3df8a03fb769426f141e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 13:05:52 2013 +0000

    Check returned value of fgets(3)
    
    Fix compiler warning:
    testpcsc.c: In function ‚Äòmain‚Äô:
    testpcsc.c:190:4: warning: ignoring return value of ‚Äòfgets‚Äô, declared with attribute warn_unused_result [-Wunused-result]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6700 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 67a10b34222803be09db782d7fca7a3f3f72cf56
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 13:02:54 2013 +0000

    Check returned value of write(2) on synchronization socket
    
    Fix compiler warnings:
    pcscdaemon.c: In function ‚Äòmain‚Äô:
    pcscdaemon.c:639:3: warning: ignoring return value of ‚Äòwrite‚Äô, declared with attribute warn_unused_result [-Wunused-result]
    pcscdaemon.c: In function ‚Äòat_exit‚Äô:
    pcscdaemon.c:661:3: warning: ignoring return value of ‚Äòwrite‚Äô, declared with attribute warn_unused_result [-Wunused-result]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6699 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit 6ac5603fe8d054fb8f4c8f2cfb7759178a88d9a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 12:59:14 2013 +0000

    Check returned value from chdir(2)
    
    Fix compiler warning:
    pcscdaemon.c: In function ‚Äòmain‚Äô:
    pcscdaemon.c:401:2: warning: ignoring return value of ‚Äòchdir‚Äô, declared with attribute warn_unused_result [-Wunused-result]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6698 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit e23fbed33a1183c50d11c6598ab550a000a563e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 12:56:20 2013 +0000

    Add the terminating \0 in pcscd.pid file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6697 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5c5a2fa152bdfc8e135e5d2c45a2aac4b6eb6b25
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 12:55:15 2013 +0000

    Check read(2) and write(2) returned value for pcscd.pid file
    
    Fix compiler warnings:
    utils.c: In function `GetDaemonPid':
    utils.c:45:3: warning: ignoring return value of `read', declared with attribute warn_unused_result [-Wunused-result]
    pcscdaemon.c: In function ‚Äòmain‚Äô:
    pcscdaemon.c:543:4: warning: ignoring return value of ‚Äòwrite‚Äô, declared with attribute warn_unused_result [-Wunused-result]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6696 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c |  9 ++++++++-
 src/utils.c      | 12 ++++++++++--
 2 files changed, 18 insertions(+), 3 deletions(-)

commit 6e955580e0ac7953a1642352d855e484bd940733
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 12:41:23 2013 +0000

    Ignore the write(2) returned value
    
    Using (void)write(...) is not enough to fool the compiler. I still get:
    libpcscspy.c: In function `spy_line':
    libpcscspy.c:200:2: warning: ignoring return value of `write', declared with attribute warn_unused_result [-Wunused-result]
    libpcscspy.c:201:2: warning: ignoring return value of `write', declared with attribute warn_unused_result [-Wunused-result]
    libpcscspy.c:202:2: warning: ignoring return value of `write', declared with attribute warn_unused_result [-Wunused-result]
    libpcscspy.c: In function `spy_line_direct':
    libpcscspy.c:173:2: warning: ignoring return value of `write', declared with attribute warn_unused_result [-Wunused-result]
    libpcscspy.c:174:2: warning: ignoring return value of `write', declared with attribute warn_unused_result [-Wunused-result]
    libpcscspy.c:175:2: warning: ignoring return value of `write', declared with attribute warn_unused_result [-Wunused-result]
    
    The new code now uses:
    ssize_t r;
    r = write(...)
    (void)r;
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6695 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)

commit b31cd11442865f7615e09dec49b7835e9ea86661
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 12:36:46 2013 +0000

    Update Copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6694 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b4d935a73e84b899dbf63bc97bca0c50c9b84f5b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 1 08:34:26 2013 +0000

    Do not use pthread_atfork() any more
    
    pthread_atfork() was used to invalidate all the handles after a fork.
    The problem is that the handler function was still called after the
    libpcsclite library was unloaded on FreeBSD. This caused a crash of the
    application.
    
    The invalidation of the handles is not mandatory. After a fork the
    application may still use the PC/SC handles and may get a
    SCARD_F_COMM_ERROR error if the handle has been closed and in the pcscd logs:
    winscard_svc.c:908:MSGCheckHandleAssociation() Client failed to authenticate
    
    Closes Alioth bug [#314078] Do not use pthread_atfork() in a library
    https://alioth.debian.org/tracker/index.php?func=detail&aid=314078&group_id=30105&atid=410085
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6680 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 30 ------------------------------
 1 file changed, 30 deletions(-)

commit 2699ee0375239d05058fe4f30c8d62a1734f1df0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 27 21:11:43 2013 +0000

    Fix compiler warning
    
    hotplug_macosx.c:298: warning: format ‚Äò%s‚Äô expects type ‚Äòchar *‚Äô, but
    argument 6 has type ‚Äòstruct HPDriver *‚Äô
    hotplug_macosx.c:298: warning: too many arguments for format
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6671 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6c53462964cca9015d198a421930c8ae045f7b44
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 27 21:07:42 2013 +0000

    List found USB devices (when in debug mode)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6670 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit d7ba6bc80452643f065362faefef6a1127938018
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 25 13:18:22 2013 +0000

    Fix copy-paster in log message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6669 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCard_fork.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 131c5abe84687063499f1265037892a29a6f2775
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 25 12:23:21 2013 +0000

    RFAddReader(): correctly manage thread safe multi-slot readers
    
    If the driver declares it is TAG_IFD_SLOT_THREAD_SAFE then pcscd can
    access each slots simultanously.
    
    In this case some data must be duplicated at RFAddReader() step since
    they will be destroyed at the removeReader() step.
    
    Thanks to Frank Morgner for the bug report
    Closes Alioth bug [#314315] "double free corruption when unloading serial
    driver with multiple slots"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6668 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit a56039dc0ec76503b2e7aaa67789c6b4a44e5610
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 18 08:56:16 2013 +0000

    Add support of serialconfdir pkg-config variable
    
    It is now possible to use pkg-config to get the directory used by pcscd
    to fetch serial drivers configurations.
    
    $ pkg-config libpcsclite --variable=serialconfdir
    /etc/reader.conf.d
    
    Closes alioth bug [#314300] Add pkg-config confdir option
    Thanks to Frank Morgner for the idea
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6663 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.ac          | 2 ++
 src/libpcsclite.pc.in | 1 +
 2 files changed, 3 insertions(+)

commit 7d4e8c4a7d2abffe1a9800bc38653e681001e34f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 10 12:28:42 2013 +0000

    SCardGetAttrib(): Add support of SCARD_ATTR_DEVICE_SYSTEM_NAME
    
    Thanks to Rafael Ugalde Beriain
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6654 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit db605205152489205a0bb3a63abc9a96f276c4d7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 10 12:21:32 2013 +0000

    SCardGetAttrib(): Fix bug in SCARD_ATTR_DEVICE_FRIENDLY_NAME
    
    Affect the real length _after_ checking the buffer is large enough.
    
    Thanks to Rafael Ugalde Beriain for the bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6653 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 330178c65eaa4455a335798a88bab4ebca20aba6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 6 17:10:50 2013 +0000

    Fix PEP8 warnings
    
    E128 continuation line under-indented for visual indent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6649 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 98 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 49 insertions(+), 49 deletions(-)

commit a6313f39fe1fc5fc1e082950d34bcb819a344ca9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 6 16:56:47 2013 +0000

    Fix PEP8 warning
    
    pcsc-spy:34:13: E128 continuation line under-indented for visual indent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6648 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit da09e5d30dc6ec4689d5e7cef40ffd8ee652cccf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 6 16:55:22 2013 +0000

    Add SCARD_ATTR_DEVICE_SYSTEM_NAME
    
    Add _A and _W versions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6647 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit a6b8e6e4fe98b96a5318ac21c99378fc1a700b44
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 30 11:21:05 2013 +0000

    Unlock the mutex if hCard has been invalidated by SCardDisconnect()
    
    SCardBeginTransaction() was not correctly releasing a mutex when the
    hCard handle was invalidated.
    The problem is that hCard can be invalidated by:
    - SCardReleaseContext and all the context is invalid
    - SCardDisconnect and only the hCard is invalid, not the mutex
    
    The problem was that SCardGetStatusChange() was blocked because
    SCardBeginTransaction() had not released the context mutex.
    
    Thanks to Fredrik Axelsson for the bug report
    https://bugzilla.redhat.com/show_bug.cgi?id=956530
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6639 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 94 +++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 70 insertions(+), 24 deletions(-)

commit f252b3e0e4cb6416ae381a189ed8e2cc5d95aa88
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 28 08:20:15 2013 +0000

    Use C99 flexible array member
    
    The structures PIN_MODIFY_STRUCTURE and PIN_VERIFY_STRUCTURE now use a
    C99 flexible array member when available for abData field.
    
    uint8_t abData[];
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6638 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 0cbd25736fcc90fed6d6389d9977a36cf4028247
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 27 13:47:37 2013 +0000

    mMutex is now directly inside the _psContextMap structure and no more a pointer
    
    The mutex was dynamically allocated at runtime using malloc(3) and
    referenced using a pointer. This was introduced in revision 572 (Dec
    2003) by Damien Sauveron.
    
    Using a direct pthread_mutex_t structure will save memory (one pointer
    removed per context), improve performances (one malloc/free removed) and
    make the code safer (one malloc failure removed).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6637 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 78 +++++++++++++++++++++++------------------------------
 1 file changed, 34 insertions(+), 44 deletions(-)

commit b13d3c9db6b14d496170d43f70f43afb456e81df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 8 11:51:09 2013 +0000

    Explicitely ignore write() return value
    
    pcscdaemon.c:626:3: warning: ignoring return value of function declared with warn_unused_result attribute [-Wunused-result]
                    write(pipefd[1], &buf, 1);
                    ^~~~~ ~~~~~~~~~~~~~~~~~~
    pcscdaemon.c:648:3: warning: ignoring return value of function declared with warn_unused_result attribute [-Wunused-result]
                    write(pipefd[1], &buf, 1);
                    ^~~~~ ~~~~~~~~~~~~~~~~~~
    2 warnings generated.
    
    We don't have much to do if write() on the interprocess pipe fails.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6625 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit eeefadc062f0f936bebc583f830328dd9cc8423a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 5 13:18:00 2013 +0000

    Fix a memory leak in case of error
    
    Coverity: leaked_storage: Variable "hpDir" going out of scope leaks the storage it points to.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6621 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 1 +
 1 file changed, 1 insertion(+)

commit 4b3a0af859890e25bcd0ef259fe00a43047fd8c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 29 19:42:28 2013 +0000

    Try to display the thread in the order they appear in the log
    
    The idea is to schedule another thread when a thread change is detected
    in the log. Then the other threads should have time to empty their
    queues and display what they have to display.
    The order is then respected between the logs recorded and the logs
    displayed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6582 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 18bc7dd2f7a466e1627e0d99e27202ceea582ba3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 29 16:44:47 2013 +0000

    Check the first line format
    
    This could happen if the trace file first lines are removed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6581 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 325c595f017fce9cac1f1fea0a6e59292029901f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 29 10:08:37 2013 +0000

    Do not explicitly include the .in files in Makefile.am
    
    These files are automatically included.
    
    Thanks to Anthony Foiani for the patch
    http://sourceforge.net/mailarchive/message.php?msg_id=30653233
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6580 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 --
 1 file changed, 2 deletions(-)

commit 2c7ef49153bdc7a47730b525679e62d353c1a78c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 29 09:58:04 2013 +0000

    Use $(srcdir) to locate pcsc-spy.pod
    
    Without the patch it is not possible to build pcsc-lite out of the
    source tree like:
    
    mkdir build
    cd build
    ../configure
    make
    
    Thanks to Anthony Foiani for the bug report
    http://sourceforge.net/mailarchive/message.php?msg_id=30653233
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6579 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b79d51e3fb011514a441d2cfddaf4c294dff22d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 16 17:19:47 2013 +0000

    $^ not supported on FreeBSD make
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6574 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5a82978c2ce7849e97947fa50e4695eab70dd70b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 16 14:32:24 2013 +0000

    Do not use GNU make extension
    
    src/spy/Makefile.am:11: `%'-style pattern rules are a GNU make extension
    
    Thanks to Martin Paljak for the patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20130311/000016.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6573 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d3d4e513f831b29f649ec24c9133feda615872d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 16 14:29:49 2013 +0000

    Fix OpenBSD 5.2 compilation regarding dlopen
    
    1) dlopen search in configure.ac, as guided in [1]. Removes this
    warning:
    * Warning: linker path does not have real file for library -ldl.
    * I have the capability to make that library automatically link in when
    * you link to this library.  But I can only do this if you have a
    * shared version of the library, which you do not appear to have
    * because I did check the linker path looking for a file starting
    * with libdl but no candidates were found. (...for regex pattern test)
    * The inter-library dependencies that have been dropped here will be
    * automatically added whenever a program is linked with this library
    * or is declared to -dlopen it.
    
    [1] http://www.flameeyes.eu/autotools-mythbuster/autoconf/finding.html
    
    Thanks to Martin Paljak for the patch
    http://lists.alioth.debian.org/pipermail/pcsclite-muscle/Week-of-Mon-20130311/000016.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6572 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.ac        | 5 +++--
 src/Makefile.am     | 2 +-
 src/spy/Makefile.am | 1 -
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 287b5a89e9b0dd5d8ade9be1344a529f3dcf28b4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 14:12:49 2013 +0000

    cppcheck: Variable 'rv' is reassigned a value before the old one has
    been used.
    
    This is a (minor) performance issue. I guess the compiler can optimize
    the code as needed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6558 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit c9dfe6ec2e5c17990c694ffa5b9fdd00a15fcbb4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 14:10:20 2013 +0000

    cppcheck: The scope of the variable 'fullname' can be reduced.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6557 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b0046513e832f2974b9333c7f38c522ccdff7fc8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 14:09:42 2013 +0000

    cppcheck: The scope of the variable 'serialNumber' can be reduced.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6556 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit abb393e26eb736bbaf584e170a378299950cccf8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 14:09:16 2013 +0000

    cppcheck: The scope of the variable 'lrv' can be reduced.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6555 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit f972106fbe32d7bd31ddbdaef70b5a654ec18440
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 13:55:26 2013 +0000

    cppcheck: Resource leak: fp
    
    Same problem with FILE descriptor fo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6554 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 2 ++
 1 file changed, 2 insertions(+)

commit dbd1c81bbc21a8b1cd7b6ab825d8027f26861ba0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 13:52:59 2013 +0000

    cppcheck: Variable 'readerState' is assigned a value that is never used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6553 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit 71d20234720d7416ea9aedcc83e79d1ea1aa5b7d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 13:49:59 2013 +0000

    cppcheck: Unused variable: dwAtrLen
    
    dwAtrLen is used only if DISABLE_AUTO_POWER_ON is not set (default case)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6552 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 ++
 1 file changed, 2 insertions(+)

commit 1c0c744d633bf5ed77a37e277225a4bb5d8bbcc2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 13:44:17 2013 +0000

    cppcheck: The scope of the variable 'terms' can be reduced.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6551 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c    | 2 +-
 src/debuglog.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 165f90e94644aa1b2535eae3296ab3ba22468343
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 6 13:32:21 2013 +0000

    cppcheck: The scope of the variable 'i' can be reduced.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6550 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/BufferOverflow.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 23adb12513585b98ba1ddc93d520123bb5c61a2c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 4 13:15:44 2013 +0000

    Update PROTOCOL_VERSION_MINOR from 2 to 3
    
    We broke the API between version 1.8.3 and 1.8.4 by changing the value
    of MAX_READERNAME.
    
    This change should have been made before releasing version 1.8.4 to make
    mix of versions clearly non working instead of failing with strange
    errors.
    
    This may be the source of the bug reported at
    http://archives.neohapsis.com/archives/dev/muscle/2012-q3/0065.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6549 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 59d93125533ead6679cb023709c18c4cd77abfe2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 19 10:41:20 2013 +0000

    Remove duplicated line found by scan-build(1)
    
    Assigned value is always the same as the existing value
    
    The same line is also present in the case (rv == SCARD_S_SUCCESS)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6536 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 1 -
 1 file changed, 1 deletion(-)

commit 82e38701e585b5731671c35373bf946136d7aa55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 19 10:34:02 2013 +0000

    Fix a bug reported by scan-build(1)
    
    Value stored to 'retval' is never read
    
    An else statement was missing
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6535 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 8d94d1f453057c7c3043bbe1fcf02856cefe3d4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 19 10:30:32 2013 +0000

    Initialize iList[] to fix a error reported by scan-build(1)
    
    scan-build(1) from clang reported a problem that iList[iReader] migth be
    used uninitialized.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6534 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0e9fffba6defc6a369d3d0d968162bf5f05133e3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 13 16:47:47 2013 +0000

    Add some debug logs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6527 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCard_fork.py | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit d334bf0bbcf5e141fc121371d462481885bbe7ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 28 15:58:47 2013 +0000

    Check the Info.plist file is (a minimum) correct
    
    The number of products, manufacturers and reader names should be the
    same. Otherwise the Info.plist file is corrupted and bad things may
    happen, like a crash of pcscd.
    
    Thanks to Nikita Bige for the bug report
    https://bugzilla.redhat.com/show_bug.cgi?id=904932
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6519 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 90c56c256aed6214f5563860e90809a9bbae81b4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 21 10:54:41 2013 +0000

    Explicitly ignore the result of write(2)
    
    Even if write(2) fails the show must go on. The spy log may get
    corrupted but we can't do much better.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6511 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 38efc7204e71c5aa1ececb5af610008ffdae0e3b (tag: 1.8.8)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 16 14:51:12 2013 +0000

    Release 1.8.8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6505 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 5 +++++
 configure.ac | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 1f9311dc4f0becbc071f938458a14307758dfc94
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 16 14:22:26 2013 +0000

    Convert all the &amp; in &, not just the first occurence
    
    Reader names may use more than one "&" character.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6504 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit ef1defbc04d88a039c80b8404577a1fd410de002
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 16 14:00:25 2013 +0000

    Correctly terminate reader names containing a & sign
    
    The & is a &amp; in the Info.plist XML file and converted back to & by
    the Lexer. Unfortunately the string was not correctly terminated and the
    4 last characters of the reader name were duplicated.
    
    Thanks to Philippe Teuwen for the bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6503 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 ++
 1 file changed, 2 insertions(+)

commit a8d3938ed4fd70fea720083afa9e46de15b1857b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 19:30:07 2013 +0000

    Fix a typo in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6502 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5690441d062e6a45fa520b3bc2c31b72f99cd798
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 19:28:04 2013 +0000

    Correctly calculate the FRIENDLYNAME field string size
    
    If the FRIENDLYNAME field is NOT delimited by " then the string length
    was wrong and a buffer overflow occured.
    
    Thanks to Alan Kozlay for the bug report and patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6501 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d82e703ad2f5f1fba291de910fc8cff227e07328
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 17:42:13 2013 +0000

    Move the variable declaration near there use site
    
    Also
    - change the type from int to size_t for strlen() results
    - initialize the values in the for() loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6500 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit a34bd69e5ae45cc65722d181126661ca31e6fe5e (tag: 1.8.7)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 28 17:41:48 2012 +0000

    Release 1.8.7
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6490 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 5 +++++
 configure.ac | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 81b430104e805a7f74ce2b71a261caff411ff03b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 28 17:23:40 2012 +0000

    Fix typos
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6489 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 0a228a44486186a6e50888836591418932b5d49c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 22 09:26:17 2012 +0000

    Ignore some new files
    
    svn propedit svn:ignore  .
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6477 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 2006c826f410f0e6aeafc3fcc2f1dbe8f55a1ac9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 22 09:20:17 2012 +0000

    Ignore some new files
    
    svn propedit svn:ignore  .
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6476 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 37a42fc6bdb819bac8b4f8210e24a1e44aab2fb9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 4 16:04:23 2012 +0000

    Rename configure.in in configure.ac
    
    aclocal: warning: autoconf input should be named 'configure.ac', not 'configure.in'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6468 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in => configure.ac | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit 9ed7b00036c41189e93594b2286118977974dafb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 13 17:16:41 2012 +0000

    FCreateReaderHandle(): unref a reader when needed
    
    We should call UNREF_READER() only if RFReaderInfoById() returned with
    success. Fix a bug introduced in revision 6459.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6463 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit ea9524b270c5e62ce94035ca2be8aaf8d200ddc6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 13 17:11:32 2012 +0000

    MSGRemoveContext(): Unref the reader
    
    RFReaderInfoById() is called and implicitely increase the reader
    reference count. So we shall call UNREF_READER() before exiting.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6462 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 ++
 1 file changed, 2 insertions(+)

commit 940368372e1148370e1976f5b3171ef1210d592d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 13 17:08:37 2012 +0000

    RFCreateReaderHandle(): reorganize code
    
    Move a variable declaration to the inner block using the variable.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6461 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit ee8fe306217e1c854584b6ebf63de1b1fc762c7d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 13 16:39:12 2012 +0000

    Remove extra ;
    
    UNREF_READER() is a { } block in a macro
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6460 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 36948c3ef09dc20c3b228d30cd73250dc27250f3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 13 16:30:56 2012 +0000

    RFCreateReaderHandle(): Unref the reader is the handle is already used
    
    The function RFCreateReaderHandle() checks if a handle is already used
    by calling RFReaderInfoById() to find the associated reader.
    
    So if RFReaderInfoById() returns with success then the handle is valid
    and can't be used. A new random handle must be generated.
    
    But since RFReaderInfoById() called REF_READER() internally we must call
    UNREF_READER() to decrement the reference counter.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6459 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 24a3c0e2c024da7218901b91434defe13dcd7237
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 13 15:35:12 2012 +0000

    Make hLockId field volatile
    
    The ReaderContext structure is accessed from different pcscd threads. To
    prevent the compiler to optimise read access to the hLockId field we
    make it volatile.
    
    That may be the source of a problem when a reader is removed but pcscd
    do not behave correctly.
    
    Thanks to Torsten Hilbrich for the idea.
    http://archives.neohapsis.com/archives/dev/muscle/2012-q3/0086.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6458 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 999e10a7a93705fb803257ca73218d83ea872bf3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 30 16:55:11 2012 +0000

    USe ax_pthread.m4 instead of acx_pthread.m4
    
    Fix "autoreconf -vis -Wall" warnings:
    configure.in:75: warning: The macro `AC_LANG_SAVE' is obsolete.
    configure.in:75: You should run autoupdate.
    ../../lib/autoconf/lang.m4:128: AC_LANG_SAVE is expanded from...
    m4/acx_pthread.m4:275: ACX_PTHREAD is expanded from...
    configure.in:75: the top level
    configure.in:75: warning: The macro `AC_LANG_C' is obsolete.
    configure.in:75: You should run autoupdate.
    ../../lib/autoconf/c.m4:72: AC_LANG_C is expanded from...
    m4/acx_pthread.m4:275: ACX_PTHREAD is expanded from...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6451 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am                          |   2 +-
 configure.in                         |   5 +-
 m4/{acx_pthread.m4 => ax_pthread.m4} | 142 ++++++++++++++++++++++-------------
 3 files changed, 91 insertions(+), 58 deletions(-)

commit c7c140d327adf07ab477eedd2fee38781bce35e5 (tag: 1.8.6)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 30 16:25:19 2012 +0000

    Release 1.8.6
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6450 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 11 +++++++++++
 configure.in |  2 +-
 2 files changed, 12 insertions(+), 1 deletion(-)

commit 9c5417d366fc019822e998ff235a2218d268d1fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 15:39:52 2012 +0000

    RFCreateReaderHandle(): fix compiler warning
    
    readerfactory.c: In function ‚ÄòRFCreateReaderHandle‚Äô:
    readerfactory.c:1054: warning: unused parameter ‚ÄòrContext‚Äô
    
    Maybe the rContext will be used one day.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6447 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit 23c972296eead14d4f9d07a4d447b2d8fa3e56ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 09:07:18 2012 +0000

    Fix redirection of stdin, stdout and stderr to /dev/null
    
    The file descriptors for stdin, stdout and stderr were closed so any
    library (like libusb) sending debug log to stderr was confusing pcscd
    since file descriptor 2 (ex stderr) was re-used for something else.
    
    Now the file descriptor 3 is really redirected to /dev/null
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6446 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)

commit ddf0200af5d7b3c06d740ac28ad391149d5d7731
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 08:27:10 2012 +0000

    Increase DEBUG_BUF_SIZE to avoid log lines truncations
    
    Increase the value from 160 to 2048. Some "long" log lines where
    truncated.
    
    Example:
    Aug 24 10:22:39 neo pcscd: readerfactory.c:978:RFInitializeReader() Attempting startup of Gemalto PC Twin Reader (70D7E2EE) 00 00 using /usr/lib/pcsc/drivers/ifd-ccid.bundle/Contents/Lin
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6445 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a2226fbc24663a15e7e2514406552c310da99180
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 08:10:23 2012 +0000

    Remove useless parenthesis
    
    Replace the constructions &(structure->field) by &structure->field since
    that is equivalent.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6444 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 24 ++++++++++++------------
 src/winscard_clnt.c | 20 ++++++++++----------
 src/winscard_svc.c  | 32 ++++++++++++++++----------------
 3 files changed, 38 insertions(+), 38 deletions(-)

commit 4e090dac0b61dd5e8777208aff133fd4c0aa6317
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 07:59:57 2012 +0000

    MSGAddHandle(): Add mutex lock/unlock around cardsList list
    
    A lock/unlock pair of mutex was missing.
    
    Thanks to Dmitry Torokhov <dtor@vmware.com> for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6443 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 28 +++++++++++++++++-----------
 1 file changed, 17 insertions(+), 11 deletions(-)

commit bc4480b922a9e56b4011463956d33626d66f6573
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 07:51:14 2012 +0000

    CreateContextThread(): Use only one lock/unlock pair
    
    It is quite often useless to lock a resource, perform calculation,
    unlock the resource and then act conditionally upon the result of the
    calculation, because as soon as shared resource is unlocked the
    condition may change and the previous calculation will become obsolete.
    
    Signed-off-by: Dmitry Torokhov <dtor@vmware.com>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6442 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 38 ++++++++++++++++++++------------------
 1 file changed, 20 insertions(+), 18 deletions(-)

commit 40683150c79dba200173d1e42fe53f8213314df1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 24 07:42:05 2012 +0000

    ClientSetupSession(): use fcntl() to make the socket non blocking
    
    ioctl(fd, FIONBIO. ...) is not the standard way of marking sockets and
    other objects nonblocking, fcntl(fd, F_SETFL, flags | O_NONBLOCK) is.
    
    Signed-off-by: Dmitry Torokhov <dtor@vmware.com>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6441 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

commit e434d7786a94395db0756d7c63c81c3724877fd9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 23 08:57:48 2012 +0000

    Integrate m4/Makefile.am into Makefile.am
    
    The idea is to remove a Makefile files to speed up compilation.
    
    Thanks to Diego Elio Petten√≤ for the idea.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6440 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am    | 6 ++++--
 configure.in   | 1 -
 m4/Makefile.am | 3 ---
 3 files changed, 4 insertions(+), 6 deletions(-)

commit 2c5d7244e46e8d6b6fd2a1d16178a694c5a15a29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 23 08:50:12 2012 +0000

    Reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6439 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 4ed67175780944d4379f20ddfb64dbfb83c9dfeb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 13 13:11:45 2012 +0000

    opensc-tool is not a good example
    
    opensc-tool is no more linked to libpcsclite.so.1. Use pcsc_scan as an
    example instead.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6434 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.pod | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9cd87e6d9b4c9629a46c43a5fa65fd7b1e579e5a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 12 14:37:21 2012 +0000

    Script to uppload the Doxygen doc on the web server
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6430 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/update.sh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit a42d189d00ee10cc37515fd7745926067720cf44
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 8 21:11:09 2012 +0000

    Add -I$(top_builddir)/src/PCSC to find the generated pcsclite.h
    
    Thanks to Dmitry Torokhov for the bug report and patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6419 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 17c252196d65ab5fc8201163c6ba39277b5929d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 8 09:35:45 2012 +0000

    Doxygen: fix warning: missing title after \defgroup API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6414 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6a85bc967ebba982758349d785ace1996c252942
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 8 09:35:18 2012 +0000

    Doxygen: fix warning: missing title after \defgroup IFDHandler
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6413 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fd2b3712c513fb231959fd256308aa1e1a6d8c0d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 8 09:31:00 2012 +0000

    Make doxygen quiet to only have warnings and errors
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6412 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2cf20c95d37950be34a489a2c046be2478c9c2e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 5 07:57:53 2012 +0000

    Exit if no hotplug (USB) drivers are found _and_ serial drivers are not
    in use
    
    If only a serial driver is used and not drivers are present in
    PCSCLITE_HP_DROPDIR then pcscd exited after logging:
    hotplug_libudev.c:96:HPReadBundleValues() Cannot open PC/SC drivers
    directory: /usr/lib64/readers/usb
    
    pcscd will now exit only if USE_SERIAL is not defined.
    
    Thanks to Oliver Schinagl for the bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6402 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 ++
 1 file changed, 2 insertions(+)

commit 1694ebff70f596242f2e20e3e3bceeb6efa2ebee (tag: 1.8.5)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Aug 4 13:48:06 2012 +0000

    Release 1.8.5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6401 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 9 +++++++++
 configure.in | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit c2378b711986143cd384bdb1e8a13dbc02dd7be9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Aug 4 10:43:33 2012 +0000

    Doxygen: Fix dwControlCode code
    
    Thanks to Marcin Cieslak for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6400 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 88e5a17f64324d5f850621a7d1c1eff160e6d9cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 2 14:23:26 2012 +0000

    Merge RFReaderInfoNamePort() into RFRemoveReader() since that is the
    only user.
    Also improve RFRemoveReader() to remove all the slots of a reader.
    
    Closes [#313708] Multi-slot support is broken
    https://alioth.debian.org/tracker/index.php?func=detail&aid=313708&group_id=30105&atid=410085
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6397 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 59 +++++++++++++++--------------------------------------
 src/readerfactory.h |  1 -
 2 files changed, 17 insertions(+), 43 deletions(-)

commit 2aa3a93ce416bb72b87d8a87ddbf08a1d47d20ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 26 18:44:54 2012 +0000

    Fix typo in log message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6391 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 src/winscard.c     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 65d6311283c3b04793c7475af7a998261966b820
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 5 14:44:13 2012 +0000

    REF_READER/UNREF_READER: Change log level from CRITICAL to DEBUG
    
    No need to use the PCSC_LOG_CRITICAL level on a production system.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6389 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit dae719ecac8dfb893ae094283f9351ad031a2c3b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 5 14:14:16 2012 +0000

    Add a reader reference count to be used as a Garbage Collector
    
    A reader should be removed only when no one is using it, not just when
    the reader is unplugged.
    
    An application may be in the middle of using the reader when the reader
    is unplugged. If the reader is removed right when unplugged then pcscd
    may use a no more existing reader structure and crash.
    
    Thanks to Martin Vogt for the bug report.
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0041.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6388 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 62 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/readerfactory.h |  8 +++++++
 src/winscard.c      | 20 +++++++++++++++++
 3 files changed, 90 insertions(+)

commit 07f06fb554c8f4668d97129d3f260f22e4b420cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 3 15:04:28 2012 +0000

    RFRemoveReader(): only remove one reader
    
    We should not need to loop over every matching reader and remove them
    all. Or I am missing something.
    
    This code is present since the first version of RFRemoveReader() back in
    2002.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6386 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d14fc21a04dbbcc502ac424abe906acd53570e8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jul 1 19:12:33 2012 +0000

    SCardBeginTransaction(): remove an extra line
    
    The loop could be an infinite loop in case rv == SCARD_E_SHARING_VIOLATION
    but we get out of the for (;;) loop exactly when rv !=
    SCARD_E_SHARING_VIOLATION
    
    The bug was introduced in revision 6358.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6385 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit 861d3ab8b8c52bc36bc99979b6fea0725023f69e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jul 1 19:00:06 2012 +0000

    RFAddReader(): fix a off-by-one bug
    
    strlen() returnd the number of characters without the final NUL byte.
    
    The bugs was introduced in revision 6354.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6384 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c06e8c8d354a0b018e1bf4e1aabeaea168318abe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jul 1 16:11:52 2012 +0000

    Fix a TOCTOU problem
    
    Do not check for PCSCLITE_IPC_DIR presence before creating it. Just
    create it and manage the case it already existed.
    
    Coverity: Time of check time of use (TOCTOU)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6383 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit ac1c5c7896ffe4d720e61ad5b405d1deff16072d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jul 1 16:01:49 2012 +0000

    spy_line(): move the call to va_end(args); earlier
    
    In case the buffer is too small we exit the function without calling
    va_end().
    
    Coverity: Missing varargs init or cleanup (VARARGS)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6382 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6ffc96f1cfd372708936284ca1f353281acffe10
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 14:18:31 2012 +0000

    HPAddDevice(): check udev_device_get_sysattr_value() is not NULL
    
    The value returned by udev_device_get_sysattr_value(dev,
    "bInterfaceNumber") may be NULL (maybe the reader has been removed just
    after been inserted). And atoi() do not like to work on NULL.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6380 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 500c0f4d7140cc11dc39002a0ee75486af62d5ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 12:11:07 2012 +0000

    Fix comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6379 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c8fb2dab0a4586b00e4903241865b82342901a64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 11:56:28 2012 +0000

    SCardTransmit(): use an exit block
    
    goto exit; instead of a direct return rv;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6378 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)

commit 6b45ea9d8c42baf2c8b487daafc7d116c0b945ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:57:33 2012 +0000

    SCardSetAttrib(): use an exit block
    
    goto exit; instead of a direct return rv;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6377 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit ca547499c55da9471d64a0a530b8044ed331ad14
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:54:45 2012 +0000

    SCardGetAttrib(): use an exit block
    
    goto exit; instead of a direct return.
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6376 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit e48dcf525bdcb5c902eeb4c5c27e62ab74e7bac4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:53:24 2012 +0000

    SCardControl(): use an exit block
    
    goto exit; instead of a direct return.
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6375 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 408d1e0a115c0159e84be8ca34227daf9e2fadee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:32:36 2012 +0000

    SCardStatus(): use an exit block
    
    goto exit; instead of a direct return rv;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6374 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 6f588506d34498c106b1814a62acb6cdfe74d791
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:30:32 2012 +0000

    SCardEndTransaction(): use an exit block
    
    goto exit; instead of a direct return rv;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6373 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit bc4c7a2e924ac7b32d3257bc07c23f6064beac5a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:24:46 2012 +0000

    SCardBeginTransaction(): use an exit block
    
    goto exit; instead of a direct return SCARD_E_*;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6372 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 5984d69cb124e7fa54c3a35a840a279a56b83cff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:23:50 2012 +0000

    SCardDisconnect(): use an exit block
    
    goto exit; instead of a direct return SCARD_E_*;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6371 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 5a55bd18b58c15755fb0a4f2be48ae47b59ca5f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:21:45 2012 +0000

    SCardReconnect(): code reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6370 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 21 ++++++++++++++-------
 1 file changed, 14 insertions(+), 7 deletions(-)

commit 246b89c960051077aeed0fed4d0e20c91ea4f29b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 09:19:07 2012 +0000

    SCardReconnect(): use an exit block
    
    goto exit; instead of a direct return SCARD_E_*;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6369 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 44 ++++++++++++++++++++++++++++++++------------
 1 file changed, 32 insertions(+), 12 deletions(-)

commit cf3f3fdafb79c35bbe37cb24d2b771dfe27df491
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 08:59:12 2012 +0000

    SCardConnect(): use an exit bloc
    
    goto exit; instead of a direct return SCARD_E_*;
    
    This will allow to factorize exit code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6368 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 34 +++++++++++++++++++++-------------
 1 file changed, 21 insertions(+), 13 deletions(-)

commit 384f57909e6ae12d6a5aeb0022ba83e3e6b17039
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 29 08:36:43 2012 +0000

    SCardDisconnect(): check the parameters before anything
    
    Do not lose time finding the rContext if the dwDisposition parameter is
    wrong. Exit early.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6367 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 55bde185d486a0d59f80842d441025a96042b7e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 19:35:15 2012 +0000

    Update to Doxygen 1.8.1.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6366 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 220 +++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 148 insertions(+), 72 deletions(-)

commit 9b81a380be1a917b29c167e7f6146f0f9a67e0a5 (tag: 1.8.4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 18:57:54 2012 +0000

    Release 1.8.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6364 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 12 ++++++++++++
 configure.in |  2 +-
 2 files changed, 13 insertions(+), 1 deletion(-)

commit 3cd962b1ac1f55baef0b5238edce0decbe6fe6e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 14:26:22 2012 +0000

    Unitary test for locking in SCardBeginTransaction, SCardTransmit,
    SCardStatus and SCardReconnect
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6363 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBeginTransaction_deadlock.py | 129 +++++++++++++++++++++++++
 1 file changed, 129 insertions(+)

commit ca19fdfc34f020895a4d3bc557ef8f8cf8b361ef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 14:22:15 2012 +0000

    With changes in revisions 6358 to 6361 it is now possible to use the
    same SCARDCONTEXT in different threads (same as on Windows)
    
    With one context per thread the locking was controlled by the daemon.
    With the same context for 2 threads the locking is controlled (first) on
    the client side since the 2 threads uses the same mutex.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6362 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 ------
 1 file changed, 6 deletions(-)

commit ba7b310afe33ca980369d998a666d636ce161eee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 14:15:54 2012 +0000

    Similar patch as in revision 6358 but for SCardReconnect()
    
    Thanks to Aleksey Samsonov for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0109.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6361 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit dd764d111f4136c2c921e2066e35905808c88e2f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 14:11:58 2012 +0000

    Similar patch as in revision 6358 but for SCardBeginTransaction()
    
    Thanks to Aleksey Samsonov for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0109.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6360 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 41 +++++++++++++++++++++++------------------
 1 file changed, 23 insertions(+), 18 deletions(-)

commit 28677031409b453d5483e9297febfebfa116be3e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 13:40:32 2012 +0000

    SCardStatus(): Similar patch as in revision 6358 but for SCardStatus()
    
    Thanks to Aleksey Samsonov for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0109.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6359 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 66d64bcb8adef848fb387c8ea125cd1afb4f819d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 26 13:29:53 2012 +0000

    SCardTransmit(): do not hold the mutex when waiting in a
    SCARD_E_SHARING_VIOLATION loop
    
    If SCardTransmit() is waiting because the reader is used by another
    thread/process then we release the currentContextMap->mMutex, sleep, and
    try to acquire the mutex again.
    This will allow another thread using the same hContext to call
    SCardEndTransaction() otherwise the mutex is already held by
    SCardTransmit() and SCardEndTransaction() can't get it to finish the
    transaction => dead lock
    
    Thanks to Aleksey Samsonov for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0109.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6358 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit eef20bc3bef872a950dd36453aeb5bf4b6a4176f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 25 13:53:30 2012 +0000

    Update Doxygen: document "libusb-1.0" scheme
    
    the "libusb" (for libusb-0.1) scheme has been updated to a "libusb-1.0"
    scheme (for libusb-1.0).
    The device name now contains the interface number. The bus and device
    are now integers instead of paths.
    
    The change has been done in revision 5044 (June 2010) but the API was
    not updated at the same time.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6357 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit c6a9eba3359c11db45ac1873f052565c85cc7b84
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 25 13:38:46 2012 +0000

    RFReaderInfoNamePort(): Compare only the significant part of the reader name
    
    Since revision 6354 the reader name may be truncated. Only the part in
    readerState->readerName (managed by RFAddReader()) is truntacted. The
    reader name stored the hotplug_*.c readerTracker[] structures is NOT
    truncated. So we must use a truncated compare function to find the
    reader name.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6356 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 99ee90ffa9e4d718e5140bbbc16b8c5d0aed895c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 25 13:22:27 2012 +0000

    Increase MAX_READERNAME from 100 to 128
    
    It is not a perfect solution but it should limit the truncations of
    reader names as introduced in revision 6354.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6355 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 91533427fb9b251c19cab1dd59b5a136353abdda
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 25 13:17:33 2012 +0000

    RFAddReader(): truncates the reader name if too long
    
    The reader name size is limited to a total of MAX_READERNAME characters
    (100 by default). But some reader names are very long like:
    "SCM Microsystems Inc. SCR3340 - ExpressCard54 Smart Card Reader" and
    also provide a serial number and an interface name. So the name
    constructed by hotplug_libudev.c can be very long and longer than the
    100 caracters.
    
    Closes: [#313684] "Reader name too long" error
    https://alioth.debian.org/tracker/?func=detail&atid=410085&aid=313684&group_id=30105
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0113.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6354 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 1a96276438afe1d7a17966a1590e6705a9958a73
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 25 12:40:58 2012 +0000

    HPRescanUsbBus(): Display the full name of the removed reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6353 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 7d9cab0e4977262185a6a8cf3c5bce443bfcf9d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 6 11:54:48 2012 +0000

    Add [ and ] in the list of accepted characters for a reader name
    
    Readers with these characters caused a crash in libccid without any
    error message.
    This is because the reader entry was skiped and a reader name was then
    missing in the list. NULL is not a valid reader name :-)
    
    Thanks to Philippe Teuwen for the bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6325 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e861a2da38e6746e66feadba9c3da5d32a5f47e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 09:19:06 2012 +0000

    Remove now useless PCSCLITE_SVC_IDENTITY
    
    PCSCLITE_SVC_IDENTITY is no more used since revision 6322.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6323 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 2 --
 1 file changed, 2 deletions(-)

commit cf58664209c0d2f77d015ee4fc0fc5de8e592256
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 09:17:50 2012 +0000

    SCardEstablishContext(): Use a full 32-bits random value
    
    Use a full int range (32-bits) value instead of a 16-bits value.
    
    Note: this value is (still) not used/checked on the server side.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6322 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7ea23d476f2b6712f2e11580cea834ba782cbab4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 09:07:46 2012 +0000

    remove dwIdentity field from ReaderContext structure
    
    Since revision 6320 dwIdentity is no more used. So we can remove it.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6321 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 -----
 src/readerfactory.h | 1 -
 2 files changed, 6 deletions(-)

commit 8e5cc532540c841f819d2a35ec77293c245e57c1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 09:05:45 2012 +0000

    RFCreateReaderHandle(): generates a 32-bits random for hCard
    
    Since the change in revision 6316 dwIdentity is no more used to identify
    a hCard -> reader relation.
    So we can just generate a hCard as a full 32-bits random.
    
    The security should be improved with a change from 16-bits random to a
    32-bits random. It will be more difficult for a rogue client to guess a
    valid hCard value.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6320 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 50 +++++++++++++++-----------------------------------
 1 file changed, 15 insertions(+), 35 deletions(-)

commit 9138c6272ce38886ec8c5273298fc6afb528dc9b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 08:59:08 2012 +0000

    SYS_RandomInt(): extend range if fEnd == -1
    
    If fEnd parameter is set to -1 then the result of rand() is not
    truncated. This is usefull to get 32-bits of random with no constraint
    on the values.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6319 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 4744dbe1757fa8243e5355b165d0ced2818a3c62
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 08:26:34 2012 +0000

    Remove now unused function RFFindReaderHandle()
    
    Since revision 6317 this function is no more used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6318 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 21 ---------------------
 src/readerfactory.h |  1 -
 2 files changed, 22 deletions(-)

commit 7b7c78c60b8c58c2d32678d4a92c1f4629f4fed9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 08:25:50 2012 +0000

    Calls to RFFindReaderHandle() are now useless
    
    RFFindReaderHandle() was used to check the hCard is valid.
    Since revision 6316 the algorithm used in RFFindReaderHandle() is
    already used in RFReaderInfoById().
    
    So calling RFFindReaderHandle() after RFReaderInfoById() (as it was done)
    is now useless.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6317 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 32 --------------------------------
 1 file changed, 32 deletions(-)

commit e61c2e573f8e3f7d3832e689191c84173c161a20
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 08:21:39 2012 +0000

    Use handlesList to find a hCard -> reader link
    
    hCard handles are stored in the handlesList list of readers. The use of
    dwIdentity just duplicate the information and is no more needed.
    
    The algorithm is the same as in RFFindReaderHandle()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6316 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 20 ++++++++++++--------
 src/readerfactory.h |  2 +-
 2 files changed, 13 insertions(+), 9 deletions(-)

commit 88d674d4af4f85ff31db78c90cfd1541ae15949d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 2 13:08:05 2012 +0000

    Fix compiler failure for static driver
    
    CFLAGS="-DPCSCLITE_STATIC_DRIVER -DIFDHANDLERv3" ./configure
    make
    [...]
    ifdwrapper.c: In function ‚ÄòIFDOpenIFD‚Äô:
    ifdwrapper.c:125:15: error: ‚ÄòREADER_CONTEXT‚Äô has no member named ‚ÄòlpcDevice‚Äô
    ifdwrapper.c:126:57: error: ‚ÄòREADER_CONTEXT‚Äô has no member named ‚ÄòlpcDevice‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6315 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 559bc791f16b95ed76d1d84c286ad78b33f8d499
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 28 12:26:55 2012 +0000

    IFDPowerICC(): check the value returned by IFDStatusICC()
    
    The reader may be gone at this step.
    See http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0041.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6312 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 697f8d11cb232af0b92385a731b457556b71b323
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 18 11:04:40 2012 +0000

    Remove an extra '.' at the end of the URL
    
    Thanks to "helpcrypto" for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2012-q2/0036.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6302 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 10b4371d27c41b4df20d6248e49da4d5123f2705
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 18 07:49:23 2012 +0000

    warning: 'libpcsclite.la': linking libtool libraries using a non-POSIX
    archiver requires 'AM_PROG_AR' in 'configure.in'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6299 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 7f2b2b11edf341fcf2a6e5b63ed94c8039a1897b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 18 07:47:33 2012 +0000

    autoupdated using autoupdate (GNU Autoconf) 2.69
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6298 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 27 +++++++++++++--------------
 1 file changed, 13 insertions(+), 14 deletions(-)

commit 7afa5a9dcb59e92d2d19821fc614fc85e623f959
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 5 15:37:07 2012 +0000

    Unitary test for FEATURE_GET_TLV_PROPERTIES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6261 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_GET_TLV_PROPERTIES.py | 43 ++++++++++++++++++++++++++++++
 1 file changed, 43 insertions(+)

commit b8bdd0a6a669c34c6caafba242f99d18c28b3f4c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 4 20:05:12 2012 +0000

    Catch control() exception
    
    If the driver is not configured with
    DRIVER_OPTION_CCID_EXCHANGE_AUTHORIZED then the control() will fail with
    a SmartcardException() exception.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6256 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Gemalto_features.py | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 72212038f302f3c6c442bbaa85595d7b070e39bc (tag: 1.8.3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 30 12:11:41 2012 +0000

    Release 1.8.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6253 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 12 ++++++++++++
 configure.in |  2 +-
 2 files changed, 13 insertions(+), 1 deletion(-)

commit b16ea795574ddea03e87702381807b7f5e4ee2de
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 25 20:56:11 2012 +0000

    This file is now more or less a duplicate of
    FEATURE_CCID_ESC_COMMAND_Xiring.py
    
    So remove it.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6249 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND.py | 50 --------------------------------
 1 file changed, 50 deletions(-)

commit 304f8ef837975d88906935172e31f7115d9e0634
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 25 20:54:26 2012 +0000

    Add GET_SN command and some documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6248 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Xiring.py | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit ad6c5c061517bd551a131ad8c7b1ad67c140e1c2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 24 19:09:34 2012 +0000

    Unitary test for FEATURE_CCID_ESC_COMMAND and Xiring Leo readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6247 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND_Xiring.py | 51 +++++++++++++++++++++++++
 1 file changed, 51 insertions(+)

commit b331452aa978f3d1aee0d41f9fbfb898f6ca0901
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 24 13:21:37 2012 +0000

    Rename FEATURE_CCID_ESC_COMMAND2.py in FEATURE_CCID_ESC_COMMAND_Gemalto_features.p
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6246 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ..._CCID_ESC_COMMAND2.py => FEATURE_CCID_ESC_COMMAND_Gemalto_features.py} | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit de3ca4854319a4713a05b9a1846efe18f0574b8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 23 09:44:15 2012 +0000

    Use getTlvProperties() and PCSCv2_PART10_PROPERTY_wIdVendor
    
    We now check the reader is a Gemalto one before sending an escape code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6244 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_get_firmware.py | 27 ++++++++++++++++++++-------
 1 file changed, 20 insertions(+), 7 deletions(-)

commit de353035ecc1ba2e3bcd249ba4d68670a8cf7266
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 20 16:42:11 2012 +0000

    Add new properties for FEATURE_GET_TLV_PROPERTIES
    
    dwMaxAPDUDataSize, wIdVendor and wIdProduct are/will be defined in PCSC
    v2 part 10 release 2.02.09
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h | 3 +++
 1 file changed, 3 insertions(+)

commit 691e4d43ae9a9e935876153a9aa7af85c8f3b8ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 14:42:18 2012 +0000

    _SCardControl(): parse the received buffer only on success
    
    The received buffer (answer) is valid only if the command execution
    succeeded.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6236 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 41367d1bcc2639fceaa2534d1f797f708503e25a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 14:39:42 2012 +0000

    Add support of SCardControl132 for OS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6235 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 888f595d84d4674910a74bee56fa2bc1beda76d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 14:38:13 2012 +0000

    Fix compiler warning on OS X
    
    libpcscspy.c:580: warning: no previous prototype for 'SCardControl132'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6234 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 8cba22a530876c5c08d81c63c112e8c1d872bcd1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 21 08:49:21 2012 +0000

    log_xxd(): do not log with negative length
    
    Thanks to Godfrey Chung for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2012-q1/0043.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6229 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 9ae502383d2073298e5e91e8df54ccc50ef37d51
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 4 09:08:36 2012 +0000

    Skip non regular or "hidden" config files
    
    Closes Debian bug #658322 "pcscd: fails to start if config directory
    contains subdirectories"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6215 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit ee561fa7a6b4e537de15b706d383b334d4251c92
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 15:22:25 2012 +0000

    Document usage on Mac OS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6201 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.pod | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit d9f6c4b9eb9a14828eca6511a2159684fef2510d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 15:19:40 2012 +0000

    Mac OS X uses SCardControl132 instead of SCardControl
    
    On Mac OS X SCardControl() is used for the old version of the API
    (without the dwControlCode) and SCardControl132() for the new API.
    
    From /System/Library/Frameworks/PCSC.framework/Headers/winscard.h
    /*
        To support the newer version of SCardControl, we define it
        as follows. The old version number was 1.1.2, the new call
        appears in 1.3.2 of pcsc-lite (or perhaps earlier).
    */
    
    #if !defined(USE_SCARD_CONTROL_112)
    #define SCardControl SCardControl132
    #endif /* USE_SCARD_CONTROL_112 */
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6200 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 13658e87f4fc09755f99f5b012e42312bd07558a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:51:48 2012 +0000

    Generate a Mac OS X PCSC.framework hierarchy
    
    Mac OS X uses a framework and not just a library. The hiearchy is
    simple:
    PCSC.framework
    PCSC.framework/PCSC -> Versions/Current/PCS
    PCSC.framework/Versions
    PCSC.framework/Versions/A
    PCSC.framework/Versions/A/PCSC
    PCSC.framework/Versions/Current -> A
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6199 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 7 +++++++
 1 file changed, 7 insertions(+)

commit 55f5fc901663a1a9e9437f5e065bc93c1fbc9895
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:37:14 2012 +0000

    Add Mac OS X support
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6198 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit 99ad6f1719fb6683b9ddf65a9b55aea190ee8633
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:24:40 2012 +0000

    Use ULONG * instead of unsigned long *
    
    See comment in revision 6195
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6197 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 23778d9d392b822a0a3d6950b6088d1e50e178cf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:23:56 2012 +0000

    Reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6196 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2693de476417c0ea3ad97bbe902580eb02e8568c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:21:42 2012 +0000

    Use LONG/ULONG instead of long/unsigned long
    
    The problem is that PCSC on Mac OS X do not use long but uint32_t. So a
    (LONG * or LPDWORD *) parameter (like pcchReaders in SCardListReaders)
    is not the same on Linux and Mac OS X for 64-bits CPUs.
    
    LONG is correctly defined on both Linux and Mac OS X so we use it
    instead.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6195 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b4c93afc5a86f80a58964e2632c8746278854116
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 10:00:12 2012 +0000

    load_lib(): check dlsym() return correct values
    
    If the pointer returned by dlsym("SCardEstablishContext") is our own
    SCardEstablishContext() function then we will finish in a endless
    recursion. Something went wrong and we stop immediatly instead of
    crashing when the call stack is full.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6194 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit b9dc9474455e4ea68a97539fb6983f539b97ab39
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 09:51:59 2012 +0000

    Use an internal pcsc_stringify_error() by default
    
    If the loading of the PCSC library fails all the functions are set to
    use internal_error().
    The only expection is now pcsc_stringify_error() because the return
    value is not a LONG error code but a C-string.
    
    This change fixes a crash when the application called printf() to
    display the "string" returned by pcsc_stringify_error() if
    SCardEstablishContext() failed in the spying library.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6193 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/libpcscspy.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit f3f74aa9b780ec91a0c463dd7a5e04cfa3545d31 (tag: 1.8.2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 15:49:24 2012 +0000

    Release 1.8.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6185 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 10 ++++++++++
 configure.in |  2 +-
 2 files changed, 11 insertions(+), 1 deletion(-)

commit bb85fa5e098ca7eca8d1c76622509660f8bbcf76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 13:57:58 2012 +0000

    Add support of --version to pcsc-spy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6184 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy     | 11 ++++++++---
 src/spy/pcsc-spy.pod | 15 ++++++++++-----
 2 files changed, 18 insertions(+), 8 deletions(-)

commit 3448a37afd154079aa6f1e62610e32531fdf3961
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 13:49:46 2012 +0000

    Use POD format for pcsc-spy manpage
    
    Writting nroff manpage directly is not easy. The Perl POD (plain old
    documentation) is much more friendly to read/write and pod2man is your
    friend.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6183 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am  |  11 ++++--
 src/spy/pcsc-spy.1   |  81 -----------------------------------------
 src/spy/pcsc-spy.pod | 100 +++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 109 insertions(+), 83 deletions(-)

commit f680c03c269bf85e34d32d628e1154874c10ccc1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 10:11:20 2012 +0000

    print_usage(): display command name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6182 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 67b161f2d1f50f335e1d2db2324caddd94f02a53
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 09:46:51 2012 +0000

    Document [-h|--help] argument
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6181 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit 4b4d06116deb6be79a3107c6365df283a19d94ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 17:35:56 2012 +0000

    Use dist_man_MANS to distribute the manpage
    
    The pcsc-spy.1 manpage is now included in the .tar.bz2 archive
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6178 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2528ee4edb7056e5f52715f298819cd204ef40ce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 17:20:00 2012 +0000

    Rename pcsc-spy.c to libpcscspy.c
    
    We have a pcsc-spy Python binary so pcsc-spy.c is not a correct filename
    for a different library. Make is trying to generate pcsc-spy from
    pcsc-spy.c and that fails.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6177 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am                  | 2 +-
 src/spy/{pcsc-spy.c => libpcscspy.c} | 0
 2 files changed, 1 insertion(+), 1 deletion(-)

commit e6d5b74bb41d80eedb84438e3f0795cbd12ee2ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 17:14:23 2012 +0000

    Remove pcsc-spy.py from EXTRA_DIST
    
    The command is now named pcsc-spy and is distributed by default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6176 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d1be17401705c05cbd68aa26936e118371fd8b8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 17:12:02 2012 +0000

    Convert README.txt into pcsc-spy.1
    
    Since we now provide the pcsc-spy binary we must also provide a manpage
    for the command.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6175 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am |  4 ++-
 src/spy/README.txt  | 57 -------------------------------------
 src/spy/pcsc-spy.1  | 81 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 84 insertions(+), 58 deletions(-)

commit 690bbac64390ab26921986ca4e56f2813f3c7e87
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 15:34:56 2012 +0000

    Update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6174 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b06c325f3fdf18479672445f5a65633cb7003e1c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 15:34:23 2012 +0000

    Change Shebang to /usr/bin/python
    
    Comply with Debian Python Policy 3.1 Programs using the default python
    http://www.debian.org/doc/packaging-manuals/python-policy/ch-programs.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6173 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 06a13b59bac6dc8d96b0ef22d4557855c3ae4be5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 15:31:44 2012 +0000

    Install pcsc-spy as a normal binary
    
    By default the command is installed in $(prefix)/bin/pcsc-spy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6172 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit a422ba2683f5d6c3501909d7e3698b8d0fbd04e8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 15 15:30:35 2012 +0000

    Rename the pcsc-spy command without the .py extension
    
    Comply to Debian Policy 10.4 Scripts
    http://www.debian.org/doc/debian-policy/ch-files.html#s-scripts
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6171 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/{pcsc-spy.py => pcsc-spy} | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit 029db4959d5b03b0a368917471639fb41a5806bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 1 21:02:08 2012 +0000

    Add Doxygen documentation for TAG_IFD_SLOTNUM,
    TAG_IFD_STOP_POLLING_THREAD and TAG_IFD_POLLING_THREAD_WITH_TIMEOUT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6156 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)

commit 676147cd939b0a0a6220acc689917ba45abbe455
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 15 17:56:20 2011 +0000

    spy_line(): use return instead of exit().
    
    A library should not use exit() but return an error code instead.
    Reported by Debian lintian.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6139 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 58cf676b21abd96e68019ad3da1318f12f42a33c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 5 15:49:27 2011 +0000

    bundleRelease(): fix a memory leak
    
    We must also free the key of the element.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6132 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 1 +
 1 file changed, 1 insertion(+)

commit 9ca2ab6fb5e5e2332cbcf6d6ebe2a0da8193da0e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 5 15:21:17 2011 +0000

    eval_value(): avoid a buffer read overflow in &amp; management
    
    We shall stop the loop when we find a \0 in the source, not in the
    destination (4 characters later)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6131 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 46b075fa231e57781461b5203f4e9fb88809f5e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 5 14:44:09 2011 +0000

    HPReadBundleValues(): remove extra free()
    
    Do not free memory allocated for CFBundleName since we use this value
    directly in
       driverTracker[listCount].CFBundleName = CFBundleName; (line 180)
    instead of using a strdup(), because the string is the same for many
    entries
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6130 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 1 -
 1 file changed, 1 deletion(-)

commit 69c7462455814edf2f18488abd2af820497ff44d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 5 13:57:11 2011 +0000

    RFRemoveReader(): add 2 missing pthread_mutex_destroy()
    
    Mutexes for powerState_lock and handlesList_lock were never destroyed.
    
    It was not a real problem since from manpage pthread_mutex_destroy(3):
        In the LinuxThreads implementation,  no  resources  are associated
        with mutex objects, thus pthread_mutex_destroy actually does nothing
        except  checking  that  the mutex is unlocked.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6129 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit 5b68d851201ffd5d0d9b7e07e7a2439893056520
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 5 13:44:56 2011 +0000

    RFRemoveReader(): fix a bug with a multi-slot reader
    
    The value sContext->mMutex must be reset to NULL only for the last slot.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6128 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 93d2ca57165132ff7dc837b498306ffc1ab916e1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 26 10:37:50 2011 +0000

    StandardOutput=syslog is now the default since at least systemd 37
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6120 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.service.in | 1 -
 1 file changed, 1 deletion(-)

commit 42bb772738528069732c30fd338e9a74014b69f4 (tag: 1.8.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 25 14:06:09 2011 +0000

    Release 1.8.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6118 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 5 +++++
 configure.in | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit dc0e9f61bf59761e8cd8abd3c296a92b002da5ef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 25 14:04:07 2011 +0000

    Also distribute pcsc-spy.py install_spy.sh uninstall_spy.sh README.txt
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6117 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 0e0642477e0faf21ccf19015ac9c589df9e75c4c (tag: 1.8.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 19 15:53:45 2011 +0000

    Release 1.8.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6111 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 26 ++++++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 27 insertions(+), 1 deletion(-)

commit b9563a1ab29d07b65eaaf90911dfa64fa5aeea9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 19 13:18:41 2011 +0000

    Add FEATURE_EXECUTE_PACE from PCSC v2 Part 10 Amendment 1 2011-06-03
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6110 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h | 1 +
 1 file changed, 1 insertion(+)

commit 39569a2eed2a062066fe14f3b2e8e799c192f073
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 18 13:26:21 2011 +0000

    Proprietary commands for Gemalto readers
    This is implemented by the Gemalto Pinpad v2 and C200 readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6109 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND2.py | 82 +++++++++++++++++++++++++++++++
 1 file changed, 82 insertions(+)

commit 00d3a4707b1856eeb5757b51dd5368db7264b5f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 18 12:37:45 2011 +0000

    Terminate the process with Ctrl-C
    
    Thanks to Martin Paljak for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6108 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 5 +++++
 1 file changed, 5 insertions(+)

commit 56771450e97993ead8b5ee7864f0d5efc661fc77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 18 09:29:14 2011 +0000

    Typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6107 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/README.txt | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 244664b6b31e723728d409dd178ed11722d83a84
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 14 10:19:44 2011 +0000

    Remove pcscd autostart feature
    
    The auto start feature (launch pcscd from the library if not already
    running) was a fragile code with some issues. This service is far better
    implemented by systemd.
    
    Thanks to Kalev Lember for pushing the systemd patches.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6105 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in        |  11 -----
 src/pcscdaemon.c    |  18 --------
 src/winscard_clnt.c | 115 ----------------------------------------------------
 3 files changed, 144 deletions(-)

commit 12f6715812beb5c47faf83db38cb9245b0bf42fc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 11 15:46:37 2011 +0000

    Do not try to autostart if the system was booted using systemd
    
    The --disable-autostart configure option should now be useless on
    systems using systemd.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6104 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 22 +++++++++++++++++++++-
 1 file changed, 21 insertions(+), 1 deletion(-)

commit e8105a835e7f9696f3073fb94ece62c3d24c3792
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 10 23:06:21 2011 +0000

    Revert revision 6045
    
    We must fork+exit in autoexit and foreground mode or the application
    will not continue its execution and will wait for the end of pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6102 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8a7a12a3385eb7fdb1928fd88ce73b7a40162b29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 31 14:47:31 2011 +0000

    Add support of -d|--diffable to generate logs without too much variable
    parts so 2 logs can be compared using diff(1)
    
    Variable parts are replaced by "????". They are:
    - execution time
    - hCard
    - hContext
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6095 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 42 ++++++++++++++++++++++++++++++------------
 1 file changed, 30 insertions(+), 12 deletions(-)

commit 7eec6233840fb93a9a624d62a432a553f6feb673
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 31 14:38:09 2011 +0000

    Fix cut-n-paste error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6094 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9e777465ce237e4a2aaf32b1fd66ae62f1e2ce3b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 31 14:25:32 2011 +0000

    Add support of --nocolor command line argument
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6093 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0a924525be4297ccb69703243fb1091c119fde6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 31 14:12:54 2011 +0000

    Make the script idempotent
    
    The symbolic links are repared if needed. They were broken after the
    sequence:
    $ spy/install_spy.sh
    $ make install
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6092 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/install_spy.sh | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit e79c1b6373cc6452283d98b325102cfd517ab74e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 31 14:10:18 2011 +0000

    Exit in exception if the application exited in the middle of
    SCardGetStatusChange() like it is the case for pcsc_scan
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6091 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 ++
 1 file changed, 2 insertions(+)

commit 887d1dbf734f66f88ad580f96fef735ac9befcf3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 30 14:03:16 2011 +0000

    Convert the firt &amp; into & in a
    
    Allow to use names like Giesecke &amp; Devrient
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6090 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit fe5b34720bd8da6b348ab019e7b9c27b0781d07c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 30 13:50:34 2011 +0000

    Add ';' in the list of valid caracters
    
    Allow to use "&amp;" for "&" like in "Giesecke &amp; Devrient"
    See revision 6088
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6089 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c9d10007f9b33150ad1b2c68014073996bb288cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 25 13:45:23 2011 +0000

    Start loops at 0 instead of 1 to have the correct count
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6083 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafe.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit be4caea7d7da4f24f9ced599bf0edebfd1a1dea4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 25 13:43:42 2011 +0000

    Give statistics per thread
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6082 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 39 +++++++++++++++++++++------------------
 1 file changed, 21 insertions(+), 18 deletions(-)

commit 56ab5387f4b4898affc8a2d4034dabe65eda880b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 25 13:29:22 2011 +0000

    Update for spy/ directory
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6081 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .gitignore | 50 ++++++++++++++++++++++++++------------------------
 1 file changed, 26 insertions(+), 24 deletions(-)

commit 45d5cf11cc4a1524ea3fe25378242ba10cd6a951
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 25 12:54:07 2011 +0000

    Use a 4 spaces indentation for each thread
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6080 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)

commit 0649c9e0b1cd519b7ccc06c40c7955a82728fc27
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 25 09:23:28 2011 +0000

    Display statistics sorted by total_time
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6079 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 96 +++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 78 insertions(+), 18 deletions(-)

commit d9461dd86523e3009c8f8c0a93f318021f29ac2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 14:58:35 2011 +0000

    Parse FEATURE_VERIFY_PIN_DIRECT structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6078 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 68 +++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 48 insertions(+), 20 deletions(-)

commit b53590f7bacfd293c8348666b29ebf6102adf83e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 12:35:51 2011 +0000

    The byte buffer do not contain the ASCII dump any more. So no need to
    remove it.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6077 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 --
 1 file changed, 2 deletions(-)

commit 28dddb7ce6d2c6217c3e640d67dc391c15abaa46
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 12:34:32 2011 +0000

    Parse FEATURE_IFD_PIN_PROPERTIES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6076 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 475dbd6747ef2e7d638127efda5877ea9f6a4a21
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 12:11:14 2011 +0000

    Remove debug line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6073 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 1 -
 1 file changed, 1 deletion(-)

commit 862c738ec28d8471291988efc861b4d61433bde4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 12:06:05 2011 +0000

    main(): do not fail if pcscd.comm is already present but pcscd.pid is
    not present.
    
    This is the case if pcscd has been configured in systemd but has been
    stoped. When launched by hand (for a debug session for example) the
    pcscd.comm file is still present but not used anymore.
    
    The pcscd.comm file will be removed when pcscd manually started will
    exit but the file will be recreated by "systemctl start pcscd.service"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6072 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 14 --------------
 1 file changed, 14 deletions(-)

commit 82ced7e9d08912ba649bf0eb4fde9897ba1112de
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 11:51:08 2011 +0000

    Update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6071 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e0491621828ef71b14696470b4aec29c919bf2b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 11:50:43 2011 +0000

    propset svn:keywords "Id"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6070 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 529d62a768ab6d94563b1d0502ef96b4560166e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 24 11:49:20 2011 +0000

    MAX_BUFFER_SIZE and MAX_BUFFER_SIZE_EXTENDED are already defined in
    PCSC/pcsclite.h.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6069 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 3 ---
 1 file changed, 3 deletions(-)

commit 255fc289eae3b720dc50f4ecb1eba4d021e79fbb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 22 18:19:11 2011 +0000

    Update MAX_BUFFER_SIZE_EXTENDED by adding 2 bytes for the status word
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6063 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fbc737933d4f82a995f17d1a4625b3ea7954173e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 22 13:43:10 2011 +0000

    Remove WantedBy=multi-user.target
    
    The purpose of using systemd is to start pcscd on demand. So no need to
    always start it at boot.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6062 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.service.in | 1 -
 1 file changed, 1 deletion(-)

commit ad9c055cb5005ee6c38748047674622538a70964
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 22 13:11:23 2011 +0000

    Start pcscd in autoexit mode to:
    - free RAM and CPU ressources
    - enable the USB selective suspend
    http://ludovicrousseau.blogspot.com/2011/04/libccid-and-usb-selective-suspend.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6061 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.service.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f4031a388813a74205ce260d8056a554bc7ad035
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 22 13:09:11 2011 +0000

    Remove now useless After=syslog.target line for recent systemd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6060 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.service.in | 1 -
 1 file changed, 1 deletion(-)

commit 1340f203688dbe19f1b79bd62ef386fabed9ca37
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 21 14:35:24 2011 +0000

    support -n | --nocolor command line argument to remove colorization
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6059 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 55 ++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 42 insertions(+), 13 deletions(-)

commit 8a15a19c5f1150c90c3bbfbbe514063814d22e5e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 21 13:56:32 2011 +0000

    Remove debug line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6058 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 1 -
 1 file changed, 1 deletion(-)

commit de456730850a16c96823b8aecd59bc92c6c4dce6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 21 09:16:54 2011 +0000

    Upgrade from simclist 1.5 to 1.6
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6057 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 223 +++++++++++++++++++++++++++++++++------------------------
 src/simclist.h |  23 ++++--
 2 files changed, 147 insertions(+), 99 deletions(-)

commit 5cd373ea427b168f58d727b2e5601f4d89ea0755
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 15:08:55 2011 +0000

    Remove DO_CHECK_SAME_PROCESS code since we now use pthread_atfork()
    since revision 6055
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6056 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 63 -----------------------------------------------------
 1 file changed, 63 deletions(-)

commit 76d1226ca6443c5ce2b3564369ed97ac9dbb9acb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 15:04:49 2011 +0000

    SCardEstablishContext(): Invalidate all the handles in the son after a fork
    
    The Unitary Test UnitaryTests/SCard_fork.py now works
    
    We now use pthread_atfork() instead of the DO_CHECK_SAME_PROCESS hack
    (disabled by default)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6055 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

commit 130d61a52315f1d10519952ff4bbb2940f15013c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 14:54:11 2011 +0000

    log_out_n_str(): add special case for a null string length
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6054 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 5adbf257a5e5c8291b46eaab480f92b915de6eee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 14:33:26 2011 +0000

    Documentation file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6053 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/README.txt | 57 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)

commit e5a9946b3bd87f782383107e65cc9bb98dc221cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 14:15:37 2011 +0000

    Add support of SCardCancel() and multi-threaded applications
    
    The pcsc-spy.py client is now a demultiplexer with one thread and data
    queue per applicatin thread. Each log line contains the application
    threadID.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6052 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c  |  18 +++++--
 src/spy/pcsc-spy.py | 149 +++++++++++++++++++++++++++++++++-------------------
 2 files changed, 108 insertions(+), 59 deletions(-)

commit e6b9d36de2b05bf52f85d40f374adc7522d580a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 14:11:49 2011 +0000

    Use set -e to exit on first error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6051 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/install_spy.sh   | 3 +++
 src/spy/uninstall_spy.sh | 3 +++
 2 files changed, 6 insertions(+)

commit 10107772a57e94b6a50bf1de1239728367df7eed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 20 14:11:27 2011 +0000

    Fail if libpcsclite_nospy.so.1 already exists
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6050 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/install_spy.sh | 6 ++++++
 1 file changed, 6 insertions(+)

commit 5af9ee78f8b3e9c53c164482c22a144bd08592d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 15 18:26:24 2011 +0000

    main(): do not fork+exit if we are in autoexit mode and also in
    foreground mode
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6045 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9659dc808ac5a5868111ee0a021bae69072dd7d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 15 18:24:15 2011 +0000

    signal_trap(): if we exit after a SIGALRM then exit with EXIT_SUCCESS
    
    systemd should be happier with a process exiting normally
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6044 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 9203d3937947f6f6ba810485efbef6610cd99c05
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 15 16:44:08 2011 +0000

    InitializeSocket(): use a union for sockaddr structsas suggested by
    systemd sample code at
    http://0pointer.de/blog/projects/socket-activation.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6043 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit 1671fc735a41ad36a920ae7b6b82ea518ca13a87
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 15 16:20:43 2011 +0000

    Use a global symbol for the library handle
    
    Make coverity more happy
    leaked_storage: Variable "handle" going out of scope leaks the
    storage it points to.
    noescape: Variable "handle" is not freed or pointed-to in function "dlsym".
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6042 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 47eb21d7b532df903ac051bee194d3577674eea7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 11 14:44:37 2011 +0000

    main(): do not fork+exit if started in --auto-exit mode by systemd
    
    systemd should restart the daemon again if needed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6029 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e7ecc2215fd42590662e68e53aedabf7af3350c0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 11 14:18:43 2011 +0000

    log_line(): flush stdout after each line so that debug messages are
    immediately available for systemd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6028 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 1 +
 1 file changed, 1 insertion(+)

commit f0f7b70549be5fe03d0da7791859fd6c66ddae33
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 11 13:59:35 2011 +0000

    main(): store the pid _after_ any fork
    
    Revision 6019 moved the AutoExit fork+exit later in the code. We now
    must move the pcscd.pid file creation after the fork+exit.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6027 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 56 +++++++++++++++++++++++++++++---------------------------
 1 file changed, 29 insertions(+), 27 deletions(-)

commit 2f83be92dd32809d61d6e1873ba148942089fe5d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 11 13:54:19 2011 +0000

    main(): log a message when pcscd is started by systemd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6026 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit 8cf7175c17e59f15b6e44f1bf4f440923ccff9c0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 20:38:41 2011 +0000

    main(): move AutoExit fork+exit later in the code
    
    We should be able to return with an error code if something went wrong
    in the pcscd initialization so that the client get the error code and do
    not wait for 5 seconds.
    
    See Red Hat Bug 653903 - elinks takes 10 seconds to start
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6019 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 36 ++++++++++++++++++------------------
 1 file changed, 18 insertions(+), 18 deletions(-)

commit 08f6129e02141231f67166ff917bddac728eb7d5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 20:29:08 2011 +0000

    SCardEstablishContext(): check the return value of pcscd
    
    In auto-start mode the client check the value returned by pcscd. If
    pcscd failed to start then we just return SCARD_E_NO_SERVICE without
    waiting for 5 seconds.
    
    See Red Hat Bug 653903 - elinks takes 10 seconds to start
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6018 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 1167bffc9c6e4b807bd6e99161ab88637d2be6ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 20:14:59 2011 +0000

    print_usage(): reformat output
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6017 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd384d40e2b355c61a98d3badc6e4aabfa76fe67
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 16:48:08 2011 +0000

    SCardEstablishContext(): If the daemon is not present then just fail
    without waiting.
    
    See Red Hat Bug 653903 - elinks takes 10 seconds to start
    https://bugzilla.redhat.com/show_bug.cgi?id=653903
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6016 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 82cd63b77da2496cfcfc6deed13a7a86dfec046a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 13:36:42 2011 +0000

    log_buffer(): display NULL if the buffer is a NULL pointer
    
    This is used to differentiate a NULL buffer from an empty buffer.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6015 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit a745d8a8214f03e40a8a085ab275038190b0c01f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 10:33:15 2011 +0000

    log_buffer(): use upper case for hexadecimal dump
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6014 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9f62daa1261e6e9094211386e9a292a60bc0a110
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 10:31:56 2011 +0000

    log_buffer(): use '.' also for values >= 127
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6013 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b9baa77616c43f335150f928cefbac299e18f510
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 10:30:08 2011 +0000

    log_buffer(): check for an empty buffer
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6012 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4046d2788221bf31195de3d76b708ac342be3e90
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 10:25:28 2011 +0000

    If the field to log starts with a "0x" we also log the decimal value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6011 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 33edb0cfab3477621ce58b307db2f9cd333e59d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 10:18:40 2011 +0000

    spy_buffer(): use spy_line_direct() to log a line without formatting and
    size limit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6010 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 2d57422f88f0623bf4a301fed86b1549fc9c1dfc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 10:14:25 2011 +0000

    spy_line(): Emergency exit if the buffer is too small
    
    The line is limited to 256 characters. Dumping a buffer of more than
    256/3 = 85 bytes wil overflow the line buffer.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6009 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 5 +++++
 1 file changed, 5 insertions(+)

commit be991b9d39ec3681c3e738e5c94f8b1b5da518e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 09:50:25 2011 +0000

    Allow to replace the real library by the spy one
    
    This is isefull for interpreted languages like Python and Perl with the
    PC/SC wrapper.
    
    The scripts install_spy.sh and uninstall_spy.sh do the files changes in
    /usr/lib
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6008 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/install_spy.sh   |  9 +++++++++
 src/spy/pcsc-spy.c       | 24 ++++++++++++++++++++++--
 src/spy/uninstall_spy.sh |  6 ++++++
 3 files changed, 37 insertions(+), 2 deletions(-)

commit ec7ddf041abca467c043157796dab1f284cfad15
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 09:11:57 2011 +0000

    Remove trailing space
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6007 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fb1a6278ce2329ba5bd5a9c63f76279e433ee4f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 09:10:43 2011 +0000

    Use a text instead of numerical constant to specify the direction
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6006 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit b035854688d8d4fbc169a8c24d7e3c0739d1d95e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 7 09:08:03 2011 +0000

    Dump bytes buffer in a formatted ASCII + Hex dump
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6005 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c  | 14 ++-----------
 src/spy/pcsc-spy.py | 57 +++++++++++++++++++++++++++++++++++++++++++++--------
 2 files changed, 51 insertions(+), 20 deletions(-)

commit b13ba518733e8d17443141868a31323c61de056f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 5 13:22:23 2011 +0000

    Move from GNU GPL v2+ to v3+
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6003 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 124f6e01ee3e4075c320489b99d8ba008e3d8da4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 5 13:19:37 2011 +0000

    Move from GPL v2+ to GPL v3+
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6002 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py                    | 5 ++---
 UnitaryTests/SCardBeginTransaction_Disconnect.py    | 5 ++---
 UnitaryTests/SCardBeginTransaction_ExclusiceMode.py | 5 ++---
 UnitaryTests/SCardCancel.py                         | 5 ++---
 UnitaryTests/SCardCancel2.py                        | 5 ++---
 UnitaryTests/SCardConnect_DIRECT.py                 | 5 ++---
 UnitaryTests/SCardConnect_DIRECT2.py                | 5 ++---
 UnitaryTests/SCardGetAttrib.py                      | 5 ++---
 UnitaryTests/SCardGetStatusChange.py                | 5 ++---
 UnitaryTests/SCardGetStatusChange2.py               | 5 ++---
 UnitaryTests/SCardReconnect.py                      | 5 ++---
 UnitaryTests/SCardStatus.py                         | 5 ++---
 UnitaryTests/SCard_fork.py                          | 5 ++---
 UnitaryTests/ThreadSafe.py                          | 5 ++---
 UnitaryTests/ThreadSafeConnect.py                   | 5 ++---
 UnitaryTests/control_get_firmware.py                | 5 ++---
 UnitaryTests/control_switch_interface.py            | 5 ++---
 UnitaryTests/getAttrib.py                           | 5 ++---
 UnitaryTests/reset_card.py                          | 5 ++---
 UnitaryTests/stress_apdu.py                         | 5 ++---
 UnitaryTests/stress_get_firmware.py                 | 5 ++---
 UnitaryTests/transmit_loop.py                       | 5 ++---
 22 files changed, 44 insertions(+), 66 deletions(-)

commit 5c5a6ebfd2ac00f2784448d5a393d87fe7f8d5bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 5 12:08:59 2011 +0000

    Unitary test for FEATURE_CCID_ESC_COMMAND
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@6001 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/FEATURE_CCID_ESC_COMMAND.py | 50 ++++++++++++++++++++++++++++++++
 1 file changed, 50 insertions(+)

commit 0fb2d63ecf8031327c25e819db22c19a9916113d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 4 18:50:58 2011 +0000

    The winscard.h is in the srcdir not builddir
    
    Fix compiler warning (when using make distcheck):
    ../../../src/spy/pcsc-spy.c:32:22: fatal error: winscard.h: No such file
    or directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5999 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 860acb30139ce8ccae3d2a9c30b635a8f8a4b28f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 4 13:11:05 2011 +0000

    Use the command line argument (if any) as the log file
    
    If a command argument is passed we use it instead of the default
    ~/pcsc-spy FIFO file. It is then possible to record an execution log and
    use pcsc-spy.py multiple times on the same log.
    
    To create the log file just do:
    $ mkfifo ~/pcsc-spy
    $ cat ~/pcsc-spy > logfile
    and run your PC/SC application
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5997 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 39 ++++++++++++++++++++++++++-------------
 1 file changed, 26 insertions(+), 13 deletions(-)

commit d2547eb0fd8e16ebeeb80db3e909632e58a1af15
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 4 09:40:13 2011 +0000

    Make pep8 happy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5996 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 4185c05524ac1fc2ca1197829d21affcc9669fde
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 4 09:39:02 2011 +0000

    Parse FEATURE_GET_TLV_PROPERTIES results
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5995 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 83 +++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 62 insertions(+), 21 deletions(-)

commit 8cab925c78b9255c23de0e4161acd14acb1389c4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 4 09:01:50 2011 +0000

    Parse tge CM_IOCTL_GET_FEATURE_REQUEST results
    
    The parsing will also learn the values associate to tags for future
    calls.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5994 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 74 ++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 62 insertions(+), 12 deletions(-)

commit 6ec053c18a30970dfc880c5dcde0522abf3ef8bb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 4 07:51:33 2011 +0000

    Use %zd instead of %ld for a size_t integer
    
    Fix a warning when compiling on a 32-bits system:
    hotplug_linux.c: In function 'HPReadBundleValues':
    hotplug_linux.c:188: warning: format '%ld' expects type 'long int', but argument 6 has type 'unsigned int'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5993 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4e71ac23f4106d272350df6025404fc6ec6fc553
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 2 15:42:35 2011 +0000

    Use %zd instead of %ld for a size_t integer
    
    Fix 2 compiler warnings:
    readerfactory.c: In function `RFAddReader':
    readerfactory.c:124:3: warning: format `%ld' expects argument of type `long int', but argument 6 has type `size_t' [-Wformat]
    readerfactory.c:124:3: warning: format `%ld' expects argument of type `long int', but argument 7 has type `unsigned int' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5992 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 911a3b9e207107d9601b6524d80a3bf7e21bffef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 29 13:29:46 2011 +0000

    Log SCardControl() dwControlCode in a human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5988 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 20 +++++++++++++++++++-
 1 file changed, 19 insertions(+), 1 deletion(-)

commit a4e991b809abbca4d11f34d6104d869b7053898b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 29 13:06:41 2011 +0000

    Remove duplicate 0x00090303 key
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5987 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 1 -
 1 file changed, 1 deletion(-)

commit 81e1c5caf0225f10e97a4abf2bdaf62a67b597c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 29 13:06:06 2011 +0000

    Fix some pylint warnings
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5986 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 4 ++++
 1 file changed, 4 insertions(+)

commit 0ebde8545590925c5ff9041739dd89598f259324
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 29 12:59:23 2011 +0000

    Convert return value from hexa to text
    
    SCARD_E_NOT_TRANSACTED is more human friendly than 0x80100016
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5985 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c  |  2 +-
 src/spy/pcsc-spy.py | 78 ++++++++++++++++++++++++++++++++++++++++++++++++-----
 2 files changed, 73 insertions(+), 7 deletions(-)

commit 5ea2d8975421f87e84b7bffca161aeaff868d4e3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 29 12:43:26 2011 +0000

    log_in2() & log_out2(): return the data line read by the method
    
    This will allow to do some data processing on the debug data in the
    caller method.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5984 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 ++
 1 file changed, 2 insertions(+)

commit 49f30ab91d48b12ff1225e7646e034aa21e66f2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 13:05:08 2011 +0000

    Fix compiler warning
    
    pcsc-spy.c: In function 'SCardGetAttrib':
    pcsc-spy.c:635:6: warning: pointer targets in assignment differ in signedness [-Wpointer-sign]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5983 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f7c1092c60f238b5cea4d26a9ce20c32a1767461
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 13:03:54 2011 +0000

    Display the ASCII equivalent of a "binary" buffer
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5982 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit c36aec50e3fe20181b4cc67fa19624be984f0ba0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 12:53:38 2011 +0000

    SCardGetAttrib(): manage SCARD_AUTOALLOCATE case
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5981 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit c54dab6579e202f1dd8eb60e3484d57a6871c09f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 12:46:41 2011 +0000

    Display dwCurrentState & dwEventState parameter in human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5980 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 38 ++++++++++++++++++++++++++++++++++++--
 1 file changed, 36 insertions(+), 2 deletions(-)

commit a64fafdd178739dd3c9c3d50414e75a60338964e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 12:16:26 2011 +0000

    log_out_dwActiveProtocol(): correctly display UNKNOWN protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5979 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 1c01117a43564794ecd20633f725994efeb18522
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 08:47:50 2011 +0000

    Display dwActiveProtocol parameter in human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5978 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)

commit 832b266dd5ae3daab646eb3a744eafddbce42313
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 08:34:51 2011 +0000

    Display dwPreferredProtocols parameter in human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5977 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

commit 02f0de0173010378da2348b5ef111e555624f414
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 08:24:40 2011 +0000

    Fix 2 pep8 issues
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5976 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 812d84d4f176cee45bd0c6472b4644f258c12a18
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 08:24:14 2011 +0000

    Display dwShareMode parameter in human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5975 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 7c06a2120259994ae2569f08e1b700398f000e7b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 08:19:15 2011 +0000

    Display dwAttrId parameter in human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5974 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

commit ea59e99d1b5975e514c15bc278c220d158e32a55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:44:46 2011 +0000

    Display dwDisposition parameter in human form
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5973 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit 17cb23f7a47269a8e0fef917e45fda8e12fef0f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:33:19 2011 +0000

    Add support of SCardBeginTransaction() and SCardEndTransaction()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5972 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c  |  3 +++
 src/spy/pcsc-spy.py | 17 +++++++++++++++++
 2 files changed, 20 insertions(+)

commit b89624092ebae0898852db974a78d4cc21f41432
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:28:14 2011 +0000

    Add a missing space for a correct formatting
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5971 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bad5031f8894c215709b15fa59713733fc9b7a03
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:26:50 2011 +0000

    spy_quit(): rv is a LONG not int
    
    The problem occurs on 64-bits systems with sign extension from
    0x80100016 to 0xFFFFFFFF80100016
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5970 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3bc310e3cff67be914aa931e7e427b76dae849b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:19:42 2011 +0000

    Add support of pcsc_stringify_error()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5969 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 2f2c0dce26fca574f7806a00cb9eb933336959e1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:16:37 2011 +0000

    load_lib(): handle dlsym() errors
    
    log an error and return SCARD_F_INTERNAL_ERROR if dlopen() or dlsym()
    fails.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5968 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit c0b53269ecb94643168b99645184b004e538ada2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 27 07:13:05 2011 +0000

    load_lib(): do not call dlclose()
    
    Stupuid bug. We still need to access the symbols after the library is
    loaded. dlclose() should be closed only when the library is not used
    anymore (i.e. we don't know when).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5967 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/spy/pcsc-spy.c | 2 --
 1 file changed, 2 deletions(-)

commit dd7496fb285d253b4368a06cb1181bed9c59f9b3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 24 09:28:25 2011 +0000

    Update for Doxygen 1.7.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5965 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 166 +++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 126 insertions(+), 40 deletions(-)

commit 588856579f77917ea8bbf7093eaaae0dec3f1193
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 24 09:22:24 2011 +0000

    Doxygen: fixes and English improvement
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5964 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c         |   3 +-
 src/winscard_clnt.c | 101 +++++++++++++++++++++++++---------------------------
 2 files changed, 50 insertions(+), 54 deletions(-)

commit fc1051819ed387106067753f1f43dad68776344b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 24 09:00:37 2011 +0000

    Doxygen: remove a note about SCardControl() API change
    
    Between pcsc-lite 1.2.0 (Oct 2003) and 1.2.9-beta1 (May 2004) the API
    changed and the new parameter dwControlCode was added.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5963 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ---
 1 file changed, 3 deletions(-)

commit 5c38b03250fd3f8065bd61a4c7e2fc96461dab16
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 24 08:24:34 2011 +0000

    fix typo: smartcard -> smart card
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5962 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 2 +-
 src/atrhandler.c    | 2 +-
 src/atrhandler.h    | 2 +-
 src/winscard.c      | 4 ++--
 src/winscard_clnt.c | 2 +-
 5 files changed, 6 insertions(+), 6 deletions(-)

commit 0195b30374774c085e8f638ea07b4d030d149a71
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 24 08:14:37 2011 +0000

    Doxygen: fix a bug in the doc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5961 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a11cc4239fa6a7850b31209b24743a40c4a2d63f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 13 14:15:02 2011 +0000

    Generate src/spy/Makefile
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5955 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 8ae82ec2191d7ba87fd7a270e817490345a0d2f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 13 14:14:40 2011 +0000

    Move spy tools into the spy/ directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5954 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am           | 8 ++------
 src/spy/Makefile.am       | 8 ++++++++
 src/{ => spy}/pcsc-spy.c  | 0
 src/{ => spy}/pcsc-spy.py | 0
 4 files changed, 10 insertions(+), 6 deletions(-)

commit c7f104b439bd24aafc3e25e3ed54f4a4a3571c7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 13 14:09:50 2011 +0000

    Remove debug line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5953 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.py | 1 -
 1 file changed, 1 deletion(-)

commit e051d368557a29e79712d0859bead107004c337c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 13 12:20:15 2011 +0000

    Add Timing information
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5951 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.c  | 24 +++++++++++++++++++++---
 src/pcsc-spy.py | 25 ++++++++++++++++++-------
 2 files changed, 39 insertions(+), 10 deletions(-)

commit 8baf2cd3deed3bb5973618af6b78ac4a8252c963
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 9 09:31:05 2011 +0000

    Fix compiler warning
    
    pcsc-spy.c:243:28: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5949 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7d27cef4308bd5b63ceeeab8afc9f958d66c8a01
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 9 09:30:09 2011 +0000

    Fix issues caused by changes of spy_buffer() in the previous commit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5948 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.c  | 6 +++---
 src/pcsc-spy.py | 7 +++++++
 2 files changed, 10 insertions(+), 3 deletions(-)

commit a50ead02db66f1f7ef2edc35958ccb4c9d6c137c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 9 09:23:07 2011 +0000

    Log SCardGetStatusChange() reader array
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5947 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.c  | 24 +++++++++++++++++++++++-
 src/pcsc-spy.py | 19 ++++++++++++++++++-
 2 files changed, 41 insertions(+), 2 deletions(-)

commit 563ce4f61ff7000860b111d6f4013c0a52b99c62
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 9 08:36:46 2011 +0000

    Use a PCSCspy class
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5946 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.py | 565 +++++++++++++++++++++++++++-----------------------------
 1 file changed, 273 insertions(+), 292 deletions(-)

commit 91e37e27adc3a722e5661394eb16853a454d6b13
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 9 07:42:45 2011 +0000

    Make pylint happier
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5945 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.py | 35 ++++++++++++++++++++++++++++++-----
 1 file changed, 30 insertions(+), 5 deletions(-)

commit 38bbc7523e6240ce9cfc284843096d26c4b119c1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 9 07:34:14 2011 +0000

    Make pep8 happy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5944 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.py | 32 ++++++++++++++++++++++++++++++--
 1 file changed, 30 insertions(+), 2 deletions(-)

commit 662ea4e7a043fdea100e69b7c2095a8e8e63c608
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 6 13:16:56 2011 +0000

    Add support of multi entries text output
    
    This is used for SCardListReaders() and SCardListReaderGroups()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5943 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.c  | 21 +++++++++++----------
 src/pcsc-spy.py | 18 ++++++++++++++----
 2 files changed, 25 insertions(+), 14 deletions(-)

commit dc0c7faa1202ce98655471003de5a4e7c796a4c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 6 09:21:07 2011 +0000

    load_lib(): Do not use an absolut pathname
    
    Use "libpcsclite.so.1" instead of "/usr/lib/libpcsclite.so.1" to let the
    dynamic linker ld.so search for the lib.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5942 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-spy.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bf866000ea5e469a7865cb0d69bcf097e95696c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 6 09:00:57 2011 +0000

    Set $Id$ keyword
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5941 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit a96b5cad9df94005df0b2ace22c757c3ebc1b0be
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 4 12:55:46 2011 +0000

    check for mq_getattr() in -lrt
    
    In old versions of libudev the -lrt link flags is not added. This
    library is required for mq_getattr() used by sd-daemon.c
    
    On Ubuntu 10.04:
    $ pkg-config --libs libudev
    -ludev
    $ dpkg -l libudev-dev
    ii  libudev-dev    151-12.3       udev library (development files)
    
    On Debian wheery:
    $ pkg-config --libs libudev
    -ludev -lrt
    $ dpkg -l libudev-dev
    ii  libudev-dev    172-1          libudev development files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5940 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 +++
 1 file changed, 3 insertions(+)

commit faadd16277d8fda88e8547bc908c761678464622
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 4 09:21:27 2011 +0000

    Add SCARD_ATTR_VENDOR_IFD_VERSION and SCARD_ATTR_VENDOR_IFD_SERIAL_NO
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5939 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/getAttrib.py | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit 8850a81b633ddbaee97490052426848452fc6be5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:53 2011 +0000

    Remove extra spaces characters
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5938 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c |  2 +-
 src/pcscdaemon.c     | 22 +++++++++++-----------
 src/winscard_clnt.c  |  4 ++--
 3 files changed, 14 insertions(+), 14 deletions(-)

commit 14b9b77849d6c3e817c698887cff541df09dd0b4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:49 2011 +0000

    print_usage(): fix typo in argument documentation
    
    The correct option is --auto-exit
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5937 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b63351ff9bcda28ebf8292e05a99b5529b149e3c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:46 2011 +0000

    Add new files to .gitignore
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5936 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .gitignore | 5 +++++
 1 file changed, 5 insertions(+)

commit 3f9361cf68f1ad5613d83c449e3757fc5f7ea60e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:42 2011 +0000

    Use long arguments to pcscd command
    
    --foreground and --hotplug are easier to understand than -f and -H
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5935 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.service.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 81c78f478926b24f14c9a099d9f2e66594a0fb4a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:39 2011 +0000

    Add --with-systemdsystemunitdir=DIR comment
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5934 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 91d602559d680118da30a38e6dda7ccbd3127851
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:35 2011 +0000

    Install systemd service files
    
    Thanks to Kalev Lember for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2011-q2/0139.html
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5933 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am          |  5 ++++-
 configure.in         | 32 ++++++++++++++++++++++----------
 etc/Makefile.am      |  9 +++++++++
 etc/pcscd.service.in | 13 +++++++++++++
 etc/pcscd.socket.in  |  8 ++++++++
 5 files changed, 56 insertions(+), 11 deletions(-)

commit eff5035c6756478c518653dc052ba774cb92a291
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:32 2011 +0000

    Fix compiler warning when autostart is not used
    
    winscard_clnt.c: In function `SCardEstablishContext':
    winscard_clnt.c:455:1: warning: label `again' defined but not used
    [-Wunused-label]
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5932 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit bfa8ab3caddaf59a19197dd2c152ab915d21ef8b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:28 2011 +0000

    Add --disable-autostart option
    
    This option disables pcscd autostarting code in the libpcsclite library.
    
    With systemd socket activation in place, pcscd can be started
    automatically by systemd when a request arrives on the IPC socket. That
    makes starting the service as a fork from user library unnecessary.
    
    Thanks to Kalev Lember for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2011-q2/0137.html
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5931 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in        | 11 +++++++++++
 src/winscard_clnt.c |  6 ++++++
 2 files changed, 17 insertions(+)

commit 52aaa8e600d4869b99c7e903e65cc3afc3a8ca09
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:24 2011 +0000

    Use curl -O instead of a redirection
    
    This avoids a name duplication (less error-prone)
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5930 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 214078cbc955560ea87a8a2356ef6a3abf754f64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:43:21 2011 +0000

    Support systemd socket activation
    
    Add systemd socket-based activation support to pcscd as an alternative
    to the existing autostart code which used forking from the user space
    library. Systemd socket activation makes it possible to start pcscd on
    demand by systemd when a request is sent on the IPC socket.
    
    The implementation uses the $LISTEN_FDS/$LISTEN_PID env var parsing code
    from systemd's sd-daemon.[ch] copy library.
    
    Thanks to Kalev Lember for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2011-q2/0140.html
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5929 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am        |   6 +
 src/pcscdaemon.c       |  56 ++++--
 src/sd-daemon.c        | 526 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/sd-daemon.h        | 277 ++++++++++++++++++++++++++
 src/winscard_msg.h     |   1 +
 src/winscard_msg_srv.c |  25 +++
 6 files changed, 876 insertions(+), 15 deletions(-)

commit a1422300760d6dd6de7092802982563fa89ebdc5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 3 21:37:28 2011 +0000

    Unitary test for SCardGetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5928 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/getAttrib.py | 44 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)

commit bc537bd3efcc0177321571b4e669c34978b4ea04
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 2 07:48:13 2011 +0000

    Create .gitignore files
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5927 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .gitignore | 95 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 95 insertions(+)

commit 5825d235b0a0ba81c85bc9cf8eb595c2c65ad671
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 28 15:13:56 2011 +0000

    DebugLogSetLogType(): xterm-256color is also a color terminal
    
    xterm-256color is used by the Terminal application on Mac OS X (Lion)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5919 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f57af6966d3f68d88bcfa1c605fb0f6ee762607e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 25 08:40:39 2011 +0000

    PC/SC function spy layer
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5910 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am |   6 +-
 src/pcsc-spy.c  | 580 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/pcsc-spy.py | 265 ++++++++++++++++++++++++++
 3 files changed, 850 insertions(+), 1 deletion(-)

commit 56c2785380498d9620777b2d9c8db01e88c77916
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 21 13:53:37 2011 +0000

    log_xxd_always(): Use a variable-length array
    
    The debug message buffer is no more with a fixed size (around 600 bytes
    of buffer to log) but uses a variable-length array.
    
    It is now possible to log extended APDU of 64kB.
    
    The variable-length array feature is available in GCC in C90 mode and is
    mandatory in C99 standard.
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5901 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 21 +++++++--------------
 1 file changed, 7 insertions(+), 14 deletions(-)

commit 3868286d168a791c4d286bf31b7a0faa0a235361
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 21 13:53:33 2011 +0000

    RFSetReaderName(): remove useless parameter slot
    
    RFSetReaderName() is only called in one place with slot set to 0.
    This parameter is then useless and can be removed.
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5900 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 12 ++++++------
 src/readerfactory.h |  2 +-
 2 files changed, 7 insertions(+), 7 deletions(-)

commit e8bb8e2479ecc614474825d765ac845ce580aa76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 21 13:53:30 2011 +0000

    Use sizeof instead of a hard coded value
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5899 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit a6b649d5335026fe82e1723596a28aa71a1c8176
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 21 13:53:27 2011 +0000

    Remove log_xxd() implementation
    
    debug.c is use to log from the client side (libpcsclite).
    log_xxd() is not used in the client library so is just dead code.
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5898 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 37 +------------------------------------
 1 file changed, 1 insertion(+), 36 deletions(-)

commit 1e4c616cf779212ce0c19762b458bae7bbd44eb7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 21 13:37:38 2011 +0000

    log_line(): correctly calculate delta time when no color is used
    
    The update of last_time was only done in case of colorization
    (LogDoColor). So on unsupported consoles the time was wrong.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5896 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b7c52e5ce4ebb91905a659844b70504c5e2939b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 9 07:56:20 2011 +0000

    HPReadBundleValues(): use strtol() instead of the unsafe sscanf()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5887 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 23f85db59ebe7b409c0217671e818de68f4da6a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 9 07:55:09 2011 +0000

    HPEstablishUSBNotifications(): use atoi() instead of the unsafe sscanf()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5886 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e7ee5efca3b51411f00373daa735bbf423b6eff9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 9 07:49:14 2011 +0000

    Use atoi() instead of the unsafe sscanf()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5885 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ee2a9f6e2546f200838e47b4be21e1679be70a65
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 8 14:19:26 2011 +0000

    Check the return value of SCardGetStatusChange() for unknown readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5882 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardGetStatusChange2.py | 50 +++++++++++++++++++++++++++++++++++
 1 file changed, 50 insertions(+)

commit 72b6ffc76141afc3823030f0f161777d37f7ed06
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 8 14:17:27 2011 +0000

    SCardGetStatusChange(): check all the readers are already known and
    return SCARD_E_UNKNOWN_READER if a reader name is not present.
    
    Windows XP has this behavior.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5881 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

commit 37e0cbeb72e2845e8be2d75e62a866a9132cee89
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 19 19:14:39 2011 +0000

    Use safer snprintf() instead of sprintf()
    
    coverity: Event secure_coding: [VERY RISKY]. Using "sprintf" can cause a
    buffer overflow when done incorrectly. Because sprintf() assumes an
    arbitrarily long string, callers must be careful not to overflow the
    actual space of the destination. Use snprintf() instead, or correct
    precision specifiers.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5875 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 6b47792d871a38340484212d8d59f82f4eeb3403
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 19 18:48:27 2011 +0000

    Fix compiler warning
    
    hotplug_linux.c: In function 'HPReadBundleValues':
    hotplug_linux.c:188: warning: format '%d' expects type 'int', but
    argument 6 has type 'long unsigned int'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5874 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ca5544be9ed30ab1283ae18534f964e22369cc83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 18 12:49:30 2011 +0000

    Unitary test for SCardGetStatusChange()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5873 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardGetStatusChange.py | 94 ++++++++++++++++++++++++++++++++++++
 1 file changed, 94 insertions(+)

commit a082ef8588725ef07621287342a1f729a12bef49
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 12:04:18 2011 +0000

    Define PUCHAR using UCHAR instead of "unsigned char". Same for PDWORD
    and PULONG.
    
    We now have less lines to change to redefine types.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5869 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 3bb08945debc364b9ffa92f905870e0f41a96bb0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:59:09 2011 +0000

    Fix compiler warnings
    
    hotplug_macosx.c: In function 'HPDriversGetFromDirectory':
    hotplug_macosx.c:245: warning: format '%d' expects type 'int', but
    argument 7 has type 'CFIndex'
    hotplug_macosx.c:253: warning: format '%d' expects type 'int', but
    argument 7 has type 'CFIndex'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5868 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 38b165112f38d6b34be966e29d36b8043470bd7f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:50:16 2011 +0000

    MessageReceiveTimeout(): change timeOut parameter type to fix a compiler
    warning
    
    winscard_msg.c: In function `MessageReceiveTimeout':
    winscard_msg.c:186:13: warning: comparison between signed and unsigned
    integer expressions [-Wsign-compare]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5867 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 +-
 src/winscard_msg.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit edc98afffa100e901850986071fc174c7409c16d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:45:30 2011 +0000

    Silence compiler warnings
    
    tokenparser.l: In function `eval_key':
    tokenparser.l:62:6: warning: variable `r' set but not used
    [-Wunused-but-set-variable]
    
    tokenparser.l: In function `eval_value':
    tokenparser.l:92:6: warning: variable `r' set but not used
    [-Wunused-but-set-variable]
    
    tokenparser.l: In function `bundleParse':
    tokenparser.l:162:6: warning: variable `r' set but not used
    [-Wunused-but-set-variable]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5866 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 3 +++
 1 file changed, 3 insertions(+)

commit 6e878413da209cff4624b001adb367a392dee54a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:41:46 2011 +0000

    bundleParse(): fix a compilation error if NDEBUG is not definef (i.e.
    DEBUG is ON)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5865 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 3 +++
 1 file changed, 3 insertions(+)

commit 2a5c5def1e393ec8fe0ad2fda5bae88c397f36d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:37:48 2011 +0000

    Fix compiler warnings
    
    winscard_svc.c: In function `contextsListhContext_seeker':
    winscard_svc.c:86:3: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `const void *' [-Wformat]
    winscard_svc.c:86:3: warning: format `%X' expects argument of type
    `unsigned int', but argument 7 has type `const void *' [-Wformat]
    
    winscard_svc.c: In function `ContextThread':
    winscard_svc.c:296:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 7 has type `struct SCONTEXT *' [-Wformat]
    
    winscard_svc.c: In function `MSGAddHandle':
    winscard_svc.c:836:4: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `struct SCONTEXT *' [-Wformat]
    
    winscard_svc.c: In function `MSGCleanupClient':
    winscard_svc.c:916:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 7 has type `struct SCONTEXT *' [-Wformat]
    winscard_svc.c:924:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `struct SCONTEXT *' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5864 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 4d15b8fdfe784213c2bb45ef43514aaf9935b228
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:35:41 2011 +0000

    Fix compiler warnings
    
    winscard.c: In function `SCardEstablishContext':
    winscard.c:193:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `SCARDCONTEXT' [-Wformat]
    
    winscard.c: In function `SCardReleaseContext':
    winscard.c:204:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `SCARDCONTEXT' [-Wformat]
    
    winscard.c: In function `SCardConnect':
    winscard.c:234:2: warning: format `%d' expects argument of type `int',
    but argument 7 has type `DWORD' [-Wformat]
    winscard.c:315:5: warning: format `%d' expects argument of type `int',
    but argument 6 has type `LONG' [-Wformat]
    winscard.c:315:5: warning: format `%X' expects argument of type
    `unsigned int', but argument 7 has type `LONG' [-Wformat]
    winscard.c:410:5: warning: format `%d' expects argument of type `int',
    but argument 6 has type `DWORD' [-Wformat]
    winscard.c:422:2: warning: format `%x' expects argument of type
    `unsigned int', but argument 6 has type `SCARDHANDLE' [-Wformat]
    
    winscard.c: In function `SCardReconnect':
    winscard.c:693:5: warning: format `%d' expects argument of type `int',
    but argument 6 has type `DWORD' [-Wformat]
    
    winscard.c: In function `SCardDisconnect':
    winscard.c:821:2: warning: format `%d' expects argument of type `int',
    but argument 6 has type `DWORD' [-Wformat]
    
    winscard.c: In function `SCardBeginTransaction':
    winscard.c:1051:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `LONG' [-Wformat]
    
    winscard.c: In function `SCardEndTransaction':
    winscard.c:1188:2: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `LONG' [-Wformat]
    
    winscard.c: In function `SCardTransmit':
    winscard.c:1539:2: warning: format `%d' expects argument of type `int',
    but argument 6 has type `DWORD' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5863 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit c9c185f9bb8206f09f6dc8b7306ef379fc6c4ecc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:32:05 2011 +0000

    Fix compiler warnings
    
    readerfactory.c: In function `RFInitializeReader':
    readerfactory.c:941:3: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `LONG' [-Wformat]
    readerfactory.c:950:3: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `LONG' [-Wformat]
    readerfactory.c: In function `RFRemoveReaderHandle':
    readerfactory.c:1135:3: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `SCARDHANDLE' [-Wformat]
    readerfactory.c: In function `RFCheckReaderEventState':
    readerfactory.c:1198:3: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `SCARDHANDLE' [-Wformat]
    readerfactory.c: In function `RFCleanupReaders':
    readerfactory.c:1274:5: warning: format `%X' expects argument of type
    `unsigned int', but argument 6 has type `LONG' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5862 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 12547dfd838ba42bea7e06118ce2e344886c575f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:30:36 2011 +0000

    Fix compiler warning
    
    prothandler.c: In function `PHSetProtocol':
    prothandler.c:102:5: warning: format `%d' expects argument of type
    `int', but argument 6 has type `LONG' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5861 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 50f8b56e2eced09c7e9c9b0d0f49d1d901139738
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:29:52 2011 +0000

    Fix compiler warning
    
    ifdwrapper.c: In function `IFDControl':
    ifdwrapper.c:455:3: warning: format `%LX' expects argument of type `long
    long unsigned int', but argument 6 has type `DWORD' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5860 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d116888596172fa75219b8dd74ff78242d0a8321
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:28:20 2011 +0000

    Fix compiler warning
    
    eventhandler.c: In function `EHStatusHandlerThread':
    eventhandler.c:272:4: warning: format `%d' expects argument of type
    `int', but argument 6 has type `LONG' [-Wformat]
    eventhandler.c:272:4: warning: format `%X' expects argument of type
    `unsigned int', but argument 7 has type `LONG' [-Wformat]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5859 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 61d65c24392a53e273fc1ecada90c2d0ee8674b7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:18:32 2011 +0000

    Fix compiler warnings
    
    winscard_clnt.c: In function 'CHANNEL_MAP_seeker':
    winscard_clnt.c:282: warning: format '%X' expects type 'unsigned int',
    but argument 6 has type 'const void *'
    winscard_clnt.c:282: warning: format '%X' expects type 'unsigned int',
    but argument 7 has type 'const void *'
    winscard_clnt.c: In function 'SCONTEXTMAP_seeker':
    winscard_clnt.c:317: warning: format '%X' expects type 'unsigned int',
    but argument 6 has type 'const void *'
    winscard_clnt.c:317: warning: format '%X' expects type 'unsigned int',
    but argument 7 has type 'const void *'
    winscard_clnt.c: In function 'SCardAddContext':
    winscard_clnt.c:3385: warning: format '%X' expects type 'unsigned int',
    but argument 6 has type 'struct SCONTEXTMAP *'
    winscard_clnt.c:3393: warning: format '%X' expects type 'unsigned int',
    but argument 6 has type 'struct SCONTEXTMAP *'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5858 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 929a1e3c827c7f22df82a8e1af5f6225e71e16a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:14:50 2011 +0000

    Fix compiler warnings
    
    readerfactory.c: In function 'RDR_CLIHANDLES_seeker':
    readerfactory.c:68: warning: format '%X' expects type 'unsigned int',
    but argument 6 has type 'const void *'
    readerfactory.c:68: warning: format '%X' expects type 'unsigned int',
    but argument 7 has type 'const void *'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5857 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5ace57823db489aa5ca60f6ef9b2808b87070262
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:14:00 2011 +0000

    Fix compiler warnings
    
    readerfactory.c: In function 'RFAddReader':
    readerfactory.c:124: warning: format '%d' expects type 'int', but
    argument 6 has type 'size_t'
    readerfactory.c:124: warning: format '%d' expects type 'int', but
    argument 7 has type 'long unsigned int'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5856 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 093de0c2ff3204d0207a61f6fca0eb7ea0c574fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:12:17 2011 +0000

    Fix a bug detected thanks to revision 5854 and a compiler warning
    
    readerfactory.c: In function 'RFSetReaderEventState':
    readerfactory.c:1167: warning: format '%s' expects type 'char *', but
    argument 6 has type 'int'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5855 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c60b2be6a34f71ee37c7e8b460fddd463455c340
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 9 11:10:32 2011 +0000

    log_msg(): use __attribute__((format(printf, ..))) to check the
    parameters passed corresponds to the format string
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5854 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 4d397252f8f15aef118a5d3570500a135b52055f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 8 12:17:27 2011 +0000

    HPRegisterForHotplugEvents(): add a log call for info
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5853 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 1 +
 1 file changed, 1 insertion(+)

commit d944e2057d919d6c680210266f5441dabd255c42
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 8 12:04:35 2011 +0000

    HPRescanUsbBus(): check libusb_init() return value
    
    Thanks to Dwi Sasongko Supriyadi for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2011-q3/0014.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5852 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 05786f1a273addc82bf7045bc8e522ee0c237e22
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 19:59:01 2011 +0000

    log_xxd(): use safer snprintf() instead of sprintf()
    
    Event secure_coding: [VERY RISKY]. Using "sprintf" can cause a buffer
    overflow when done incorrectly. Because sprintf() assumes an arbitrarily
    long string, callers must be careful not to overflow the actual space of
    the destination. Use snprintf() instead, or correct precision
    specifiers.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5850 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 849eb34d4c278e1cf19c6f766a85a6ae9fc77af0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 19:56:56 2011 +0000

    log_xxd_always(): use safer snprintf() instead of sprintf()
    
    coverity: Event secure_coding: [VERY RISKY]. Using "sprintf" can cause a
    buffer overflow when done incorrectly. Because sprintf() assumes an
    arbitrarily long string, callers must be careful not to overflow the
    actual space of the destination. Use snprintf() instead, or correct
    precision specifiers.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5849 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 80b85d7c0963b2d360abf5493683759757593713
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 19:52:13 2011 +0000

    RFAddReader(): use safer snprintf() instead of sprintf()
    
    coverity: Event secure_coding: [VERY RISKY]. Using "sprintf" can cause a
    buffer overflow when done incorrectly. Because sprintf() assumes an
    arbitrarily long string, callers must be careful not to overflow the
    actual space of the destination. Use snprintf() instead, or correct
    precision specifiers.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5848 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ae6d34af759d4c7a2ab0312a1226cadcd74a98da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 19:09:19 2011 +0000

    HPReadBundleValues(): fix a memory leak
    
    coverity: Event leaked_storage: Variable "hpDir" going out of scope
    leaks the storage it points to.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5847 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 1 +
 1 file changed, 1 insertion(+)

commit 6def73de258875cae3fb38e3798030bd6dc1c26d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 19:04:19 2011 +0000

    HPRescanUsbBus(): Move the lock/unlock _around_ the loop so that the
    values are constant between check and use.
    
    coverity: Event use: Using an unreliable value of
    "readerTracker[i].fullName" inside the second locked section. If the
    data that "readerTracker[i].fullName" depends on was changed by another
    thread, this use might be incorrect.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5846 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit aedb0ec7013f2648ad000976035e84b593d38e47
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 12:15:38 2011 +0000

    SCardConnect(): use safer strlcpy() instead of strncpy()
    
    coverity: Event buffer_size_warning: Calling strncpy with a maximum size
    argument of 100 bytes on destination array "scConnectStruct.szReader" of
    size 100 bytes might leave the destination string unterminated.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5845 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5927c587d17897c9eee720ba9fc9453afcb35aef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 12:14:31 2011 +0000

    SCardConnect(): use sizeof instead of a hardcoded value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5844 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit db332594c3d2320b3624b3050e140907dc62eb70
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 12:10:32 2011 +0000

    SCardStatus(): remove dead code
    
    coverity: Event dead_error_condition: On this path, the condition "rv !=
    0L" cannot be true.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5843 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ------
 1 file changed, 6 deletions(-)

commit f43734d000667dfcd03ac299156f80eab416202f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 12:03:53 2011 +0000

    Reformat 4 spaces with 1 tab
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5842 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit eff5f8941378f95d16015f703e01919262a611f7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 11:52:27 2011 +0000

    Fix a memory leak
    
    coverity: Event leaked_storage: Variable "CFBundleName" going out of
    scope leaks the storage it points to.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5841 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 1 +
 1 file changed, 1 insertion(+)

commit 0f8fb756d2265b38ea49e2df994f744ef3bc4327
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 11:49:35 2011 +0000

    Fix a memory leak
    
    coverity: Event leaked_storage: Variable "hpDir" going out of scope
    leaks the storage it points to.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5840 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 1 +
 src/hotplug_libusb.c  | 1 +
 2 files changed, 2 insertions(+)

commit 1587cf5eb05235ace2e6ff2218cd16285a46d13f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 5 21:55:12 2011 +0000

    Fix compiler warnings
    
    testpcsc.c: In function 'main':
    testpcsc.c:222: warning: assignment discards qualifiers from pointer target type
    testpcsc.c:225: warning: assignment discards qualifiers from pointer target type
    testpcsc.c:228: warning: assignment discards qualifiers from pointer target type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5831 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c5981a249a98f3f3d986ca4d41608ef870b4fe9b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 5 21:54:15 2011 +0000

    pioRecvPci really need to be allocated by the caller since it is filled
    by SCardTransmit() as a return parameter.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5830 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 9c86ff803f653ebbb167bd4dadda3b30b14d7750
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 5 20:51:37 2011 +0000

    Fix     a REVERSE_INULL coverity error
    
    sContext->pFeeds is checked for NULL _after_ being dereferenced in
    RFUnloadReader() called by RFUnInitializeReader().
    We now check before dereferencing.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5826 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit 494ec922f5ecf6bcac3113cdad4c2b0bb77a8c21
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 5 20:39:12 2011 +0000

    Initialize pioRecvPci
    
    Make coverity scan happy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5825 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 60a8b0a004dcb46032bdbf713a6160d7c2d3afd9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 5 20:36:53 2011 +0000

    Use pointers for pioRecvPci and pioSendPci to better match with the
    variable names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5824 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit a5992b50f21aaf08c60a699b1e0e2e995f2a0149
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 4 08:18:22 2011 +0000

    print_usage(): update arguments documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5822 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 2b6a6cb80a72b940bb615887c353aded7d3a8799
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 4 08:02:48 2011 +0000

    main(): do not use atexit() since our at_exit() function will be called
    upon signal receipt from our signal_trap() function.
    
    The problem was that at_exit() was called a second time on the process
    exit and gerenarted error messages:
    00000006 pcscdaemon.c:634:at_exit() cleaning /var/run/pcscd
    00001328 pcscdaemon.c:634:at_exit() cleaning /var/run/pcscd
    00000033 pcscdaemon.c:658:clean_temp_files() Cannot remove /var/run/pcscd/pcscd.comm: No such file or directory
    00000013 pcscdaemon.c:663:clean_temp_files() Cannot remove /var/run/pcscd/pcscd.pid: No such file or directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5821 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ----
 1 file changed, 4 deletions(-)

commit f904f1a62a554a4d4b422b2a1c7df71f2a421012
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 1 07:53:10 2011 +0000

    Improve comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5818 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardReconnect.py | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 0aab882be24571280d71fcd0a605ea9459bfbff7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 29 19:23:41 2011 +0000

    Enable silent build by default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5814 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 ++
 1 file changed, 2 insertions(+)

commit 4f245a783fc68c62e28ff57e2fa54ccc21d04e43
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 28 19:27:15 2011 +0000

    Remove now unused PHGetDefaultProtocol() and PHGetAvailableProtocols()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5813 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 30 ------------------------------
 src/prothandler.h |  2 --
 2 files changed, 32 deletions(-)

commit 970298d79eb1abcc59d4a88ca7f5eabf088b3757
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 28 19:26:22 2011 +0000

    SCardConnect(), SCardReconnect(): use ATRDecodeAtr() directly instead of
    PHGetDefaultProtocol() and PHGetAvailableProtocols()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5812 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 24 +++++++++---------------
 1 file changed, 9 insertions(+), 15 deletions(-)

commit 67a433b2642dd782fff27e04753ef6ea1d987197
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 28 12:39:13 2011 +0000

    ATRDecodeAtr(): use only two out parameters availableProtocols and
    currentProtocol instead of struct SMARTCARD_EXTENSION
    
    Remove some unused code from ATRDecodeAtr().
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5811 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c  | 93 ++++++++++++-------------------------------------------
 src/atrhandler.h  | 30 ++----------------
 src/prothandler.c | 22 ++++---------
 3 files changed, 28 insertions(+), 117 deletions(-)

commit 9a3315e4702f85b748bf39e321325d9e8a8df592 (tag: 1.7.4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 23 16:13:53 2011 +0000

    release 1.7.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5809 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 6 ++++++
 configure.in | 2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 33f645b2e4d73059d9d3ec380885cf8067408c48
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 23 15:45:35 2011 +0000

    ATRDecodeAtr(): revert revision 5804
    
    T=1 cards were no more recognized. Brown paper bag bug.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5808 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 10 +---------
 1 file changed, 1 insertion(+), 9 deletions(-)

commit af6168d730893c4e02741272f90f003e01a6ceda (tag: 1.7.3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 22 07:27:34 2011 +0000

    release 1.7.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5806 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 24 ++++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 25 insertions(+), 1 deletion(-)

commit 5760d1fb87120ae8da795a054b2739aba9336f96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 22 07:06:50 2011 +0000

    IFDSetPTS() and IFDPowerICC(): remove useless variable ucValue[]
    
    ifdwrapper.c: In function `IFDSetPTS':
    ifdwrapper.c:50:8: warning: variable `ucValue' set but not used
    [-Wunused-but-set-variable]
    ifdwrapper.c: In function `IFDPowerICC':
    ifdwrapper.c:252:8: warning: variable `ucValue' set but not used
    [-Wunused-but-set-variable]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5805 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 5 -----
 1 file changed, 5 deletions(-)

commit e1c31b262fd45747a9d77ec99a486c8f2c55c3b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 22 07:03:57 2011 +0000

    ATRDecodeAtr(): only use TBi and TCi in ATR_DEBUG mode
    
    atrhandler.c: In function `ATRDecodeAtr':
    atrhandler.c:106:19: warning: variable `TCi' set but not used
    [-Wunused-but-set-variable]
    atrhandler.c:106:14: warning: variable `TBi' set but not used
    [-Wunused-but-set-variable]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5804 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 49308e36ed412036f3fc6522544ff6d67d3faf3a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 22 07:00:06 2011 +0000

    Remove unused variable
    
    atrhandler.c: In function `ATRDecodeAtr':
    atrhandler.c:48:11: warning: variable `TCK' set but not used
    [-Wunused-but-set-variable]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5803 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 666e874e2edfbbf5f5ca5b9a6352628973bc6e8f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 22 06:53:46 2011 +0000

    SCARD_PCI_T0 and SCARD_PCI_T1 and now const values
    
    Fix compiler warnings:
    pcsc_demo.c: In function `main':
    pcsc_demo.c:161:24: warning: assignment discards `const' qualifier from
    pointer target type [enabled by default]
    pcsc_demo.c:164:24: warning: assignment discards `const' qualifier from
    pointer target type [enabled by default]
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5802 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1afd944edc0cee58e77b00275537b661c8ab1742
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 21 11:26:03 2011 +0000

    Remove the deprecated FEATURE_MCT_READERDIRECT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5801 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h | 1 -
 1 file changed, 1 deletion(-)

commit 423cecb302da5e1676859d55e8bfa1faa126d051
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 16 08:58:37 2011 +0000

    SCardGetStatusChange(): add a cast to fix a compiler warning
    
    winscard_clnt.c:1890: warning: comparison between signed and unsigned
    integer expressions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5797 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bcc4cb103af863734ef462c055c77820fa913dbf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 16 08:56:03 2011 +0000

    MessageReceiveTimeout(): change timeOut type from int32_t to unsigned
    long to avoid overflows with a timeout of 1000000000.
    
    The bug was that MessageReceiveTimeout() timeouts immediatly when it
    should not. So a _lot_ of exchanges with pcscd occurs.
    
    Tested on 64-bits CPU only.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5796 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 +-
 src/winscard_msg.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 797655bec12c26da3f33c707be4ad738c1e11552
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 16 08:19:13 2011 +0000

    SCardGetStatusChange(): catch possible sign extension problems from 32
    to 64-bits integers
    
    Storing INFINITE (0xFFFFFFFF) into an int parameter and then passing it
    to SCardGetStatusChange() will expand the int into a DWORD (unsigned
    long). On 64-bits architecture it will become 0xFFFFFFFFFFFFFFFF (-1).
    
    See OpenSC bug at http://www.opensc-project.org/pipermail/opensc-devel/2011-June/016848.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5795 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit 639f07a3ccc2e8a11c5e8bd2a71a343a31059a3b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 15 14:10:45 2011 +0000

    HPEstablishUSBNotifications(): wait for a udev event before calling
    udev_monitor_receive_device()
    
    Fix Alioth bug [#313165] "libudev-support broken with udev-171:
    udev_monitor_receive_device() error"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5793 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 85f2670657ae6c2ceaecb0bccab35ed4862c232e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 14 15:17:53 2011 +0000

    API_TRACE_IN: use %ld instead of %d for DWORD and LONG types.
    
    The timeout in SCardGetStatusChange() is now correctly displayed
    4294967295 instead of -1 on 64-bits systems.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5790 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit f6c971810871583461b6936b8045816c314e0b3d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 11 16:58:40 2011 +0000

    Remove useless cast for calloc() (we are not in C++)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5786 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 87d247ecd292367a7849846fe7461892f7e64986
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 11 11:55:39 2011 +0000

    Add my name as copyright holder
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5780 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING | 1 +
 1 file changed, 1 insertion(+)

commit bd869313c335a2150d62e965172e1a1893ed69b9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 30 09:22:57 2011 +0000

    EHStatusHandlerThread(): always sleep if the driver card event function
    returns an error (and not just in the case of IFD_NO_SUCH_DEVICE)
    
    This avoids to loop too fast in case of a problem. This happens after
    activating a smart card reader in vmware workstation for example.
    
    See https://bugs.launchpad.net/ubuntu/+source/pcsc-lite/+bug/787451
    "pcscd spams to syslog and kern.log after enabling smartcard reader in
    VMWare Workstation"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5769 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 290145bb4608a42ef5a83812787bc747bf200532
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 25 07:42:04 2011 +0000

    SCardConnect(): log at level PCSC_LOG_DEBUG instead of PCSC_LOG_ERROR if
    no card is inserted
    
    Thanks to Kalev Lember for the patch
    https://bugzilla.redhat.com/show_bug.cgi?id=707412#c2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5766 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b9d7592c0e389a4b29d0385ae1219ad8726d6376
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 22 11:33:09 2011 +0000

    WRITE_BODY_WITH_COMMAND(): always log with level PCSC_LOG_DEBUG even in
    case of error to avoid filling the system log file.
    
    Thanks to Kalev Lember for the patch.
    See https://bugzilla.redhat.com/show_bug.cgi?id=657658
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5765 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fe02cd08676d5f69f0d543be0ed2c96f14c9351e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 11:57:51 2011 +0000

    print_usage(): document -x, --auto-exits
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5764 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 ++
 1 file changed, 2 insertions(+)

commit 27ab1dea5b9c16ab01f3bb4c35bf98ffe7d165f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 11:54:08 2011 +0000

    Use AC_LANG_SOURCE as requested by autoconf 2.68
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5763 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2696b9c40889bb67c17b4ba5418b1c6eb840cfb6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 17 13:47:00 2011 +0000

    Do not generate call and include graphs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5759 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9acdc8fd6b6992aa19fc8a7eb5754b3e8656dbd2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 12 08:43:33 2011 +0000

    Define g_rgSCardT?Pci as const structures to be more Windows like
    
    I do not expect a regression or compilation problem in WinSCard API
    users but how knows...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5736 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 src/winscard_clnt.c    | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit fb3b0997616d0ef21ab60f9b0f9d6bef3a6af3d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 12 08:31:29 2011 +0000

    No need to define host_to_ccid_16 and host_to_ccid_32 any more since
    they were removed in revision 5255 from src/PCSC/reader.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5735 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 11 -----------
 1 file changed, 11 deletions(-)

commit 23159063f377e909dad6c1f6c9671f72a36b9a10
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 12 08:20:47 2011 +0000

    Do not check for libusb or libudev is USB support is disabled.
    
    See Debian bug #626201: pcsc-lite: FTBFS on hurd-i386
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5734 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 56594cb89deac8f120b3ac722eb507488b4c2ca9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 11 06:52:39 2011 +0000

    ContextThread(): in CMD_GET_READERS_STATE call RFWaitForReaderInit only
    if USE_USB is defined.
    
    Fix a link failure if --disable-usb is used.
    
    See Debian bug #626201: pcsc-lite: FTBFS on hurd-i386
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5732 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 ++
 1 file changed, 2 insertions(+)

commit 23b03813fd77e10955d29d384277f634d7da789a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 5 09:26:47 2011 +0000

    Update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5714 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h    | 2 +-
 src/PCSC/ifdhandler.h  | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 src/PCSC/wintypes.h    | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit fc6e5370fe05903fce42b0b17b361eb1b7a0a10e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 5 09:25:14 2011 +0000

    Add command line option -T, --color: force use of colored logs
    
    The idea is to have colored logs even if they are redirected to a file
    or a pipe.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5713 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h |  3 ++-
 src/debuglog.c      |  4 +++-
 src/pcscdaemon.c    | 10 +++++++++-
 3 files changed, 14 insertions(+), 3 deletions(-)

commit 156b50b8db9975e3072cb9769ee1e0207607d479
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 5 09:10:34 2011 +0000

    log_line(): display the delta time between two log lines even if stdout
    is not a tty (redirected to a file)
    
    The information may be usefull to detect problems from a log file with
    this time information.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5712 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 45 ++++++++++++++++++++++++---------------------
 1 file changed, 24 insertions(+), 21 deletions(-)

commit 3ee1c989cd758950bd0c8c403b62d3733afc2767
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 5 09:02:08 2011 +0000

    Update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5711 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c      | 2 +-
 src/debuglog.c        | 2 +-
 src/eventhandler.c    | 2 +-
 src/hotplug_generic.c | 2 +-
 src/hotplug_libusb.c  | 2 +-
 src/hotplug_linux.c   | 2 +-
 src/hotplug_macosx.c  | 2 +-
 src/ifdwrapper.c      | 2 +-
 src/pcscdaemon.c      | 4 ++--
 src/prothandler.c     | 2 +-
 src/readerfactory.c   | 2 +-
 src/readerfactory.h   | 2 +-
 src/utils.c           | 2 +-
 src/winscard.c        | 2 +-
 src/winscard_clnt.c   | 2 +-
 src/winscard_svc.c    | 2 +-
 16 files changed, 17 insertions(+), 17 deletions(-)

commit 506fd849968fbef96d7119393b136ce93f732597
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 5 08:57:07 2011 +0000

    Send logs to stdout instead of stderr
    
    It is now possible to use tee(1) to redirect logs in a file without
    first redirecting stderr to stdout
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5710 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h |  2 +-
 src/debuglog.c      | 16 ++++++++--------
 src/pcscdaemon.c    | 14 +++++++-------
 3 files changed, 16 insertions(+), 16 deletions(-)

commit 284792aac77afa7df4f51f9d01b626c686cae192
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 5 08:55:08 2011 +0000

    at_exit(): use exit() instead of _exit() to properly close stderr and
    stdout and other libC cleanup
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5709 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 30221b4ccdd6a82b7df9aee5c0b5c3e4e055d0ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 4 14:57:30 2011 +0000

    Remove support of DebugLogSuppress()
    
    This function is not used anywhere in pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5708 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h |  3 ---
 src/debuglog.c      | 20 +++-----------------
 2 files changed, 3 insertions(+), 20 deletions(-)

commit 292cc9791c6281c0ba6f9e68620490bf03cd259b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 3 07:11:44 2011 +0000

    HPRescanUsbBus(): fix a memory leak
    
    Call libusb_free_config_descriptor() to free the memory allocated by
    libusb_get_active_config_descriptor()
    
    Thanks to Roland Troka for the patch
    Closes Alioth bug: [313036] alto uso della ram da pcscd versione 1.6.7 e 1.7.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5707 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 1 +
 1 file changed, 1 insertion(+)

commit 258816fd5396f1e5f5078b1af70116fe5beb22bf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 22 13:39:08 2011 +0000

    Fix: "start pcscd only when a reader is connected"
    and "do not open the reader USB device if no client is using the reader"
    
    Now that pcscd is auto started it will be started only if an appication
    is using the PC/SC API. This is the case since release 1.6.0:
    - SCardEstablishContext(): try to start the pcscd daemon if not already
      running.
      . pcscd will suicide itself after 60 seconds of inactivity if it is
      started using --auto-exit. This is the default behavior when pcscd is
      started by libpcsclite
      . Set PCSCLITE_PCSCD_ARGS with the argument you want to pass to pcscd in
      autostart Only one argument is passed. The space character is not a
      separator. example: export PCSCLITE_PCSCD_ARGS=-dfa
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5705 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 9 ---------
 1 file changed, 9 deletions(-)

commit 5f54d9a450bccad0fa994ba5041b584f69d83d0c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 22 13:33:59 2011 +0000

    Fix: "start pcscd as an normal user daemon (as id smartcard?) instead as
    root"
    
    This is the case since release 1.6.5:
    - Install pcscd as sgid pcscd instead of suid root
      See http://ludovicrousseau.blogspot.com/2010/09/pcscd-auto-start.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5704 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit c389e44c754ad3608175dec4b7b50cddcc08fc61
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 22 13:32:03 2011 +0000

    Fix: "use static driver instead of reader polling and dynamic driver
    loading"
    
    This is the case since release 1.6.0:
    - Better handling of PCSCLITE_STATIC_DRIVER as can be used on platforms
      using <B5>Clinux (without dynamic loader).  This is used to statically
      link the reader driver to pcscd. Since the link is static you must
      define the IFDHandler API version at compilation time. Either define
      IFDHANDLERv1, IFDHANDLERv2 or IFDHANDLERv3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5703 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 4 ----
 1 file changed, 4 deletions(-)

commit 66b4ff986c9a83495376484ff6ede97737a71dd5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 5 08:11:13 2011 +0000

    signal_trap(): exit immediatly in case of SIGTERM
    
    Closes Debian bug #620305 "pcscd slows down sutdown/restart"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5692 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 97be735f2b511ec94ec565f3a76e1ebb7b6db488 (tag: 1.7.2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 31 19:47:14 2011 +0000

    release 1.7.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5684 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 5 +++++
 configure.in | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit c2721bfab88a5452dceeaa3a13e21c56998e5394
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 31 19:01:51 2011 +0000

    HPAddDevice(): avoids a crash if a specific driver fails to work and no
    class driver is available
    
    Fix Debian bug #620232: pcscd fails to work with REINER SCT cyberJack
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5683 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit facfaf377bd10005b22f3cc964b36adc8976be2a (tag: 1.7.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 30 08:16:28 2011 +0000

    release 1.7.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5679 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 9 +++++++++
 configure.in | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit fa4c981bb6fe2863161636071a27511e9f8ca178
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 27 10:41:19 2011 +0000

    Log an error if udev_device_get_devnode() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5676 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 564b2e6ea55f73e03276afd49a0596b2ec50a57c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 26 20:19:45 2011 +0000

    Try to use a (CCID) class driver if a specific driver fails to use the
    reader.
    
    This may happen if openct ifd-handler and libccid are both installed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5675 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 41 ++++++++++++++++++++++++++++++-----------
 1 file changed, 30 insertions(+), 11 deletions(-)

commit 3d797dd0dab78bde542bc72b72da45e5116f2b1e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 26 19:53:47 2011 +0000

    CheckForOpenCT(): Log openct control file found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5674 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2baa12be6017a097a5a607078b84231f7361cceb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 26 17:21:48 2011 +0000

    Check the udev_device_get_devnode() return value (and avoids a crash)
    
    Fix Debian bug #619241
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5673 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libudev.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 4a7a44cc52e133bb8619b23461c32360819769e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 16 17:35:54 2011 +0000

    CardControl(): initialize all the fields of the struct control_struct to
    avoid valgrind warning:
    
    ==14600== Syscall param socketcall.sendto(msg) points to uninitialised byte(s)
    ==14600==    at 0x5042532: send (send.c:28)
    ==14600==    by 0x4E2FDF9: MessageSend (winscard_msg.c:355)
    ==14600==    by 0x4E2FEE2: MessageSendWithHeader (winscard_msg.c:294)
    ==14600==    by 0x4E2C05C: SCardControl (winscard_clnt.c:2375)
    ==14600==    by 0x4008D4: main (scontrol.c:49)
    ==14600==  Address 0x7fefffc60 is on thread 1's stack
    
    
    Thanks to Martin Vogt for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2011-q1/0088.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5659 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 11cd181454ed790b537586f93c2fa215626f1898
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 13 11:02:32 2011 +0000

    Use libudev only for Linux by default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5655 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 3918bc70aa8cbfd03c7386a33e9700a5efd0c73c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 13 09:47:06 2011 +0000

    PCSC_ARCH: convert / in _ to have GNU_kFreeBSD instead of GNU/kFreeBSD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5653 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 32e76611c1ec58ab8ee8f05cd67150c44ce97d9f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 9 13:23:56 2011 +0000

    Typo caused by autocompletion without check
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5650 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eec58d4ae7d0893c85ae7bce28214443892397c5 (tag: 1.7.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 9 13:14:27 2011 +0000

    release 1.7.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5649 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 5 +++++
 configure.in | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 7e3a477281dda97036229d3512a1eb7be6da33e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 25 13:36:57 2011 +0000

    Use libudev instead of (deprecated) libhal for the USB hotplug mechanism.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5638 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in                                |  52 +--
 src/Makefile.am                             |   6 +-
 src/PCSC/ifdhandler.h                       |  18 +-
 src/hotplug_generic.c                       |   2 +-
 src/{hotplug_libhal.c => hotplug_libudev.c} | 502 +++++++++++++++-------------
 src/hotplug_linux.c                         |   2 +-
 6 files changed, 310 insertions(+), 272 deletions(-)

commit 8e9c826019eca22ca0a0e76ede8a1d001baad1dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 24 19:34:58 2011 +0000

    Remove debug printf()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5636 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 1 -
 1 file changed, 1 deletion(-)

commit e026fd39ca90571e6d29324f4b8aac81c142f735 (tag: 1.6.7)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 22:16:54 2011 +0000

    release 1.6.7
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5628 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 13 +++++++++++++
 configure.in |  2 +-
 2 files changed, 14 insertions(+), 1 deletion(-)

commit 36fc3a635451099d710b727e15d12529362deef2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 21 15:05:38 2011 +0000

    If a device has more than one CCID interface the "libhal:" naming scheme
    (with the interface number included) is used instead of "libusb:".
    
    The new mechanism allows to use multi-interfaces devices like the
    Gemalto ProxDU also with hotplug_libusb. libhal is deprecated and may
    not be available everywhere.
    
    Thanks to Diego Elio Petten√≤ for the patch (for Gentoo)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5621 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 88 +++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 60 insertions(+), 28 deletions(-)

commit 2ec45027058060c801b2b50251fb22be2fab83dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 10 09:07:39 2011 +0000

    Move the definition of DO_TRACE, DO_PROFILE, and DO_CHECK_SAME_PROCESS
    at the top of the file, and add documentation.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5589 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 2d9f531857925737436f88bf77c29de9153968fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 9 20:15:32 2011 +0000

    Do not create empty directories .../pcsc/drivers and .../pcsc/services
    any more. The needed directory is created by the driver instead.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5587 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 5 -----
 1 file changed, 5 deletions(-)

commit 8255677249972502cae9e900cfaf7d18098114ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 4 19:24:59 2011 +0000

    Fix PEP8 warnings
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5584 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafe.py  | 1 +
 UnitaryTests/stress_apdu.py | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 114fbc996d87f8cd7063ebe8b9bd3e1f043db5ce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 4 18:16:11 2011 +0000

    Display the thread id and iterations
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5583 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafe.py | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 07b95cc3d4c418bdd16137279ac744f7d82cffc0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 4 17:52:37 2011 +0000

    Better documentation and debug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5582 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCard_fork.py | 22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)

commit ed100ac047527fde0a6e87cdc54ed976c7cf20c4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 4 17:20:25 2011 +0000

    Add a missing variable declaration used if DO_CHECK_SAME_PROCESS is
    defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5581 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit ecc68cc1cfb449c29a109fff45d48e40f7283449
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 4 15:05:56 2011 +0000

    Test the behavior as documented in revision 5579
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5580 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT.py | 38 +++++++++++++++++++++++++++++++------
 1 file changed, 32 insertions(+), 6 deletions(-)

commit 91a9d9a7aa03ceb4a49b3844a37d73f074f01145
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 4 15:04:44 2011 +0000

    Doxygen: CardConnect() & SCardReconnect()
    pdwActiveProtocol is not set to SCARD_PROTOCOL_UNDEFINED if
    SCARD_SHARE_DIRECT is used but the card has already negociated its
    protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5579 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 024102ab2d0c90e678f5ecb2bf8b56504eccbaa4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 1 16:03:32 2011 +0000

    Unitary test for Alioth bug [#312960] SCardDisconnect when other context
    has transaction
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5575 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .../SCardBeginTransaction_ExclusiceMode.py         | 78 ++++++++++++++++++++++
 1 file changed, 78 insertions(+)

commit cd3603979f1b14936d1d53e0b6c53de79b311afd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 1 16:02:27 2011 +0000

    SCardDisconnect(): RFUnlockAllSharing() may fail with
    SCARD_E_SHARING_VIOLATION if a transaction is on going on another card
    context and dwDisposition == SCARD_LEAVE_CARD. We should not stop and
    continue disconnecting the card.
    
    Fixes Alioth bug [#312960] SCardDisconnect when other context has transaction
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5574 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit 0bc507dbd11fb6e2e8806420569868ae44fd813f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 1 15:37:53 2011 +0000

    Use the protocol negociated by SCardConnect() instead of hard coding
    SCARD_PCI_T1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5573 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT2.py | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f9de7926be517e2b5ea6884468e8d93af35d467b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 1 07:54:36 2011 +0000

    SCardDisconnect(): remove the card handle only if SCARD_DISCONNECT
    command succeeded on the server
    
    Related to alioth bug [#312960] SCardDisconnect when other context has
    transaction
    If a first SCardDisconnect() fails with SCARD_E_SHARING_VIOLATION it is
    now possible to try again SCardDisconnect(). Before the patch the
    second call to SCardDisconnect() returned SCARD_E_INVALID_HANDLE but the
    connection was still "in use".
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5572 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit cfdd65d10ea7346cbff2c6b30ddf33537fef7124
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 29 13:59:11 2011 +0000

    Revert revision 5568 since it has side effect on driver compilation
    (like libccid fails to build)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5569 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 ++
 src/readerfactory.h   | 1 -
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 4922ca9e20e5d98fdb5da260e4e54964359fbcd4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 29 13:20:50 2011 +0000

    Move #include "pcsclite.h" from PCSC/ifdhandler.h to readerfactory.h so
    that ifdhandler.h can be used as-is on Mac OS X (for handler_test.c)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5568 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 --
 src/readerfactory.h   | 1 +
 2 files changed, 1 insertion(+), 2 deletions(-)

commit bd9fb38317e55acb5dcdba6fa70fd6ec3bad505c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 29 13:18:49 2011 +0000

    Remove useless #include "ifdhandler.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5567 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 1 -
 src/ifdwrapper.c    | 1 -
 src/prothandler.c   | 1 -
 src/readerfactory.c | 1 -
 4 files changed, 4 deletions(-)

commit f9a62f5af0893f5f0206c12b489f10169a045cef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 27 13:47:42 2011 +0000

    SCardSetAttrib(): add profiling calls
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5560 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++++
 1 file changed, 4 insertions(+)

commit ddf1ba810454101a3222a92b5a527afd2d765e3c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 27 13:46:13 2011 +0000

    SCardGetSetAttrib(): remove a call to PROFILE_END() since this is
    already done in SCardGetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5559 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 --
 1 file changed, 2 deletions(-)

commit d9d8ad32d8845454eb891947a54f3efdcf3e4fbb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 27 13:44:22 2011 +0000

    profiling: compare threads using pthread_equal() instead of == to make
    the code more portable.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5558 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b7baaa41e9e35f85ed9e28c928899d523db8c50c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 27 10:55:25 2011 +0000

    SCardGetAttrib(): Always exit from the same point so that profiling
    does work even in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5557 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit b998b8b1244f77487513fa06e1aed8814c93ad81
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 27 10:53:10 2011 +0000

    profile_end(): add a missing \n in the warning message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5556 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 56a62a75fedf38e1bf6cc015b26fef0fea279b82
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 27 10:43:48 2011 +0000

    Send API traces do stderr instead of stdout
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5555 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 34306b84f104e3ca5e0b773ce6a497faac40a000
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 15:49:08 2011 +0000

    SCardReleaseContext(): Always exit from the same point so that profiling
    does work even in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5550 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit c9c7be9482dfe96f4cdb2a7ddd0ef6be7480b34e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 15:45:50 2011 +0000

    SCardCancel(): Always exit from the same point so that profiling
    does work even in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5549 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 1d1f6ebe1e62e68e716aff56023d50d0b1a46edd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 15:35:20 2011 +0000

    Profiling: allow to support up to MAX_THREADS simultaneous calls
    
    For example SCardCancel() is called from another thread when
    SCardGetStatusChange() is running. This was not supported.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5548 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 57 +++++++++++++++++++++++++++++++----------------------
 1 file changed, 33 insertions(+), 24 deletions(-)

commit 083292393ddecde187e108e77aa5661509aed318
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 15:14:30 2011 +0000

    Use color names macros
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5547 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 20 +++++++++++---------
 1 file changed, 11 insertions(+), 9 deletions(-)

commit 4584a63cae3c0cbcbaa83d1d15796910e30f8bfd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 15:08:19 2011 +0000

    Add API tracing with arguments display
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5546 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 63 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 63 insertions(+)

commit ec9b525059e058f76885f77047b74b6cfcfb7087
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 15:04:14 2011 +0000

    SCardGetStatusChange(): Always exit from the same point so that profiling
    does work even in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5545 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 26 +++++++++++++++++++++-----
 1 file changed, 21 insertions(+), 5 deletions(-)

commit c7b9069821bb77eb5369a6687058d47eafaa176c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 25 14:37:48 2011 +0000

    SCardDisconnect(): Always exit from the same point so that profiling
    does work even in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5544 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit a018b4e7500dd2509074cf012e8f5f9a08f7ffb3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 21 08:39:43 2011 +0000

    Display the correct line number if garbage is found in the configuration
    file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5543 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 547ac0bd827f23a9713a0be286d1265dc4c65622
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:35:38 2011 +0000

    contextsListhContext_seeker(): avoid a potential crash if NULL values are used
    
    src/winscard_svc.c:90:22: warning: Dereference of null pointer
            if (currentContext->hContext == *(int32_t *)key)
                                ^
    src/winscard_svc.c:90:34: warning: Dereference of null pointer
            if (currentContext->hContext == *(int32_t *)key)
                                            ^
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5539 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 1 +
 1 file changed, 1 insertion(+)

commit 610b6c16309080fd9f8a45e357c1b12b943e6742
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:34:41 2011 +0000

    SCardStatus(): initialize a dummy variable to avoid warnings
    
    src/winscard_clnt.c:1451:2: warning: Assigned value is garbage or undefined
            dwReaderLen = *pcchReaderLen;
            ^             ~~~~~~~~~~~~~~
    src/winscard_clnt.c:1452:2: warning: Assigned value is garbage or undefined
            dwAtrLen = *pcbAtrLen;
            ^          ~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5538 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b60c1dec8258bf9aa6da52ca8f7348c5081659f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:32:28 2011 +0000

    Avoid a potential crash if NULL values are used
    
    src/winscard_clnt.c:226:27: warning: Dereference of null pointer
            if (channelMap->hCard == *(SCARDHANDLE *)key)
                                     ^
    src/winscard_clnt.c:226:18: warning: Dereference of null pointer
            if (channelMap->hCard == *(SCARDHANDLE *)key)
                            ^
    src/winscard_clnt.c:260:18: warning: Dereference of null pointer
            if (contextMap->hContext == *(SCARDCONTEXT *) key)
                            ^
    src/winscard_clnt.c:260:30: warning: Dereference of null pointer
            if (contextMap->hContext == *(SCARDCONTEXT *) key)
                                        ^
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5537 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 59cf2d4381fcb75afbaf3822d58f863248975895
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:31:01 2011 +0000

    SCardEstablishContext(): remove useless affectation
    
    src/winscard_clnt.c:439:5: warning: Value stored to 'ret' is never read
      ...ret = execl(PCSCD_BINARY, "pcscd", "--auto-exit", param,
         ^     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5536 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 883634e472dcab14eafb506499821e44b858fbfe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:29:49 2011 +0000

    SCardEndTransaction(): remove useless code
    
    src/winscard_clnt.c:1269:2: warning: Value stored to 'randnum' is never read
            randnum = 0;
            ^
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5535 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 -----
 1 file changed, 5 deletions(-)

commit 2f8eb7e3e8aa93c04e12e3d1e9d552c15b139654
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:28:42 2011 +0000

    remove unused affectations
    
    src/winscard.c:565:4: warning: Value stored to 'rv' is never read
                            rv = IFDPowerICC(rContext, IFD_POWER_DOWN, NULL, NULL);
                            ^    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    src/winscard.c:835:4: warning: Value stored to 'rv' is never read
                            rv = IFDPowerICC(rContext, IFD_POWER_DOWN, NULL, NULL);
                            ^    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    src/winscard.c:1095:4: warning: Value stored to 'rv' is never read
                            rv = IFDPowerICC(rContext, IFD_POWER_DOWN, NULL, NULL);
                            ^    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5534 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8ed1f3c88dfb95d115aef5ab8237bf08fea4d463
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:27:59 2011 +0000

    Do not analyze tokenparser.c since it is generated by flex
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5533 0ce88b0d-b2fd-0310-8134-9614164e65ea

 clang-analyze.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 50082967ac2fccaffb2d0ff62ea88613a1a68a1c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:20:29 2011 +0000

    RDR_CLIHANDLES_seeker(): avoid a potential crash if NULL values are used
    
    src/readerfactory.c:72:30: warning: Dereference of null pointer
            if (rdrCliHandles->hCard == *(SCARDHANDLE *)key)
                                        ^
    src/readerfactory.c:72:21: warning: Dereference of null pointer
            if (rdrCliHandles->hCard == *(SCARDHANDLE *)key)
                               ^
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5532 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 +++
 1 file changed, 3 insertions(+)

commit 06027fa15071be684093379a907f2190b43e7f5b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:15:51 2011 +0000

    RFAddReader(): remove unused affectation
    
    src/readerfactory.c:344:4: warning: Value stored to 'rv' is never read
                            rv = RFRemoveReader(readerName, port);
                            ^    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5531 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5ac1f307061624f2601d762a69e49cfd92460217
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 20 09:09:49 2011 +0000

    RFAddReaderHandle(): return the error code if any
    
    src/readerfactory.c:1116:3: warning: Value stored to 'rv' is never read
                    rv = SCARD_E_NO_MEMORY;
                    ^    ~~~~~~~~~~~~~~~~~
    src/readerfactory.c:1103:3: warning: Value stored to 'rv' is never read
                    rv = SCARD_E_NO_MEMORY;
                    ^    ~~~~~~~~~~~~~~~~~
    src/readerfactory.c:1095:3: warning: Value stored to 'rv' is never read
                    rv = SCARD_E_NO_MEMORY;
                    ^    ~~~~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5530 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8a5c17cf4631382f0d332f524eed0a7487c91d4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 16:02:25 2011 +0000

    Remove useless code
    
    src/pcscdaemon.c:85:2: warning: Value stored to 'rv' is never read
            rv = 0;
            ^    ~
    src/pcscdaemon.c:175:2: warning: Value stored to 'rv' is never read
            rv = 0;
            ^    ~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5525 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 ---
 1 file changed, 3 deletions(-)

commit 864970a571e23ad454dd5e215dfc1e49738b9bd9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:57:36 2011 +0000

    IFDPowerICC(): remove useless code
    
    src/ifdwrapper.c:294:2: warning: Value stored to 'ret' is never read
            ret = ATRDecodeAtr(&sSmartCard, pucAtr, *pdwAtrLen);
            ^     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    src/ifdwrapper.c:268:2: warning: Value stored to 'rv' is never read
            rv = IFD_SUCCESS;
            ^    ~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5524 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 7 -------
 1 file changed, 7 deletions(-)

commit bb1ada03d6b066e7336541c475960e801a7f9615
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:53:23 2011 +0000

    EHStatusHandlerThread(): check the return value of IFDStatusICC()
    
    Thanks to clang(1) for the warning
    src/eventhandler.c:235:2: warning: Value stored to 'rv' is never read
            rv = IFDStatusICC(rContext, &dwStatus);
            ^    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5523 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f989b142d4e5bba7e5e260cc357db2f8b1a1a25
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:49:57 2011 +0000

    EHStatusHandlerThread(): remove unused code
    
    src/eventhandler.c:233:2: warning: Value stored to 'dwCurrentState' is never
          read
            dwCurrentState = 0;
            ^                ~
    src/eventhandler.c:232:2: warning: Value stored to 'readerSharing' is never read
            readerSharing = 0;
            ^               ~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5522 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 --
 1 file changed, 2 deletions(-)

commit ef3c162b0f1c34fa612823c5411f634b6e3d3300
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:48:08 2011 +0000

    ATRDecodeAtr(): remove unused code
    
    src/atrhandler.c:55:2: warning: Value stored to 'p' is never read
            p = K = TCK = Y1i = T = 0;
            ^   ~~~~~~~~~~~~~~~~~~~~~
    src/atrhandler.c:55:6: warning: Although the value stored to 'K' is used in the
          enclosing expression, the value is never actually read from 'K'
            p = K = TCK = Y1i = T = 0;
                ^   ~~~~~~~~~~~~~~~~~
    src/atrhandler.c:55:10: warning: Although the value stored to 'TCK' is used in
          the enclosing expression, the value is never actually read from 'TCK'
            p = K = TCK = Y1i = T = 0;
                    ^     ~~~~~~~~~~~
    src/atrhandler.c:55:16: warning: Although the value stored to 'Y1i' is used in
          the enclosing expression, the value is never actually read from 'Y1i'
            p = K = TCK = Y1i = T = 0;
                          ^     ~~~~~
    src/atrhandler.c:55:22: warning: Although the value stored to 'T' is used in the
          enclosing expression, the value is never actually read from 'T'
            p = K = TCK = Y1i = T = 0;
                                ^   ~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5521 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 5 -----
 1 file changed, 5 deletions(-)

commit 3ca2e1b547e384ad4c7b7032076a4466f7f0286f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:44:44 2011 +0000

    script to call clang --analyze
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5520 0ce88b0d-b2fd-0310-8134-9614164e65ea

 clang-analyze.sh | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit 73e5608e78a37c461c18cb3de17b8698db501fb5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:39:13 2011 +0000

    No more scf files since revision 4486
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5519 0ce88b0d-b2fd-0310-8134-9614164e65ea

 splint.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bb62d5e28f9c30175cd4ba3a9d15467aafa2483a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:28:01 2011 +0000

    SCardGetStatusChange(): avoids a compiler warning
    
    winscard_clnt.c:1875:33: warning: comparison of integers of different signs:
          'uint32_t' (aka 'unsigned int') and 'int' [-Wsign-compare]
      ...if (rContext->eventCounter != currentCounter)
             ~~~~~~~~~~~~~~~~~~~~~~ ^  ~~~~~~~~~~~~~~
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5518 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a32cc303837bb6a817a7c6660009e671172a29dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 18 15:25:23 2011 +0000

    Add an explicit cast to avoid a compiler warning
    
    readerfactory.c:1033:45: warning: comparison of integers of different signs:
          'unsigned long' and 'SCARDHANDLE' (aka 'long') [-Wsign-compare]
                                    if ((rContext->dwIdentity + randHandle) ==
                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5517 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 778d06d95f36ba31ee732203db2d67c127df9a41
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 14 14:08:38 2011 +0000

    Also initialize the state of the PnP special reader (For Mac OS X)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5509 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .../SCardGetStatusChange/SCardGetStatusChange_PnP.py       | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit b033afb43fe30f0d36114966e522f834425c301d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 14 08:44:52 2011 +0000

    HPSearchHotPluggables(): use the same naming convention as used by Apple
    PC/SC layer on Leopard (and later). The reader friendly name is used
    instead of "usb:%04x/%04x" as documented in IFDHandler v3 API at
    http://pcsclite.alioth.debian.org/api/group__IFDHandler.html#gabb9fe35a68fa080ce9397f0b830b1e7e
    
    The same driver source code can be used by Apple PC/SC layer and by this
    pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5508 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit d45a5a8e70c341e6c72bdbcbca9787002fc51ec6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 14 08:31:32 2011 +0000

    Fix compiler warning
    
    hotplug_macosx.c: In function ‚ÄòHPDriversGetFromDirectory‚Äô:
    hotplug_macosx.c:150: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5507 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 87385c20419638c4826c5bf295291f85a95d5dcc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 14 08:26:56 2011 +0000

    Remove commented CFLAGS definition
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5506 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 2 --
 1 file changed, 2 deletions(-)

commit 9c996549d3b66f0042d2adb07aa5814925539e20
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 14 08:23:58 2011 +0000

    Mac OS X "port"
    - Define Windows types as they are defined on Mac OS X in
      /System/Library/Frameworks/PCSC.framework/Headers/wintypes.h
    - Pack structures as they are packed on Mac OS X in
      /System/Library/Frameworks/PCSC.framework/Headers/pcsclite.h
    
    With these changes it is possible to build this pcsc-lite on Mac OS X
    and use it with an application built using the PCSC Framework headers
    provided by Apple.
    
    One application is to temporarily replace the Apple PCSC layer by a
    better/working one.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5505 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 11 +++++++++++
 src/PCSC/wintypes.h    | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 44 insertions(+)

commit 11e7e743350f90efb960d18b0ce5fa40c633376c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 14 08:09:29 2011 +0000

    Use LONG instead of long for SCARDCONTEXT and SCARDHANDLE so that the
    exact type can be easily changed by editing PCSC/wintypes.h
    
    By default:
    typedef long LONG;
    so no change
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5504 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e953f43236fff20540199ab938c2652f27456d1b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 13 17:21:24 2011 +0000

    Remove references to a init.d/pcscd script since pcscd is autostarted by
    default now.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5501 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 24 +++++-------------------
 1 file changed, 5 insertions(+), 19 deletions(-)

commit 290c57da3b9fd32e8d96218ece884c28fa3f2f27
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 13 17:19:33 2011 +0000

    Use @confdir_exp@ instead of (removed) @confdir@
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5500 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/reader.conf.5.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 75f2c834ec88216544f4c0c0599913575fa37369
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 12 17:20:40 2011 +0000

    Use @confdir_exp@ instead of @sysconfdir_exp@
    
    Closes [#312929] @sysconfdir_exp@ not expanded in manual page
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5498 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 9cdad78f85805057ec839969e549058133a0f9e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 7 15:16:05 2011 +0000

    RFAddReader(): correctly initialize the pthCardEvent field for the other
    slots. The bug occured with a multi slot reader and a driver with no
    TAG_IFD_POLLING_THREAD_WITH_TIMEOUT function (as is the case with my
    CCID driver since revision 5495)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5496 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 7f2c3dfb622dd4f7c3928a6624ae647287130ccb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 6 09:49:21 2011 +0000

    Add comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5491 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT2.py | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit c7d8acc488e2ed989d1ed98f847da41646ee2ba4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 6 09:49:03 2011 +0000

    SCardDisconnect(): Switch to POWER_STATE_GRACE_PERIOD unless the card was not
    powered
    
    In the previous implementation the state was changed to
    POWER_STATE_GRACE_PERIOD only if the previous state was
    POWER_STATE_INUSE. So if a SCARD_SHARE_DIRECT connection was used the
    card state was not set POWER_STATE_INUSE and a power off action was
    immediate at the SCardDisconnect(). Not nice if the card is reused just
    after.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5490 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 3cf4188c3eee4d7fafaa361adfda0075cdb7a997
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 4 14:25:03 2011 +0000

    ContextThread(): in command CMD_GET_READERS_STATE, wait until all the
    readers are ready (ATR available) before sending the reader states.
    
    The problem arrives when you connect two readers at the same time (and
    one of them is slow to get the ATR). SCardGetStatusChange() must not
    exit with one reader in state READER_NOT_INITIALIZED (as implemented in
    revision 5217)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5478 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 3 +++
 1 file changed, 3 insertions(+)

commit ceb3a81bae0db60d97b1cdd58747388b04237fe9 (tag: 1.6.6)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Dec 12 10:07:45 2010 +0000

    release 1.6.6
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5442 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 6 ++++++
 configure.in | 2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit c83deec53f2b221f2d691acf9b8f87e9f07df1fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Dec 12 09:14:34 2010 +0000

    Reapply change in revision 4986 since the problem was not corrected in
    version 1.5 of simclist.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5441 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 503378f234ecf01ef537a7d953b1f8f43a6238a1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 11 15:41:35 2010 +0000

    Use LONG instead of int to store PC/SC return codes like SCARD_E_*
    
    The problem comes from sign extenstion from int to LONG
    int rv = SCARD_E_TIMEOUT; /* 0x8010000A */
    is (sign) extended into a LONG = 0xFFFFFFFF8010000A
    
    So the line in winscard_clnt.c
      if (SCARD_E_TIMEOUT == rv)
    is never true on a 64-bits system because rv has been extended from int
    to LONG. The comparison is then between 0x8010000A and 0xFFFFFFFF8010000A
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5440 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit e480a1803ff9327f3a790abe48a7538cccbcca16
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 8 14:13:21 2010 +0000

    Do not use extern "C" since we are in C and not C++
    
    Follow rule 13 of "On C Library Implementation" by Rusty Russell
    http://rusty.ozlabs.org/?p=140
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5434 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h    |  9 ---------
 src/PCSC/ifdhandler.h  |  9 ---------
 src/atrhandler.h       |  9 ---------
 src/dyn_generic.h      |  9 ---------
 src/eventhandler.h     |  9 ---------
 src/hotplug.h          |  9 ---------
 src/ifdwrapper.h       |  9 ---------
 src/misc.h             |  9 ---------
 src/parser.h           |  9 ---------
 src/powermgt_generic.h | 11 -----------
 src/prothandler.h      |  9 ---------
 src/readerfactory.h    |  9 ---------
 src/sys_generic.h      |  9 ---------
 src/winscard_msg.h     |  9 ---------
 src/winscard_svc.h     |  7 -------
 15 files changed, 135 deletions(-)

commit e626ace5027bc74a6707402a111f95bce61db8b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 3 14:40:08 2010 +0000

    Fix configfile.l: In function 'evaluatetoken':
    configfile.l:205: warning: assignment discards qualifiers from pointer
    target type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5429 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 81093c8f92ed57c75fa98c4960e3b759f8ec926a (tag: 1.6.5)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 3 14:19:49 2010 +0000

    release 1.6.5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5427 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 43 +++++++++++++++++++++++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 44 insertions(+), 1 deletion(-)

commit 8847b8aae951a7ef43d3bc18ac9a344b7208a4e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 26 12:55:54 2010 +0000

    From SimCList version 1.5
    http://mij.oltrelinux.com/devel/simclist/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5420 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 87 ++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 66 insertions(+), 21 deletions(-)

commit 7d9c775a8a96086d8ece9750882c2c2b049ef58e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 23 08:30:14 2010 +0000

    Add a mutex to make the test and set of the powerState field atomic.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5415 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 2 ++
 src/readerfactory.c | 7 +++++++
 src/readerfactory.h | 1 +
 src/winscard.c      | 5 +++++
 4 files changed, 15 insertions(+)

commit e527d49c3e08577ac284a8f52a84026a7c72ec40
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 22 16:08:35 2010 +0000

    Log the new powerState value at DEBUG level
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5414 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 9 +++++++++
 src/winscard.c     | 7 +++++++
 2 files changed, 16 insertions(+)

commit b6c11d766e07b5355d86f91433a8117f288f5907
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 22 10:40:10 2010 +0000

    Remove dead code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5412 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 8 --------
 1 file changed, 8 deletions(-)

commit c3881898519c2744c66cba87ff8b030af40858f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 16 15:56:51 2010 +0000

    SCardDisconnect(): change powerState to POWER_STATE_GRACE_PERIOD only if
    the previous state was POWER_STATE_INUSE
    
    If the powerState was POWER_STATE_UNPOWERED then do NOT change to
    POWER_STATE_GRACE_PERIOD. POWER_STATE_GRACE_PERIOD indicates that the
    card is powered on. That is the case if mode is SCARD_SHARE_DIRECT at
    SCardConnect()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5402 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit ef848582662e1f0210bc2835424e8b0e11b8ada9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 16 15:52:55 2010 +0000

    SCardConnect(): change the power state to POWER_STATE_INUSE only if the
    card has been powered on.
    The card is NOT powered on if mode is SCARD_SHARE_DIRECT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5401 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7c95c038ec24ef49ce0a492da88d0757fe556806
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 16 10:32:45 2010 +0000

    Move the zeroing of the reader context from EHDestroyEventHandler() to
    RFUnInitializeReader() where it is more appropriate.
    
    The reader context shall be valid until the reader is uninitialized in
    RFUnInitializeReader() and most importantly after IFDCloseIFD() is called.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5400 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 13 -------------
 src/readerfactory.c | 13 +++++++++++++
 2 files changed, 13 insertions(+), 13 deletions(-)

commit ae93ada37cfccc4e0480add94746e045ebcdf8e4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 16 10:29:05 2010 +0000

    RFInitializeReader(): if IFDOpenIFD() fails just mark the reader as "not
    correctly started". This will present a call to IFDCloseIFD() in
    RFUnInitializeReader() (revision 5393)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5399 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 2fe2819f1613d2d9ad845a2eb7200e2e86de3913
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 9 14:22:08 2010 +0000

    RFUnInitializeReader(): Do not close a reader if IFDOpenIFD() failed in
    RFInitializeReader()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5393 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 9a05ab96ac24bf883fc0b3655d4108c7dc8c03bf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 9 14:17:04 2010 +0000

    RFRemoveReader(): destroy the event handler only if it exists already
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5392 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 307c8200863e9ba4487e8c2089b0efb01dc49568
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 14:53:02 2010 +0000

    ProcessCommonChannelRequest(): no need to define serv_adr as static.
    Free a few bytes of memory.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5391 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d0028ddeb6691f67c069fc1b93693e989ce838b3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 14:45:57 2010 +0000

    Remove CleanupSharedSegment() and do not call it anymore
    
    The function is not about shared segment any more
    The file PCSCLITE_CSOCK_NAME will be removed in clean_temp_files() at
    exit anyway
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5390 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c     | 15 ---------------
 src/winscard_msg.h     |  1 -
 src/winscard_msg_srv.c |  2 --
 3 files changed, 18 deletions(-)

commit 92f1f1de31af2d0c74a0252ecb2c4aa887b56f18
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 10:33:19 2010 +0000

    MessageSend(): return SCARD_E_NO_SERVICE instead of SCARD_F_COMM_ERROR
    if the daemon died and we reveice a EPIPE error.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5388 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e6f38ed9931d465e636db38d72e1d36e04192c85
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 10:30:09 2010 +0000

    MessageSendWithHeader(): do not send a 0 length buffer.
    
    Some commands only have a header and no data like CMD_GET_READERS_STATE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5387 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit aa5446eb59e59faf4b26b0d11338d8c0ad036f12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 10:00:58 2010 +0000

    MessageReceiveTimeout(), MessageSendWithHeader(), MessageSend() and
    MessageReceive() now returns a PC/SC error code instead of an internal
    value. So the callers can just return the error code to the application
    with no transcoding.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5386 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 181 ++++++++++++++--------------------------------------
 src/winscard_msg.c  |  68 ++++++++++----------
 src/winscard_msg.h  |   8 +--
 src/winscard_svc.c  |  10 +--
 4 files changed, 91 insertions(+), 176 deletions(-)

commit adc6379cadf3a405212d9e41cc0420b25c0b3173
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 09:49:31 2010 +0000

    Move SCardInvalidateHandles() in the same #ifdef DO_CHECK_SAME_PROCESS
    as SCardCheckSameProcess() since it is only used in this case.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5385 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 42 +++++++++++++++++++++---------------------
 1 file changed, 21 insertions(+), 21 deletions(-)

commit 967ce1ecba3baaba9ea92e28fe8ff79ad132686d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 8 08:38:58 2010 +0000

    No need to check the server pid anymore. If the server is restarted the
    socket communication will fail and an "RPC transport error"
    SCARD_F_COMM_ERROR error will be returned
    
    This check was needed when the readers state was stored in
    /var/run/pcscd/pcscd.pub. But that is no more the case. Every command
    now uses the client/server Unix socket.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5384 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 42 ------------------------------------------
 1 file changed, 42 deletions(-)

commit 0145df656781d3b0b173551fc90c337c1ee03b68
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 5 08:16:33 2010 +0000

    InitializeSocket() and ProcessEventsServer() are used by the server
    side so must be declared in the #ifdef PCSCD part of the header file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5379 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 7b420ae8ad3b508829c1c4063f5adb90c00a4ba2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 5 08:13:11 2010 +0000

    Add missing getSocketName() declaration used by winscard_clnt.c and
    winscard_msg.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5378 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 1 +
 1 file changed, 1 insertion(+)

commit 5ca87373c861c5a5811e2ea4b90c2103e2764d40
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 5 08:10:57 2010 +0000

    Reorder the function definitions as they are in winscard_msg.c in
    revision 5371
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5377 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

commit 6ce8713be261c18725ce0f6d353e65a3b0529429
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 5 07:56:05 2010 +0000

    Remove definition of FctMap_V1 now useless since revision 5321
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5376 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 16 ----------------
 1 file changed, 16 deletions(-)

commit 945625e91af721e58dea9621cfe21679a3ee1a62
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 5 07:53:47 2010 +0000

    Remove typedef of PSMARTCARD_EXTENSION and use SMARTCARD_EXTENSION *
    instead
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5375 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c |  2 +-
 src/atrhandler.h | 10 +++++-----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 5fbc9dbc70366ef18f8c7ebde0f00a64854b6c39
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 4 09:49:59 2010 +0000

    It is now possible to configure the local socket name to use using the
    environment variable PCSCLITE_CSOCK_NAME
    
    This is used by Estobuntu LTSP to redirect the smart card reader on the
    light terminal display to the application running on the server.
    They use a patched SSH version to redirect /var/run/pcscd/pcscd.comm on
    the client to ~/.pcscd.comm on the server.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5373 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c |  8 +++++---
 src/winscard_msg.c  | 30 ++++++++++++++++++++++++++----
 2 files changed, 31 insertions(+), 7 deletions(-)

commit c958be20e2f88fc6711e64bce23369bcddbbc179
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 4 09:22:23 2010 +0000

    MessageReceiveTimeout(): remove pcscd specific code inside a function
    used only by libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5372 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 8 --------
 1 file changed, 8 deletions(-)

commit d5193c2bdf1dfa2382fde8046d7274f9b88a3069
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 4 09:16:07 2010 +0000

    reorganize the functions in 3 categories:
    - functions used by pcscd only:
        CleanupSharedSegment()
    - functions used by libpcsclite only:
        ClientSetupSession(),
        ClientCloseSession(),
        MessageReceiveTimeout(),
        MessageSendWithHeader()
    - functions used by pcscd and libpcsclite:
        MessageSend(),
        MessageReceive()
    
    We gain on the code size: 1104 bytes for pcscd and 101 bytes for libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5371 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 324 +++++++++++++++++++++++++++--------------------------
 1 file changed, 168 insertions(+), 156 deletions(-)

commit 815e4fb8ad65a08bbdf333b6fafa0653630b3537
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 3 19:23:09 2010 +0000

    ATRDecodeAtr(): avoids a buffer overflow with badly formed ATR like
    3B FF 11 22 33 F0 11 22 33 F0 11 22 33 F0 11 22 33 F0 11 22 33 F0 11 22
    33 F0 11 22 33 00 11 22 33
    
    Thanks to Rafael Dominguez Vega for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5370 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 5c3fcbd9bbe7443913b9bbf27cdfdcd142d1c46e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 28 08:33:34 2010 +0000

    Move declaration of dwAtrLen closer to where it is used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5368 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 70ca1a45bf016c243472b75a37a78e159cc0e16b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 28 07:57:15 2010 +0000

    SCardConnect(): log the ATR in case of auto power on
    
    The ATR may be different from the previous one if the card has a cold
    and a warm ATR.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5367 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 9e700dc7cbae37e3a324ad34aa9c99167f68084d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 26 18:47:38 2010 +0000

    SCardDisconnect(): check for card removal in case DISABLE_AUTO_POWER_ON
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5364 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 92e1b6a6d78438a02db6508c62d18dc0bb73c328
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 26 09:18:51 2010 +0000

    Doxygen documentation is done on the client side (winscard_clnt.c) so
    remove documentation of SCardEstablishContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5359 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 20 --------------------
 1 file changed, 20 deletions(-)

commit fbc02c2fd4d057319d89c95a6d1da0a8fff42023
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 26 09:16:58 2010 +0000

    SCardTransmit(): do not check for NULL pointers since we are called from
    ContextThread() with correct values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5358 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ------
 1 file changed, 6 deletions(-)

commit 10d89387e8dda55664d394af3ecfa28dcc2d562c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 26 09:12:46 2010 +0000

    SCardReconnect(): do not check for pdwActiveProtocol NULL pointer since
    we are called from ContextThread() with a correct value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5357 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 ---
 1 file changed, 3 deletions(-)

commit aa61c9fa115f9a02b3c1d1b3673d3155b5ee3c2f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 26 09:09:47 2010 +0000

    SCardConnect(): do not check for NULL pointers since we are called from
    ContextThread() with correct values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5356 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

commit 34a0ea38b49f2c3f147460866ab6385fda9e7ab5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 26 09:06:42 2010 +0000

    SCardEstablishContext(): do not check for phContext NULL pointer since
    we are called from ContextThread() with a correct value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5355 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 5 -----
 1 file changed, 5 deletions(-)

commit 2878b7dfb35f78d581841f4c6b83946507a3b007
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 25 18:38:21 2010 +0000

    SCardConnect(): test for not SCARD_POWERED instead of SCARD_SWALLOWED
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5354 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 417b3fa6a25e52b09d61fdba52cd254ff17180ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 25 14:08:14 2010 +0000

    Use the new bundle parser code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5351 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 90 +++++++++++++++++++++++++++++++----------------------
 1 file changed, 52 insertions(+), 38 deletions(-)

commit ff9b959d3f01982ab006260dbda589fa24bd956c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 25 13:39:25 2010 +0000

    SCardConnect(): log an error if auto power on failed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5350 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +++
 1 file changed, 3 insertions(+)

commit c964d7e68d24f6839a7a7ad9ba47fe67a17440cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 25 08:53:03 2010 +0000

    Add a fix-rights rule at the top level to call the fix-rights rule in
    src/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5349 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit d96d17f07afd0d353dbfb2b36c6baf1ecf3f07bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 23 12:30:57 2010 +0000

    SCardConnect(): check the returned value of IFDPowerICC() to change the
    readerState if power up succeeded
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5348 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +++
 1 file changed, 3 insertions(+)

commit 7e331001545c38d048a06ec27efde7452b315e95
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 23 12:24:05 2010 +0000

    SCardConnect(): power up the card before checking for its
    SCARD_SWALLOWED state.
    
    If a card fails to power up on card insertion a new power up will be
    tried on SCardConnect().
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5347 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 9894461d0742a4dfa434bd63b078f9f85be49f2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 13:56:55 2010 +0000

    Remove the "This function " in the Doxygen brief line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5346 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 33 ++++++++++++++++-----------------
 1 file changed, 16 insertions(+), 17 deletions(-)

commit 4453db912ad5010294f9e2d1de876a272c82ee7e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 12:53:07 2010 +0000

    SCardCancel() should do nothing if no cancellable call is ongoing
    bug fixed in revision 5344
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5345 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel2.py | 48 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit 764918dffe1b930556663daff9fabda3fa8f0c18
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 12:37:08 2010 +0000

    Only SCardGetStatusChange() can be cancelled using SCardCancel()
    
    Thanks to Jan Rochat for the bug report
    https://bugs.launchpad.net/ubuntu/+source/pcsc-lite/+bug/647545
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5344 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit bb21e059005c89a28bfcd43963fcc522fc875eb2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 11:52:22 2010 +0000

    Remove spaces and tabs at end of line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5343 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c   | 12 ++++++------
 src/eventhandler.h   |  2 +-
 src/hotplug_libhal.c |  2 +-
 src/hotplug_macosx.c |  2 +-
 src/ifdwrapper.c     |  2 +-
 src/misc.h           |  2 +-
 src/pcscdaemon.c     |  6 +++---
 src/winscard.c       |  4 ++--
 src/winscard_clnt.c  | 12 ++++++------
 src/winscard_msg.c   |  2 +-
 10 files changed, 23 insertions(+), 23 deletions(-)

commit 4e80ea5d53de7ba6cab31acd89942bc3b1e62658
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 11:48:04 2010 +0000

    Reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5342 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 57 ++++++++++++++++++++++++++++++------------------------
 1 file changed, 32 insertions(+), 25 deletions(-)

commit 54736c795fdd3531279d5f4d9777fdc6c61d49dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 11:36:06 2010 +0000

    SCardCancelTransaction() is no more provided.
    This function is not provided by Microsoft and is deprecated since 2005
    in pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5341 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h |  2 --
 src/winscard.c      | 34 --------------------------
 src/winscard_clnt.c | 69 -----------------------------------------------------
 src/winscard_msg.h  | 15 ++----------
 src/winscard_svc.c  | 15 ------------
 5 files changed, 2 insertions(+), 133 deletions(-)

commit 479fb6414a182533b0e2544fe7c080088f4264ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 09:49:17 2010 +0000

    Reindent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5340 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 46 +++++++++++++++++++++++-----------------------
 1 file changed, 23 insertions(+), 23 deletions(-)

commit 7fbc0acc535a506f1d53c4f023eaea9e3a4c4133
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 09:48:29 2010 +0000

    Reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5339 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 102 ++++++++++++++++++++++------------------------------
 1 file changed, 43 insertions(+), 59 deletions(-)

commit bcda07cef8811610fd1d9c59101a0e95423e70a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 09:33:49 2010 +0000

    SCardSetTimeout() is no more provided.
    This function is not provided by Microsoft and is deprecated since 2004
    in pcsc-lite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5338 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h |  2 --
 src/winscard_clnt.c | 26 --------------------------
 2 files changed, 28 deletions(-)

commit eec4be2aa4870848c2e871fae5a99f7694eb385c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 09:30:40 2010 +0000

    SCardSetTimeout() is implemented (and deprecated) on the client side
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5337 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 13 -------------
 1 file changed, 13 deletions(-)

commit b7e02cb40d562fe0966c60467a5146c3d6f46eea
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 09:29:15 2010 +0000

    SCardListReaders() and SCardCancel() are implemented on the client side
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5336 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 24 ------------------------
 1 file changed, 24 deletions(-)

commit 9ec168cb6e93d14d7ab9f4cbb3ae1332946e41b3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 07:28:24 2010 +0000

    SCardDisconnect(): if DISABLE_AUTO_POWER_ON is defined then do not power
    on the card if SCARD_UNPOWER_CARD is used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5335 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit 4b93c83e5ef9663c9ff6e7e28247c0682fdcced6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 07:07:50 2010 +0000

    Move DISABLE_ON_DEMAND_POWER_ON and DISABLE_AUTO_POWER_ON defines from
    eventhandler.c to pcscd.h.in so they are visible by all the .c files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5334 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 7 -------
 src/pcscd.h.in     | 7 +++++++
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 9d2f2556e70ceeff21dc42fe0565dd796e8b5d56
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 22 06:43:00 2010 +0000

    SCardConnect(): remove debug log
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5333 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 1 -
 1 file changed, 1 deletion(-)

commit 8504d08f7b0a17d2e4cfb058d9cf32abb99a1a7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 21 19:27:25 2010 +0000

    If DISABLE_AUTO_POWER_ON is defined then do not automatically power on
    the card. The card will be powered on on the first SCardConnect()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5332 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit 086d5804586bfb291b1bd6f5c457c6cf1fd25ee0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 21 19:09:56 2010 +0000

    Remove extra parenthesis
    We are using C not Lisp :-)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5331 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 156 ++++++++++++++++++++++++++--------------------------
 1 file changed, 78 insertions(+), 78 deletions(-)

commit 86ad1cc6b032578f62d1805bb7f7813baed9d196
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 21 18:50:24 2010 +0000

    Power on the card _only_ if an application requests a connection
    see Alioth bug #301965
    
    You can disable the feature using DISABLE_ON_DEMAND_POWER_ON in
    src/eventhandler.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5328 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO                  |  7 +------
 src/PCSC/ifdhandler.h |  3 ++-
 src/eventhandler.c    | 42 ++++++++++++++++++++++++++++++++++++++----
 src/eventhandler.h    |  3 +--
 src/pcscd.h.in        | 16 ++++++++++++++++
 src/readerfactory.c   | 21 +++++++++++++--------
 src/readerfactory.h   |  3 ++-
 src/winscard.c        | 34 ++++++++++++++++++++++++++++++++++
 8 files changed, 107 insertions(+), 22 deletions(-)

commit c0fd36483f3da3096b178349fdd81ae4929eb691
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 17 09:40:18 2010 +0000

    PCSC/reader.h is no more generated from PCSC/reader.h.in
    Directly use the filename in nobase_include_HEADERS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5324 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d21de2f9660e5539acb757e55be99cd093b59ddd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 15 13:55:23 2010 +0000

    Add a call to SCardDisconnect() before SCardReleaseContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5323 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardStatus.py | 4 ++++
 1 file changed, 4 insertions(+)

commit 53137b94c636d9393ed7f64bcf770c8c5dde5722
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 15 13:16:07 2010 +0000

    Rename the sharing states unsing the PCSCLITE_SHARING_ prefix
    Doxygen: document the READER_STATE structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5322 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.h  | 26 +++++++++++++-------------
 src/winscard.c      | 30 +++++++++++++++---------------
 src/winscard_clnt.c |  6 +++---
 3 files changed, 31 insertions(+), 31 deletions(-)

commit d784dc7fb0b6d83336dab16d46069ba7daf6ea56
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 15 12:59:47 2010 +0000

    Remove the support of IFDHandler v1 API. I don't know any driver using
    this API.
    
    We can now simplify the API of IFDStatusICC() and remove the ATR
    related parameters. These paremeters were only used by the IFDHandler
    v1 API.
    
    diffstat says: 6 files changed, 51 insertions(+), 335 deletions(-)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5321 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h |   4 -
 src/eventhandler.c    |  18 +--
 src/ifdwrapper.c      | 298 +++++++-------------------------------------------
 src/ifdwrapper.h      |   3 +-
 src/readerfactory.c   |  62 +----------
 src/readerfactory.h   |   1 -
 6 files changed, 51 insertions(+), 335 deletions(-)

commit f1e5408a17111b90c6f66c0d89c206189369efbc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 14 09:35:08 2010 +0000

    ifdCapabilities driver feature is not used with libhal (and has never
    been).
    Remove dead/unused code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5317 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 8 --------
 1 file changed, 8 deletions(-)

commit c0415587a749d3247ffc886fe7293debf6cfef48
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 13 16:29:12 2010 +0000

    Reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5316 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 18 ++++++------------
 1 file changed, 6 insertions(+), 12 deletions(-)

commit fd0266becf27de742e0f480c04602f55511133be
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 13 16:27:33 2010 +0000

    Use the simpler form of IFDPowerICC(..., IFD_POWER_DOWN, ...) introduced
    in revision 5314
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5315 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c |  2 +-
 src/winscard.c      | 15 +++------------
 2 files changed, 4 insertions(+), 13 deletions(-)

commit 2029125ff84890fb22a83830ebefa6bb6e1add57
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 13 16:23:06 2010 +0000

    IFDPowerICC(): allow to use NULL for pucAtr and pdwAtrLen to make power
    down easy with IFDPowerICC(rContext, IFD_POWER_DOWN, NULL, NULL);
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5314 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit dafe751537b71f0ad4e1bc3eafce964996f37723
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 13 15:15:36 2010 +0000

    Correctly set dwAtrLen to the sizeof the ATR array before calling
    IFDPowerICC().
    
    Some drivers do not write more that dwAtrLen bytes in cardAtr array.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5313 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit ddcd61b163372860e1d3fb56076ae034438acc57
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:54:43 2010 +0000

    Doxygen: SCARD_GET_STATUS_CHANGE is not used anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5308 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a73555a0f1975fcb2f2d64adab91f6d185fb193b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:52:38 2010 +0000

    Remove SCardStatus() (dead code) on the server side.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5307 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 15 ---------------
 1 file changed, 15 deletions(-)

commit 5fd7bf3b91af4572cf310aa785f1c234fa524fb8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:49:51 2010 +0000

    SCardEndTransaction(): use the same code to reset a card as in revision 5301
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5306 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 37 ++++++++++++++-----------------------
 1 file changed, 14 insertions(+), 23 deletions(-)

commit 0eb56bfa88b1a67914e27ed1897bcf5adf322fb0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:44:00 2010 +0000

    SCardReconnect(), SCardDisconnect() and SCardEndTransaction(): reset the
    value of dwAtrLen before the second call to IFDPowerICC() so that the
    driver gets a correct value if the first call to
    IFDPowerICC(IFD_POWER_DOWN) set dwAtrLen=0
    
    Thanks to Frank Morgner for the bug report
    Closes: [#312754] IFDHPowerICC is called with IFD_POWER_UP and *AtrLength==0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5305 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +++
 1 file changed, 3 insertions(+)

commit 1a1cc2855ac6fe7c0af99e20bef308b0b9cb8146
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:40:20 2010 +0000

    A large part of SCardStatus() is done on the client side using
    readerStates[]. So remove a few lines of dead code on the server side.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5304 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-wirecheck-gen.c |  8 +----
 src/winscard.c           | 84 ++++++------------------------------------------
 src/winscard_clnt.c      |  4 ---
 src/winscard_msg.h       |  6 ----
 src/winscard_svc.c       | 29 ++---------------
 5 files changed, 13 insertions(+), 118 deletions(-)

commit 9d59da82916480961a522df0568236e987961ba4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:38:38 2010 +0000

    Call SCardStatus() a second time after a keypress
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5303 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardStatus.py | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 0285caa53ce86a6f7a6502d77241dc76e7f84697
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 11:35:47 2010 +0000

    Unit test for SCardStatus()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5302 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardStatus.py | 55 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 55 insertions(+)

commit a64bac725c1bd1c0057fe1e6d060f57c591d6f8a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 09:51:55 2010 +0000

    SCardReconnect(): Reorganize the code to manage ATR and readerState
    after a power up. Remove a call to IFDStatusICC() to know if a card is
    present or not since IFDPowerICC() already gives us this information.
    
    SCardDisconnect(): Use the same code as above
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5301 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 81 ++++++++++++++++++++++------------------------------------
 1 file changed, 30 insertions(+), 51 deletions(-)

commit 24b51bc267a0d82213c6db2a0bf899d8b71ca690
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 09:24:10 2010 +0000

    Use uint32_t readerState instead of DWORD dwStatus to store the state of
    the reader.
    DWORD and uint32_t may be different.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5300 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  9 +++++----
 src/winscard.c      | 22 +++++++++++-----------
 src/winscard_clnt.c | 17 +++++++++--------
 3 files changed, 25 insertions(+), 23 deletions(-)

commit 6bc01e6d22d45c3b7b1a35ca8a0a30c5b3c82abf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 09:07:03 2010 +0000

    SCardReconnect(): return SCARD_E_NO_SMARTCARD when card is removed
    and SCARD_W_UNRESPONSIVE_CARD when card is unresponsive instead of
    SCARD_E_PROTO_MISMATCH
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5299 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 250329ad3cd85829611d25abca9ed5df60c49ad6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 08:31:59 2010 +0000

    Increment minor version because of changes in revision 5290
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5298 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 721a14e77c87858dfc9d3ad50f24cbb6e8ad1fec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 12 08:10:52 2010 +0000

    Remove the deprecated LaTeX version of IFDHandler documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5297 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am      |   34 +-
 doc/ifdhandler-3.tex | 1323 --------------------------------------------------
 2 files changed, 1 insertion(+), 1356 deletions(-)

commit a48bcd9be6a488bb5b7c82b8ba7a608cd1f20434
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 11 09:03:22 2010 +0000

    evaluatetoken(): the CHANNELID parameter can also be a decimal number.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5296 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6074508424b832e002331a657a6b615ef8c1091e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 11 08:45:14 2010 +0000

    reader.conf configuration: If you want to use IFDHCreateChannel()
    instead of IFDHCreateChannelByName() then do not use any DEVICENAME line
    in the configuration file.  IFDHCreateChannel() will then be called with
    the CHANNELID parameter.
    
    Closes: [#312749] Should call IFDHCreateChannel for serial driver with
    DEVICENAME /dev/null
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5294 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 15 ++++++++++-----
 src/configfile.l      |  9 ++++++---
 2 files changed, 16 insertions(+), 8 deletions(-)

commit 20a7184a476fe7976ac0769d505a3189fde3ca46
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 11 08:15:34 2010 +0000

    list_* functions return an decimal integer so use %d insteaf of %X to
    log the error value.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5293 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 14 +++++++-------
 src/winscard_clnt.c | 16 ++++++++--------
 src/winscard_svc.c  | 18 +++++++++---------
 3 files changed, 24 insertions(+), 24 deletions(-)

commit 776f5d777ac6ade1db284eb28877a576b8fe60c1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 11 08:11:27 2010 +0000

    Add a "0x" before hex displays
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5292 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 06944d582d01c4c8f27bccaf2254e42600c7ace9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 10 18:22:40 2010 +0000

    Doxygen SCardStatus(): *pdwState also contains a number of events
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5291 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 61f723c5ad2958b243e8b6fed591ee4950312a28
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 10 14:16:17 2010 +0000

    Split the card event counter out of the card event state on the pcscd
    side to simplify the code in EHStatusHandlerThread()
    
    The two information are combined on the client side in
    SCardGetStatusChange() and SCardStatus()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5290 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 70 +++++++----------------------------------------------
 src/eventhandler.h  |  1 +
 src/winscard_clnt.c |  9 +++----
 3 files changed, 13 insertions(+), 67 deletions(-)

commit 45f62a48bcb7f4710653b9ac89e58d69c64477d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 10 13:38:12 2010 +0000

    Exit the endless loop in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5289 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardGetStatusChange/SCardGetStatusChange_loop.py | 2 ++
 1 file changed, 2 insertions(+)

commit 4bdf542b020ce0309ee7e75416becd02480f5e63
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 10 13:08:44 2010 +0000

    struct SCARD_READERSTATE: use "DWORD" instead of "unsigned long" type
    for the fields dwCurrentState, dwEventState and cbAtr
    
    This is compliant to the Windows definition and allows to redefine DWORD
    to something other than unsigned long, like uint32_t
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5288 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 18abf6f08c5ac429b415a8913c9ef44ebb264beb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 10 12:52:00 2010 +0000

    pcsc_stringify_error(): Use "LONG" instead of "long" as parameter type
    to reflect the return type from winscard.h
    
    The LONG type may be redefined in PCSC/wintypes.h to int32_t for example
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5287 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 src/error.c            | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit e416d9971ab50186f412001749827178e9916bcf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 5 15:09:34 2010 +0000

    Doxygen: do not document unused SCARD_STATE_ATRMATCH and
    SCARD_STATE_PRESENT states in SCardGetStatusChange()
    
    Thanks to Martin Paljak for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5281 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ----
 1 file changed, 4 deletions(-)

commit 8e3803659c5143810676c45fa76a35c4e1423c1c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 5 14:06:43 2010 +0000

    Call SCardGetStatusChange() in a endless loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5280 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .../SCardGetStatusChange_loop.py                   | 63 ++++++++++++++++++++++
 1 file changed, 63 insertions(+)

commit 8712e4a6d7bcd41ed5f8fdfa4ab4a73cf924af55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 5 13:58:20 2010 +0000

    Doxygen: fix documentation of LTPBundleFindValueWithKey()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5279 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d5bc92ad61e0cf68ac7476746e4041c275961732
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 5 13:53:04 2010 +0000

    SCardGetStatusChange(): include the event counter in dwEventState even
    if dwCurrentState contains a counter at 0 (default).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5278 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 21 ++++++++++++++-------
 1 file changed, 14 insertions(+), 7 deletions(-)

commit a36a44b462adc4a0736a6a6158e6c9cb8dc3333e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 5 13:47:49 2010 +0000

    Update from Doxygen 1.5.5 to 1.7.1
    
    warning: Tag `DETAILS_AT_TOP' at line 163 of file doc/doxygen.conf has become obsolete.
    To avoid this warning please update your configuration file using "doxygen -u"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5277 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 1440 ++++++++++++++++++++++++++++++---------------------
 1 file changed, 857 insertions(+), 583 deletions(-)

commit 4015d43c96848a5082a2df9666b5f1fe53a230c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 1 16:34:21 2010 +0000

    main(): do not limit rights if run as root
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5275 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8261265a846988d56a30afa4dcd79681367dd89d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 19 18:13:12 2010 +0000

    Do not change the access rights of pcscd in the install rule but in
    another one.
    This is needed when building the package in a system without the pcscd
    group.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5262 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2198d6dee6db7f88a94f131b2efe75ec1e51aace
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 09:38:59 2010 +0000

    Do not generate src/PCSC/reader.h from src/PCSC/reader.h.in any more
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5256 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 -
 1 file changed, 1 deletion(-)

commit fb63f292a0c798802eb3f8f22b698a1f09f72e64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 09:38:25 2010 +0000

    HOST_TO_CCID_16() and HOST_TO_CCID_32() are now identity functions
    
    Since CCID 1.4.1 (revision 5252) the byte order is no more important
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5255 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 2985eaa3e4ef00b974f46e10dbd3df9417e85f5f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 09:35:25 2010 +0000

    Rename reader.h.in in reader.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5254 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/{reader.h.in => reader.h} | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit ee62e3572cacf2261e52e5a34208c5b06d7fa3ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 4 14:59:37 2010 +0000

    Install pcscd as sgid pcscd instead of suid root
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5245 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit caacc20ccee33c815dcb4a474e393d825881dd6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 4 12:19:19 2010 +0000

    HPReadBundleValues(): do not fail if the key "CFBundleName" is not found
    in a driver Info.plist. This key should only be defined for the CCID
    class driver.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit b023481ca481a9e1c1abe7445d7e03b15767b9ba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 3 11:58:57 2010 +0000

    Doxygen: remove documentation about the (now removed) timeOut parameter of
    MessageSend() and MessageSendWithHeader()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5231 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 --
 1 file changed, 2 deletions(-)

commit dfb41939cd27220448a5bbcc7cd62aed61aeb9b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 15:25:17 2010 +0000

    Doxygen: clarify the use of one different SCARDCONTEXT per thread and the
    expection for SCardCancel()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5227 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 7ec48b3e702a6ade5e4e06757c9f180612719f57
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 13:57:59 2010 +0000

    Remove protocol_major, protocol_minor fields from struct _psContext
    since they are not used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5226 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 5 -----
 1 file changed, 5 deletions(-)

commit 381b8452940f7a9f9bc29079cb1081c41a48e23f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 13:56:09 2010 +0000

    update PROTOCOL_VERSION_MINOR since struct pubReaderStatesList changed
    (readerID removed)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5225 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52aad68e83bf0480ccb6cc8d9393a7e3e8d7a55c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 13:54:56 2010 +0000

    ContextThread(): check that the procotol major.minor is the same for the
    daemon and lib. If not just fail. We are not backward compatible.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5224 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 22 +++++++++-------------
 1 file changed, 9 insertions(+), 13 deletions(-)

commit 066e34120b73d99f058568d6a4d09c12c7c9dc1e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 12:10:24 2010 +0000

    Complete change in revision 5212
    
    SCardGetStatusChange() and SCardListReaders() were broken.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5219 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 004efce69901d11ed95effb04cf9df99090aab3c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 11:47:39 2010 +0000

    Rename lpcLibrary in library and lpcDevice in device
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5218 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    |  4 ++--
 src/readerfactory.c | 35 ++++++++++++++++++-----------------
 src/readerfactory.h |  8 ++++----
 3 files changed, 24 insertions(+), 23 deletions(-)

commit 6fc3a76af0c169c110cd4d6adaa14622e0687f92
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 10:53:31 2010 +0000

    Wait until all connected readers have a chance to power up a possibly
    inserted card.
    
    This is needed when auto start is used and a card is already present in
    a USB reader.  The reader presence is correctly reported to libpcsclite
    but the power up has not yet happen. So the ATR is not yet available.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5217 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  2 +-
 src/eventhandler.h  |  5 +++++
 src/pcscdaemon.c    |  2 ++
 src/readerfactory.c | 36 +++++++++++++++++++++++++++++++++++-
 src/readerfactory.h |  1 +
 5 files changed, 44 insertions(+), 2 deletions(-)

commit 1f053d7620735fbe93778915265287f84532a312
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 09:53:40 2010 +0000

    Rename lpcReaderName in readerName and use (char *) instead of LPSTR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5216 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 10 +++++-----
 src/readerfactory.c | 50 +++++++++++++++++++++++++-------------------------
 src/readerfactory.h | 10 +++++-----
 src/winscard_clnt.c |  8 ++++----
 4 files changed, 39 insertions(+), 39 deletions(-)

commit d374132ebdce0296f867c61c9018fa282188a399
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 09:33:39 2010 +0000

    Get rid of the lpcReader[] field in struct ReaderContext
    
    The reader name is already present in readerState->readerName linked
    from struct ReaderContext
    
    Gain: MAX_READERNAME*PCSCLITE_MAX_READERS_CONTEXTS = 100*16 = 1600 bytes
    fo RAM on pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5215 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  8 +++-----
 src/readerfactory.c | 33 ++++++++++++++++++++-------------
 src/readerfactory.h |  1 -
 src/winscard.c      | 20 ++++++++++++--------
 4 files changed, 35 insertions(+), 27 deletions(-)

commit 07df9153f6748a7209a72f7f12540cc1b75e3f85
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 09:27:49 2010 +0000

    SCardStatus(): remove a useless test
    
    lpcReader can't be larger than MAX_BUFFER_SIZE (264) since its buffer is
    only MAX_READERNAME (100) bytes long.
    And I don't see why we need this test anyway.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5214 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 0482604cec07f8d5ae53b987bb08ac7c802adfae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 09:19:46 2010 +0000

    Complete change started in revision 5212
    
    rContext->readerState is never NULL now. So do not even check its value.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5213 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 6 ------
 src/winscard.c     | 8 --------
 2 files changed, 14 deletions(-)

commit f8941684ca3c57819732d073b21b313eb29c702b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 09:05:44 2010 +0000

    Get rid of the readerID field in struct pubReaderStatesList
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5212 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c       | 39 ---------------------------------------
 src/eventhandler.h       |  1 -
 src/pcsc-wirecheck-gen.c |  1 -
 src/readerfactory.c      | 18 ++++++++++++------
 src/winscard_clnt.c      |  8 ++++----
 5 files changed, 16 insertions(+), 51 deletions(-)

commit 72f76cd645d5764302e21a9abeced91aa2883c7e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 2 06:45:25 2010 +0000

    Remove unused RFSuspendAllReaders() and RFAwakeAllReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5211 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 58 -----------------------------------------------------
 src/readerfactory.h |  2 --
 2 files changed, 60 deletions(-)

commit 1c677c3b8d4c199fb445fc960d1c6cd70a5bc8b9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 31 08:34:46 2010 +0000

    Reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5204 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 12 ++++--------
 1 file changed, 4 insertions(+), 8 deletions(-)

commit 5bd29557779ea21f4ae22b268d51c41a32640eae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 30 13:27:37 2010 +0000

    InitializeSocket(): do not set the execution bit on the socket file. It
    is useless.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5202 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f9e0a138f113f11b49bca3a3e81e3eedf8c6d8d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 27 12:52:27 2010 +0000

    svn propset svn:keywords 'Author Date Id Revision'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5196 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 2 +-
 src/error.c | 2 +-
 src/utils.c | 2 +-
 src/utils.h | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit a9449a0b2e2906d31104e689a61db830bea841c4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 27 12:48:11 2010 +0000

    GetDaemonPid(): use open(3) instead of fopen(3) to avoid an internal
    malloc() call and gain some CPU cycles
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5195 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit aec53fd9b7dccf218d8203deacc87cd9d9f6ab6a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 27 12:24:47 2010 +0000

    HPAddDevice(): wait 1 millisecond instead of 1 second until the device
    is visible to libusb/etc.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5194 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 572981d41d7ac35ae5e73d1125be067e95a7c914
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 25 08:32:16 2010 +0000

    Doxygen: SCardCheckDaemonAvailability() do not invalidate handles after
    a fork() any more
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5183 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 48608465efedaf6600b759318955aa64d3bfcc16
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 23 10:25:26 2010 +0000

    HPReadBundleValues(): use the new Info.plist parsing API.
    
    Parsing the CCID Info.plist (159 readers supported) was on a ARM9
    machine 13193049 ¬µs and is now 258262 ¬µs => gain x51 or 5008%
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5179 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 101 ++++++++++++++++++++++++++-------------------------
 1 file changed, 52 insertions(+), 49 deletions(-)

commit b25f97630d932be6eb2ad7084ab539008878a167
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 23 09:49:41 2010 +0000

    RFBindFunctions(): rename rv in rvl to avoid warnings
    warning: declaration of ‚Äòrv‚Äô shadows a previous local
    
    Also change type from DWORD to int since DYN_GetAddress() returns an int
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5178 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 132206b8841f60cbefc4453dbd0d86c5ce8c08a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 23 09:46:52 2010 +0000

    RFLoadReader(): optimize the detection of Ifd Handler version by
    checking for "IFDHCreateChannelByName", "IFDHCreateChannel" and then
    "IO_Create_Channel" instead of the 3 symbols at once.
    
    Also suppress the error message suppression. Ifd handler v2 or v1 will
    display one or two errors for symbols not found.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5177 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 52 ++++++++++++++++++++++++----------------------------
 1 file changed, 24 insertions(+), 28 deletions(-)

commit 7d061fc5598507241af3075f5b6f7a036e7b2222
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 23 08:53:10 2010 +0000

    HPReadBundleValues(): duplicate the readerName and CFBundleName strings
    since the originals are destroyed by bundleRelease() later
    
    The reader names were corrupted.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5175 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 14726913c67aed5ccb9aaadd74defb302d9fcebc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 18 21:25:31 2010 +0000

    Fix typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5160 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1e618922dc689c1f0bd8ae3516320a88837ed6df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 14:48:29 2010 +0000

    HPReadBundleValues(): use the new Info.plist parsing API.
    
    Parsing the CCID Info.plist (159 readers supported) was on a i386
    machine 264306 ¬µs and is now 5547 ¬µs => gain x47 or 4600%
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5157 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 107 ++++++++++++++++++++++++++-------------------------
 1 file changed, 55 insertions(+), 52 deletions(-)

commit 950e4dbd12f2d5afe921096dffd9f74b1fc858b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 14:41:12 2010 +0000

    parse the Info.plist file only once and generate a list of key/values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5156 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/parser.h      |  18 ++---
 src/tokenparser.l | 234 +++++++++++++++++++++++++++++++++---------------------
 2 files changed, 152 insertions(+), 100 deletions(-)

commit e209cef427f4b420b7ed4aeddf3ff999be908d7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 09:13:55 2010 +0000

    HPSearchHotPluggables(): create the synchronisation pipe only if the
    HPEstablishUSBNotifications thread is created.
    Avoids to leak resources.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5152 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

commit d832dbcd26d0ff496c6e650b7a5bbf8f4bc3aa2d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 09:10:29 2010 +0000

    HPSearchHotPluggables(): wait for initial readers to setup only if
    HPEstablishUSBNotifications is created. Otherwise the process is
    blocked for ever.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5151 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 764ca061dc78ee840994b51673f93d75990e4144
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 08:58:07 2010 +0000

    HPRegisterForHotplugEvents(): having no bundle for USB readers is not an
    error. USB support/hotplug is just disabled.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5150 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 10e04ee8779c7df9d34c109df02e123f481e2c51
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 08:56:29 2010 +0000

    main(): Log a message if HPRegisterForHotplugEvents() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5149 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 +++
 1 file changed, 3 insertions(+)

commit 230639770c4f363a10b097b7b9943370483b6657
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 17 06:41:52 2010 +0000

    Do not hardcode the libusb-1.0 include header path (remove the
    libusb-1.0/ part)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5148 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bfec53b86067b1d23da9ea7f38786427ecb5daf4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 16 14:40:36 2010 +0000

    Do not hardcode the libusb.h path.
    
    See Debian bug #591782
    ccid: FTBFS on kfreebsd-*: configure: error: libusb.h not found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5147 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5bd5582a3475ceffffdcdab2d1004de47ab2074a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 16 14:28:38 2010 +0000

    add --sysconfdir=/etc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5146 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 +
 1 file changed, 1 insertion(+)

commit 1ad468c74364177fdeb05f335a1137d68011222d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 16 10:03:40 2010 +0000

    Do not allow restricting defaults values of --max-thread,
    --max-card-handle-per-thread or --max-card-handle-per-reader when
    restricted
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5145 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit e71c74a8cc952567559fe3814fdfd0450eca0045
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 16 09:47:02 2010 +0000

    Do not allow APDU logging when restricted
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5144 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 5 +++++
 1 file changed, 5 insertions(+)

commit cac146d23b899c46e9db7f6409a905e115ef921f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 16 09:45:15 2010 +0000

    If the process is setuid or setgid it may have some restrictions
    
    Do not allow to specify a configuration file when restricted
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5143 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 3b8038645ba31ba976221a83bc06daa0663e0772 (tag: 1.6.4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 15 18:48:26 2010 +0000

    release 1.6.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5138 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 8 ++++++++
 configure.in | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit b444d36b5be1e6966cb169646101fde732170005
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 15 18:43:10 2010 +0000

    Do not use sysconfdir as configuration directory but
    ${sysconfdir}/reader.conf.d instead.
    
    Use --enable-confdir=DIR if you want to set a specific value without the
    reader.conf.d appended.
    
    Thanks to Kalev Lember for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2010-q3/0150.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5137 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 20 ++++++++------------
 1 file changed, 8 insertions(+), 12 deletions(-)

commit b3b3286e080d940501d442e7977b1f2af2d37f90 (tag: 1.6.3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 15 15:39:38 2010 +0000

    release 1.6.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5135 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 11 +++++++++++
 configure.in |  2 +-
 2 files changed, 12 insertions(+), 1 deletion(-)

commit 05a80972d3362725e11528ff3a65db0280ecf19e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 15 14:48:18 2010 +0000

    Define LPSCARD_READERSTATE since this is used in the MSDN prototype.
    
    Use LPSCARD_READERSTATE in winscard.h instead of (SCARD_READERSTATE *)
    to mimic the MSDN API.
    
    This partly reverts changeset 5096
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5134 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 src/PCSC/winscard.h    | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit c3358112988559d97078211fbddbeae2b3970728
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 13:19:52 2010 +0000

    Also call SCardDisconnect() and SCardReleaseContext() in the forked
    process
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5130 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCard_fork.py | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)

commit dd6cf56a42e9fc0587151c1ad07eeab21f379642
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 13:18:48 2010 +0000

    ContextThread(): goto exit if MSGCheckHandleAssociation() fails instead
    of just returning no error.
    
    Something wrong happened on the client side (like a fork) and the client
    needs to call SCardEstablishContext() to create a new connection.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5129 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 99 +++++++++++++++++++++++++-----------------------------
 1 file changed, 46 insertions(+), 53 deletions(-)

commit ca30ba2cf04c849777bb914ffb1cfb6394f46ba7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 13:06:13 2010 +0000

    ContextThread(): fix goto label when it _is_ an overflow
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5128 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9665cc90e3fe99065cf2c31f860025c44e20273a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 13:01:30 2010 +0000

    ContextThread(): fix goto label when it is not an overflow
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5127 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 88f78596fdd4baba1a73b9d2a3028b267001327f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 12:41:29 2010 +0000

    Revert changeset 5102 to add profiling on the client side again.
    
    ltrace(1) can't be used with a dynamically loaded (dlopen(3)) library like
    it is the case with the majority of PKCS#11 client application.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5126 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 172 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 172 insertions(+)

commit 8999ddfc04ecbf596af1eea6efb6ed3c49392089
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 11:53:10 2010 +0000

    Reset mid field when the list is empty to avoid assert() errors
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5125 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 4ea1c07792e544807e5cbf5960a57298429760d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 11:51:43 2010 +0000

    MSGCheckHandleAssociation(): check that the context handle is still
    valid. Calling a PC/SC function after SCardReleaseContext() is not
    supported.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5124 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit c757639531340e9f50a14f8ad841fa8a0a0a52a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 10:09:10 2010 +0000

    Fix typo in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5123 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c3b975876393042d635c9061fc88d651576b8eae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 5 15:16:25 2010 +0000

    remove debug line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5118 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 --
 1 file changed, 2 deletions(-)

commit 2bdab13d710dc4bde46a0b7a4d35785e83b816d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 5 15:13:02 2010 +0000

    "/reader.conf.d" is only appended to sysconfdir if no value of
    sysconfdir is provided
    
    Thanks to Patrice Angelini for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5117 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

commit ef5b75c86c7b4b12f8ae02ac94bf556b9d48c8a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 5 08:02:09 2010 +0000

    HPAddHotPluggable(): do not use libusb_strerror() since it is not yet
    available in current stable libusb (1.0.8)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5114 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 7d46b9713da5c57d1dc02c719b0fabf9cc56dc1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 5 07:51:25 2010 +0000

    Fix compilation warnings
    ifdwrapper.c:166:7: warning: "IFDHANDLERv2" is not defined
    ifdwrapper.c:589:7: warning: "IFDHANDLERv2" is not defined
    ifdwrapper.c:640:7: warning: "IFDHANDLERv3" is not defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5113 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit fa4a81de1376dfbfbdaa2510b737687e95aa2bf3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 5 07:42:11 2010 +0000

    Check that either IFDHANDLERv1, IFDHANDLERv2 or IFDHANDLERv3 is
    defined if PCSCLITE_STATIC_DRIVER is used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5112 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit b83188394c2b7f39883985b0b2c401c1aa19df4f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 5 07:28:19 2010 +0000

    No need to use -D_REENTRANT. It was needed for LinuxThreads but we do
    not use LinuxThreads since a long time.
    
    See Debian bug #475101 "Remove obsolete -D_REENTRANT requirement"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5111 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 2 --
 1 file changed, 2 deletions(-)

commit 13899db1aa8ab846599c59fd157936e96848a33e (tag: 1.6.2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 4 07:35:53 2010 +0000

    release 1.6.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5107 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 22 ++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 23 insertions(+), 1 deletion(-)

commit d0d6c449598b82e42b396fc999637c1c5a4a5b2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 4 07:29:19 2010 +0000

    Remove useless $(COREFOUNDATION) from libpcsclite_la_LIBADD
    The library has no Mac OS X specific code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5106 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e28d77cc5b871f52af52f59f4ccd0475a6043f31
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 4 07:23:29 2010 +0000

    Remove undefined $(LIBSMARTCARD) from libpcsclite_la_LIBADD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5105 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit b180bfa0e87a7b5c590e5e07b485e6f14f6dc20a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 4 07:20:57 2010 +0000

    libpcsclite does not use dlopen() so no need to link with $(LIBDL)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5104 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b8374786d16ab5306a7f6e16278e2ed32abbc767
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 3 09:34:41 2010 +0000

    Remove client side profiling since we can use ltrace(1) with better
    results
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5102 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 174 ----------------------------------------------------
 1 file changed, 174 deletions(-)

commit ca9d6675dbe4218423f7610ebceb5ac8778c6975
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 3 06:53:37 2010 +0000

    Remove 2 debug traces
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5098 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 --
 1 file changed, 2 deletions(-)

commit 2b2543013b16e1645e822d2b7f671443bfc65787
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 14:42:35 2010 +0000

    Use "SCARD_IO_REQUEST *" instead of LPSCARD_IO_REQUEST
    and "const SCARD_IO_REQUEST *" instead of "LPCSCARD_IO_REQUEST
    
    Should make the code more easy to read
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5097 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 4 ++--
 src/winscard.c      | 4 ++--
 src/winscard_clnt.c | 4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

commit bc401b006df15cd49833a42a4b2f0c77f81dad6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 14:33:35 2010 +0000

    Use SCARD_READERSTATE instead of SCARD_READERSTATE_A
    
    Remove definitions of SCARD_READERSTATE_A PSCARD_READERSTATE_A and
    LPSCARD_READERSTATE_A types
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5096 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 src/PCSC/pcsclite.h.in  | 5 +----
 src/PCSC/winscard.h     | 2 +-
 src/testpcsc.c          | 2 +-
 src/utils/formaticc.c   | 2 +-
 src/winscard.c          | 2 +-
 src/winscard_clnt.c     | 6 +++---
 7 files changed, 9 insertions(+), 12 deletions(-)

commit 37ebbcb6f8b8ac421a572c1b8b5a8eca4924c7d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 07:39:33 2010 +0000

    Use $libdir instead of $prefix/lib to set the default value of usbdropdir
    
    " Fedora uses /usr/lib on 32 bit and /usr/lib64 on 64 bit multilib
    platforms. "
    
    Thanks to Kalev Lember for the idea.
    http://archives.neohapsis.com/archives/dev/muscle/2010-q3/0108.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5093 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit d201729e72a16001ff4749ff9b1cf80f6c4d64fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 06:56:58 2010 +0000

    sysconfdir=/etc by default if prefix=/usr so remove the --sysconfdir line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5092 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 -
 1 file changed, 1 deletion(-)

commit eb171a78935b5ac63e7fb89fc9f93a4747ab3b77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 06:54:19 2010 +0000

    Do not duplicate the reader index to avoids problems when I want to
    change it.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5091 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBeginTransaction_Disconnect.py |  4 +++-
 UnitaryTests/SCardConnect_DIRECT.py              |  4 +++-
 UnitaryTests/SCardConnect_DIRECT2.py             | 11 ++++++-----
 UnitaryTests/SCardExclusiveBehaviour.py          |  7 ++++---
 UnitaryTests/SCardReconnect.py                   |  5 +++--
 UnitaryTests/reset_card.py                       |  5 +++--
 6 files changed, 22 insertions(+), 14 deletions(-)

commit 89cee2c033a66e616baae235fca0e62cb6b2f1f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 1 10:58:28 2010 +0000

    Set sysconfdir to /etc if prefix=/usr
    
    You should have a default working configuration only with --prefix=/usr
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5082 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 7 +++++++
 1 file changed, 7 insertions(+)

commit caae8d0402337d35cd377a3709545b64428f9dec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 31 20:12:16 2010 +0000

    --enable-muscledropdir is no more supported by pcsc-lite since a long
    time. So remove the line.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5081 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 -
 1 file changed, 1 deletion(-)

commit 9f5f31266ceff0477723ca3bed5455e3b96be844
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 31 20:11:26 2010 +0000

    --enable-usbdropdir=/usr/lib/pcsc/drivers is now the default value.
    So remove the line.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5080 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 -
 1 file changed, 1 deletion(-)

commit a954ff480b35ba94089429c7bd1f218ea6c7a8d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 31 20:09:12 2010 +0000

    Default value of usbdropdir is now $prefix/lib/pcsc/drivers instead of
    $prefix/pcsc/drivers
    
    The new path is the path used on Debian (with prefix-/usr). So no need
    to change the default value.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5079 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 40dfc560b774ca1e7475824a33bc77387a60a6c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 27 07:30:19 2010 +0000

    Create empty directories used by drivers
    
    Thanks to Kalev Lember for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2010-q3/0065.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5073 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 4 ++++
 1 file changed, 4 insertions(+)

commit 0ce5f997172b7a66e8466c79b7d6ed68344767c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 26 13:33:56 2010 +0000

    Do not affect and check a variable on the same line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5071 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c |  3 ++-
 src/pcscdaemon.c     |  3 ++-
 src/utils.c          |  3 ++-
 src/winscard.c       | 36 ++++++++++++++++++++++++------------
 4 files changed, 30 insertions(+), 15 deletions(-)

commit 97d2ca7afeeec07f7d9f2a4f2c0d538d2e5c9fb2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 26 13:27:51 2010 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5070 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fbd01dd2cc398ca9cbd8b077f93b72e20c6c91be
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 26 13:21:18 2010 +0000

    Get the value of rContext before its use. A simple call to
    SCardTransmit() crashed with a NULL pointer.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5069 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 60 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 30 insertions(+), 30 deletions(-)

commit 36c141946df92a8bd5ef7c4a582524a95bb6abb6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 8 20:35:03 2010 +0000

    fix crash with empty config dir
    
    Thanks to Kalev Lember for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2010-q3/0017.html
    
    pcscd attempts to read uninitialized memory and free an invalid
    pointer when its configuration directory is empty.
    
    The patch fixes this by initializing reader_list to NULL.
    
    ==2658== Conditional jump or move depends on uninitialised value(s)
    ==2658==    at 0x40A2EF: RFStartSerialReaders (readerfactory.c:1324)
    ==2658==    by 0x40743F: main (pcscdaemon.c:522)
    ==2658== ==2658== Use of uninitialised value of size 8
    ==2658==    at 0x40A2F5: RFStartSerialReaders (readerfactory.c:1327)
    ==2658==    by 0x40743F: main (pcscdaemon.c:522)
    ==2658== ==2658== Conditional jump or move depends on uninitialised
    value(s)
    ==2658==    at 0x4C26D25: free (vg_replace_malloc.c:325)
    ==2658==    by 0x40A404: RFStartSerialReaders (readerfactory.c:1348)
    ==2658==    by 0x40743F: main (pcscdaemon.c:522)
    ==2658== ==2658== Invalid free() / delete / delete[]
    ==2658==    at 0x4C26D72: free (vg_replace_malloc.c:325)
    ==2658==    by 0x40A404: RFStartSerialReaders (readerfactory.c:1348)
    ==2658==    by 0x40743F: main (pcscdaemon.c:522)
    ==2658==  Address 0x4222148 is not stack'd, malloc'd or (recently)
    free'd
    
    
    --- pcsc-lite-1.6.1/src/readerfactory.c.orig2010-07-04
    23:42:14.000000000 +0300
    +++ pcsc-lite-1.6.1/src/readerfactory.configuration2010-07-04
    23:42:23.000000000 +0300
    @@ -1312,7 +1312,7 @@ void RFCleanupReaders(void)
     #ifdef USE_SERIAL
      int RFStartSerialReaders(const char *readerconf)
       {
       -readerconfSerialReader *reader_list;
       +reader_listSerialReader *reader_list = NULL;
                    int i, rv;
                            /* remember the configuration filename for
                             * RFReCheckReaderConf() */
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5066 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f2a0b658730a2e8b707d97e3bcfbbba8d360c4e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 8 20:26:20 2010 +0000

    more idiomatic sysconfdir usage
    
    Thanks to Kalev Lember for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2010-q3/0015.html
    
    > URL: http://svn.debian.org/wsvn/pcsclite/?sc=1&rev=5060
    > Log: set --sysconfdir=/etc/reader.conf.d so that we parse any file in
    > this directory
    >
    > [...]
    > -        --sysconfdir=/etc \
    > +        --sysconfdir=/etc/reader.conf.d \
    
    It's more common to set sysconfdir to /etc and have configure script
    figure out the subdirectory. The configure script should always default
    to sane values when no arguments are specified. The default value for
    sysconfdir is /usr/local/etc; so the configure script should just append
    /reader.conf.d to that. Right now if the user doesn't override
    sysconfdir, pcsc will try to go through every .conf file in
    /usr/local/etc, and I don't think anything good will come out of that.
    
    I have a patch attached which should make it more idiomatic: default to
    $sysconfdir/reader.conf.d directory.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5065 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh           | 2 +-
 configure.in   | 6 ++++--
 src/pcscd.h.in | 2 +-
 3 files changed, 6 insertions(+), 4 deletions(-)

commit dc51496c9b3cdea0b133c9003230f6d0afab2f12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 2 15:10:15 2010 +0000

    remove PCSCLITE_READER_CONFIG now useless
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5062 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 -
 1 file changed, 1 deletion(-)

commit 5e876d153265f74b1ad88aa19c84bf2b71b6b3ce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 2 15:05:29 2010 +0000

    main(): use PCSCLITE_CONFIG_DIR instead of PCSCLITE_READER_CONFIG to
    use the directory configured using --sysconfdir=...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5061 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e96ccfdfc9d3e0e8854d8dab9ac22490c2e349a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 2 15:02:09 2010 +0000

    set --sysconfdir=/etc/reader.conf.d so that we parse any file in this
    directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5060 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d7d57379d711ba70c924e7436b127b4f3c3b8ee1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 2 15:01:27 2010 +0000

    DBGetReaderListDir(): add a log line when parsing a directory (containing
    config files)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5059 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 ++
 1 file changed, 2 insertions(+)

commit 5d81ce2e869f3c94f5df080a3d6f0f6a300f06d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 2 14:39:55 2010 +0000

    RFCheckSharing(), RFLockSharing(), RFUnlockSharing() &
    RFUnlockAllSharing(): add the  READER_CONTEXT * rContext parameter to
    avoid recomputing it internally (gain a few CPU cycles)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5058 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 35 +++++++----------------------------
 src/readerfactory.h |  8 ++++----
 src/winscard.c      | 28 ++++++++++++++--------------
 3 files changed, 25 insertions(+), 46 deletions(-)

commit e15e610bb2081bc5c3595858ea0ab3e84a817961
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 14:39:24 2010 +0000

    update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5047 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.h      | 2 +-
 src/configfile.l      | 2 +-
 src/debuglog.c        | 2 +-
 src/dyn_hpux.c        | 2 +-
 src/dyn_macosx.c      | 2 ++
 src/dyn_unix.c        | 2 +-
 src/eventhandler.c    | 2 +-
 src/eventhandler.h    | 2 +-
 src/hotplug_generic.c | 2 ++
 src/hotplug_libhal.c  | 2 +-
 src/hotplug_libusb.c  | 2 +-
 src/hotplug_linux.c   | 2 +-
 src/hotplug_macosx.c  | 4 ++++
 src/ifdwrapper.c      | 2 +-
 src/ifdwrapper.h      | 2 +-
 src/pcscdaemon.c      | 2 +-
 src/readerfactory.c   | 2 +-
 src/readerfactory.h   | 2 +-
 src/sys_generic.h     | 2 +-
 src/sys_unix.c        | 2 +-
 src/testpcsc.c        | 2 +-
 src/winscard.c        | 2 +-
 src/winscard_clnt.c   | 2 +-
 src/winscard_msg.h    | 2 +-
 src/winscard_svc.c    | 2 +-
 src/winscard_svc.h    | 2 +-
 26 files changed, 31 insertions(+), 23 deletions(-)

commit f49e536b349a17afd94646b9ae77688858a11888
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 14:24:55 2010 +0000

    Remove declaration of 3 static functions since they are defined before
    use. Declaration is then useless.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5046 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 3 ---
 1 file changed, 3 deletions(-)

commit 126a7d8fa36eeca68769b08950a3c597b2b176ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 14:22:00 2010 +0000

    check for libusb-1.0 instead of libusb-0.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5045 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit cda1f7c9a592bdea0ae4a1d29bb75a24fd60dcda
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 13:06:07 2010 +0000

    port from libusb-0.1 to libusb-1.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5044 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 205 +++++++++++++++++++++++----------------------------
 1 file changed, 94 insertions(+), 111 deletions(-)

commit 7d476858fc8565c5394cd99fd1a2d2d01c4c882c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 25 09:08:24 2010 +0000

    use readers() from smartcard.System instead of smartcard.pcsc.PCSCReader
    
    readers() method is now a staticmethod of the PCSCReader class
    since pyscard subversion revision 500.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5040 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py         | 2 +-
 UnitaryTests/control_get_firmware.py     | 2 +-
 UnitaryTests/control_switch_interface.py | 2 +-
 UnitaryTests/stress_get_firmware.py      | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit dd222bf02d7e30a8ee75fc7341a35916b72de04b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 24 13:57:49 2010 +0000

    signal_trap(): implement a "Forced suicide" mechanism.
    
    After 3 Ctrl-C without much reaction from pcscd (in fact the drivers) we
    force the suicide. Sometimes libusb is blocked in a kind of dead-lock
    and kill -9 was the only option.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5039 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 0b13e34bb64e2869fbbfe581b35d44e1f15a24de
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 24 12:47:18 2010 +0000

    - better display the list of available readers
    - display the command duration and log to stderr if the duration is more
      than 1 second indicating a problem
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5038 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/stress_apdu.py         | 14 ++++++++++++--
 UnitaryTests/stress_get_firmware.py | 14 ++++++++++++--
 2 files changed, 24 insertions(+), 4 deletions(-)

commit 468cf827cc160344475a76b2ea597f8fe0c607bb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 24 09:24:18 2010 +0000

    get firmware version of Gemalto readers in loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5037 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/stress_get_firmware.py | 57 +++++++++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)

commit 50958da001a754cf504970b3a9c47fc55cbaa455
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 24 09:23:58 2010 +0000

    send an apdu in loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5036 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/stress_apdu.py | 60 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 60 insertions(+)

commit c2df627aee1cb01e4fa2bb3dfb98a40589bb6c76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 22 12:56:20 2010 +0000

    Add Log5() function
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5032 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 2 ++
 1 file changed, 2 insertions(+)

commit 8b90b4c77ef1799dcc4e2c71515206f4e6d01136
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 22 11:37:00 2010 +0000

    fix a comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5031 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 040e6f9b7564c8f202cec86e7bbcd430ffe7ef2f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 22 09:28:35 2010 +0000

    Add support of TAG_IFD_STOP_POLLING_THREAD to request the stop of the
    driver polling function.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5029 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h |  1 +
 src/eventhandler.c    | 17 ++++++++++++++++-
 2 files changed, 17 insertions(+), 1 deletion(-)

commit b641ef78d36edf26369059a3747b90907ba075c7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 21 12:52:40 2010 +0000

    Use AC_CHECK_FUNCS() instead of AC_CHECK_FUNC() to have
    HAVE_PTHREAD_CANCEL defined when needed.
    
    AC_CHECK_FUNC() defined nothing so HAVE_PTHREAD_CANCEL was not defined
    even if pthread_cancel() was available.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5023 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b593d4ea9e50cda8e281f8ed841e7864dda4f72
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 09:10:06 2010 +0000

    main(): in case of auto exit create a new session so that Ctrl-C on the
    application will not also quit pcscd
    
    Thanks to Thierry Fabre for reporting the bug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@5009 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 3ec6aa2054702c0712561dad7a19d4b26cb7102b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 13 12:54:23 2010 +0000

    typo in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4992 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b9688bd0eb86cda8e63156113a52d16b5617d16b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 12 21:21:32 2010 +0000

    return exception from smartcard.pcsc.PCSCExceptions when appropriate
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4991 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBeginTransaction_Disconnect.py | 15 ++++++------
 UnitaryTests/SCardBlockingBehaviourTest.py       | 16 ++++++------
 UnitaryTests/SCardCancel.py                      | 11 +++++----
 UnitaryTests/SCardConnect_DIRECT.py              | 13 +++++-----
 UnitaryTests/SCardConnect_DIRECT2.py             | 31 ++++++++++++------------
 UnitaryTests/SCardExclusiveBehaviour.py          | 10 +++++---
 UnitaryTests/SCardGetAttrib.py                   | 11 +++++----
 UnitaryTests/SCardReconnect.py                   | 14 +++++------
 UnitaryTests/SCard_fork.py                       | 10 +++-----
 UnitaryTests/ThreadSafe.py                       |  7 +++---
 UnitaryTests/ThreadSafeConnect.py                | 16 +++++-------
 UnitaryTests/reset_card.py                       | 14 +++++------
 12 files changed, 85 insertions(+), 83 deletions(-)

commit 4cbb0177d1bb5d684e1d83d2eb146a464c37008f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 11:23:32 2010 +0000

    Avoid a division by 0.
    Closes [#312555] simclist bug in pcsc-lite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4986 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit be23678e80591c2d49ed8e974d50b3ace63e0ec9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 11:21:17 2010 +0000

    update to version version 1.4.4rc4 Apr 2010
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4985 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 14 ++++++++++----
 src/simclist.h |  9 +++++----
 2 files changed, 15 insertions(+), 8 deletions(-)

commit d3b748394c19a7e7c5d2efd9203eac5411b179e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 7 11:46:29 2010 +0000

    SCardEstablishContext(): if pcscd is stared by libpcsclite then close
    all file handles except stdin, stdout and stderr so that pcscd does not
    confiscate ressources allocated by the application
    
    Thanks to Thierry Fabre for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4983 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 645c81262684e4b2228b880426bbb283875a475c (tag: 1.6.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 4 12:33:29 2010 +0000

    release 1.6.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4978 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 648f635fcaaf3b7db759517de33e6dd221d13292
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 4 12:31:22 2010 +0000

    release 1.6.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4977 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit 20907983ca9d96782dd4f78c455f0f59f111099f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 1 09:43:47 2010 +0000

    update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4974 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h        | 2 +-
 src/strlcpycat.h  | 2 +-
 src/tokenparser.l | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 12f1f0e4ff330bacc28254519293bf0e3e1fd047
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 1 07:33:36 2010 +0000

    pcscd: do not return before most of the initialisation are done
    correctly. The idea is that pcscd can return an error code if the daemon
    fails to start correctly (hald not started for example).
    
    Before the patch pcscd became a daemon, then returned 0 (success) and
    then continued with the initialisation. If the initialisation failed it
    was too late to return an error code. The /etc/init.d/pcscd script was
    not aware of the failure.
    
    Closes https://bugzilla.redhat.com/show_bug.cgi?id=580321
    "/usr/sbin/pcscd exit codes broken"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4969 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 184 ++++++++++++++++++++++++++++++++++++++-----------------
 src/sys_unix.c   |  79 ------------------------
 2 files changed, 128 insertions(+), 135 deletions(-)

commit c3f7137b299036ea6d03d00e57ed1c6f3c40ae31
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 31 09:10:22 2010 +0000

    main(): return EXIT_FAILURE instead of EXIT_SUCCESS if a unknown
    argument is passed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4968 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7a66a995a8b3b4774f7563c1376554eb72f894b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 29 11:28:16 2010 +0000

    Avoids a crash if a client sends a unknown command.
    
    Thanks to Martin Vogt for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2010-q2/0096.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4967 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 4 +++-
 src/winscard_svc.c | 6 ++++--
 2 files changed, 7 insertions(+), 3 deletions(-)

commit d0f4bcac55d8c4c9ea7848e9ceee56022278ddfd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 27 10:12:34 2010 +0000

    SCardControl(): do not check for card events since we are talking to the
    reader not the card.
    A smart card removal should not make SCardControl() fail with
    SCARD_W_REMOVED_CARD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4964 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ------
 1 file changed, 6 deletions(-)

commit 5cd9bc629e3b76518ca90079ea2e4ff1cc37bee1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 20 15:08:45 2010 +0000

    get SCARD_ATTR_VENDOR_IFD_SERIAL_NO PC/SC attribute
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4957 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardGetAttrib.py | 53 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 53 insertions(+)

commit aed4119c05e3b269989652f030b028db36ac5e4b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 18 15:00:24 2010 +0000

    Add PCSCv2_PART10_PROPERTY_bPPDUSupport
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4954 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 1 +
 1 file changed, 1 insertion(+)

commit 15200c12251e8fd8789c04abc76d5089e8085238
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 18 13:43:27 2010 +0000

    Also display the return value of SCardReleaseContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4953 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardGetStatusChange/SCardGetStatusChange.py     | 1 +
 UnitaryTests/SCardGetStatusChange/SCardGetStatusChange_PnP.py | 1 +
 2 files changed, 2 insertions(+)

commit 226991de109c1c4f42cd3e6403a6055f37a6f093
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 18 13:42:25 2010 +0000

    MessageSend(), MessageReceive() & MessageSendWithHeader() do not timeout
    any more. If the other side of the socket dies we will get an error from
    the kernel.
    
    Add a new MessageReceiveTimeout() to implement SCardGetStatusChange()
    with a timeout.
    
    The constants PCSCLITE_WRITE_TIMEOUT & PCSCLITE_READ_TIMEOUT are now
    also removed.
    
    The problem was that if a client does nothing during
    PCSCLITE_READ_TIMEOUT (120 seconds by default) then pcscd considers it
    as a dead client and closes the connection. I guess this problem was
    present since the first version of pcsc-lite but nobody complained
    before.
    
    Thanks to Thierry Fabre for the bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4952 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in      |   2 -
 src/winscard_clnt.c | 131 ++++++++++++++++++++++------------------------------
 src/winscard_msg.c  | 120 +++++++++++++++++++++++++++++++++++------------
 src/winscard_msg.h  |  12 ++---
 src/winscard_svc.c  |  20 ++++----
 5 files changed, 161 insertions(+), 124 deletions(-)

commit 4382d58627fba82c82818e8856c41aeab075b0c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 18 09:35:09 2010 +0000

    rename SHMfoobar() functions in foobar() since we do not use shared
    memory (SHM) anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4951 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       | 12 +++----
 src/winscard_clnt.c    | 86 +++++++++++++++++++++++++-------------------------
 src/winscard_msg.c     | 20 ++++++------
 src/winscard_msg.h     | 16 +++++-----
 src/winscard_msg_srv.c | 18 +++++------
 src/winscard_svc.c     | 18 +++++------
 6 files changed, 85 insertions(+), 85 deletions(-)

commit 1d2970635282c1af2b0854545c27b0fadf73e4a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 17 14:54:47 2010 +0000

    Add a synchronisation so that if pcscd is auto started the initial
    reader list is available before the server takes commands from clients.
    
    Before the change early calls of SCardListReaders() returned an empty
    list of readers even if a reader was connected.
    
    Thanks to Patrice Angelini for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4949 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 23 ++++++++++++++++++++---
 1 file changed, 20 insertions(+), 3 deletions(-)

commit a707c88a79cf96ab97ba26e38dc8ea47aa4fb18f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 17 08:52:09 2010 +0000

    Remove etc directory completely
    - serial readers are rare => no need for /etc/reader.conf.d/
    - pcscd now autostarts => no need for /etc/init.d/pcscd script or equivalent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4948 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am             |  7 ----
 etc/SmartcardServices       | 40 ---------------------
 etc/StartupParameters.plist | 11 ------
 etc/pcscd.init.in           | 84 ---------------------------------------------
 etc/reader.conf.in          | 13 -------
 5 files changed, 155 deletions(-)

commit f706ab529e4dff9f2a2f617e386338ffd986f3df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 17 08:48:56 2010 +0000

    Do not install files in /etc any more.
    Serial drivers are rare now.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4947 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am  | 2 +-
 configure.in | 3 ---
 2 files changed, 1 insertion(+), 4 deletions(-)

commit b32d24dd4a2c4cda9212ebfe8c5c887770499ece
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 17 08:43:24 2010 +0000

    Use $(sysconfdir_exp) instead of (removed) $(confdir_exp)
    
    Fixes [#312498] Wrong installation path for reader.conf.d
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4946 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f517165955e29056c9d20752b4dccaab9521bdf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 13:17:23 2010 +0000

    Unitary test for bug fixed in revision 4940
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4941 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT2.py | 109 +++++++++++++++++++++++++++++++++++
 1 file changed, 109 insertions(+)

commit 5a5193d6f423935c5aa9e106b122a262468d01de
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 13:16:00 2010 +0000

    SCardConnect() & SCardReconnect(): do not reset the cardProtocol in
    SCARD_SHARE_DIRECT case since the card have _not_ been reseted. A new
    PPS negociation would fail.
    
    See SCardConnect_DIRECT2.py for a Unitary Test
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4940 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ----
 1 file changed, 4 deletions(-)

commit 22ce041ad371cecadaf17155cce2d3cb48ef9691 (tag: 1.6.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 5 09:53:51 2010 +0000

    update date and release for 1.6.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4921 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 07833c39d6db75a6a28c281de34ec513ac8a45ea
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 5 09:51:31 2010 +0000

    release 1.6.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4920 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 110 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 configure.in |   2 +-
 2 files changed, 107 insertions(+), 5 deletions(-)

commit 4d0f82ac62bbcdc30c59ad585d68ef7f10f18b76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 4 13:18:47 2010 +0000

    ExitValue default value is now EXIT_FAILURE instead of EXIT_SUCCESS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4918 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit d37b6615b4b8135833f54c158da01b9f3b782d42
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 4 13:02:34 2010 +0000

    main(): remove dead code "used" when no reader.conf file is found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4917 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 18 +++---------------
 1 file changed, 3 insertions(+), 15 deletions(-)

commit 2ad9d902dd3cf20e8a67e5463d83ee408c9e1aff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 3 09:38:59 2010 +0000

    SCardEstablishContext(): also log the binary name if execl() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4913 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit bffb387bbb6d4c38ed1185fc5b4d2122ccc3624f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 3 09:30:25 2010 +0000

    EHDestroyEventHandler(): use pthread_cancel() only if it is present (not
    the case on Android)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4912 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 ++
 1 file changed, 2 insertions(+)

commit b0a69f162120761118e572c8237b608e00ca538a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 3 09:29:33 2010 +0000

    Add a check for pthread_cancel() (not present on Android)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4911 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 6 ++++++
 1 file changed, 6 insertions(+)

commit 5d0fb7fc74ce5e44a9947b4feba23d111ed66a8f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 3 09:24:54 2010 +0000

    Add missing #include <pthread.h>
    
    Compilation failed on Android but not on my Debian as the libC is
    different on the two systems. On Debian sys/types.h defines pthread
    types
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4910 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 1 +
 1 file changed, 1 insertion(+)

commit cb674dd21f0bdb1ca688a968e8b64b9783e0932b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 14:50:29 2010 +0000

    #include <string.h> on plateform that have strlcpy() to avoid a warning
    (Mac OS X and Android)
    
    error.c: In function ‚Äòpcsc_stringify_error‚Äô:
    error.c:64: warning: implicit declaration of function ‚Äòstrlcpy‚Äô
    error.c:64: warning: nested extern declaration of ‚Äòstrlcpy‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4906 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcpycat.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 10421be78c9cd97a0311f3041a23491583579179
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 09:45:54 2010 +0000

    #include <pthread.h>
    
    Declare pthread_mutex_* functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4905 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 1 +
 1 file changed, 1 insertion(+)

commit 12118f1cecaa90b3509fa563b5437556b2d0f190
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 09:41:50 2010 +0000

    #include "utils.h"
    
    Fix
    hotplug_linux.c:391: error: ‚ÄòTHREAD_ATTR_DETACHED‚Äô undeclared (first use in this function)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4904 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 1 +
 1 file changed, 1 insertion(+)

commit d9fb15835a4cd3d156f96a37ba289e46f7c4f0fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 09:39:27 2010 +0000

    HPEstablishUSBNotifications(): do not call RFReCheckReaderConf if
    USE_SERIAL is defined. The function is not defined in this case.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4903 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 ++
 1 file changed, 2 insertions(+)

commit 8366c9f8efc284b76ce4c247aca475cb2378b220
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 07:26:36 2010 +0000

    Add --disable-serial and --disable-usb options
    
    --disable-serial removes support of /etc/reader.conf
    gain: 8.0kB of .text (12%) and 160 bytes of .bss (4%) for pcscd
    
    --disable-usb removes support of USB hotplug
    gain: 9.7kB of .text (14%) and 960 bytes of .bss (23%) for pcscd
    
    If you use both options (and use a static driver configuration)
    gain: 17.7kB of .text (26%) and 1152 bytes of .bss (28%) for pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4901 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in         | 22 ++++++++++++++++++++++
 src/Makefile.am      | 20 ++++++++++++++------
 src/hotplug_libhal.c |  2 +-
 src/pcscdaemon.c     |  8 +++++++-
 src/readerfactory.c  |  4 ++++
 5 files changed, 48 insertions(+), 8 deletions(-)

commit 031441812d724b3eb039e5a277b6ad52552cf7d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 07:20:02 2010 +0000

    Define a minimal pcsc_stringify_error() if NO_LOG is defined.
    Only the error code in hex is displayed in this case.
    
    Gain: 2kB of .text (10%) for libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4900 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 344f09fd0e2d2590a408b4257aabde45bf3ff512
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 29 07:14:04 2010 +0000

    main(): fork() only in case of auto exit to not detach from the terminal
    if launched in stand alone forground mode ("pcscd -fda" for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4899 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit 913620b72d61aa4f613c144978200cdc409cbeeb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 22 13:35:40 2010 +0000

    main(): always fork() so that pcscd always return in --auto-exit mode
    but do not close stdout yet since we may need to send logs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4889 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 9bdc5e3c23f17183659b0a7c1c07ba8dd8b17fe0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 22 13:18:41 2010 +0000

    SCardEstablishContext(): call waitpid() to avoid having a defunct pcscd
    process when pcscd is auto started by the client.
    
    The process becomes defunct because pcscd calls daemon() and daemon()
    does fork() and exit() in the father. The father death must then be
    reclaimed by libpcsclite.
    
    Thanks to Patrice Angelini for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4888 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 8e1f7947a7a73f4d955fbf1a7108ba2947bf41ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 18 12:17:56 2010 +0000

    Directly use pthread_mutex_* fucntions instead of using wrappers
    Remove thread_unix.c and thread_generic.h now useless
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4885 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am      |  3 --
 src/eventhandler.c   | 18 ++++++------
 src/hotplug_libhal.c | 16 +++++------
 src/hotplug_libusb.c | 15 +++++-----
 src/hotplug_linux.c  | 12 ++++----
 src/ifdwrapper.c     | 38 +++++++++++++------------
 src/pcscdaemon.c     |  1 -
 src/readerfactory.c  | 66 +++++++++++++++++++++++---------------------
 src/readerfactory.h  |  5 ++--
 src/thread_generic.h | 42 ----------------------------
 src/thread_unix.c    | 63 ------------------------------------------
 src/winscard.c       | 21 +++++++-------
 src/winscard_clnt.c  | 78 ++++++++++++++++++++++++++--------------------------
 src/winscard_svc.c   | 47 +++++++++++++++----------------
 14 files changed, 161 insertions(+), 264 deletions(-)

commit 0f24230a3366173eec641788845af6f9555a5dff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 18 11:49:35 2010 +0000

    Use pthread_t instead of PCSCLITE_THREAD_T
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4884 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 +-
 src/hotplug_libusb.c | 2 +-
 src/hotplug_linux.c  | 2 +-
 src/hotplug_macosx.c | 2 +-
 src/readerfactory.h  | 2 +-
 src/utils.c          | 2 +-
 src/winscard_svc.c   | 2 +-
 7 files changed, 7 insertions(+), 7 deletions(-)

commit 231400280e65f7749e2d163c2d79cadca4833a59
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 18 11:48:40 2010 +0000

    move thread related definition from thread_generic.h to utils.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4883 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_generic.h | 6 ------
 src/utils.h          | 8 +++++++-
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 04b28c00b8d11bd9abc038549be27d9a2cac5e99
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 18 11:39:09 2010 +0000

    Directly use pthread_* instead of SYS_Thread* indirection
    
    Move SYS_ThreadCreate in utils.c. This function is not just one
    pthread_* call
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4882 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c   | 12 +++++------
 src/hotplug_libhal.c |  2 +-
 src/hotplug_libusb.c |  2 +-
 src/hotplug_linux.c  |  2 +-
 src/hotplug_macosx.c |  4 ++--
 src/thread_generic.h |  9 --------
 src/thread_unix.c    | 61 ----------------------------------------------------
 src/utils.c          | 26 ++++++++++++++++++++++
 src/utils.h          |  3 +++
 src/winscard_svc.c   |  8 +++----
 10 files changed, 44 insertions(+), 85 deletions(-)

commit ccaaf8ec9e2ea67e76a6bfff23ccbeba415bce3f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 16 16:08:58 2010 +0000

    SYS_ThreadExit(): remove dead code
    
    From Sun Studio CC
    "thread_unix.c", line 108: warning: statement not reached
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4877 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 1 -
 1 file changed, 1 deletion(-)

commit 6e897a8501eae95fb646bb4c894fb82f742cc505
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 16 12:54:30 2010 +0000

    update versions of autotools used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4875 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 94906ed1ee45e3549428deba0440993fb6f1c360
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 19:12:29 2010 +0000

    remove ; at end of a { } block defined by a macro. The Solaris compiler
    complains with:
    "simclist.c", line 1317: warning: syntax error:  empty declaration
    
    Thanks to J√∂rg Schilling for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4874 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 60 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 30 insertions(+), 30 deletions(-)

commit fc0bbd7231df1d22c33063de656cd5097b0b211d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 19:08:11 2010 +0000

    use fork(), close() and chdir() instead of SYS_Fork(), SYS_CloseFile()
    and SYS_Chdir() in SYS_Daemon() if HAVE_DAEMON is not defined (Solaris)
    
    Thanks to J√∂rg Schilling for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4873 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 33 +++++++++++++--------------------
 1 file changed, 13 insertions(+), 20 deletions(-)

commit 5a34f3e466088f71e4ae0bbad4e4d6db0e8de6df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 9 08:18:12 2010 +0000

    Log the command return code using DEBUG (SCARD_S_SUCCESS) or ERROR
    (every thing else) level
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4867 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit fd93200f5d306811fabc2c42139dd9e5497f83a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 8 15:36:52 2010 +0000

    reset a card using SCardDisconnect (default) or SCardReconnect (if an
    argument is passed)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4866 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/reset_card.py | 59 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 59 insertions(+)

commit 8423de7ec8fe65055bdc24b61f2602b6d2d87bb5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 8 15:35:54 2010 +0000

    call SCardTransmit in an endless loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4865 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/transmit_loop.py | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit 4b96e5beacef1a60e2ad086df5c3f0828530acd3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 8 15:34:42 2010 +0000

    SCardReconnect(): mimic the code from SCardDisconnect() regarding card
    event state notifications (changed in revision 4862).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4864 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 121 +++++++++++++++++++++------------------------------------
 1 file changed, 44 insertions(+), 77 deletions(-)

commit 1b071ebcf21d89345d6d5979e7d2d6d0ecd091fc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 8 15:14:07 2010 +0000

    no more pcsc_demo target
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4863 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/Makefile | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 643cee57b2e655ec748dcb5a836dd7d153f0e2f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 8 15:09:07 2010 +0000

    SCardDisconnect(): Set the card event state to SCARD_RESET _before_ doing
    the reset.
    
    This will avoid an SCardTransmit from another application between the
    card reset and the card event state change. In the problematic case the
    SCardTransmit was sending an APDU in T=1 to a reseted card but not yet
    configured (IFDHSetProtocolParameters was not yet called) and still in
    T=0 (default)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4862 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 350760953ea2eee1a89d6e6d82f17268599b833c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 8 13:51:28 2010 +0000

    SCardConnect() & SCardReconnect(): correctly log SCARD_PROTOCOL_RAW
    protocol instead of "unknown"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4861 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 46 ++++++++++++++++++++++++++++++++--------------
 1 file changed, 32 insertions(+), 14 deletions(-)

commit 8d6c7bb7267987ebeee951d882ae41003f3b5546
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 7 15:08:27 2010 +0000

    Fix copyright name and date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4859 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c     | 4 ++--
 src/winscard_msg_srv.c | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit ed4be3dc1b7635708e7f78bdc8ad5d40c88937f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 7 15:06:51 2010 +0000

    Doxygen: document SHMMessageReceive() command argument added in revision 4718
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4858 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 1 +
 1 file changed, 1 insertion(+)

commit 70311ef46a1ac795b198149a41c330c482b54869
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 7 15:01:34 2010 +0000

    Doxygen: SCARD_ATTR_DEVICE_FRIENDLY_NAME is implemented by
    SCardGetAttrib() if the IFD Handler (driver) returns IFD_ERROR_TAG.
    pcsc-lite then returns the same reader name as returned by
    SCardListReaders.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4857 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit e07c7462b380849e576afe225efddd564eac02b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 1 07:09:47 2010 +0000

    Add PCSCv2_PART10_PROPERTY_* defines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4851 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit caed17492824132ce2524dd4697dd489bcb75a04
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 07:54:42 2010 +0000

    SCardEstablishContext(): try to relaunch pcscd if
    SCardCheckDaemonAvailability() succeeds but SCardEstablishContextTH()
    fails. This happens if pcscd crashed without cleaning
    /var/run/pcscd/pcscd.comm
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4845 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 12d7d0d28cb826334a904748516b8bb9018d25dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 26 10:24:55 2010 +0000

    add FEATURE_GET_TLV_PROPERTIES and FEATURE_CCID_ESC_COMMAND from PC/SC
    part 10 v2.02.07 March 2010
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4843 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 299e8594d073d16d4beb6aeefc45bbc01244e975
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 22 13:43:59 2010 +0000

    Call at_exit() instead of exit() since the libC of Android is bogus and
    atexit() does not work as it should.
    
    Thanks to Patrice Angelini for the bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4839 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 64df65d790f259e25ab6e36443fd1598149d0683
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 22 10:20:34 2010 +0000

    SCardCheckDaemonAvailability(): use stat(2) instead of the now removed
    SYS_Stat()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4838 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a34dd43eeea65c7ccedf90cd7cf36e5fed4424e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 19 12:34:32 2010 +0000

    Remove the one line wrappers from sys_unix.c and use directly the POSIX
    functions instead.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4836 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l       |  4 +--
 src/pcscdaemon.c       | 22 ++++++-------
 src/sys_generic.h      | 18 -----------
 src/sys_unix.c         | 84 --------------------------------------------------
 src/winscard_msg.c     | 11 +++----
 src/winscard_msg_srv.c |  5 ++-
 src/winscard_svc.c     |  4 +--
 7 files changed, 22 insertions(+), 126 deletions(-)

commit 82d3dbd43b747e77fd2b72fe0fdcbb845df381aa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 14:05:19 2010 +0000

    Install pcscd as suid so that autostart works correctly (as root)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4825 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit 568d32a578b71ad1a5a60d0325e7cf5cbad0bc6d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 10:54:29 2010 +0000

    done: remove as much text messages (logs) as possible
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4824 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 397fb81a228a588abddc4b89ca7cd5369eba6536
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 09:50:35 2010 +0000

    Display PCSCLITE_FEATURES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4823 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit de444db30d4d6d094661154ef1ed191d5b398615
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 09:47:38 2010 +0000

    Add --enable-embedded (default is no) to build pcsc-lite for an embedded
    system.
    This will activate the NO_LOG option to disable logging and limit RAM
    and disk consumption.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4822 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit f7dedcb5880f6094a9da47ce846cf8184735e182
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 09:43:31 2010 +0000

    If NO_LOG is defined then no log are displayed. The idea is to limit the
    binaries size on disk and RAM consumption at execution time.
    
    With NO_LOG defined we gain 26% (17 kB) for the .text segment of pcscd
    and 15% (4 kB) for the .text segment of libpcsclite.so (for i386)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4821 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h  | 18 ++++++++++++++++++
 src/debug.c          | 21 +++++++++++++++++++++
 src/debuglog.c       | 51 +++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hotplug_libhal.c |  2 ++
 src/winscard_svc.c   |  2 ++
 5 files changed, 94 insertions(+)

commit 923efeeeab2ec7983d2b49d500ae1accaa0e642b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 09:38:35 2010 +0000

    Include config.h before the other header files so the configuration set
    in config.h can be used in the other header files (NO_LOG for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4820 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 56477cdebf049c987fe2b92e189efc88127f6f72
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 09:36:04 2010 +0000

    Include config.h before the other header files so the configuration set
    in config.h can be used in the other header files (NO_LOG for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4819 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3ffa5b0fc80e9436e562a68a917fb4ecf797899f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 16 09:30:58 2010 +0000

    Remove debug.h and use debuglog.h instead. They both define the same
    log API.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4818 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am     |  1 -
 src/debug.c         |  3 ++-
 src/debug.h         | 77 -----------------------------------------------------
 src/dyn_hpux.c      |  2 +-
 src/dyn_macosx.c    |  2 +-
 src/dyn_unix.c      |  2 +-
 src/sys_unix.c      |  2 +-
 src/tokenparser.l   |  2 +-
 src/utils.c         |  2 +-
 src/winscard_clnt.c |  2 +-
 src/winscard_msg.c  |  2 +-
 11 files changed, 10 insertions(+), 87 deletions(-)

commit 0ea2194ed6703554a105e2d7103867d28b708dd1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 12 10:35:46 2010 +0000

    revert change in revision 4812 since the problem is now solved in
    pyscard (revision 382)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4813 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafe.py        | 6 ------
 UnitaryTests/ThreadSafeConnect.py | 5 -----
 2 files changed, 11 deletions(-)

commit 30818dc2cbff82276be09034c6a6bb68060fd381
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 12 09:56:28 2010 +0000

    do not initialise the library in a thread as it crashed on Mac OS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4812 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafe.py        | 7 +++++++
 UnitaryTests/ThreadSafeConnect.py | 6 ++++++
 2 files changed, 13 insertions(+)

commit 23807e10fefc7ae6fe90da4426638416c3d5b410
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 15:46:52 2010 +0000

    read only accesses to contextsList list shall also be protected by a mutex
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4809 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit b763f5f8f784dc02014ed1344ff6d1bc50660fb8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 15:42:03 2010 +0000

    read only accesses to handlesList list shall also be protected by a mutex
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4808 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 34 +++++++++++++++++++++++++---------
 1 file changed, 25 insertions(+), 9 deletions(-)

commit 22a3dbcc08ae52558568821cf09159aa57d702c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 15:19:05 2010 +0000

    manipulations of handlesList field of ReaderContext should now be thread safe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4807 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 13 +++++++++++++
 src/readerfactory.h |  1 +
 2 files changed, 14 insertions(+)

commit 2f03f2b708a7de8f5878abfa3bee62174cf35c02
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 15:16:46 2010 +0000

    MSGRemoveContext(): correctly indent a line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4806 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0ade600effcaf54117c0dd9d761c5018340fea8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 15:07:55 2010 +0000

    manipulations of cardsList should now be thread safe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4805 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 5f236b99566f8321500e3fe3ca5e500e8214368c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 14:59:31 2010 +0000

    remove extra tab
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4804 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aeff9db6150f7ca3d61c8577992f95fb49ad039d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 14:57:36 2010 +0000

    add more logging
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4803 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafeConnect.py | 19 +++++++++++++------
 1 file changed, 13 insertions(+), 6 deletions(-)

commit c5b1283ba46b420781ce48392caeb4a4d50ddf3c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 10:16:47 2010 +0000

    stress thread safeness of SCardConnect/SCardDisconnect
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4802 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafeConnect.py | 88 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 88 insertions(+)

commit d3ca07351097181e9ebfc53e9798fa243f0f6a34
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 08:51:22 2010 +0000

    manipulations of contextsList should now be thread safe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4801 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit bffc3e7434ebe764666b8b700ca6b01a24177764
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 9 08:29:19 2010 +0000

    stress thread safeness
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4800 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/ThreadSafe.py | 62 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 62 insertions(+)

commit e31e34df70c79ac67dbd8171d662b0a9c572978e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 4 13:58:59 2010 +0000

    make pylint happier
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4793 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBlockingBehaviourTest.py | 27 ++++++++++++++++++---------
 UnitaryTests/SCardExclusiveBehaviour.py    |  7 ++++++-
 2 files changed, 24 insertions(+), 10 deletions(-)

commit eabd3a89476fa008591fdfb424f2ac5455716c85
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 4 13:48:23 2010 +0000

    make pylint happier
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4792 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py | 45 ++++++++++++++++++++++++----------------
 1 file changed, 27 insertions(+), 18 deletions(-)

commit adbffb1c318dad036e248caae1ff9ee0572922b8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 4 13:40:23 2010 +0000

    make pylint happy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4791 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_get_firmware.py | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit ab52be97bf2ae97692274ecd078df72845428b2c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 4 13:38:26 2010 +0000

    remove useless import
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4790 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_get_firmware.py | 1 -
 1 file changed, 1 deletion(-)

commit f0a0950dfde75725008915ea6426d9b071ff4085
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 4 10:55:03 2010 +0000

    use list comprehension instead of map() (more efficient and pylint does
    not like map())
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4789 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py         | 4 ++--
 UnitaryTests/control_get_firmware.py     | 2 +-
 UnitaryTests/control_switch_interface.py | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit fffbd748d1e8ee6b1e98bf125b620d2a8f156fb9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 3 19:54:45 2010 +0000

    make pylint happier
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4788 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_switch_interface.py | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit d6a2b3433a4cc43c2c6f4bb0f0b01592113e33f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 2 15:12:35 2010 +0000

    debuglog.c is only used by pcscd. So no need to use #ifdef PCSCD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4784 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 --
 1 file changed, 2 deletions(-)

commit 64891e4387b70209fee4f68532b09899d5965ab5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 1 14:50:35 2010 +0000

    fix typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4783 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d41c8a826e39efe1ad441792c8cf569ec0bb4c97
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 26 13:53:24 2010 +0000

    Add the ability to parse all the configuration files of a directory
    instead of just one configuration file.
    update-reader.conf is then now obsolete.
    
    See Debian bug #565896 http://bugs.debian.org/565896
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4779 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in                |  2 --
 doc/Makefile.am             |  4 +--
 doc/update-reader.conf.8.in | 32 ------------------------
 etc/Makefile.am             |  1 -
 etc/update-reader.conf.in   | 42 -------------------------------
 src/configfile.h            |  3 +++
 src/configfile.l            | 60 ++++++++++++++++++++++++++++++++++++++++++---
 src/readerfactory.c         |  8 +++---
 8 files changed, 66 insertions(+), 86 deletions(-)

commit dee3af980cc066ae3cac0421c1f08b3ef61f9b96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 25 13:34:23 2010 +0000

    update copyright
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4778 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0efeacebfceb2d397f59740f3d3876e8ba9f093a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 23 16:07:27 2010 +0000

    SCardEstablishContextTH() & SCardGetStatusChange(): completly initialize
    structures sent to the daemon to avoid a valgrind warning:
    Syscall param socketcall.send(msg) points to uninitialised byte(s)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4769 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 596cb11cad1903ea1d3778bdcbaf793f3ef855bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 23 15:11:39 2010 +0000

    As of revision r4719 Linux is now Windows "compatible"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4768 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBlockingBehaviourTest.py | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit f41309083c3c13d74bb3bdb1f0b2086d14e69974
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Feb 21 17:32:38 2010 +0000

    " The gcc on Solaris 10 combined with the Sun loader appears to not
    handle the gcc visibility attribute correctly. The sparc version says it
    is ignored, the x86 version gives linker error. The attached patch
    sun.gcc.1.5.6-svn-477.txt tries to test for gcc on Sun and not use the
    visibility attribute. If on a sun and the compiler is not GCC, try and
    use the Sun __global and __hidden instead. (I did not try the Sun Studio
    compiler with this.) "
    
    Thanks to Douglas E. Engert for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2010-q1/0127.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4766 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 8de3c92e6cc13ba3ea70b0e8d7ef1e43c1f366c9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Feb 21 15:04:13 2010 +0000

    use @sysconfdir_exp@ instead of (removed) @confdir@
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4765 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 11c5fd9a345ba3da26fff817fccc08397230f379
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 12 15:52:22 2010 +0000

    RFStartSerialReaders(): typo in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4758 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d1fb4854f2a3717a8711c8c3148da77471152860
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 12 14:39:10 2010 +0000

    Fix 2 compilation warnings
    
    configfile.c:1151: warning: ‚Äòinput‚Äô defined but not used
    tokenparser.c:1167: warning: ‚Äòinput‚Äô defined but not used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4756 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l  | 1 +
 src/tokenparser.l | 1 +
 2 files changed, 2 insertions(+)

commit 74f086032e3b123a17184498b528737bb0f09b29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 12 10:35:30 2010 +0000

    Fix splint error
    src/pcsc-wirecheck-dist.c:19:164: Body of if clause of if statement is empty
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4755 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/lassert.h | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit 98670fddfb1ec55bef25c869af5ee01ed2531b1d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 12 10:23:10 2010 +0000

    HPAddDevice(): fix a memory leak
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4754 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2813e9099f703dae85275da62cb94322ea4d592e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 12 10:17:53 2010 +0000

    RFRemoveReader(): simplify/factorise the resources deallocation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4753 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 11 +++--------
 1 file changed, 3 insertions(+), 8 deletions(-)

commit 384257fead4f29c7713d31e1ef3c0ebe38c45d1e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 10 17:33:30 2010 +0000

    use @sysconfdir@ instead of (the now removed) @confdir@
    
    Thanks to S√©bastien Lorquet for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2010-q1/0098.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4751 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/update-reader.conf.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a93d718ae03b8a151dc483b889bc0a36b0b76bbc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 15:39:08 2010 +0000

    use a dynamic instead of static allocation for lpcDevice
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4744 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 17 ++++-------------
 src/readerfactory.h |  2 +-
 2 files changed, 5 insertions(+), 14 deletions(-)

commit 79281cb2be14b51714bec5c9a42a72e5b54b144a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:55:32 2010 +0000

    RFAddReader(): allocate an int instead of a DWORD for pFeeds
    
    The patch in revision 4741 was not complete
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4743 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a1540d5c49c9eac5b1df4a7b177709bc8771b74a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:53:53 2010 +0000

    In struct ReaderContext rename pdwMutex to pMutex and change type from
    PDWORD to int *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4742 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 38 +++++++++++++++++++-------------------
 src/readerfactory.h |  2 +-
 2 files changed, 20 insertions(+), 20 deletions(-)

commit 03058073491cd035566098df3d4ca66c0d55a4a1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:51:20 2010 +0000

    In struct ReaderContext rename pdwFeeds to pFeeds and change type from
    PDWORD to int *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4741 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 38 +++++++++++++++++++-------------------
 src/readerfactory.h |  2 +-
 2 files changed, 20 insertions(+), 20 deletions(-)

commit 3b632c8e0775348b64885f69eec17fbee89e912a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:48:57 2010 +0000

    In struct ReaderContext remove the now useless dwBlockStatus field
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4740 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ---
 src/readerfactory.h | 1 -
 2 files changed, 4 deletions(-)

commit 4297fe8c9cfbdb60d6e324add827ceaf2eb50eb6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:47:21 2010 +0000

    In struct ReaderContext rename dwSlot to slot and change type from
    DWORD to int
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4739 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  2 +-
 src/ifdwrapper.c    | 68 ++++++++++++++++++++++++++---------------------------
 src/readerfactory.c | 14 +++++------
 src/readerfactory.h |  2 +-
 src/winscard.c      |  4 ++--
 5 files changed, 45 insertions(+), 45 deletions(-)

commit d7d5112948591601aeec3055293aab2022ac6a53
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:44:30 2010 +0000

    In struct ReaderContext rename dwVersion to version and change type from
    DWORD to int
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4738 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    | 44 ++++++++++++++++++++++----------------------
 src/readerfactory.c | 20 ++++++++++----------
 src/readerfactory.h |  2 +-
 src/winscard.c      |  8 ++++----
 4 files changed, 37 insertions(+), 37 deletions(-)

commit 043a75062f097fac65ff48ce12451ecc8b322c09
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:37:48 2010 +0000

    In struct ReaderContext change dwPort from DWORD to int and rename it to
    port
    
    Fix a compiler warning
    readerfactory.c: In function ‚ÄòRFReCheckReaderConf‚Äô:
    readerfactory.c:1393: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4737 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    | 12 ++++++------
 src/readerfactory.c | 48 ++++++++++++++++++++++++------------------------
 src/readerfactory.h | 10 +++++-----
 3 files changed, 35 insertions(+), 35 deletions(-)

commit 9fff27bbd6250980eb20fa9c5b4f8a041e454ddf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:30:38 2010 +0000

    Fix compiler warning
    
    tokenparser.l: In function ‚ÄòtperrorCheck‚Äô:
    tokenparser.l:102: warning: unused parameter ‚Äòtoken_error‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4736 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 1 +
 1 file changed, 1 insertion(+)

commit 4b92273a146cc31ed8c022c20c604cc849becf15
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:29:06 2010 +0000

    In struct SerialReader rename dwChannelId in channelId since it is an
    int and no more a DWORD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4735 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l    | 6 +++---
 src/readerfactory.c | 8 ++++----
 src/readerfactory.h | 2 +-
 3 files changed, 8 insertions(+), 8 deletions(-)

commit 4b8126353e602cdb8273598dcdf87303da8d5a7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:20:29 2010 +0000

    Fix a compiler warning
    
    eventhandler.c: In function ‚ÄòEHStatusHandlerThread‚Äô:
    eventhandler.c:494: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4734 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 1b823c898774ad7735060a115986574c18fd2c1a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:15:02 2010 +0000

    do not use the uint32_t rv structure field but copy it into rv first to
    avoid a compiler warning
    
    winscard_clnt.c: In function ?SCardReconnect?:
    winscard_clnt.c:1035: warning: comparison between signed and unsigned
    winscard_clnt.c: In function ?SCardBeginTransaction?:
    winscard_clnt.c:1254: warning: comparison between signed and unsigned
    winscard_clnt.c: In function ?SCardStatus?:
    winscard_clnt.c:1657: warning: comparison between signed and unsigned
    winscard_clnt.c: In function ?SCardTransmit?:
    winscard_clnt.c:2939: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4733 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit d82dc301c5c5a149e4c1d61b66313be79632f936
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 14:09:14 2010 +0000

    force the return codes SCARD_* to be long since the SCard* functions
    return a LONG type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4732 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 128 ++++++++++++++++++++++++-------------------------
 1 file changed, 64 insertions(+), 64 deletions(-)

commit 2a0d3c9fe57a65203e6b3183f18c4f0461369279
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 13:38:04 2010 +0000

    In struct ReaderContext dwLockId is used to store a SCARDHANDLE so
    change its type from DWORD to SCARDHANDLE and rename the field to hLockId
    
    Fix 2 compiler warning:
    winscard.c: In function 'SCardDisconnect':
    winscard.c:847: warning: comparison between signed and unsigned
    winscard_svc.c: In function 'MSGRemoveContext':
    winscard_svc.c:807: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4731 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  6 +++---
 src/readerfactory.c | 24 ++++++++++++------------
 src/readerfactory.h | 10 +++++-----
 src/winscard.c      | 10 +++++-----
 src/winscard_svc.c  |  9 ++++-----
 5 files changed, 29 insertions(+), 30 deletions(-)

commit db7c4072615afdd37dbe679d64d548cb9ce1b15a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 13:16:08 2010 +0000

    fix a compilation warning
    
    winscard_msg.c: In function ‚ÄòSHMMessageReceive‚Äô:
    winscard_msg.c:252: warning: unused parameter ‚Äòcommand‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4730 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 ++
 1 file changed, 2 insertions(+)

commit 6c07bd7d177ea1e77492387dffbc7f049a6f6635
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 13:14:44 2010 +0000

    fix 2 compilation warnings
    
    winscard_svc.c: In function ‚ÄòMSGRemoveContext‚Äô:
    winscard_svc.c:776: warning: comparison between signed and unsigned
    winscard_svc.c: In function ‚ÄòMSGAddHandle‚Äô:
    winscard_svc.c:848: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4729 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f15f7127e72dfab605c2c010d6f4673b8d6a1b26
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 10:58:34 2010 +0000

    Use READER_STATE * instead of PREADER_STATE to make it explicit it
    is a pointer
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4728 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.h  | 2 +-
 src/winscard_clnt.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit c2957b46d705fa31b3e7b36bb3e836586d352b79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 10:56:49 2010 +0000

    Use READER_CONTEXT * instead of PREADER_CONTEXT to make it explicit it
    is a pointer
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4727 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  8 ++++----
 src/eventhandler.h  |  4 ++--
 src/ifdwrapper.c    | 20 ++++++++++----------
 src/ifdwrapper.h    | 20 ++++++++++----------
 src/readerfactory.c | 46 +++++++++++++++++++++++-----------------------
 src/readerfactory.h | 32 ++++++++++++++++----------------
 src/winscard.c      | 22 +++++++++++-----------
 src/winscard_svc.c  |  2 +-
 8 files changed, 77 insertions(+), 77 deletions(-)

commit d83dfd9c873bd21c85498f1ce06658ce616e696b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 10:49:30 2010 +0000

    Fix a compilation warning
    
    readerfactory.c: In function ‚ÄòRFAddReaderHandle‚Äô:
    readerfactory.c:1125: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4726 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fdaa98aae36f9ddd3a48aa18491c3facad2de5ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 10:48:10 2010 +0000

    In struct ReaderContext rename "dwContexts" to "contexts" since it is no
    more a DWORD but a int32_t
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4725 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  8 ++++----
 src/readerfactory.c |  6 +++---
 src/readerfactory.h |  2 +-
 src/winscard.c      | 48 ++++++++++++++++++++++++------------------------
 4 files changed, 32 insertions(+), 32 deletions(-)

commit c459d9820f8560f9a543e56733422e96eb359c64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 10:39:36 2010 +0000

    Fix a compilation warning
    
    winscard_clnt.c: In function ‚ÄòSCardListReaderGroups‚Äô:
    winscard_clnt.c:3258: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4724 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52b4394e569a87f13bb1f3bd5055dbd51cf37b26
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 10:36:33 2010 +0000

    Use dynamic instead of static allocation for the driver library
    filename. The filename is no more limited to 100 characters.
    
    Closes: [#312332] MAX_LIBNAME too short?
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4723 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in      |  1 -
 src/readerfactory.c | 17 +++++------------
 src/readerfactory.h |  2 +-
 3 files changed, 6 insertions(+), 14 deletions(-)

commit f2cd8807adf5163e8e44c6f4ec88694b93f910d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 09:09:13 2010 +0000

    use int instead of unsigned int for customMaxThreadCounter,
    customMaxReaderHandles and customMaxThreadCardHandles since list_size()
    returns an int and we compare the two values (avoid sign mismatch)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4722 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c   | 6 +++---
 src/winscard_svc.c | 2 +-
 src/winscard_svc.h | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit d7fff2a2ee5df1948218752439d15d9221040fe4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 9 09:01:47 2010 +0000

    fix 2 compilation warnings
    
    winscard_svc.c: In function ‚ÄòCreateContextThread‚Äô:
    winscard_svc.c:146: warning: comparison between signed and unsigned
    winscard_svc.c: In function ‚ÄòMSGAddHandle‚Äô:
    winscard_svc.c:856: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4721 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9989ac8b8d3e31a33a33c40f54b836cbeb5ce1c4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 8 16:16:17 2010 +0000

    SCardGetStatusChange(): fix 4 compilation warnings
    
    winscard_clnt.c: In function ‚ÄòSCardGetStatusChange‚Äô:
    winscard_clnt.c:1864: warning: comparison between signed and unsigned
    winscard_clnt.c:1875: warning: comparison between signed and unsigned
    winscard_clnt.c:1911: warning: comparison between signed and unsigned
    winscard_clnt.c:2189: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4720 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c7cd36bd165f386755aa71af9e6c28fc93f3bf45
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 8 16:10:23 2010 +0000

    Make SCardReconnect(), SCardStatus() and SCardTransmit() block instead
    of returning SCARD_E_SHARING_VIOLATION immediately. These functions will
    then behave like on Windows.
    
    This can happen if these functions are called when the reader is locked
    by a PCSC transaction (SCardBeginTransaction/SCardEndTransaction).
    
    You can define the environment variable PCSCLITE_NO_BLOCKING to use the
    old behavior.
    
    Thanks to Jean-Luc Giraud for the patch.
    http://archives.neohapsis.com/archives/dev/muscle/2010-q1/0041.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4719 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 37 +++++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)

commit 06cba45990855461aebc28df045c2fa93e0258e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 8 15:56:09 2010 +0000

    add a command parameter to SHMMessageReceive() to be able log the
    ongoing command in case of problem
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4718 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 38 +++++++++++++++++++-------------------
 src/winscard_msg.c  |  6 +++---
 src/winscard_msg.h  |  4 ++--
 src/winscard_svc.c  |  8 ++++----
 4 files changed, 28 insertions(+), 28 deletions(-)

commit 6d919548ded0ebaaccd9936207577bdb3f9fbc77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 5 20:21:09 2010 +0000

    Check the return value of SCardConnect() on a reader already used in
    SCARD_SHARE_EXCLUSIVE mode
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4717 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardExclusiveBehaviour.py | 94 +++++++++++++++++++++++++++++++++
 1 file changed, 94 insertions(+)

commit b8997b0b4e8bff25820b99212c63ad6c7e7f648d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 5 15:09:14 2010 +0000

    fix a bug introduced by the previous revision
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4716 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3517c3a5e3b6ef240525b0c0f6727161828954ae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 5 15:00:37 2010 +0000

    SCardGetAttrib(): check for buffer overflow with
    SCARD_ATTR_DEVICE_FRIENDLY_NAME
    
    Thanks to Jean-Luc Giraud for complete SCARD_ATTR_DEVICE_FRIENDLY_NAME
    patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4715 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)

commit f51ba8623dbd809cf64144126267e9eca95aa4a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 4 20:30:04 2010 +0000

    add a copyright for Martin Paljak
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4710 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 ++
 src/winscard_clnt.c    | 2 ++
 2 files changed, 4 insertions(+)

commit d8e7fb68b79e73f671925f84a6537b6868256dfa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 3 10:29:32 2010 +0000

    Use the standard --sysconfdir=DIR ($prefix/etc by default) instead of
    --enable-confdir=DIR for defining the directory containing reader.conf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4708 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in   | 13 +------------
 src/pcscd.h.in |  2 +-
 2 files changed, 2 insertions(+), 13 deletions(-)

commit 04eafc8e4f6d5f6948d3aaac5d35baa6202e065c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 3 09:58:48 2010 +0000

    sysconfdir_exp is a configuration directory not configuration file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4707 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e777ae1d9164c5572b9f53e6ae70b8e7fbb5a968
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 14:53:12 2010 +0000

    SCardStatus(): returns SCARD_E_SHARING_VIOLATION if the reader is
    already used
    More conform to Windows
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4705 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit ff503ed867b04ed007350f50829e7bec909e2c42
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 14:41:58 2010 +0000

    allow to use any reader and not just the first one
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4704 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBlockingBehaviourTest.py | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit 6b5cb7902e1410a61f447da222d42fd5f7b075da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 10:34:18 2010 +0000

    test SCARD_ATTR_DEVICE_FRIENDLY_NAME
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4703 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)

commit ff8d206abee367a8904c30d47c2f933c286bd7ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 10:33:58 2010 +0000

    SCardGetAttrib(): add support of SCARD_ATTR_DEVICE_FRIENDLY_NAME as it
    is better implemented in pcscd (it knows the friendly name)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4702 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit c7aa1ee6bb9b7915d1e9dea606ca7775d9d2329d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 10:17:20 2010 +0000

    SCardEstablishContext(): set PCSCLITE_PCSCD_ARGS with the argument you
    want to pass to pcscd in autostart
    Only one argument is passed. The space character is not a separator.
    example: export PCSCLITE_PCSCD_ARGS=-dfa
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4701 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 6b2ccd0cb8965741329ece57f018318442d2e180
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 10:02:52 2010 +0000

    pcscd will suicide itself after 60 seconds of inactivity if it is
    started using --auto-exit
    This is the default behavior when pcscd is started by libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4700 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in      |  2 ++
 src/pcscdaemon.c    | 17 ++++++++++++++---
 src/winscard_clnt.c |  2 +-
 src/winscard_svc.c  | 14 ++++++++++++++
 4 files changed, 31 insertions(+), 4 deletions(-)

commit a38c7ad0fb77216c29c1a2d103083da90bb811d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 2 09:35:42 2010 +0000

    do not ignore the SIGALRM signal any more since we need it for the auto
    exit feature
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4699 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 5 -----
 1 file changed, 5 deletions(-)

commit e5cf06df21a64cb71c278d9e8655be28330f71f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 22 13:56:46 2010 +0000

    add $host to the PCSCLITE_FEATURES definition (available with "pcscd -v")
    to display the CPU architecture
    host is something like x86_64-unknown-linux-gnu
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4685 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 510a0546cb6a1bced2c5f1363effe6ea76a31f21
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 22 12:36:14 2010 +0000

    use LT_INIT(disable-static) instead of the deprecated AM_DISABLE_STATIC
    
    Thanks to Roumen Petrov
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4683 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4a81c90697923cb8cfbd6179049f048783e534f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 21 14:40:28 2010 +0000

    do not try to reset the card on exit. We are talking to the reader. A
    card may NOT be present.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4682 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py         | 2 +-
 UnitaryTests/control_get_firmware.py     | 2 +-
 UnitaryTests/control_switch_interface.py | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit a21013ddef7966f2ebbee6583298061dd2334382
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 21 13:54:30 2010 +0000

    Do not completely disable building the static version of the library but
    just disable it by default
    
    Use AM_DISABLE_STATIC in configure.in instead of -shared in Makefile.am
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4681 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 2 ++
 src/Makefile.am | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 3ef6759cbb9b62bb780a67b8e27d5adfd0cf945a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 16 15:07:42 2010 +0000

    Check the behavior of PCSC functions when a PCSC transaction is ongoing
    
    Thanks to Jean-Luc Giraud for the original code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4674 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBlockingBehaviourTest.py | 251 +++++++++++++++++++++++++++++
 1 file changed, 251 insertions(+)

commit 6c9b84d54a23c6d83d8fb4cbdd0e718245d16884
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 16 14:43:30 2010 +0000

    use -shared to only provide a shared library.
    If you need to use the static .a library you just need to remove -shared
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4673 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0d5a260a2e6cd6ae98993ff6db7098bdb98e29d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 15 13:44:07 2010 +0000

    parse error code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4672 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_switch_interface.py | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 828540f674efaaaa867d18f369ccfb4af0a2d717
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 15 12:56:21 2010 +0000

    improve documentation and output
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4671 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_switch_interface.py | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 50765ceff91753c492bc75fdbf11124f004acec5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 15 08:59:42 2010 +0000

    Only call SCardCheckSameProcess() if DO_CHECK_SAME_PROCESS is defined
    (default is not defined).
    
    Some thread libraries (on embedded systems for example) have a different
    pid for each thread of a same process. So the check using getpid() is
    wrong and handles are invalidated when they should not.
    The PC/SC function returned SCARD_E_INVALID_HANDLE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4670 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit ca9a908a375a1dd8ce7335ef31792d2024b2d134
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 15 08:53:25 2010 +0000

    define and use the CHECK_SAME_PROCESS macro instead of calling
    SCardCheckSameProcess() directly
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4669 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 91 +++++++++++++----------------------------------------
 1 file changed, 22 insertions(+), 69 deletions(-)

commit f3a86ef5a73ccc658ead1ea1ee4bbce42080c64e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 14 13:20:43 2010 +0000

    Doxygen: update SCardGetStatusChange() doc. The function returns on any
    events, not just those specified in dwCurrentState
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4668 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 1521341a7318d1f7cbb00256a3073bee07c39972
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 14 08:21:51 2010 +0000

    For embedded/constained systems
    
    - remove as much text messages (logs) as possible to limit the size of
      the binaries (pcscd and libpcsclite)
    
    - use static driver instead of reader polling and dynamic driver loading
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4667 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 2c5f0330541bb87b4b274f78fce405263278645c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 8 15:04:05 2010 +0000

    RFInitializeReader(): do not dynamically load the driver if
    PCSCLITE_STATIC_DRIVER is defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4646 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 7e631ed94ed54b23cdaaeb263445225ba060ac17
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 8 14:59:22 2010 +0000

    better support of PCSCLITE_STATIC_DRIVER.
    
    This is used to statically link the reader driver to pcscd. Since the
    link is static you must define the IFDHandler API version at compilation
    time.  Either define IFDHANDLERv1, IFDHANDLERv2 or IFDHANDLERv3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4645 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 93 +++++++++++++++++++++++++++++++-------------------------
 1 file changed, 51 insertions(+), 42 deletions(-)

commit 7f23eb8d1b245c32606ee6d9d71f5f9642d1cd01
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 8 14:02:50 2010 +0000

    fix a warning when compiling with PCSCLITE_STATIC_DRIVER defined
    
    dyn_unix.c: In function ‚ÄòDYN_CloseLibrary‚Äô:
    dyn_unix.c:47: warning: unused variable ‚Äòret‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4644 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_unix.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2ca068163260d98f2c54e2bab585833a032e483a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 3 13:02:19 2010 +0000

    hotplug_macosx.c: In function ‚ÄòHPDeviceAppeared‚Äô:
    hotplug_macosx.c:70: warning: unused parameter ‚ÄòrefCon‚Äô
    hotplug_macosx.c: In function ‚ÄòHPDeviceDisappeared‚Äô:
    hotplug_macosx.c:85: warning: unused parameter ‚ÄòrefCon‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4635 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 4febb5d0b4f378685ba580f275d8824de1778ffc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 2 17:49:29 2010 +0000

    fix a compilation warning
    simclist.c:1335: warning: unused parameter ‚Äòel‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4634 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9b129afdbd3b8efa1f7de0fd0115c5a4846a0343
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 2 14:32:49 2010 +0000

    pcsc_stringify_error(): spelling error (detected by lintian(1))
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4633 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dbac6aa3a475c2a0abb54b139061fcdab0acd46c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 1 22:01:42 2010 +0000

    add #include <unistd.h> to declare the timeval structure
    
    In file included from ifdwrapper.c:31:
    utils.h:26: warning: ‚Äòstruct timeval‚Äô declared inside parameter list
    utils.h:26: warning: its scope is only this definition or declaration, which is probably not what you want
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4630 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 1 +
 1 file changed, 1 insertion(+)

commit 56e07f8a44e9bc90f7341c12e1839af765d7187f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 1 21:57:26 2010 +0000

    better handling of PCSCLITE_STATIC_DRIVER as can be used on plateforms
    using ¬µClinux (without dynamic loader)
    
    Thanks to Guo Wenxue for a proto-patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4629 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_unix.c   | 11 ++++++++---
 src/ifdwrapper.c |  2 --
 src/pcscdaemon.c |  2 ++
 3 files changed, 10 insertions(+), 5 deletions(-)

commit f96a921a1b74902d855cac810795262b827a5799
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 1 21:41:08 2010 +0000

    ReCheckSerialReaders variable is not used anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4628 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_generic.c | 3 ---
 src/hotplug_linux.c   | 1 -
 src/hotplug_macosx.c  | 2 --
 3 files changed, 6 deletions(-)

commit 91544a66d2b8ffb36454e5b6242c866cec29e7fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 1 21:38:21 2010 +0000

    ReCheckSerialReaders variable from hotplug_* is not used anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4627 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 1 -
 1 file changed, 1 deletion(-)

commit 44cd42c5b74cc7d7932c78f1b7738f1dc1e4854a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 18 10:32:52 2009 +0000

    typo in log message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4621 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 86d430137703570918fe1e177ed008f52b73164e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 15 13:32:26 2009 +0000

    ATRDecodeAtr(): reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4616 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 45 +++++++++++++++++++++++----------------------
 1 file changed, 23 insertions(+), 22 deletions(-)

commit ad1ab9fd9b92299b46a5314cd0972616c6163a79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 15 13:31:09 2009 +0000

    ATRDecodeAtr(): check for TA2 (specific mode) even if TD2 is not present
    "3F 80 10 01" was not parsed correctly for example and T=0 was used
    instead of T=1 (specific mode)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4615 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 62c47447734559a071765d803f82fa375c9370f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 15 09:12:57 2009 +0000

    rename FEATURE_MCT_READERDIRECT in FEATURE_MCT_READER_DIRECT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4613 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 40079d80f2a96c962137a136bf1e2ce414e79ed2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 15 09:07:28 2009 +0000

    rename FEATURE_MCT_READERDIRECT in FEATURE_MCT_READER_DIRECT to be
    conform with ch. 2.3 of PCSC v2 part 10
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4612 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 1c79fa55754d2af328a66e7164aec098f03d499f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 14 13:39:20 2009 +0000

    Unitary Test for fork() detection
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4611 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCard_fork.py | 56 ++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)

commit 9bab0b65a36816dbae571570863246f4c9ba6811
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 14:49:36 2009 +0000

    Doxygen: add missing error codes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4608 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 32 +++++++++++++++++++++++++++-----
 1 file changed, 27 insertions(+), 5 deletions(-)

commit d1c4e5ffd4807347ef76afb6a2084af5c978ea81
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 14:41:33 2009 +0000

    ContextThread(): SCARD_CANCEL return SCARD_E_INVALID_HANDLE instead of
    SCARD_E_INVALID_VALUE if the handle is invalid
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4607 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 19fb07b021663b74ac8a6f85dbface7108ceab46
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:36:32 2009 +0000

    Doxygen: document 2 missing SCARD_F_COMM_ERROR possible return values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4606 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 40c9ff2f12722965620184e98cb04744ad8bb2c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:34:28 2009 +0000

    Doxygen: document 3 missing error codes for SCardConnect()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4605 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit e107be10b7a810446c113feea61e307337aaebfd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:23:52 2009 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4604 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 7986df2913a30d400bb32c3c3a2d4e7dcf9d1eaa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:22:50 2009 +0000

    use sizeof(SCARD_IO_REQUEST) instead of 8 for the .cbPciLength field
    This is the correct value on 64-bit system.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4603 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit d731449583134973b7f949c65eeb7daf1ffecb54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:13:25 2009 +0000

    g_rgSCard*Pci are not used on the server side
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4602 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 7 -------
 src/winscard.c   | 4 ----
 2 files changed, 11 deletions(-)

commit a1b493ea99107bc6239aee933271ad3c9f229e00
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:10:37 2009 +0000

    SIGHUP signal has already been set to SIG_IGN. No need to quit on
    SIGHUP.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4601 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 -
 1 file changed, 1 deletion(-)

commit 607e50c2e13d6f70f24bfde514d41c09b02b588e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:08:18 2009 +0000

    revert revision 4599 and remove the second call to signal() instead of
    the first one. We need to clean-up as soon as we created the files.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4600 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)

commit 7161ef2cb9dd5f423e3c28100e8e5d4e1e651fb6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 11 13:02:54 2009 +0000

    remove duplicate calls to signal()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4599 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 8 --------
 1 file changed, 8 deletions(-)

commit 76050acde3723459a25a194de64cc066bb69547e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 3 17:40:05 2009 +0000

    Doxygen: SCardConnect() value 0 for dwPreferredProtocols valid only if
    dwShareMode is SCARD_SHARE_DIRECT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4587 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit 2a8bd7a04bedcf99f8d8214b2ecbf8f0ef268c6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 3 09:15:31 2009 +0000

    use the more efficient SCardCheckSameProcess() instead of
    SCardCheckDaemonAvailability() to detect use of the API after a fork()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4585 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 49 ++++++++++++++++++++++++++++++++-----------------
 1 file changed, 32 insertions(+), 17 deletions(-)

commit 9e58bfc2d4cbb7c7bdc5410fedb4c0eb14f2837f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 2 08:04:00 2009 +0000

    Doxygen: SCardEstablishContext()
    Each thread of an application shall use its own SCARDCONTEXT. On
    Windows the same SCARDCONTEXT can be shared by different threads
    of same application.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4583 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 87f64dd767b2277223f79941b317119d16df9468
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 27 14:52:23 2009 +0000

    SCardEstablishContext(): try to start the pcscd daemon if not already
    running
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4580 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 50 +++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 49 insertions(+), 1 deletion(-)

commit fe1f2796e91349ad3a29c0faa6d083b7b52531fb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 27 14:50:49 2009 +0000

    define PCSCD_BINARY
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4579 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 +++
 1 file changed, 3 insertions(+)

commit a348753ff474453c0423cfdcdb67909fd4463f8a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 27 13:25:04 2009 +0000

    improve the checking of an already running pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4577 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

commit ac968650d6a052dd73f6ed3be032b1a6e62d715a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 27 08:52:34 2009 +0000

    Doxygen: For historical reasons the value of SCARD_E_UNSUPPORTED_FEATURE
    is 0x8010001F in pcsc-lite but 0x80100022 in Windows WinSCard
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4576 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit 81b291867f52dbf2ced03dc192884c3a0efe1dc4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 27 08:35:52 2009 +0000

    SCARD_E_UNSUPPORTED_FEATURE is not a PC/SC Lite specific extension, but
    its numerical value is different on Windows
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4575 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 165b18e66389ab30474db9209ea7f2968e27de4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 26 20:06:36 2009 +0000

    remove pcsc-lite specific SCARD_W_INSERTED_CARD code
    
    SCARD_W_INSERTED_CARD value 0x8010006A was also in collision with
    SCARD_W_SECURITY_VIOLATION
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4574 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 -
 src/error.c            | 3 ---
 2 files changed, 4 deletions(-)

commit ef6766086e47827c6a48fe2bf6bb85d5efbd0337
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 26 20:00:52 2009 +0000

    reorder error codes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4573 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 108 +++++++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 66 insertions(+), 42 deletions(-)

commit 8b46bf048e8c01dbf94dcd82f199f6a8746ba5c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 24 17:17:40 2009 +0000

    do not declare the SCardUnload() function removed in revision 4435
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4570 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit ac42a9d56465de763002aaa21bc0382fc8270480
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 24 16:09:17 2009 +0000

    create a SCardInvalidateHandles() function from
    SCardCheckDaemonAvailability() code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4569 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 49 ++++++++++++++++++++++++++-----------------------
 1 file changed, 26 insertions(+), 23 deletions(-)

commit ac096687d98980228060cff568b141f579293dd3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 24 15:09:55 2009 +0000

    SCardCheckDaemonAvailability(): do not delete the context since it is
    already done by SCardCleanContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4568 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 ----------
 1 file changed, 10 deletions(-)

commit 7315879f888539c823e219510a8625c80be5093c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 24 15:08:05 2009 +0000

    SCardCleanContext(): deallocate the context memory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4567 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 77cca9cf944c8fadfb425c33eda522ddb2b518a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 23 12:45:36 2009 +0000

    Doxygen: update SCardControl() list of possible error codes
    partly revert revision 4558
    
    Thanks to Martin Paljak for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2009-q4/0079.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4566 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 23db17b00b9941930e096b4ed216c26ec2218554
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 19 09:07:24 2009 +0000

    use list_delete() instead of list_locate() + list_delete_at()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4562 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  |  5 ++---
 src/readerfactory.c | 16 +++++---------
 src/winscard_clnt.c | 40 ++++++++--------------------------
 src/winscard_svc.c  | 62 +++++++++++++++--------------------------------------
 4 files changed, 33 insertions(+), 90 deletions(-)

commit 60bfde8e489bb7e20c4a1ba85e28e351706f54b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 19 09:05:27 2009 +0000

    add list_delete() "expunge the first found given element from the list"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4561 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 16 ++++++++++++++++
 src/simclist.h | 16 ++++++++++++++++
 2 files changed, 32 insertions(+)

commit 18c5e8a084a5e20c270ace01ed8d2726cd7239fb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 16:53:44 2009 +0000

    reformat to make pep8(1) happy
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4560 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py                   | 14 +++++-----
 UnitaryTests/SCardBeginTransaction_Disconnect.py   | 31 +++++++++++-----------
 UnitaryTests/SCardCancel.py                        | 22 +++++++--------
 UnitaryTests/SCardConnect_DIRECT.py                | 24 ++++++++---------
 .../SCardGetStatusChange/SCardGetStatusChange.py   |  7 +++--
 .../SCardGetStatusChange_PnP.py                    | 13 +++++----
 UnitaryTests/SCardReconnect.py                     | 24 ++++++++---------
 UnitaryTests/control_get_firmware.py               |  6 ++---
 UnitaryTests/control_switch_interface.py           |  6 +++--
 9 files changed, 73 insertions(+), 74 deletions(-)

commit d856f25fc8afec2fe2a7dd3587d07ced4db1306a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 16:38:02 2009 +0000

    Doxygen improvement
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4559 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5fd2aecc943e99cc77cb0bc46e479adce4d2d12f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 16:24:43 2009 +0000

    Doxygen: update SCardControl() list of possible error codes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4558 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 752cbd6d5142061573ed173b9594da38bb05af32
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 18 07:25:14 2009 +0000

    add Jean-Luc Giraud in copyright holders because of his patch in
    revision 4553
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4554 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 src/winscard_clnt.c | 2 ++
 src/winscard_svc.c  | 2 ++
 3 files changed, 6 insertions(+)

commit 777f5edbacbe087439c5965e0a3573c9eb47e86d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 17 14:48:46 2009 +0000

    Use lists instead of fixed size arrays to store handles.
    
    It is now possible to have:
    - 200 simultaneous PC/SC clients instead of 16
    - 200 SCardConnect per client instead of 16
    - 200 clients per reader instead of 16
    
    The default value of 200 can be changed by giving an argument to pcscd
    --max-thread
    --max-card-handle-per-thread
    --max-card-handle-per-reader
    
    Thanks to Jean-Luc Giraud for the big patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4553 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am     |   3 +-
 src/pcscd.h.in      |  14 +-
 src/pcscdaemon.c    |  42 ++-
 src/readerfactory.c | 274 +++++++++++++-------
 src/readerfactory.h |   5 +-
 src/winscard_clnt.c | 720 +++++++++++++++++++++++++++++++---------------------
 src/winscard_svc.c  | 459 +++++++++++++++++++++------------
 src/winscard_svc.h  |   3 +-
 8 files changed, 966 insertions(+), 554 deletions(-)

commit e18b1ec38356a20248b40a26bdbb778cb91e953b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 17 10:22:20 2009 +0000

    RFCreateReaderHandle(): add a comment that a 16-bit random is not secure
    enough
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4552 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 +++
 1 file changed, 3 insertions(+)

commit b499c59d8feab9f55c8c6e579874f2ea24fc4af4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 16 15:30:35 2009 +0000

    SCardReconnect() should block instead of returning SCARD_E_SHARING_VIOLATION
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4549 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardReconnect.py | 58 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 58 insertions(+)

commit 2ac4d5f419b325588b03afe52898fee35b99949e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 16 14:49:48 2009 +0000

    typo in text
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4548 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 458e23d33d6fa596d1f749b7a75e6889510082f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 16 09:11:22 2009 +0000

    remove printf() for debug from READ_BODY() macro
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4547 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a756903420220d71c390e343eb6c49aeb9177ef0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 12 14:33:44 2009 +0000

    update copyright dates
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4544 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/BufferOverflow.c | 6 ++++++
 src/PCSC/ifdhandler.h         | 3 +++
 src/PCSC/pcsclite.h.in        | 1 +
 src/PCSC/reader.h.in          | 2 +-
 src/PCSC/winscard.h           | 1 +
 src/PCSC/wintypes.h           | 2 ++
 src/atrhandler.c              | 3 ++-
 src/atrhandler.h              | 4 +++-
 src/configfile.h              | 4 +++-
 src/configfile.l              | 4 +++-
 src/debug.c                   | 2 +-
 src/debug.h                   | 2 +-
 src/debuglog.c                | 2 +-
 src/dyn_generic.h             | 2 ++
 src/dyn_hpux.c                | 2 +-
 src/dyn_unix.c                | 4 ++--
 src/error.c                   | 2 +-
 src/eventhandler.c            | 4 ++--
 src/eventhandler.h            | 4 ++--
 src/hotplug.h                 | 2 ++
 src/hotplug_libhal.c          | 2 +-
 src/hotplug_libusb.c          | 3 +++
 src/hotplug_linux.c           | 1 +
 src/ifdwrapper.c              | 2 ++
 src/ifdwrapper.h              | 1 +
 src/lassert.h                 | 7 +++++++
 src/misc.h                    | 2 +-
 src/parser.h                  | 1 +
 src/pcsc-wirecheck-gen.c      | 7 +++++++
 src/pcscd.h.in                | 2 +-
 src/pcscdaemon.c              | 2 +-
 src/powermgt_generic.c        | 4 ++++
 src/readerfactory.c           | 2 ++
 src/readerfactory.h           | 2 +-
 src/strlcpycat.h              | 2 +-
 src/sys_generic.h             | 2 ++
 src/sys_unix.c                | 2 ++
 src/thread_generic.h          | 2 ++
 src/thread_unix.c             | 3 ++-
 src/tokenparser.l             | 1 +
 src/utils.c                   | 2 +-
 src/utils.h                   | 2 +-
 src/utils/formaticc.c         | 1 +
 src/utils/installifd.c        | 1 +
 src/winscard.c                | 1 +
 src/winscard_clnt.c           | 2 ++
 src/winscard_msg.c            | 2 ++
 src/winscard_msg.h            | 2 ++
 src/winscard_msg_srv.c        | 2 ++
 src/winscard_svc.c            | 2 ++
 src/winscard_svc.h            | 3 +++
 51 files changed, 101 insertions(+), 25 deletions(-)

commit b44869a42631b2f628365ec049e6394702306665
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 7 21:30:26 2009 +0000

    remove ducplicate READ_BODY() and WRITE_BODY() macros
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4540 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 8 --------
 1 file changed, 8 deletions(-)

commit cce85cfddb4b4c08ea5f2f36ad921fc94f2101bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 14:07:08 2009 +0000

    remove useless PCHANNEL_MAP type definition
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4538 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 63a5e21bb2b7f0b1c1239e43bcea0d0f9118a54b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 13:56:14 2009 +0000

    remove extra spaces at end of line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4537 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 556c3bafc342af29b61e32c4725697e1c24a232c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 13:51:29 2009 +0000

    reindent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4536 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit a0528fad6b88d4d0d55f8adceda7178d3f140dab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 13:50:56 2009 +0000

    reindent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4535 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a36af4b6302e4e30b89b0649c0d44b2c0e87f54f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 13:49:22 2009 +0000

    reindent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4534 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

commit 4df2cb87107e750ea2888da368a324b638c91057
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 10:46:35 2009 +0000

    RFAddReader(): make comment more clear for TAG_IFD_SLOT_THREAD_SAFE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4533 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8fb6aa9e32dc408df2e4c7e47613a3d361fe5b59
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 6 10:44:08 2009 +0000

    RFAddReader(): make comment more clear for TAG_IFD_THREAD_SAFE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4532 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cbdcd6af0d5d44d4c6316710fa4b53349c945c2a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 5 08:04:23 2009 +0000

    use PF_* instead of AF_* for socket(2) argument
    
    Thanks to S√©bastien Lorquet for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2009-q4/0039.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4531 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c     | 2 +-
 src/winscard_msg_srv.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit c335b16430a08c35de3e5e5da9d6b8ede70f1191
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 5 07:54:12 2009 +0000

    Revert change in revision 4395. Solaris does not have (Posix) AF_LOCAL
    
    Thanks to Douglas E. Engert for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2009-q4/0038.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4530 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c     | 4 ++--
 src/winscard_msg_srv.c | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 112c9ebc0c8adc8dbb5f7494423db5ff5e061056
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 3 08:59:45 2009 +0000

    remove useless pointer types
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4529 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 41fd5fe6e6df772a050a4395bcf9307be67df102
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 2 12:52:20 2009 +0000

    SCardConnect(), SCardDisconnect() & SCardReleaseContext(): correctly
    handle error cases profiling
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4528 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 78a258dfa10f240416722ac41396dd966565bd10
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 28 16:44:28 2009 +0000

    remove the type PCSCLITE_MUTEX_T and use an explicit pointer type
    (PCSCLITE_MUTEX *) instead
    
    This should avoid bugs like the one corrected in revision 4525
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4527 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h  |  2 +-
 src/thread_generic.h | 11 +++++------
 src/thread_unix.c    | 10 +++++-----
 src/winscard_clnt.c  |  2 +-
 4 files changed, 12 insertions(+), 13 deletions(-)

commit 2d26ff6e8a1be613a1d70013fa6957e24a573db6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 28 15:00:45 2009 +0000

    correctly use the lock API for ClientsWaitingForEvent_lock
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4525 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit d98ac295ebc716b39bf1e14b4b47f1dfec6fcdc9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 28 14:39:12 2009 +0000

    call exit() in SVCServiceRunLoop() instead of RFCleanupReaders() and
    remove the RFCleanupReaders() parameter
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4524 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c    | 3 ++-
 src/readerfactory.c | 6 +-----
 src/readerfactory.h | 2 +-
 3 files changed, 4 insertions(+), 7 deletions(-)

commit 76467d88d15e3d6f56368df695e36d27516638d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 28 14:35:42 2009 +0000

    use return() instead of exit() if DYN_GetAddress() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4523 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 21 ++++++++++++---------
 1 file changed, 12 insertions(+), 9 deletions(-)

commit d1bd6119574db50991166429dbb697567a56ab28
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 28 14:06:44 2009 +0000

    explicitly use (void)fct() to ignore the returned value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4522 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit 45556f50a7793ef641e8b9959a6dd45a6c056b12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 15:09:23 2009 +0000

    EHStatusHandlerThread(): call EHSignalEventToClients() _after_ logging
    "Card inserted into ..."
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4520 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0396218b8ca7c000f8f1af15c687285e11653c73
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 15:06:58 2009 +0000

    ContextThread(): add the client ID to the command log message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4519 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 66f53442eba0ec5c188f473d1d263f63430a8410
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 15:05:48 2009 +0000

    SCardGetStatusChange(): use SCARD_*_CONTEXT constants instead of
    numerical values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4518 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 1a713d340efcd75176a4a5b658c8b1e4ca97a4c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 15:04:43 2009 +0000

    move SCARD_*_CONTEXT from winscard.c to eventhandler.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4517 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.h | 7 +++++++
 src/winscard.c     | 7 -------
 2 files changed, 7 insertions(+), 7 deletions(-)

commit d308022ba546dcc55ff2c74d36f13d61808b6db7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 14:08:13 2009 +0000

    remove useless SCARD_NO_LOCK define
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4516 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 --
 1 file changed, 2 deletions(-)

commit 3a3f3ac349f759c3a161695ffee0de36cb65e9dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 13:40:15 2009 +0000

    update comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4515 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b41d83c98c2654571d4fde62e765daf3f8e31855
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 08:41:03 2009 +0000

    SHMMessageReceive() now returns -2 in case of timeout and -1 in case of
    other error
    
    This is used to correctly handle timeouts in SCardGetStatusChange()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4514 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 52 +++++++++++++++++++++++++++++-----------------------
 src/winscard_msg.c  |  2 +-
 src/winscard_svc.c  | 10 +++++-----
 3 files changed, 35 insertions(+), 29 deletions(-)

commit 85b148898999ad8bf809d1dcad670f858aea1982
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 08:28:14 2009 +0000

    ContextThread(): when a client dies call
    EHTryToUnregisterClientForEvent() to unregister it if needed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4513 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 1 +
 1 file changed, 1 insertion(+)

commit fd927caa2f75b7da02bb462e8fd4773022b20b0d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 27 08:27:00 2009 +0000

    add EHTryToUnregisterClientForEvent()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4512 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 22 ++++++++++++++++++----
 src/eventhandler.h |  1 +
 2 files changed, 19 insertions(+), 4 deletions(-)

commit e90ca5b580fb1f42699cb63549e9f320e4f44385
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 18 09:44:49 2009 +0000

    SHMMessageSend(): document the use of MSG_NOSIGNAL to ignore SIGPIPE
    signal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4497 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit dd0d3f4ac0ed892768609ee4f39f730e9cdbe563
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 07:33:33 2009 +0000

    do not use PCSC_CLIENT_SRC variable anymore since SCF support has been
    removed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4491 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 0e10837564701ec3651ea8959f068071f91ed960
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 07:31:47 2009 +0000

    libpcsclite does not need to have dyn_hpux.c, dyn_macosx.c or
    dyn_unix.c.
    These files define DYN_LoadLibrary/DYN_CloseLibrary/DYN_GetAddress
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4490 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 ---
 1 file changed, 3 deletions(-)

commit af01ac19421a7e539017b552c776667b5c6b5cf4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 07:22:01 2009 +0000

    remove Xcode files. Apple has its own version of pcsc-lite for Mac OS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4489 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/config.h                |  190 -------
 pcsc.pbproj/project.pbxproj | 1221 -------------------------------------------
 2 files changed, 1411 deletions(-)

commit 760135e3045bf98da92f0e4e5ae60f47ec3948a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 07:17:54 2009 +0000

    Doxygen(): better documentation for SCardCheckDaemonAvailability()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4488 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 0d7ba213f600cee04a93137871ed39940b5cb9cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 07:15:32 2009 +0000

    revert changeset 4485. SCardCheckDaemonAvailability() is also used to
    invalidate the PC/SC handles after a fork or a pcscd restart
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4487 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 74 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 74 insertions(+)

commit cb9b6e6a973ff23ee9f6d22b6c86a58cb0608596
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 13 06:47:04 2009 +0000

    remove SCF support (PC/SC over Smart Card Framework).
    I never used this feature and SCF is now dead and replaced by JSR 268
    (javax.smartcardio)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4486 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in       |   18 -
 src/Makefile.am    |    8 +-
 src/winscard_scf.c | 1952 ----------------------------------------------------
 3 files changed, 1 insertion(+), 1977 deletions(-)

commit 5976dbd57c09553d529648f34dbd9b1320c42caa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 14:37:16 2009 +0000

    SCardReleaseContext(), SCardConnect(), SCardReconnect(),
    SCardDisconnect(), SCardBeginTransaction(), SCardEndTransaction(),
    SCardCancelTransaction(), SCardStatus(), SCardGetStatusChange(),
    SCardControl(), SCardGetSetAttrib(), SCardTransmit(),
    SCardListReaders(), SCardFreeMemory()SCardListReaderGroups(),
    SCardIsValidContext(): do not SCardCheckDaemonAvailability() since we
    will try to talk to the server later. Any communication problem will be
    reported by SHMMessageSendWithHeader()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4485 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 74 -----------------------------------------------------
 1 file changed, 74 deletions(-)

commit fc2b1e76b138fb4b645d77435edb3921a1563a72
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 14:29:58 2009 +0000

    SCardDisconnect(): factorize exit code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4484 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit b75b0cf14d479dd3e49e6883cf83afa80b930c0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 14:28:53 2009 +0000

    SCardReconnect(): factorize exit code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4483 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b6aaeb9fb4b8838c44b6f7551811ccba3cbf757f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 14:27:34 2009 +0000

    SCardConnect(): factorize exit code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4482 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 18 ++++++++----------
 1 file changed, 8 insertions(+), 10 deletions(-)

commit e79ffc7277442c6d4a7ef179a1883da0b7514b97
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 14:21:57 2009 +0000

    SCardReleaseContext(): release context even if communication with the
    server fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4481 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 26358c31fab326b291dbe12c104dfa17c840f866
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 14:11:10 2009 +0000

    SHMMessageSend(): use send(..., MSG_NOSIGNAL) instead of write(...) to
    avoid receiving a SIGPIPE signal if pcscd has exited. We just get EPIPE
    as return value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4480 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 91e41b2b3cd39446b8d0adf0341a23aa11aaed70
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 12 13:35:25 2009 +0000

    SCardReconnect(), SCardBeginTransaction(), SCardEndTransaction(),
    SCardCancelTransaction(), SCardControl(), SCardGetSetAttrib()
    and SCardTransmit(): do not "synchronize reader states with daemon"
    since reader availability checks are done on the server side.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4479 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 148 +---------------------------------------------------
 1 file changed, 1 insertion(+), 147 deletions(-)

commit 34d8ab6f1342054aba1d19dd4d384443cac959cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 9 19:22:05 2009 +0000

    Doxygen improvement
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4476 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit f49b2ffe26df92d8fe0ddb45de289d01742992f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 9 13:40:55 2009 +0000

    Doxygen: define an IFDHandler group
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4474 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit d73ba580bf7966e12f7cf279e1abc2050da0b648
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 9 13:35:44 2009 +0000

    Add Doxygen documentation of the IFD Handler API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4473 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 693 +++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 632 insertions(+), 61 deletions(-)

commit aa626d0206a5344e1678f6117f66dd5f59fc77fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 9 12:50:42 2009 +0000

    remove IFD_Handler 1.0 functions prototypes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4472 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 19 -------------------
 1 file changed, 19 deletions(-)

commit 2d14e08d1c103cc0f019eba59f470d7c2b402fa9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 9 08:50:11 2009 +0000

    Doxygen: use @param[in,out] for in and out parameters
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4471 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit e61ab9f0a802a79eb4994503a572991849cded5a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 13:16:38 2009 +0000

    cleanly exits in case of unknown protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4468 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ab0d4b9b5bd3e79c08600deb2687c5d209559d0c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 13:15:23 2009 +0000

    use SCARD_AUTOALLOCATE for SCardListReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4467 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 31 +++++++++----------------------
 1 file changed, 9 insertions(+), 22 deletions(-)

commit 299fd138b0821e5ed6f6b5466f523226c5c83ffc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:46:25 2009 +0000

    remove svn:executable property on source files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4466 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 0
 src/simclist.h | 0
 2 files changed, 0 insertions(+), 0 deletions(-)

commit b96a60ecd7efe2c79f54f13c207201f355b9daf1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:41:36 2009 +0000

    Define SYS_Fork() only if used (if HAVE_DAEMON is not set)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4465 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 2 --
 src/sys_unix.c    | 4 +++-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 43bc00a5fceabd8db56ab2fcf9bf1582a67ec5cf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:38:20 2009 +0000

    Remove useless SYS_GetPageSize(), SYS_MemoryMap(),
    SYS_PublicMemoryMap(), SYS_PublicMemoryUnmap() and SYS_MMapSynchronize()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4464 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h |  10 ------
 src/sys_unix.c    | 104 ------------------------------------------------------
 2 files changed, 114 deletions(-)

commit 17389db7ddcdfa9a656c75be07b37736d9056863
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:36:51 2009 +0000

    Remove useless SYS_ReadFile()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4463 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 2 --
 src/sys_unix.c    | 5 -----
 2 files changed, 7 deletions(-)

commit 8bb2028c01d59c1d86fa88d3b23b40d98c36c3dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:35:34 2009 +0000

    Remove useless SYS_SeekFile()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4462 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 2 --
 src/sys_unix.c    | 7 -------
 2 files changed, 9 deletions(-)

commit 6bad606d0d870ad10d713325a26b7a21729d9b0f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:34:50 2009 +0000

    Remove SYS_ChangePermissions() prototype (the function is NOT defined
    anywhere)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4461 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 2 --
 1 file changed, 2 deletions(-)

commit 41a3785a8912dbc225ff4b40ba0195662759c1a4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:33:52 2009 +0000

    Remove useless SYS_GetUID() & SYS_GetGID()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4460 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h |  4 ----
 src/sys_unix.c    | 10 ----------
 2 files changed, 14 deletions(-)

commit 0d4162270fa4ea9f5de57ac7e62f4edf8af3ac6a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:31:46 2009 +0000

    Remove useless SYS_GetPID()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4459 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h |  2 --
 src/sys_unix.c    | 10 ----------
 2 files changed, 12 deletions(-)

commit 0f86ad30713960d51a275633fdf4fa180db17f35
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:30:56 2009 +0000

    SYS_Initialize() does nothing. Remove it.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4458 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h   |  2 --
 src/sys_unix.c      | 14 --------------
 src/winscard_clnt.c |  5 -----
 3 files changed, 21 deletions(-)

commit 6dc15e1c72ca1dae885157cd5c4ff92bb0cecf05
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:29:02 2009 +0000

    Comment out RFSuspendAllReaders() and RFAwakeAllReaders().
    We do not yet support suspend/resume on Linux
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4457 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit 237916cc0d0c6efc3630ad15da2d408634b61f41
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:21:34 2009 +0000

    remove useless RFListReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4456 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 78 -----------------------------------------------------
 src/readerfactory.h |  1 -
 2 files changed, 79 deletions(-)

commit 2b18f7bc5f850c4800f1fbd35b41d2e74e2377a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:20:05 2009 +0000

    remove useless RFUnblockContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4455 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 10 ----------
 src/readerfactory.h |  1 -
 2 files changed, 11 deletions(-)

commit d1fa0776558f37cf228448967c40f29d1c9319a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:18:00 2009 +0000

    remove useless RFUnblockReader()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4454 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 -----
 src/readerfactory.h | 1 -
 src/winscard.c      | 4 ----
 3 files changed, 10 deletions(-)

commit 4f8c70ef48be20623759563cd2ade4abdb137b18
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:16:30 2009 +0000

    do not use contextBlockStatus tpo block/unblock a context. We now use
    SCardCancel() on the server side to unblock SCardGetStatusChange()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4453 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in      |  3 ---
 src/readerfactory.c |  1 -
 src/winscard_clnt.c | 19 -------------------
 3 files changed, 23 deletions(-)

commit b2ae4be3838e11f329e44712ac5aa5d76b041b9c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 12:09:04 2009 +0000

    The .tex documentation is no more maintained.
    The reference WinSCard API documentation is from Doxygen now.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4452 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am   |    8 +-
 doc/pcsc-lite.bib |   28 -
 doc/pcsc-lite.tex | 1739 -----------------------------------------------------
 3 files changed, 3 insertions(+), 1772 deletions(-)

commit f21fac397411f8632542a8a4e5ac1ff02af5ca13
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 09:19:26 2009 +0000

    add documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4451 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT.py | 3 +++
 1 file changed, 3 insertions(+)

commit d7c347225e0060ebed329c2e450cc1372bd034b9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 08:26:29 2009 +0000

    IFDControl(): return SCARD_E_INSUFFICIENT_BUFFER if the driver returns
    IFD_ERROR_INSUFFICIENT_BUFFER
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4447 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 3 +++
 1 file changed, 3 insertions(+)

commit a6c7e55050865549789ba352c13935c19a06235a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 08:05:51 2009 +0000

    SCardGetAttrib(): return SCARD_E_INSUFFICIENT_BUFFER if the driver
    returns IFD_ERROR_INSUFFICIENT_BUFFER
    
    Thanks to Emmanuel Deloget for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2009-q4/0003.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4445 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 23 ++++++++++++++++-------
 1 file changed, 16 insertions(+), 7 deletions(-)

commit 8bb87168d82918812dd89f01344f37200bd9ad47
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 08:03:47 2009 +0000

    add IFD_ERROR_INSUFFICIENT_BUFFER
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4444 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 1 +
 1 file changed, 1 insertion(+)

commit 37bccc631a08898703aeea87740938bef8e243cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 07:53:27 2009 +0000

    SCardReconnect(): log the selected protocol (as done in SCardConnect())
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4443 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit a737f230a87e00ddd66338b41fe1919f741dc08a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 8 07:37:21 2009 +0000

    SCardReconnect(): return SCARD_E_SHARING_VIOLATION instead of blocking
    if the reader cannot be shared.
    
    This change was made in revision 2475 but I don't remember why.
    
    Thanks to Paul Klissner for the bug report
    http://archives.neohapsis.com/archives/dev/muscle/2009-q3/0106.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4442 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 47 ++++++++++++++++++++++-------------------------
 1 file changed, 22 insertions(+), 25 deletions(-)

commit d7f896e916438eeddd066374117e4cb3ab9f2467
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 11:58:34 2009 +0000

    remove typedefs and explicitly use struct for structures
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4438 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 20 ++++++++++----------
 src/winscard_msg.h  | 15 ---------------
 2 files changed, 10 insertions(+), 25 deletions(-)

commit c516140a1aa989981ae254a9c57fd9eb9621545f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:40:31 2009 +0000

    update to the new client/server ABI
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4437 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-wirecheck-gen.c | 33 +++++----------------------------
 1 file changed, 5 insertions(+), 28 deletions(-)

commit f6b291cf16729a60bfc245c3e8343f95025d83cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:40:08 2009 +0000

    remove now useless StatSynchronize() and StatSynchronizeContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4436 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 114 ------------------------------------------------------------
 src/utils.h |   3 --
 2 files changed, 117 deletions(-)

commit b7495cf0297a63aa8833f9917c741e8e57269c1b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:39:29 2009 +0000

    remove now useless SCardUnload()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4435 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 38 --------------------------------------
 1 file changed, 38 deletions(-)

commit 5db6b23eea11d455cae0f3be06b2080c4184f4ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:37:51 2009 +0000

    redesign the client/server communication:
    - no more shared memory used (allow pcscd and libpcsclite1.so to be on
      different computer and talk over a network)
    - no more difference between short and extended APDU
    - no more use of a /var/run/pcscd/pcscd.events/ directory. events are
      sent through the socket
    - simpler command format between client and server
    
    The side effect is that you are not able to mix an old pcscd with a new
    libpcsclite1.so or the reverse. SCardEstablishContext() will fail unless
    you update both sides of the communication.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4434 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c     |  80 ++--
 src/pcscd.h.in         |  17 +-
 src/pcscdaemon.c       |  42 +--
 src/readerfactory.c    |   2 +-
 src/winscard.c         |   9 +-
 src/winscard_clnt.c    | 973 ++++++++++++++++++++++---------------------------
 src/winscard_msg.c     | 124 +++----
 src/winscard_msg.h     | 110 ++----
 src/winscard_msg_srv.c | 113 +-----
 src/winscard_svc.c     | 915 ++++++++++++++++++++++------------------------
 10 files changed, 985 insertions(+), 1400 deletions(-)

commit 53521818253fbf4a94a549a075e45df164330aeb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:13:14 2009 +0000

    reformat comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4433 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

commit dc411a29089a49e8bd71161d12f3225b8188e95a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:08:59 2009 +0000

    add MSGSignalClient()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4432 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 21 +++++++++++++++++++++
 src/winscard_svc.h |  1 +
 2 files changed, 22 insertions(+)

commit b5c82c2b32c64291218369fd6f99fde4a4f9acd0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:08:30 2009 +0000

    add struct wait_reader_state_change
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4431 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 9 +++++++++
 1 file changed, 9 insertions(+)

commit bca1c2ef08bdc81fea0871392937079a7da92539
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 09:08:04 2009 +0000

    add PCSCLITE_WRITE_TIMEOUT and PCSCLITE_READ_TIMEOUT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4430 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 2 ++
 1 file changed, 2 insertions(+)

commit 1653a971ba4fc536a6996166bfcaf9906e791b6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 08:52:17 2009 +0000

    reformat comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4429 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 101 ++++++++++++++++-------------------------------------
 1 file changed, 31 insertions(+), 70 deletions(-)

commit 6b53272734c244212a29948a00eeee412110cc41
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 08:39:10 2009 +0000

    add EHRegisterClientForEvent(), EHUnregisterClientForEvent() and
    EHSignalEventToClients()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4428 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 61 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/eventhandler.h |  3 +++
 2 files changed, 64 insertions(+)

commit b59b11b038b4c09424719369c8c7dc5d8cacbe33
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 08:31:33 2009 +0000

    add simclist.{c,h} to pcscd dependencies
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4427 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 51e048301fb601e7d285d1d3a90db597ad2debce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 6 08:29:51 2009 +0000

    Library to manage lists
    Fetched from http://mij.oltrelinux.com/devel/simclist/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4426 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/simclist.c | 1407 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/simclist.h |  954 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 2361 insertions(+)

commit cf8160ab3d8641b1f224acc4c6b3315fd8b6e7c2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 5 12:07:30 2009 +0000

    display return values even if no error returned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4425 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 8b5d053cd6a66afc2e3aa768278b1d9ec6303ff5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 3 08:43:10 2009 +0000

    Doxygen document SCardConnect() difference with Windows for
    SCARD_SHARE_DIRECT
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4419 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 12a81dde82a107f5978bb6478ff720ccbf2e433a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 2 13:58:50 2009 +0000

    add Doxygen section: Known differences with Microsoft Windows WinSCard
    implementation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4418 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)

commit 79e2c8bd43b43fbab552468a7b5a7033318b1c98
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:31:54 2009 +0000

    main(): check RFAllocateReaderSpace() returned value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4408 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 1a15b4b812f9e6864e8eea9c664bb4f96b1ea898
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:29:04 2009 +0000

    SCardGetStatusChange(): Calling with cReaders == 0 will now just return
    SCARD_S_SUCCESS
    
    Use the special reader name "\\?PnP?\Notification" to wait for a reader
    event notification
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4407 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 52 +++-------------------------------------------------
 1 file changed, 3 insertions(+), 49 deletions(-)

commit ab3f4442f8594990447ee65f7323f806b10f490e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:23:07 2009 +0000

    remove comment about PCSCLITE_MAX_READERS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4406 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 4 ----
 1 file changed, 4 deletions(-)

commit 103be62a0d797f5da4f5416ddae76f3448dc0c0c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:21:48 2009 +0000

    remove useless PCSCLITE_MAX_THREADS definition
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4405 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 -
 1 file changed, 1 deletion(-)

commit d547be85cf12271d99157314e735f872f1d53d02
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:21:08 2009 +0000

    remove useless PCSCLITE_TRANSACTION_TIMEOUT definition
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4404 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 -
 1 file changed, 1 deletion(-)

commit a5b96b29de2b02f1f1edb8edab9c2925ddadc796
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:17:40 2009 +0000

    move time_sub() in utils.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4403 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c         | 18 ++++++++++++++++++
 src/utils.h         |  2 ++
 src/winscard.c      | 15 ---------------
 src/winscard_clnt.c | 15 ---------------
 4 files changed, 20 insertions(+), 30 deletions(-)

commit 4bf2bc71af2eab6fedab694c55133132330af89d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 29 13:11:12 2009 +0000

    remove useless key[PCSCLITE_MSG_KEY_LEN] field
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4402 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-wirecheck-gen.c | 2 --
 src/pcscd.h.in           | 1 -
 src/winscard_msg.c       | 1 -
 src/winscard_msg.h       | 1 -
 4 files changed, 5 deletions(-)

commit a655220db9f74557bec25f19f7f52dc4dfbab176
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 28 12:09:02 2009 +0000

    SCardTransmit(): do not limit the minimum size of an APDU to 4 bytes.
    non ISO 7816-4 compliant cards (like Mifare DESFIRE) may use shorter commands
    
    Thanks to Bj√∂rn Kupfer for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4400 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ------
 1 file changed, 6 deletions(-)

commit 25f74566ba2d9c267a733d253a7a565f573a90fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 28 12:05:05 2009 +0000

    SCardTransmit(): call IFDControl_v2 instead of IFDTransmit only if
    dwProtocol == SCARD_PROTOCOL_RAW _and_ ifdhandler is v2.0
    
    Thanks to Bj√∂rn Kupfer for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4399 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b8c1bef680511996692d8dd9c2625017607bbb92
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 23 12:14:44 2009 +0000

    use the POSIX name AF_LOCAL instead of AF_UNIX
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4395 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c     | 4 ++--
 src/winscard_msg_srv.c | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 55add088bfe995ca7cdc2d4c281b3a8df440869d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 21 13:50:33 2009 +0000

    remove unsuned #define PCSCLITE_RW_ATTEMPTS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4388 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 -
 1 file changed, 1 deletion(-)

commit 4f00a5c73ad20d25fc7153ba0efb184ed4b9a9f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 17 09:46:35 2009 +0000

    typo in Doxygen comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4387 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9ea2420edce3ac6f0b8fefa40a9b4e93f506cc64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 15 20:23:24 2009 +0000

    SCardReleaseContext(), SCardControl(), SCardTransmit() and
    SCardListReaders(): add a call to PROFILE_END() before exiting with
    SCARD_E_INVALID_HANDLE error code to have a better profiling output
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4386 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit c9c963695231896a15fc93000ab065747ac52d6a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 15 20:20:40 2009 +0000

    SCardEstablishContext()/SCardReleaseContext(): log context value in
    hexadecimal instead of decimal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4385 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9b3565b47580dd8e1b5de2c792f4eb25902d8458
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 15 14:11:12 2009 +0000

    rename argument blockAmount in timeOut to better reflect its function
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4384 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 5d6e0136c8fc7bbae33c77f43b741a6fb63e1b0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 8 20:16:10 2009 +0000

    update sruct PIN_PROPERTIES_STRUCTURE to be conform with Revision
    2.02.06, April 2009 of PCSCv2 part 10
    
    Fields wLcdMaxCharacters and wLcdMaxLines have been removed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4378 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 2 --
 1 file changed, 2 deletions(-)

commit fdbd931be6c3b4b9497f49f16b7fc39b7921ef9c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 1 09:25:33 2009 +0000

    signal_reload(): reenable the signal handler. This is needed on Solaris
    and HPUX.
    
    Thanks to Douglas E. Engert for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2009-q3/0061.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4375 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 ++
 1 file changed, 2 insertions(+)

commit d289f88b6c022ed3e1f6482e37ab568394bbcd34
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 31 07:23:15 2009 +0000

    typo in comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4374 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 2 +-
 src/winscard.c   | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 624fb8ad1d5637d3b37c9968c0f43d69edb8a791
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 28 07:52:55 2009 +0000

    move definition of usbNotifierMutex in the underlying layers where it is
    used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4371 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 4 +++-
 src/hotplug_libusb.c | 3 ++-
 src/hotplug_linux.c  | 3 ++-
 src/pcscdaemon.c     | 7 -------
 4 files changed, 7 insertions(+), 10 deletions(-)

commit 73504987bbba4348d4444556023cf81da4f98b76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 27 13:18:31 2009 +0000

    IFDControl(): return SCARD_E_UNSUPPORTED_FEATURE if the driver returned
    IFD_ERROR_NOT_SUPPORTED or IFD_NOT_SUPPORTED
    
    This is used to separate an unsupported value of ControlCode from a
    general error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4367 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 3 +++
 1 file changed, 3 insertions(+)

commit 9841cedbc4ed46ba971023a568ce10248e528524
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 31 09:33:53 2009 +0000

    switch interface on the GemProx DU
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4359 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_switch_interface.py | 48 ++++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit 351b3516003d0fdf52574d1884158afdba734d35
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 31 09:01:43 2009 +0000

    get firmware version of Gemalto readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4357 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/control_get_firmware.py | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

commit 22cf1808da972c7c70ab36a7f0ee8b3050fab302
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 30 12:52:01 2009 +0000

    remove extra spaces at end of line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4354 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit f9d11d4f1983fb7070147bc110a10750b1d661a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 30 09:12:59 2009 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4353 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 006ea26c385e5242edbe5e7762213e1280485aa1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 30 08:29:45 2009 +0000

    remove extra spaces
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4352 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f600b3d2ff2ed70caac6555157d35ed37305f6cd (tag: 1.5.5)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 28 21:44:42 2009 +0000

    release 1.5.5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4349 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 14 ++++++++++++++
 configure.in |  2 +-
 2 files changed, 15 insertions(+), 1 deletion(-)

commit 0879bb407694bf1fffffaf7e1ecd2d0d7d25a467
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 28 10:54:50 2009 +0000

    remove empty last list
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4344 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit a31c396538df8be20a89313e9a7741602584d197
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 21 14:26:19 2009 +0000

    MSGFunctionDemarshall(): correctly check for buffer overflow in case of
    SCardControl()
    
    Bug introduced in revision 4208 included in pcsc-lite 1.5.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4334 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0d268fd5f366d6fd4848bfb8efe3b068c4b62d0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 21 11:36:36 2009 +0000

    SCardConnect(): document SCARD_SHARE_DIRECT access mode
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4333 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 81d4d366bd2f2284f5ca4d9028dd0c22d094df58
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 21 10:21:01 2009 +0000

    SCardConnect() and SCardReconnect(): set pdwActiveProtocol to
    SCARD_PROTOCOL_UNDEFINED if SCARD_SHARE_DIRECT is used (conform to MSDN)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4332 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 53b781a49db594abd552cf9362b13f722f5a3c01
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 21 10:15:22 2009 +0000

    Unitary test for SCardConnect in DIRECT mode
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4331 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardConnect_DIRECT.py | 58 +++++++++++++++++++++++++++++++++++++
 1 file changed, 58 insertions(+)

commit 3dd1c9edfb31120550c28cd4dbd1c6ce1e6f0e42
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 20 12:11:18 2009 +0000

    support SCARD_PROTOCOL_RAW
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4328 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 3 +++
 1 file changed, 3 insertions(+)

commit ecd4c25cb65e7187a05cea45183db20b0a5d8db6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 20 12:08:50 2009 +0000

    use test_rv() to check SCardTransmit() result
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4327 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 92b359c6d2e015ec6488611c70967ddcff3f5c85
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 20 12:04:04 2009 +0000

    SCardTransmit(): if the lower level call fails then return the error
    code instead of always SCARD_E_NOT_TRANSACTED
    
    For example SCARD_E_UNSUPPORTED_FEATURE is returned if
    SCARD_PROTOCOL_RAW is not supported
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4326 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b3d8db46d2fbb9cced69b8ea1d20920bae56390b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 17 14:21:50 2009 +0000

    remove the p in the structure field names pioSendPciProtocol,
    pioSendPciLength, pioRecvPciProtocol and pioRecvPciLength since they are
    not pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4321 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-wirecheck-gen.c |  8 ++++----
 src/winscard_clnt.c      | 32 ++++++++++++++++----------------
 src/winscard_msg.h       | 16 ++++++++--------
 src/winscard_svc.c       | 32 ++++++++++++++++----------------
 4 files changed, 44 insertions(+), 44 deletions(-)

commit cb5a5570748094217b92c9c994892192ab41b3df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 17 14:15:20 2009 +0000

    remove the p in the structure field names pdwActiveProtocol, pdwState,
    pdwProtocol, pdwBytesReturned since they are not pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4320 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-wirecheck-gen.c |  8 ++++----
 src/winscard_clnt.c      | 16 ++++++++--------
 src/winscard_msg.h       | 10 +++++-----
 src/winscard_svc.c       | 22 +++++++++++-----------
 4 files changed, 28 insertions(+), 28 deletions(-)

commit 4dba8b75ffc73b06141412a7e0c7dbaf67b63798
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 17 14:09:51 2009 +0000

    rename structure fields phCard and phContext into hCard and hContext
    since they are not pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4319 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcsc-wirecheck-gen.c |  4 ++--
 src/winscard_clnt.c      | 10 +++++-----
 src/winscard_msg.h       |  4 ++--
 src/winscard_svc.c       | 12 ++++++------
 4 files changed, 15 insertions(+), 15 deletions(-)

commit 026f0c0f592efc9274b02f72dd5dd20bab9ab02e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 16 14:47:03 2009 +0000

    #define SCARD_P_SHUTDOWN
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4316 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d93019b381bb6514c764548c3b917f613c85a5f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 3 13:27:17 2009 +0000

    do not raise an exception if the return code is the expected SCARD_E_CANCELLED
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4299 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 606e80f4dcc187257b7869542bc76e46d52f03ba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 3 13:11:44 2009 +0000

    clean_temp_files(): give some time to clients to remove their event files
    before removing the event directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4298 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit 79bfb3be56468b6ca765260e99b131a1fcde77bf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 3 12:55:47 2009 +0000

    do not try to open a device using the libusb scheme if opening it with
    the libhal scheme returns IFD_NO_SUCH_DEVICE
    
    The device may be composite and the interface found is not CCID (HID for
    example). Just skip this interface and try the next one.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4297 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 +-
 src/readerfactory.c  | 5 ++++-
 2 files changed, 5 insertions(+), 2 deletions(-)

commit 08649bfb2eb64bf134ed538ddfafc0bb6ac473cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 3 12:52:27 2009 +0000

    HPAddDevice(): add the reader interface name if provided by the device
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4296 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 40 ++++++++++++++++++++++++++++++----------
 1 file changed, 30 insertions(+), 10 deletions(-)

commit c344f4505f7f4e65ea5f187e784d37f29f4b5741
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 3 09:55:05 2009 +0000

    LTPBundleFindValueWithKey(): do not log an error if no more values are
    found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4294 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f73cfe754790eb51ca3ce4e701528955304af942
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 3 09:48:20 2009 +0000

    use '\0' instead of 0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4293 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ff5e7b07561341142afa15c74bcefcfc65cfa33
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 1 12:23:22 2009 +0000

    use int instead of DWORD for Length and HistoryLength in _ATR structure
    to gain 12 bytes on _ATR (and 16 bytes on _SMARTCARD_EXTENSION).
    Thanks to pahole(1)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4291 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e81d255ac30a1b7f6fb3ff88a8d7662fc84f33c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 1 12:14:32 2009 +0000

    reorder fields in the _ATR structure of _SMARTCARD_EXTENSION
    Structure is now 8 bytes shorter on 64-bits CPU
    Thanks to pahole(1)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4290 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b60857fb73b0526c232ff5e5409812f3752f4ffa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 1 12:02:54 2009 +0000

    reorder ReaderContext fields to avoid padding holes in the strucutre
    Structure size is now 8 bytes smaller on 64-bits CPU
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4289 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9d1eba000627d861e6145a3dcd4199eb8a128317
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 26 15:18:26 2009 +0000

    test secoder support (using FEATURE_MCT_READERDIRECT)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4283 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/MCT_ReaderDirect.py | 77 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 77 insertions(+)

commit c65f5fe58a9add484f9cd38ccf10397cead18f57 (tag: 1.5.4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 24 06:28:47 2009 +0000

    release 1.5.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4272 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 18 ++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 19 insertions(+), 1 deletion(-)

commit f62724f8ec06c22018e9ac997487697256d80365
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 23 08:12:05 2009 +0000

    SCardGetStatusChange(): fix in revision r4269 was not correct.
    
    Thanks (again) to Toon Claes for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4271 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 78b4904d74e6e7accd010432ce9e8249e538d552
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 23 07:58:17 2009 +0000

    SCardGetStatusChange(): add debug to know why the function returns
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4270 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 1344f14b409dfec58e9b225740f9dd4cf7d99478
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 22 09:49:34 2009 +0000

    SCardGetStatusChange(): only check the event counter if current state is
    not SCARD_STATE_EMPTY
    
    Closes [#311772] "SCardGetStatusChange only works the first time after
    starting pcscd"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4269 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit 4f5050ed46ce21aa6f29da4ea1c9e049d6e57ad9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 11 13:55:48 2009 +0000

    add a clean rule
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4252 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/Makefile | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 49c8d2f5d71f002628eb7d3ed0392c4093baad82
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 5 08:41:59 2009 +0000

    give a higher priority to a specific driver over the CCID Class driver
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4249 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h        |  1 +
 src/hotplug_libhal.c | 25 +++++++++++++++++++++++--
 2 files changed, 24 insertions(+), 2 deletions(-)

commit 3284f3a9366fe050e286b86e9f6f9f4d8cac4c93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 5 08:41:19 2009 +0000

    add LTPBundleFindOptionalValueWithKey() to look for an optional key
    No error is logged if the key is not found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4248 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/parser.h      |  3 +++
 src/tokenparser.l | 51 ++++++++++++++++++++++++++++++++++++---------------
 2 files changed, 39 insertions(+), 15 deletions(-)

commit c6e661e166fa93b62bf8b51d79f7ef9f3691970c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 2 13:50:52 2009 +0000

    log APDU and SW (--apdu) even if --debug is not used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 24 +++++++++++++++---------
 1 file changed, 15 insertions(+), 9 deletions(-)

commit bb5d81aaade48fb679a59866596ccc1e19c3e8df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 2 13:34:51 2009 +0000

    HPAddDevice(): use NULL instead of an libhal error field since we do not
    use the error value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4240 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

commit 4172ad316700c66e35159c8068a9846efb76fad3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 2 13:32:53 2009 +0000

    if RFAddReader() fails with the libhal scheme then we try with the
    (old) libusb scheme.
    
    This patch should allow proprietary drivers to work even if pcsc-lite is
    compiled with libhal support.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4239 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 50 ++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 44 insertions(+), 6 deletions(-)

commit aacf208e2b14bc6186b17502455c6278a191e6b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 2 06:35:55 2009 +0000

    WaitForPcscdEvent(): check mkfifo(3) succeeds
    
    Thanks to Steve Grubb for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4238 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 37157d33a02bf3027b99311aaa94f190e655c6c7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 1 09:20:05 2009 +0000

    main(): create the PCSCLITE_EVENTS_DIR directory with the sticky bit so
    only root or the owner of the file can remove it
    
    Thanks to Tomas Mraz for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4237 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit dfe149942cf9339368f6312f5cf8b7f6e6c40e14
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 1 07:42:22 2009 +0000

    StatSynchronizeContext(): do not call mkfifo(3) since the fifo file is
    already created by another thread.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4236 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 4da6cfedd1672de81ec27ab0adee92310f9af259
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 28 13:46:22 2009 +0000

    use a union to avoid "warning: dereferencing pointer 'veStr' does break
    strict-aliasing rules" warnings with gcc 4.4
    
    Thanks to Stanislav Brabec for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4234 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c |  2 +-
 src/winscard_msg.h  | 28 ++++++++++++++++------------
 src/winscard_svc.c  |  2 +-
 3 files changed, 18 insertions(+), 14 deletions(-)

commit 90c5b622a8e85553c981b5c2c0762c075272cff7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 28 13:30:12 2009 +0000

    use a union of fields with different types instead of casts to avoid
    testpcsc.c:313: warning: dereferencing type-punned pointer will break strict-aliasing rules
    testpcsc.c:323: warning: dereferencing type-punned pointer will break strict-aliasing rules
    
    Thanks to Stanislav Brabec for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4233 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)

commit ce3106ba713f151f8779a9a30c7e7e78e274f527
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 28 09:22:58 2009 +0000

    fix musclecard URL
    
    Thanks to Stanislav Brabec for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4232 0ce88b0d-b2fd-0310-8134-9614164e65ea

 NEWS | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8c91dcadab185f683af2455a518e89b86d4d2f30
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 25 08:50:44 2009 +0000

    generate a .bz2 archive only
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4223 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am  | 2 --
 configure.in | 2 +-
 2 files changed, 1 insertion(+), 3 deletions(-)

commit 2a01a425de2c97dfb743574e28054c82b2bf5fa2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 22 11:39:14 2009 +0000

    IFDControl(): use %LX instead of %Lx in a log format
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4222 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8c96689b7b943bda1e96b0c4ec73457a9db19576
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 19 14:43:56 2009 +0000

    main(): force access rights on /var/run/pcscd to be sure it can be used
    by a libpcsclite client without privileges
    
    Thanks to S√©bastien Lorquet for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4213 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 6952fb1e65eaed34a199c1884f572d34b1a6330e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 15 15:53:58 2009 +0000

    port to Mac OS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4211 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/BufferOverflow.c        | 10 +++++++++-
 UnitaryTests/Makefile                | 12 +++++++++---
 UnitaryTests/SCardBeginTransaction.c |  5 +++++
 3 files changed, 23 insertions(+), 4 deletions(-)

commit 1203ef14ec1cac1af081d1accbbc6e9b97c4af25
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 14 13:14:59 2009 +0000

    add Doxygen documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4210 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7651856377efdc3eb7500d6670bbfeb79ac25beb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 14 09:33:26 2009 +0000

    new files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4209 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/BufferOverflow.c        | 40 ++++++++++++++++++++++++++++++++++++
 UnitaryTests/Makefile                |  8 ++++++++
 UnitaryTests/SCardBeginTransaction.c | 32 +++++++++++++++++++++++++++++
 3 files changed, 80 insertions(+)

commit 5174b59dffbd007e5da61d9bea288001b87630b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 14 09:29:39 2009 +0000

    MSGFunctionDemarshall(): detect buffer overflows
    
    Thanks to Sebastian Krahmer for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4208 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 57 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 57 insertions(+)

commit d55aa01fff2b735b7bbc60eb17ca276a047c6555
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 14 09:28:05 2009 +0000

    SCardGetAttrib() & SCardSetAttrib(): debug Doxygen examples
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4207 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 25aaf6c80f490b46a96d630367dda2f20f7e882c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 13 14:04:25 2009 +0000

    main(): wrong mode file comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4206 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b5d2555c63712a398887400e71d6c40becb9f1c2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 12 13:21:56 2009 +0000

    cppcheck: (error) Resource leak: fp
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4201 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 3 +++
 1 file changed, 3 insertions(+)

commit afbeebcbedf7826f8df75e10180274e85b5f5bd3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 12 13:19:59 2009 +0000

    cppcheck: (error) Resource leak: fp
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@4200 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 3 +++
 1 file changed, 3 insertions(+)

commit cb26387cff7a43c7aa520c7899ff871ded9af830
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 8 13:58:00 2009 +0000

    SCardEstablishContext(): Doxygen: each thread of an application shall
    use its own SCARDCONTEXT.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3499 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit e6bea6ca4d8abcd2b00feed6bf2d1162c79b3542 (tag: 1.5.3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 29 12:31:43 2009 +0000

    release 1.5.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3470 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 25 +++++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 26 insertions(+), 1 deletion(-)

commit ca34db4c180bbaebafff6f1bcd94587e55c72a00
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 27 20:14:19 2009 +0000

    A bug has been corrected in revision 3467
    The problem occurs if SCardBeginTransaction() are made without
    corresponding SCardEndTransaction(). OpenSC "pkcs11-tool -I" exhibits
    such a behavior.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3469 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardBeginTransaction_Disconnect.py | 55 ++++++++++++++++++++++++
 1 file changed, 55 insertions(+)

commit d4afe59f040fa17427cfe04857feaa8b277df5c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 27 15:10:48 2009 +0000

    CardDisconnect(): call RFUnlockAllSharing() instead of RFUnlockSharing()
    to release all nested locks. The problem occurs if
    SCardBeginTransaction() are made without corresponding
    SCardEndTransaction(). OpenSC "pkcs11-tool -I" exhibits such a behavior.
    
    Thanks to Marc Rios Valles for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3467 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e64abdafe98302dc9bd4f220fa08633dc785effc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 27 15:07:42 2009 +0000

    add RFUnlockAllSharing()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3466 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 21 +++++++++++++++++++++
 src/readerfactory.h |  1 +
 2 files changed, 22 insertions(+)

commit 065ca3de137866e380cbde046b52adc14e012dad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 27 09:17:08 2009 +0000

    change default log level from PCSC_LOG_INFO to PCSC_LOG_ERROR to limit
    syslog pollution
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3465 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e449fc360870a27432cf220f226bbcd612982443
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 17 07:25:04 2009 +0000

    use SCARD_S_SUCCESS instead of 0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3457 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit bda5260cbb673cd60f00fa0aea1fc62de6cf7b68
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 14:49:02 2009 +0000

    StatSynchronize(): remove event fifo files only if they are 60 seconds old.
    The normal case is for the client to remove its one event file after
    use. The daemon sould only remove files from dead clients.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3450 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 14d6ad5e4c8734d9286142661fd1ea8cd5e0c854
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 14:39:57 2009 +0000

    StatSynchronize(): use S_ISFIFO() macro
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3449 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit df31bc770fe15732826e9de4904f4d5cbe3f5baa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 14:01:08 2009 +0000

    DeprecationWarning: raising a string exception is deprecated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3448 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 26f274870c09bef3f4223c38e0dc1e7814f68207
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 13:56:53 2009 +0000

    add license information
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3447 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py                         | 18 ++++++++++++++++++
 .../SCardGetStatusChange/SCardGetStatusChange.py    | 21 ++++++++++++++++-----
 .../SCardGetStatusChange_PnP.py                     | 21 ++++++++++++++++-----
 3 files changed, 50 insertions(+), 10 deletions(-)

commit 863ad0620f97c6bb44f3a81cdaa8497945f05e4a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 09:24:47 2009 +0000

    WaitForPcscdEvent(): avoid a possible crash due to a race condition
    
    Thanks to Matheus Ribeiro for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3446 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)

commit 23298166925b7e8ab3d3673597bd3355d641c485
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 09:09:12 2009 +0000

    #include "utils.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3445 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 9231181295e5f336fc89d0c4fa5ef089689d904f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 14 09:07:56 2009 +0000

    RFRemoveReader(): call StatSynchronize() after a reader removal to
    signal the event to clients
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3444 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 +++
 1 file changed, 3 insertions(+)

commit c199045d62e2255ec07d49becff4f94d67943676
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 7 18:19:33 2009 +0000

    remove powermgt_macosx.c since it is using APSL version 1.1 instead of
    the BSD-like licence like the other files
    
    Thanks to Stanislav Brabec for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3412 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am        |   1 -
 src/powermgt_generic.c |   4 --
 src/powermgt_macosx.c  | 103 -------------------------------------------------
 3 files changed, 108 deletions(-)

commit 4efa7a0c7ae5b939fb47b5db5ad281cc657a09d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 21 13:47:15 2009 +0000

    add PIN_PROPERTIES_STRUCTURE structure and FEATURE_IFD_PIN_PROPERTIES
    
    Thanks to Martin Paljak for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3355 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 44 ++++++++++++++++++++++++++++++--------------
 1 file changed, 30 insertions(+), 14 deletions(-)

commit f2b279d577b9e747d436f26c416c42e1a3fc71c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 20 08:56:19 2009 +0000

    add URL of the error code reference (MSDN)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3352 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 ++
 1 file changed, 2 insertions(+)

commit 99d0d641d9e3beaa36b261e8c97893ebde493046
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 2 14:56:38 2009 +0000

    remove support of WIN32
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3334 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in |  5 -----
 src/PCSC/wintypes.h    |  6 ------
 src/debug.c            | 15 ---------------
 src/debuglog.c         | 25 -------------------------
 src/thread_generic.h   | 12 ------------
 5 files changed, 63 deletions(-)

commit 2f19f798cd4786faf121765f686055d5d7fda7c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 2 14:28:42 2009 +0000

    add URL of error codes origines (MSDN)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3333 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 ++
 1 file changed, 2 insertions(+)

commit cee5df237fc8835b1dbc0fc866d938fdc64da80e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 1 16:51:20 2009 +0000

    do not use /* inside a comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3332 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0d0eb5da68e27e66a2c117be0fff6d16451dfab6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 1 16:38:07 2009 +0000

    add missing defines according to
    http://msdn.microsoft.com/en-us/library/aa924526.aspx
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3331 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 37 +++++++++++++++++++++++++++++++------
 1 file changed, 31 insertions(+), 6 deletions(-)

commit 069e3a63d67f5982646db66b5afec1d3de1a2a9e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 9 13:57:37 2009 +0000

    Comment revision 3313 patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3314 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit 3bb8f1f261dee00eebded44cdf743159aea47a38
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 9 13:53:52 2009 +0000

    SCardEstablishContextTH(): check we do not reuse an already allocated hContext
    
    Thanks to Daniel Nobs for the bug report and patch
    Closes: [#311455] Error in SCardEstablishContext
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3313 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 06c4cb7709bdd91546ce8ba216c1b12c00ef5406 (tag: 1.5.2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 6 13:21:21 2009 +0000

    release 1.5.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3306 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 16 ++++++++++++++++
 configure.in |  2 +-
 2 files changed, 17 insertions(+), 1 deletion(-)

commit 0660995d402ec77437704a6851adf249e9771aee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 6 08:54:05 2009 +0000

    EHStatusHandlerThread(): call StatSynchronize() before exiting the
    thread. Without this SCardGetStatusChange() may not return.
    
    Thanks to Roberto Rizza for the bug report and patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3305 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 1 +
 1 file changed, 1 insertion(+)

commit 649c5c3c35c41a85c5b2161f78771f0849484a7d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 6 08:46:19 2009 +0000

    use (void)param; for unused function parameters to avoid compiler
    warnings
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3304 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c      |  1 +
 src/pcsc-wirecheck-gen.c  |  3 +++
 src/pcsc-wirecheck-main.c |  3 +++
 src/pcscdaemon.c          |  4 ++++
 src/readerfactory.c       |  1 +
 src/testpcsc.c            |  3 +++
 src/winscard.c            | 14 ++++++++++++++
 src/winscard_clnt.c       |  6 +++++-
 8 files changed, 34 insertions(+), 1 deletion(-)

commit 4a1c00e496fb43f66cf73a50e4efbdce1ea1e8a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 5 14:23:13 2009 +0000

    reformat comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3303 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 220 ++++++++++++----------------------------------------
 1 file changed, 50 insertions(+), 170 deletions(-)

commit 32848408d7b56d6d9d90f92ed57b7f2bdadd025a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 4 13:30:27 2009 +0000

    do not open the reader USB device if no client is using the reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3298 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 4c0a6da2a818803e38ab8b99e43bd900d8c49a9c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 29 16:08:10 2009 +0000

    RFLockSharing() & RFUnlockSharing(): add a mutex to avoid a race
    condition
    
    Closes: [#311377] Race condition in SCardBeginTransaction
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3295 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 29 +++++++++++++++++------------
 1 file changed, 17 insertions(+), 12 deletions(-)

commit 95a9427473f8624d4e7b0aad0b9984060da2d9e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 28 13:34:28 2009 +0000

    log TxBuffer and RxBuffer if the SCardControl() command failed.
    
    Closes: [#311376] PCSC_LOG_VERBOSE via -dd; print details of "Card not
    transacted"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3294 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 25064fddcaaef7ca23e0694697baa5691642a47b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 24 12:46:42 2009 +0000

    StatSynchronizeContext() is used for a specific client. Correct the
    comment.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3291 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 88fcfba19bf513b79b7c0d1b7d0e649ad112c612
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 22 13:54:22 2009 +0000

    mark IFD_GENERATE_HOTPLUG as deprecated.
    HAL now solves the hotplug problem for us.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3290 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 1431a429af1619745eba8f836ae03cab1b13d996
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 20 15:18:44 2009 +0000

    SCardCancel(): use StatSynchronizeContext() to send an event to the
    waiting/blocked thread
    
    Closes: [#311342] SCardCancel does not cancel an outstanding SCardGetStatusChange
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3288 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit ee0fbfcac4660dc99fe6eb75a1bfe37dc8d341f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 20 15:16:55 2009 +0000

    add StatSynchronizeContext() to send an asynchronous event to a specific
    context
    This function can be used from libpcsclite. Using StatSynchronize() does
    not work since the directory pcscd.events/ is not readable by group and
    other for security reasons
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3287 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 39 +++++++++++++++++++++++++++++++++++++++
 src/utils.h |  1 +
 2 files changed, 40 insertions(+)

commit be16c661b7c8ffd917acfadf6040e3a88479e55f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 20 15:14:24 2009 +0000

    WaitForPcscdEvent(): use hContext instead of a random to name the event
    file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3286 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 3374281af86f356a17ed790431b8000f5be2b723
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 20 15:00:21 2009 +0000

    improved version
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3285 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py | 19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)

commit 45326f3d0a6d670948a38c2e1aff2c6e663ed8dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 13 19:25:04 2009 +0000

    SCardCancel sample
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3279 0ce88b0d-b2fd-0310-8134-9614164e65ea

 UnitaryTests/SCardCancel.py | 45 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 45 insertions(+)

commit 0aeaa0dd0ee4be4e0c0900839d6ef01e01a29b83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 13 14:42:17 2009 +0000

    SCardGetStatusChange(): return if the state of the reader changed since the
    previous call.
    
    Thanks to Thomas Harning for the patch
    Closes: [#311341] SCardGetStatusChange does not return CHANGED+EMPTY and
    CHANGED+PRESENT sequence for remove-insert between calls
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3278 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit b5ba49bb99400e40f16ac0030ba9c5c6af8cdae3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 12 08:22:25 2009 +0000

    test SCardGetStatusChange
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3277 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .../SCardGetStatusChange/SCardGetStatusChange.py   | 50 +++++++++++++++
 .../SCardGetStatusChange_PnP.py                    | 75 ++++++++++++++++++++++
 2 files changed, 125 insertions(+)

commit c85a1f06a9584890f3f671573637dc8111facef0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 12 08:22:06 2009 +0000

    directory to store Unitary Tests
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3276 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit f5c947ff3c681b43eae2604284a568bf0a44edca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 9 16:50:53 2009 +0000

    rename variable fd in profile_fd to avoid
    winscard_clnt.c:1717: attention : declaration of ‚Äòfd‚Äô shadows a global declaration
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3274 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 48a6832a717639d2713f85f69d1abb00ef4ec640 (tag: 1.5.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 7 20:28:29 2009 +0000

    release 1.5.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3273 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 9 +++++++++
 configure.in | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

commit 3a667e7b750b71ee45710ec6d4b7b0f12d890654
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 13:58:14 2009 +0000

    use offsetof(transmit_struct_extended, data) instead of sizeof(*treStr) since
    from revision 2146 the data[] array has one element to be compilable by Sun
    Studio 11
    
    The side effect is that extended APDU were corrupted by 4 zero bytes between the two consecutive blocks
    
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3267 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit 2c2dc38ca394747362c0212c41c37206c1571b19
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 10:54:26 2009 +0000

    use snprintf() to avoid a possible buffer overflow
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3266 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7492e5afe8f1d8780e6ebb9dc83ac5ded1aeb5b8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 10:43:28 2009 +0000

    avoid a memory leak in case of DBus error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3265 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 4d6f12ff9b378c7b29bee00b2fcdd24bb478bb9b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 10:35:07 2009 +0000

    script to call splint
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3264 0ce88b0d-b2fd-0310-8134-9614164e65ea

 splint.sh | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 1b70a8d728e699a556048f3f509a1da15ba3eaba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 10:29:15 2009 +0000

    explicitly cast result in void when not used (reported by the splint tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3263 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 46 +++++++++++++++++++++++-----------------------
 1 file changed, 23 insertions(+), 23 deletions(-)

commit b7220a76486eec09b7cc8b261d60af3068d4f44b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 10:19:47 2009 +0000

    free mszReaders before returning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3262 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 779c25dacff45c986f8cfc898744882472f801da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 5 10:14:45 2009 +0000

    do not cast malloc()
    
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3261 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0fba73a7e76fcddd15a578cd920c6646d65b3758
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 15:19:59 2009 +0000

    tag output parameters with /*@out@*/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3260 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h    | 32 ++++++++++++++++++--------------
 src/atrhandler.h       |  2 +-
 src/configfile.h       |  3 ++-
 src/dyn_generic.h      |  2 +-
 src/ifdwrapper.c       | 13 +++++++------
 src/ifdwrapper.h       | 12 +++++++-----
 src/parser.h           |  2 +-
 src/readerfactory.h    |  6 +++---
 src/sys_generic.h      |  4 ++--
 src/winscard_clnt.c    |  9 ++++++---
 src/winscard_msg.h     |  6 +++---
 src/winscard_msg_srv.c |  2 +-
 12 files changed, 52 insertions(+), 41 deletions(-)

commit 9e55a9788cd5e9e2b9683bdf45017066519acb26
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:32:44 2009 +0000

    tag potentially NULL paramater or returned value as /*@null@*/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3259 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h  | 15 ++++++++-------
 src/eventhandler.h   |  3 ++-
 src/hotplug_libhal.c |  3 ++-
 src/sys_unix.c       |  2 +-
 src/thread_generic.h |  7 ++++---
 src/utils.h          |  2 +-
 6 files changed, 18 insertions(+), 14 deletions(-)

commit c31e8b07810a45b4a6b2fee1b4b0159e51fd41e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:08:48 2009 +0000

    declare functions static where possible
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3258 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 27 +++++++++++++--------------
 1 file changed, 13 insertions(+), 14 deletions(-)

commit 8f9c9e6979bb386f6705d52107169808f9a649c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:06:43 2009 +0000

    remove unused SVCClientCleanup() function
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3257 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 11 -----------
 1 file changed, 11 deletions(-)

commit eb150112dfeabe633517dd6add8691fbfb5d0ee4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:04:23 2009 +0000

    mark unused parameter as /*@unused@*/ (reported by splint tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3256 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit fc1e41943467749d4cfd57285d5984df53be63f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:02:29 2009 +0000

    no need to #include <syslog.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3255 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 -
 1 file changed, 1 deletion(-)

commit 94706e7701400e74faef61fd160237e5e8f18f88
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:01:36 2009 +0000

    not need to #include <syslog.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3254 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit 438a4c7e2c7c85c926b0d2fbfde930b921ae0885
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 14:01:10 2009 +0000

    declare functions static where possible
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3253 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c |  4 ++--
 src/testpcsc.c     |  3 +--
 src/winscard_svc.c | 30 ++++++++++++++++--------------
 3 files changed, 19 insertions(+), 18 deletions(-)

commit 01ab5cc55d05a0c23c933b06f0df21306c8bf630
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 13:49:55 2009 +0000

    mark unused parameter as /*@unused@*/ (reported by splint tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3252 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c      |  2 +-
 src/pcsc-wirecheck-gen.c  |  2 +-
 src/pcsc-wirecheck-main.c |  2 +-
 src/readerfactory.c       |  2 +-
 src/testpcsc.c            |  2 +-
 src/utils/formaticc.c     |  2 +-
 src/utils/installifd.c    |  2 +-
 src/winscard.c            | 23 ++++++++++++++---------
 src/winscard_clnt.c       | 10 ++++++----
 9 files changed, 27 insertions(+), 20 deletions(-)

commit 34045795706a1e27bf07aa5bb2d0a5f3ed18acdd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 13:39:29 2009 +0000

    remove blocktime parameter from SHMProcessEventsContext() and SHMProcessEventsServer() since this parameter is not used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3251 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       | 2 +-
 src/winscard_msg.h     | 4 ++--
 src/winscard_msg_srv.c | 5 ++---
 src/winscard_svc.c     | 2 +-
 4 files changed, 6 insertions(+), 7 deletions(-)

commit 5174614affa9d542f7cf8b177859217ab4f2ccf8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 13:32:17 2009 +0000

    correct return types of SHMMessageSend() and SHMMessageReceive() to match declaration in winscard_msg.h (reported by splint tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3250 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7e06774ca520d2f31f633e38effa52a049d32c52
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 13:30:15 2009 +0000

    SHMInitializeCommonSegment(): use correct return type as defined in winscard_msg.h (reported by splint tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3249 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c3b1952f4e53a09caeb516dec53ac60d92c7c296
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 13:28:32 2009 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3248 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 8034b948eaf3c0e9817f98f3e609bdd05a7877e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 13:22:46 2009 +0000

    explicitly cast result in void when not used (reported by the splint tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3247 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l       |   8 +-
 src/debug.c            |   4 +-
 src/dyn_unix.c         |   2 +-
 src/error.c            |  78 +++++++++----------
 src/eventhandler.c     |  30 ++++----
 src/hotplug_libhal.c   |  30 ++++----
 src/ifdwrapper.c       |  66 ++++++++---------
 src/readerfactory.c    |  59 +++++++--------
 src/sys_unix.c         |   2 +-
 src/testpcsc.c         |  18 ++---
 src/thread_unix.c      |   2 +-
 src/tokenparser.l      |  16 ++--
 src/utils.c            |  16 ++--
 src/utils/formaticc.c  |  44 +++++------
 src/utils/installifd.c |   6 +-
 src/winscard.c         |  60 +++++++--------
 src/winscard_clnt.c    | 198 ++++++++++++++++++++++++-------------------------
 src/winscard_msg.c     |  10 +--
 src/winscard_msg_srv.c |   8 +-
 src/winscard_svc.c     |  23 +++---
 20 files changed, 341 insertions(+), 339 deletions(-)

commit b649e4563bd472f5bcf2d86eb104df16d8ed2a37
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 10:49:24 2009 +0000

    CFLAGS is now defined in ~/.bash_profile
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3246 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit d8acf8be752fad13efcce2d89892eb337a72c634
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 2 10:45:11 2009 +0000

    SYS_RandomInt(): replace a cast to (float) by an explicit conversion using +0.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3245 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c2138c7d60b9c322e6f86531d72cffd76f4b4bfc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 19 10:03:06 2008 +0000

    SCardGetAttrib(): avoid a possible memory leak (detected by the cppcheck
    tool)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3244 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 85952db38bec73a06adfdbb48d6803cc072c00b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 18 12:52:18 2008 +0000

    typo in a comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f84304834c1227e47f86b182d400fbf32190e638
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 17 10:16:56 2008 +0000

    add some log to pcsc-wirecheck
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3239 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/lassert.h             | 2 +-
 src/pcsc-wirecheck-gen.c  | 5 +++--
 src/pcsc-wirecheck-main.c | 8 ++++++--
 3 files changed, 10 insertions(+), 5 deletions(-)

commit 84c11a2e037d2e5cb1fe59f00755b15a595f16fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 13 14:28:50 2008 +0000

    update FSF address
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3235 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f4540523a5c267a5be7448fb64e832bc412a5f58
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 18 22:04:46 2008 +0000

    typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3216 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f21891f7f4b72651d863204ecb265d900b3b2141
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 18 20:33:33 2008 +0000

    document libhal scheme
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3212 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

commit ef4c65a963ba5c63bba817ed87efb2fd9ab9b72d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 18 20:32:29 2008 +0000

    document libhal scheme
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3211 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 557573f7ae43ca7e10f640b0b20cdb5364b47bb3 (tag: 1.5.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 18 15:59:23 2008 +0000

    release 1.5.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3209 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 23 +++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 24 insertions(+), 1 deletion(-)

commit 54dd290956468a4da863678688f8799bd87ef151
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 10 12:39:05 2008 +0000

    RFRemoveReader(): symplify a test
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3200 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b33207f3a2855c2ad229d543e3b4b9804fa95973
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 10 09:18:27 2008 +0000

    HPAddHotPluggable(): correctly handle bogus reader with corrupted
    iSerialNumber.
    
    Thanks to Ludovic LANGE for the patch.
    Closes: [#311215] Fix for libusb hotplug garbage when serial number is empty
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3197 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

commit 7cf1f1e50163b19b4db7f34b87e99c3b9eb7140d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 31 15:26:20 2008 +0000

    SCardGetStatusChange(): use |= instead of = to set SCARD_STATE_CHANGED
    bit in case (dwState & SCARD_UNKNOWN)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3190 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eb6afaa1623ef4d77219c7000cc1c726358f7586
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 28 14:29:20 2008 +0000

    add --reparagraph to svn2cl arguments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3184 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9b0cac3c7064c6ba77a3d65e9db33c16551c4c48
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 27 13:34:48 2008 +0000

    move definition of time_sub() before its first use
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3180 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

commit 283f98e7b3b65cbc46953c275f13e8123d6b50e3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 24 07:26:59 2008 +0000

    reformat lock/unlock comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3179 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 99 ++++++++++++++++----------------------------------------
 1 file changed, 28 insertions(+), 71 deletions(-)

commit b47b9086688084a44391b8201d02465d105a7c01
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 23 15:34:16 2008 +0000

    move locking from IFDSetPTS() to 2 levels above in SCardConnect() and
    SCardReconnect(). The  value of rContext->readerState->cardProtocol is
    then checked and modified in an atomic transaction
    
    This avoids to renegociate the protocol and confuse the card if two
    applications perform a SCardConnect() at the same time (after they are
    both blocked by SCardGetStatusChange() and a card is inserted for example)
    
    Error returned by CCID driver is: CCID_Receive Procedure byte conflict
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3178 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 11 ++++-------
 src/winscard.c   | 28 ++++++++++++++++++++++++++++
 2 files changed, 32 insertions(+), 7 deletions(-)

commit 46a82678f0fa04d273b711c2db45048bb58c729b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 16 14:30:33 2008 +0000

    #include "utils.h"
    
    winscard.c:497: attention : implicit declaration of function ‚ÄòStatSynchronize‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3171 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 1 +
 1 file changed, 1 insertion(+)

commit c2db4478af2190a4c294267942cd93406b9fc717
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 10 13:57:40 2008 +0000

    SendHotplugSignal(): wait for 1 second after send the signal to avoid a
    busy loop if the device died by HAL did not noticed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3160 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 1 +
 1 file changed, 1 insertion(+)

commit f1e8e46a52bb84322240732b51772c787cd80270
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 10 13:04:53 2008 +0000

    remove --disable-libhal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3159 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 -
 1 file changed, 1 deletion(-)

commit 6f4980fe39cf6d3a91188cc25efacd02f28d1caa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 10 12:47:59 2008 +0000

    EHStatusHandlerThread(): remove commented and never used code to restart
    a reader after 10 IFDStatusICC() errors
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3158 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 22 ----------------------
 1 file changed, 22 deletions(-)

commit 1b720e6304cfd59c262c2d24be2d61d85148884c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 7 12:28:09 2008 +0000

    call CheckForOpenCT() if RFAddReader() fails.
    
    The first cause of pcsc-lite failure is that OpenCT is installed and
    running and has already claimed the USB device. In that case
    RFAddReader() fails and I get a user support request
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3157 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 3 +++
 src/hotplug_libusb.c | 5 +++++
 2 files changed, 8 insertions(+)

commit 6d3ae7adf31b974d84be9035fa6ac5bfc8e43a5f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 7 12:27:01 2008 +0000

    add CheckForOpenCT()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3156 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 22 ++++++++++++++++++++++
 src/utils.h |  2 ++
 2 files changed, 24 insertions(+)

commit 1b9f2b5ab050f82e6eab026ed573c1add2fb6751
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 24 14:10:39 2008 +0000

    IFDCloseIFD(): give up to 500 ms to the mutex to be free if the lock
    failed. Maybe a polling thread is still using the device on another
    slot.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3146 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit bfbce91886cbcacec45b9fc022ceae055d7a0ea3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 24 12:57:22 2008 +0000

    StatSynchronize(): log and return if opendir() fails
    
    Avoids a crash when started without root privileges
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3145 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 5b9479b7e816492e48b05c791085fecb77190d43
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 21 18:02:44 2008 +0000

    HPAddDevice(): remove a debug printf()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3142 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 1 -
 1 file changed, 1 deletion(-)

commit f80f0fa07fe94af41eb39a16f181509ec1764ebe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 11 12:20:47 2008 +0000

    SCardStatus(): allow NULL for pcchReaderLen and pcbAtrLen
    
    You can then use
      SCardStatus(hCard, pcReaders, &dwReaderLen, NULL, NULL, NULL, NULL)
    to only get the reader name or
      SCardStatus(hCard, NULL, NULL, NULL, NULL, pbAtr, &dwAtrLen)
    to only get the card ATR or even
      SCardStatus(hCard, NULL, NULL, NULL, NULL, NULL, NULL)
    to get nothing except SCARD_S_SUCCESS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3125 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 0db1f8f41ae885510ebe5e6bf2d6d7edf55346b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 11 12:05:47 2008 +0000

    SCardStatus(), SCardGetAttrib(), SCardListReaders(),
    SCardListReaderGroups(): check that the pointer argument used to store
    the allocated memory in case of SCARD_AUTOALLOCATE is not NULL.
    
    return SCARD_E_INVALID_PARAMETER instead of crashing
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3124 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

commit b32173d6743c03de1131d7069b930c762a29d681
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 10 22:00:52 2008 +0000

    Doxygen: reformat a line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3123 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e59d977422cc38d61447d29a829b97bc0ee36d70
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 10 11:50:02 2008 +0000

    expand a tab
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3121 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 +
 1 file changed, 1 insertion(+)

commit 9bcb8196bb0b165a7c2b867355369c6ede5d9557
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 14:04:04 2008 +0000

    SCardTransmit(): correctly pass the pioRecvPci parameter
    
    Thanks to David L. Markowitz for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3120 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c      | 10 +++++-----
 src/winscard_clnt.c | 12 ++++++++++--
 2 files changed, 15 insertions(+), 7 deletions(-)

commit 2ecad16df29fb3de4436c71ed405aec189350e51
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 09:37:14 2008 +0000

    StatSynchronize(): log with level DEBUG instead of ERROR if errno is
    ENXIO "No such device or address" since it is a normal error if the
    client is no more listening the pipe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3119 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit bb61304a52e94b99744162055284e174965910f7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 09:27:32 2008 +0000

    SCardGetStatusChange(): move "Event Loop End" log after the end label so
    the log is displayed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3118 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8bcfc6ebf2fb176c3ff7035a8b916d2bfba1280d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 09:24:57 2008 +0000

    WaitForPcscdEvent(): remove the waiting for event file after use
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3117 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit e1feb1ef471f5bbae256ff05703706c15f480f89
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 9 09:10:40 2008 +0000

    HPAddDevice(): the device serial is "usb.serial" instead of
    "usb_device.serial" and it is a C-string instead of an int
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3116 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit a03ac687526a4bfea99e41a518afeb35309b186e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 08:30:25 2008 +0000

    Doxygen: move SCardSetTimeout (back) in the API group so the detailed
    documentation does not appear in the winscard.h page
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3112 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 7b854eda4cd789dd1424c1a8fc6f909e453e7d29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 08:12:11 2008 +0000

    Doxygen: document SCARD_IO_REQUEST structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3111 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 4238ee2b9ddfd8d4eeb8a410621c69773f9318da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 08:03:58 2008 +0000

    remove useless struct _SCARD_IO_REQUEST name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3110 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 74f05bc9d1bdb3cb9524fab291748c86f6141a9d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 08:00:32 2008 +0000

    Doxygen: SCardTransmit() can use SCARD_PCI_RAW for pioSendPci
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3109 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit c6df807f448819888f1a967dc9cbf166c7d29960
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 07:56:08 2008 +0000

    Doxygen: document g_rgSCard*Pci values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3108 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit ad79633aa6c4c460ff4abb67b0a3aaaf065800ba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 07:50:09 2008 +0000

    move WaitForPcscdEvent() before doxygen doc of SCardGetStatusChange()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3107 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 88 ++++++++++++++++++++++++++---------------------------
 1 file changed, 44 insertions(+), 44 deletions(-)

commit 790eefa9f2b50f202513664cf17fc34796bc9d8e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 08:38:13 2008 +0000

    SHMProcessEventsContext(): do not timeout every 1 second on Linux.
    
    We do timeout only on *BSD like in SHMProcessEventsServer()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3104 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit c2a93242e445558ead8eea40223482ee8995954a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 09:24:20 2008 +0000

    use asynchronous events instead of polling for SCardGetStatusChange()
    
    on client side use WaitForPcscdEvent() instead of
    SYS_USleep(PCSCLITE_STATUS_WAIT)
    
    on server side use StatSynchronize() instead of SYS_MMapSynchronize()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3103 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 14 +++++-------
 src/winscard.c      |  6 ++---
 src/winscard_clnt.c | 63 +++++++++++++++++++++++++++++++++++++++++++----------
 3 files changed, 61 insertions(+), 22 deletions(-)

commit de0c5643ed019aa58040d1fdf6f5230ec24ad2f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 09:21:10 2008 +0000

    SCardGetStatusChange(): use k instead of i
    warning: declaration of 'i' shadows a previous local
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3102 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit da776f316a5672555d66fed0a70021171b4acf0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 09:17:39 2008 +0000

    move time_sub() outside of #ifdef DO_PROFILE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3101 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

commit 28ab5b92c0c1447e1955ce484b7ffb8152d10e91
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 09:15:56 2008 +0000

    define PCSCLITE_EVENTS_DIR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3100 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 +
 1 file changed, 1 insertion(+)

commit 796ad4df00f98e61b5ac109e0f38951970002955
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 09:15:40 2008 +0000

    main(): create PCSCLITE_EVENTS_DIR directory
    clean_temp_files(): purge & remove PCSCLITE_EVENTS_DIR directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3099 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit 217e8d88cce47cc4299111726660d747ec5aeb47
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 09:14:38 2008 +0000

    add StatSynchronize() "Sends an asynchronous event to any waiting
    client"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3098 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 68 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/utils.h |  3 +++
 2 files changed, 71 insertions(+)

commit d5c4c7d6f8d297db30a18ee0cb6b3cc3f12e4bad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 12 12:20:10 2008 +0000

    SHMProcessEventsContext(): also log the received command not just the
    client ID
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3088 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 25 ++++++++++++++++++++++++-
 1 file changed, 24 insertions(+), 1 deletion(-)

commit 57b8bd17e940c15134f465b83ed2f0cf60cd0111
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 11 13:40:53 2008 +0000

    use SYS_RemoveFile() instead of SYS_Unlink()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3087 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       | 12 ++++++------
 src/winscard_msg.c     |  2 +-
 src/winscard_msg_srv.c |  2 +-
 3 files changed, 8 insertions(+), 8 deletions(-)

commit a5b6a24ebd0bcb00c1b6ea3351b5673353fc9c28
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 11 13:40:28 2008 +0000

    remove SYS_Unlink() since it duplicates SYS_RemoveFile()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3086 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 2 --
 src/sys_unix.c    | 5 -----
 2 files changed, 7 deletions(-)

commit a92a8c030ade63515e721629c1c8a89f1f21aeb5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 7 07:13:50 2008 +0000

    reorder two lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3083 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b7cd115685c07704fd61bae262dd59d0fb91e0f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 7 07:12:34 2008 +0000

    call SYS_Chmod() for PCSCLITE_RUN_PID and PCSCLITE_PUBSHM_FILE to force
    the file access mode in case umask is too restrictive
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3082 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c |  7 +++++--
 src/pcscdaemon.c   | 11 +++++++----
 2 files changed, 12 insertions(+), 6 deletions(-)

commit 6c2917986d74ec49fb739a7e330825673d856e69
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 10:02:03 2008 +0000

    #include "pcscd.h" to get definitions MAX_LIBNAME, MAX_DEVICENAME,
    PCSCLITE_MAX_READER_CONTEXT_CHANNELS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3081 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 1 +
 1 file changed, 1 insertion(+)

commit 5634ab1e8fab24a5b3b54736e624f7015327c606
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 09:07:58 2008 +0000

    main(): call SYS_OpenFile() with the modes used by SYS_Chmod() and
    remove useless SYS_Chmod() call
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3080 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit a762d0049dcf78885d220df9f4db8cfdf23cc223
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 09:05:29 2008 +0000

    EHInitializeEventStructures(): call SYS_OpenFile() with the modes used
    by SYS_Chmod() and remove useless SYS_Chmod() call
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3079 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit f01c49d46aa8da8e07453089c30d5946e41ca1d7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 6 08:58:48 2008 +0000

    EHInitializeEventStructures(): use POSIX instead of Unix V7 permissions
    names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3078 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit bc8ece0bf5555d690d232b1dca43fd0aa134afac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:40:41 2008 +0000

    Doxygen: typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3077 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c7d1843e89aa990848153ba8673b7ee019b05c2c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:38:09 2008 +0000

    Doxygen: document the use of SCARD_AUTOALLOCATE with SCardGetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3076 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 5d44c6a7d9a746791f40fd7f568337b422372d6d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:25:27 2008 +0000

    Doxygen: do not create a useless @test group
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3075 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h |  1 -
 src/debug.h         |  1 -
 src/error.c         |  1 -
 src/winscard_clnt.c | 17 -----------------
 4 files changed, 20 deletions(-)

commit 783c3e69b1dca72ee727c259b22bf7dce46a5ca2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:23:05 2008 +0000

    Doxygen: document use of SCARD_AUTOALLOCATE for SCardStatus()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3074 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 29 ++++++++++++++++++++++++++++-
 1 file changed, 28 insertions(+), 1 deletion(-)

commit 83341c35b0f79f52fe0af74318d20c302fc9e0af
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:20:49 2008 +0000

    SCardStatus(): rename parameter mszReaderNames -> mszReaderName
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3073 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 05c06ae8c348ff19316c6e95ff59f7bf311a8d8b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:11:51 2008 +0000

    Doxygen: remove SCardSetTimeout() from the API doc since it is
    deprecated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3072 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit 48b632b3811ad2f6b4e092b2ab04029f9040d4f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:07:44 2008 +0000

    SCardStatus(): factorize code using goto end;
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3071 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

commit 781f656df90ae5bea66aaf6557c2349203d178c7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:05:20 2008 +0000

    SCardStatus(): rename parameter mszReaderNames in mszReaderName since it
    is the name of one reader only
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3070 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 070a0d1fc884ea222bc87829b09f4c63d24c1bb7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:03:21 2008 +0000

    test SCARD_AUTOALLOCATE in SCardStatus()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3069 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 25 ++++++++++++++++++++++++-
 1 file changed, 24 insertions(+), 1 deletion(-)

commit 07fc788e44b765a4d12479be074585af67a6498d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 14:02:32 2008 +0000

    SCardStatus(): add support of SCARD_AUTOALLOCATE for pcchReaderLen and
    pcbAtrLen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3068 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 40 +++++++++++++++++++++++++++++++++++-----
 1 file changed, 35 insertions(+), 5 deletions(-)

commit e492cdc9cbaa7ee766f7f90e9bc930ad62186584
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 30 13:55:37 2008 +0000

    use buf[] and dwBufLen for an temporary buffer instead of pbAtr[] and
    dwAtrLen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3067 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)

commit 1e6462d4a354951a0a687871651eeaa36ed01ca7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 29 08:14:41 2008 +0000

    SCardStatus(): set *pdwState and *pdwProtocol to 0 before
    checking pcchReaderLen and pcbAtrLen
    
    Should avoid the use of SUN libregression.c for some buggy applications
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3062 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 17 +++++++----------
 1 file changed, 7 insertions(+), 10 deletions(-)

commit 069da7f5b05666b2d470dab3a75c0b6cf73b3eda
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 7 08:52:51 2008 +0000

    SCardGetStatusChange(): Doxygen document the use of "\\?PnP?\Notification"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3058 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 3259bacb5c2705b38d4951a8ebb7014d0fe59e32
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 7 08:46:26 2008 +0000

    Doxygen document the use of SCARD_AUTOALLOCATE for SCardListReaders()
    and SCardListReaderGroups()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3057 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit ed3309362674a22746864979438a16b4686ee176
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 7 08:38:54 2008 +0000

    improve Doxygen documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3056 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c         | 10 ++++----
 src/winscard_clnt.c | 68 +++++++++++++++++++++++++++++------------------------
 2 files changed, 42 insertions(+), 36 deletions(-)

commit 913be73ce684ea86cb5ebb9c9fb04bd1526bba93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 7 07:59:31 2008 +0000

    exclude src/winscard_scf.c since it is a duplicate of winscard_clnt.c
    and causes some Doxygen links to be wrong
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3055 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c28dede82e969a545d43aa1d9156c58605bcf4e5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 7 07:45:47 2008 +0000

    typos in Doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3054 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 27 ++++++++++++++-------------
 1 file changed, 14 insertions(+), 13 deletions(-)

commit 26c6ffdc6a4249187f2091a7dd7761f3ad60031c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 14:01:18 2008 +0000

    when the reader is disconnected during SCardGetStatusChange()
    SCARD_STATE_UNKNOWN bit is set in .dwEventState
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3053 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit abe0c1a6760b9416e3f13db809a7b79d5516f510
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 13:59:53 2008 +0000

    test SCardGetStatusChange() with reader name \\?PnP?\Notification to
    detect new reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3052 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 24 ++++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)

commit efd079e45a18f5f05f56aed65af8c0650edd3b4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 13:55:56 2008 +0000

    SCardGetStatusChange(): if a reader disappear also set
    SCARD_STATE_UNAVAILABLE in dwEventState (more conform to Windows XP)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3051 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dc2ee76669963d250dcb2860d4ec4e9292db248a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 13:31:01 2008 +0000

    SCardGetStatusChange(): add support of reader name \\?PnP?\Notification
    to detect reader insertion/removal (conform to Windows XP)o
    
    Closes: [#310780] Support for undocumented \\?PnP?\Notification
    'virtual' reader
    
    Using a cReaders == 0 is now deprecated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3050 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 68 +++++++++++++++++++++++++----------------------------
 1 file changed, 32 insertions(+), 36 deletions(-)

commit ea4439ed5c701944df0d1645ba01fd63d8f265cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 12:46:42 2008 +0000

    SCardGetStatusChange(): simplify SCARD_SWALLOWED check
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3049 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)

commit f5020822d719893a45b06853bbd64e9e1645d25c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 10:02:12 2008 +0000

    SCardGetStatusChange(): reformat comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3048 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 71 ++++++++++++++---------------------------------------
 1 file changed, 18 insertions(+), 53 deletions(-)

commit 0fe789f7cc5d3fd716d2d13769d970658dac288f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 09:51:31 2008 +0000

    SCardGetStatusChange(): simplify bad state check
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3047 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 24 +++++++-----------------
 1 file changed, 7 insertions(+), 17 deletions(-)

commit 86ff2fc02036c27737fef64754e22dd6de4f217a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 09:44:09 2008 +0000

    SCardGetStatusChange(): simplify unknown reader case
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3046 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit ef50f3c44b1a174715ee6c949a2980b72dbd023c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 09:31:32 2008 +0000

    SCardGetStatusChange(): factorize exit code using goto end;
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3045 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 44 +++++++++++++++-----------------------------
 1 file changed, 15 insertions(+), 29 deletions(-)

commit 960c261662f8eae4911a03207d6877ad759fba98
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 09:25:00 2008 +0000

    SCardGetStatusChange(): return SCARD_E_TIMEOUT instead of
    SCARD_S_SUCCESS if dwTimeout == 0 (conform to Windows XP)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3044 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit e9379a0ac3c23608745e213edc0f48afd4a76147
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 09:23:12 2008 +0000

    SCardGetStatusChange(): move check for break conditions code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3043 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 74 ++++++++++++++++++++++-------------------------------
 1 file changed, 31 insertions(+), 43 deletions(-)

commit 171a91c4273d56f52bf50180a50e9dd9e47fdb24
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 08:58:12 2008 +0000

    SCardGetStatusChange(): move and simplify the check the integrity of the
    reader states structures routine
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3042 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 22 +++++++---------------
 1 file changed, 7 insertions(+), 15 deletions(-)

commit f6e8d7c910ca3eb70c33ad7f7ef79d4584969a4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 08:53:05 2008 +0000

    SCardGetStatusChange(): return if all readers are SCARD_STATE_IGNORE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3041 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 99b2846e4db0ec6d12e7b6412f8be0f609f51722
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 08:40:29 2008 +0000

    SCardGetStatusChange(): do not even change dwEventState for
    SCARD_STATE_IGNORE readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3040 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 1321fdc055917b636b0abb2e94173f3bfd38ecc3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 08:35:01 2008 +0000

    SCardGetStatusChange(): simplify the Clear the event state for all
    readers loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3039 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 360d97f0ff3e8803a5377a1edb4e0e437a39661f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 08:32:18 2008 +0000

    SCardGetStatusChange(): maximal value for cReaders is
    PCSCLITE_MAX_READERS_CONTEXTS not PCSCLITE_MAX_READERS_CONTEXTS-1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3038 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dbdced937a55845975ddd2c52c26695ba8e2f29d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 08:31:37 2008 +0000

    SCardGetStatusChange(): move check for
    cReaders >= PCSCLITE_MAX_READERS_CONTEXTS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3037 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

commit 4c2cec2d35be1e9f004016f745529adbab8ff20e (tag: 1.4.102)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 27 08:04:57 2008 +0000

    release 1.4.102
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3032 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 20 ++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 21 insertions(+), 1 deletion(-)

commit ab55041bafb2470ad3b6b016227c3cc9543f942d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 27 07:31:37 2008 +0000

    ContextsInitialize(): use a long instead of int
    winscard_svc.c:100: warning: cast to pointer from integer of different
    size
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3031 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 18508a5d6c3d4f894081ae106544d57576a314c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 26 14:00:00 2008 +0000

    EHDestroyEventHandler(): kill the polling thread only if the driver
    supports it (declared using TAG_IFD_POLLING_THREAD_KILLABLE)
    
    libusb 1.0 does not support it so it is disabled in the ccid driver
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3030 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit 040c408265ad722e55e05ff1edf503b49b0ad868
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 26 13:58:52 2008 +0000

    #define TAG_IFD_POLLING_THREAD_KILLABLE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3029 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 1 +
 1 file changed, 1 insertion(+)

commit a1b7c76a9d99612039b39103517cac90d721316b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 26 13:50:05 2008 +0000

    EHStatusHandlerThread(): lower the log level when the polling thread is
    dying
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3028 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d419fde0b8a1cabbc47b8bfeff4420d1d312276b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 24 09:59:35 2008 +0000

    test SCardGetAttrib() with SCARD_AUTOALLOCATE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3021 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 32 ++++++++++++++++++++++++++------
 1 file changed, 26 insertions(+), 6 deletions(-)

commit a00f6735db7e476d388f3cf62b8c0c8ee190aaab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 24 09:58:34 2008 +0000

    SCardGetAttrib(): add support of SCARD_AUTOALLOCATE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3020 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 23 +++++++++++++++++++----
 1 file changed, 19 insertions(+), 4 deletions(-)

commit 4b8d7ef18d35bfd09110903321a6b20e2126f389
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 24 08:33:12 2008 +0000

    SCardListReaders(): always set the pcchReaders even if
    SCARD_E_INSUFFICIENT_BUFFER is returned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3019 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 988d7661f1c6e39e8de675417b6a2a020de295bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 24 08:31:48 2008 +0000

    SCardListReaderGroups(): check for SCARD_E_INSUFFICIENT_BUFFER only if
    mszGroups is non-null
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3018 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit ed033e45b171b743902c98cb13754adafee586a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 24 08:17:35 2008 +0000

    test SCardListReaderGroups() with USE_AUTOALLOCATE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3017 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)

commit 25b686d5f6124a1256ba752ee3902ac911cbf691
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 24 08:15:45 2008 +0000

    SCardListReaderGroups(): add support of SCARD_AUTOALLOCATE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3016 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 28 ++++++++++++++++++++--------
 1 file changed, 20 insertions(+), 8 deletions(-)

commit f6a483bec020a115009285e0c289ddf1fa6f1049
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 23 08:38:27 2008 +0000

    use NULL instead of 0 for mszGroups argument of SCardListReaderGroups()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3015 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a598eb8a9400d09a288d1ab3c38c4852cb384c4e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 19 14:57:35 2008 +0000

    test SCardListReaders(.. SCARD_AUTOALLOCATE ..)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3014 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 6318f53367e2270a5c50222521d0c9e2557f2455
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 19 14:56:54 2008 +0000

    add support of SCARD_AUTOALLOCATE for SCardListReaders()
    add SCardFreeMemory()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3013 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in |  1 +
 src/PCSC/winscard.h    |  2 ++
 src/winscard_clnt.c    | 85 +++++++++++++++++++++++++++++++++++++++-----------
 3 files changed, 70 insertions(+), 18 deletions(-)

commit 18f0853a153f8228c99c7af0fb3de06ef12429ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 19 14:12:44 2008 +0000

    use NULL instead of 0 for mszReaders argument of SCardListReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3012 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a7a07c37697d8f337d89b74b1bfb0d697ebbbcd7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 19 14:11:32 2008 +0000

    SCardListReaders(): correctly return SCARD_E_INSUFFICIENT_BUFFER if
    *pcchReaders is too small
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@3011 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit b021604bd0d76615932b79a92e5fc1f6e1577c22
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 7 07:38:47 2008 +0000

    update (correct a problem under Solaris)
    
    Thanks to David L. Markowitz for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2980 0ce88b0d-b2fd-0310-8134-9614164e65ea

 m4/acx_pthread.m4 | 134 ++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 105 insertions(+), 29 deletions(-)

commit f4e7d1ecd230b802e1a0d37aa9bceb80897b0a2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 29 13:47:03 2008 +0000

    RFAddReader(): try to use the reader polling thread also for the other
    slots on a multi-slots reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2975 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 22 +++++++++++++++++++++-
 1 file changed, 21 insertions(+), 1 deletion(-)

commit 3e4fff9cc0dea51b1bf903a64e84b91dad537617
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 23 13:35:29 2008 +0000

    add spaces around =
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2967 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cb879806eaa50280f43955ac3fe86e84826ac705
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 16 09:38:19 2008 +0000

    SCardReconnect(), SCardDisconnect(), SCardBeginTransaction(),
    SCardEndTransaction(), SCardCancelTransaction(), SCardStatus(),
    SCardControl(), SCardGetSetAttrib(), SCardTransmit(): check that the
    card handle is still valid after we (should) hold the lock
    
    The context may have been closed by another thread using
    SCardReleaseContext() on the same context
    
    [#300849] problems in multithreading environment (segmentation faults,
    SCardCancel does not work)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2963 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 72 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 72 insertions(+)

commit 73e9db9ede478136689a61f36cffd4e90c5ffffc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 16 09:32:19 2008 +0000

    SYS_Mutex*(): check that the mMutex parameter is non NULL to avoid a
    crash
    
    related to [#300849] problems in multithreading environment
    (segmentation faults, SCardCancel does not work)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2962 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 25 ++++++++++++++++++++-----
 1 file changed, 20 insertions(+), 5 deletions(-)

commit 12490174b98cd2c051ab9ee164723c461e2e2241
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 16 09:12:53 2008 +0000

    remove spaces at end of lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2961 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c       |  2 +-
 src/pcsc-wirecheck-gen.c |  2 +-
 src/winscard_clnt.c      | 31 ++++++++++---------------------
 src/winscard_msg.c       |  4 ++--
 src/winscard_msg_srv.c   |  2 +-
 src/winscard_svc.c       |  6 +++---
 6 files changed, 18 insertions(+), 29 deletions(-)

commit 964a5bc4d51f8111adf75165ba969277c789efa2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 16 09:03:48 2008 +0000

    SCardReleaseContext(), SCardConnect(), SCardGetStatusChange(),
    SCardListReaders() and SCardListReaderGroups: check that the context is
    still opened after we (should) hold the lock
    
    The context may have been closed by another thread using
    SCardReleaseContext() on the same context
    
    [#300849] problems in multithreading environment (segmentation faults,
    SCardCancel does not work)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2960 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 5eb4b7fdbe7e8345b3d274ad340f202cfe9ea99e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 16 08:12:56 2008 +0000

    remove an empty line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2959 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 1 -
 1 file changed, 1 deletion(-)

commit 8a9bd82f669d0e2699382791b4b1933dd94fbf7e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 16 07:59:34 2008 +0000

    do not include the (useless) win32 directory any more
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2958 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am       |    2 +-
 configure.in      |    1 -
 win32/Makefile.am |    5 -
 win32/PCSC.cpp    |   56 ---
 win32/PCSC.dsp    |  174 --------
 win32/PCSC.h      |   25 --
 win32/StdAfx.cpp  |    8 -
 win32/StdAfx.h    |   24 -
 win32/config.h    |   41 --
 win32/pthread.h   | 1273 -----------------------------------------------------
 win32/sched.h     |  174 --------
 11 files changed, 1 insertion(+), 1782 deletions(-)

commit 4dca8a473084dffe15071d78c2580f1578696810
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 15 12:52:48 2008 +0000

    SCardConnect(), SCardReconnect(): do not check the parameter
    dwPreferredProtocols if dwShareMode == SCARD_SHARE_DIRECT
    
    This is used on contactless readers to talk to the reader without any
    card and "random" value of dwPreferredProtocols
    
    Thanks to Philippe BOURGAULT for reporting the bug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2957 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 5b40c532d583865791bb2fce2904e9f7061c4f6a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 15 12:50:20 2008 +0000

    SCardEstablishContextTH(), SCardConnect(), SCardReconnect(),
    SCardDisconnect(), SCardEndTransaction(): do not check parameters for
    SCARD_E_INVALID_VALUE since these tests are also done on the server
    side.
    Do not duplicate code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2956 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 46 ----------------------------------------------
 1 file changed, 46 deletions(-)

commit 48c09c7b62ca5abc4e287e1c4a3bf2a0e2aa0b76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 15 10:04:21 2008 +0000

    SVCServiceRunLoop(): return if HPSearchHotPluggables() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2955 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit ffabc675123ccb5df1e6a73e846dcfe62ad5d983
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 15 10:03:00 2008 +0000

    SVCServiceRunLoop(): return if HPRegisterForHotplugEvents() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2954 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 9f220b238d63872422eae398d46472884be115c8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 15 07:55:48 2008 +0000

    CreateContextThread(): update to the new SYS_ThreadCreate() API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2953 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 1b5082ada2c82cbb4065ab41da78bec315ff2187
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 09:09:05 2008 +0000

    EHDestroyEventHandler(): log the error message of SYS_ThreadJoin() and
    SYS_ThreadCreate() if any
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2952 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 3f39423030e1e6dbc1e12c578438c4e194730d77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 09:05:28 2008 +0000

    EHSpawnEventHandler(): do not create the card polling thread using
    THREAD_ATTR_DETACHED since that will prevent SYS_ThreadJoin() from
    working
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2951 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 137ed4c19d24875f74cc89990b2934474a78e220
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 09:03:45 2008 +0000

    EHStatusHandlerThread(): do not call SYS_ThreadDetach() since that will
    prevent SYS_ThreadJoin() from working.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2950 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit 3679dc8cebfeb8f5fde539f8e62d403dd51022c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 09:01:55 2008 +0000

    update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2949 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 1 +
 1 file changed, 1 insertion(+)

commit da66d17289c6c601d37b389386245adad4fe691a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 09:00:47 2008 +0000

    forward the return value from the low level thread library and not just
    FALSE or TRUE
    The upper layer can then use strerror()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2948 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 41 +++++++++++++++--------------------------
 1 file changed, 15 insertions(+), 26 deletions(-)

commit b5794ab72859b733c5d8adfa041e7e8b7f892ab0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 08:58:26 2008 +0000

    do not distribute win32 files anymore.
    win32 is not a supported platform
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2947 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am    |   2 +-
 src/dyn_win32.c    |  90 ------------------------------
 src/thread_win32.c | 158 -----------------------------------------------------
 3 files changed, 1 insertion(+), 249 deletions(-)

commit d2c9c8539a443939fad6fd60cf10981cbadd32b3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 07:32:48 2008 +0000

    pcscd -v now displays the enabled features
    
    Thanks to Alon Bar-Lev for the suggestion
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2946 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in     | 9 +++++++++
 src/pcscdaemon.c | 2 ++
 2 files changed, 11 insertions(+)

commit 698eff4988e6b45c20fadb4b7080863db2044ec2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 13 07:15:24 2008 +0000

    update email for bug reports
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2945 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 3d6354e3c4d41666c33298837225da4d93bd9524
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 12 08:36:21 2008 +0000

    IFDCloseIFD(): use SYS_MutexTryLock() instead of SYS_MutexLock() since
    the mutex may be hold by a now dead polling thread
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2944 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit e40f1c3d812ef4e14b04be8ccab9f3d08710a85f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 12 08:35:00 2008 +0000

    add SYS_MutexTryLock()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2943 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_generic.h | 1 +
 src/thread_unix.c    | 5 +++++
 2 files changed, 6 insertions(+)

commit c9e7b46b29ef83bc9a63a29e2e6e62437b0bd458
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 12 07:29:12 2008 +0000

    typo in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2942 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 843669418da004007ad80132f747a6912d6dbd2d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 11 11:00:25 2008 +0000

    add AUTOMAKE_OPTIONS = dist-bzip2 so that make dist alsa generates a
    .tar.bz2 archive
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2941 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ed7ea81c89b897216434c13078bbd90af777a787
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 9 15:03:44 2008 +0000

    RFAddReader(): in case of error call RFRemoveReader() to free all
    resources instead of duplicating part of the needed code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2939 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 85 +++--------------------------------------------------
 1 file changed, 4 insertions(+), 81 deletions(-)

commit 16fd3ce1927c11941b4d763a614e507ea83c858f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 9 15:01:51 2008 +0000

    RFAddReader(): call RFRemoveReader() to free resources if
    EHSpawnEventHandler() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2938 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++++
 1 file changed, 4 insertions(+)

commit d571f0da6acd52d288387a2d773d77f07be596b8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 6 09:41:28 2008 +0000

    do not store in subversion since it is installed by autoconf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2928 0ce88b0d-b2fd-0310-8134-9614164e65ea

 INSTALL | 182 ----------------------------------------------------------------
 1 file changed, 182 deletions(-)

commit 0a64bd1e5e12ebe3b078d35ddcba3ae5410c6645
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 30 15:14:05 2008 +0000

    doxygen: SCardCancelTransaction() add return values SCARD_W_REMOVED_CARD
    and SCARD_W_RESET_CARD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2927 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2bc7751a92abb7271f0a9416ad0486f5c34f9fa9 (tag: 1.4.101)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 30 15:07:43 2008 +0000

    release 1.4.101
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2926 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 10 ++++++++++
 configure.in |  2 +-
 2 files changed, 11 insertions(+), 1 deletion(-)

commit 212cfec014f397b137b65e65324fbac4162dc980
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 30 07:33:58 2008 +0000

    Add support for DragonFly BSD
    
    Thanks to Hasso Tepper for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2918 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c   | 2 +-
 src/winscard_msg_srv.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 9ee9a1bc997dc43b7538cdfdb67e0d4297843c3a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 29 14:08:13 2008 +0000

    EHStatusHandlerThread(): do not set card state to SCARD_RESET when a
    card is inserted. Keep the state to SCARD_REMOVED
    
    See
    http://www.opensc-project.org/pipermail/opensc-devel/2008-April/011121.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2917 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 5 -----
 1 file changed, 5 deletions(-)

commit 553a5621afa5a27c3e4ed74d51c2763bea6f04ef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 28 09:28:05 2008 +0000

    return the returned value of SCardCheckDaemonAvailability() instead of
    always SCARD_E_NO_SERVICE in case of error (may also be
    SCARD_E_INVALID_HANDLE)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2915 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 88 ++++++++++++++++++++++++++++++++---------------------
 1 file changed, 53 insertions(+), 35 deletions(-)

commit 5fb09ed71d3a69cdb71b1f38f16ca5135510ce23
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 28 09:20:40 2008 +0000

    SCardCheckDaemonAvailability(): return SCARD_E_INVALID_HANDLE instead of
    SCARD_E_NO_SERVICE is pcscd has been restarted
    
    Thanks to Alon Bar-Lev for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2914 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 78 ++++++++++++++++++++++++++---------------------------
 1 file changed, 38 insertions(+), 40 deletions(-)

commit 42f635a1df0e1315e7b491edc56b7cb555a67bcc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 25 14:04:44 2008 +0000

    SCardEstablishContext(): correcly handle a call from a forked child (do
    not fail)
    
    Thanks to Alon Bar-Lev for bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2913 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit a6b3ab6d44f5f8768b6ddb55c9aeb2ff3bd78578
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 24 09:34:54 2008 +0000

    SCardCheckDaemonAvailability(): invalidate all handles if the
    application has forked and we are in the child. The child must call
    SCardEstablishContext() to get his own handle.
    
    Thanks to Alon Bar-Lev for the bug report and the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2910 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 19 +++++++++++++++----
 1 file changed, 15 insertions(+), 4 deletions(-)

commit ee240ee8b05e8a64f928cff445f07028c89b1117
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 24 09:31:46 2008 +0000

    better management of corner cases
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2909 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 290c77505b7158841e03284ca70c593d89d05f6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 24 08:28:32 2008 +0000

    doxygen: use /**< instead of /** to correctly identify identify fields
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2908 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 12bae3a3c5c11d147aa2f0a3d4e19e4eb502729a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 24 08:22:27 2008 +0000

    ContextThread(): call SHMClientCloseSession() instead of SYS_CloseFile()
    to respect namespace
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2907 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d2c3bab57ef7c49594c17edc8e3ce04419642100
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 24 07:32:39 2008 +0000

    typo in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2906 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b19ea7d8785302b8b5f38739277b070f781bf637
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 20:32:22 2008 +0000

    doxygen: WARN_NO_PARAMDOC       = YES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2905 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd5029d1244110190cf569b7bef5ba1b0ddc7999
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 20:29:55 2008 +0000

    doxygen: update conf from version 1.4.2 to 1.5.5 file using doxygen -u
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2904 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 1187 ++++++++++++++++++++++++++++-----------------------
 1 file changed, 663 insertions(+), 524 deletions(-)

commit f9e51c01effc7f113df42ca42ba9c27e3c383d9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 20:22:47 2008 +0000

    ENUM_VALUES_PER_LINE   = 1 (instead of 4)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2903 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1e8c4b7ab349a807c81f983e1eba3dc76a7291af
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 20:19:42 2008 +0000

    doxygen: remove two unused </ul>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2902 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 --
 1 file changed, 2 deletions(-)

commit abf5be13a6766e1e2003349ceb772f0925d83301
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 16:11:34 2008 +0000

    doxygen: add SCardReleaseContext() and SCardEndTransaction() in API
    group even if they are deprecated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2901 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit d17d7ab9522769d1d749fbc1463844236e35405c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 13:12:50 2008 +0000

    doxygen: add comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2900 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 2 +-
 src/winscard_msg.h  | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 7a4ec1bcf17f02109c93562130979f8de045ecad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 13:12:15 2008 +0000

    ContextThread(): check the return value of MSGFunctionDemarshall() and
    correctly exists in case of error. This happens when
    MSGCheckHandleAssociation() fails
    
    Thanks to Alon Bar-Lev for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2899 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit c4b7e462b7130a9883d6f241026aac5f922a7d7b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 13:03:37 2008 +0000

    SHMProcessEventsContext(): use uint32_t dwClientID parameter instead of
    uint32_t *pdwClientID since we do not need the address of the value but
    the value itself
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2898 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h     |  2 +-
 src/winscard_msg_srv.c | 19 +++++++++----------
 src/winscard_svc.c     |  2 +-
 3 files changed, 11 insertions(+), 12 deletions(-)

commit 9b7b0e430dceb8116d9b825b37bb14b9efd4b4d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 09:20:28 2008 +0000

    doxygen: convert C comments in doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2897 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 1330b6c82db019a904abf1b40f6e2f812ab20bda
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 22 09:20:00 2008 +0000

    doxygen: convert C comments in doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2896 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c         |  4 ++--
 src/hotplug_libhal.c   | 15 +++++++------
 src/hotplug_linux.c    |  4 ++--
 src/ifdwrapper.c       | 59 +++++++++++++++++++-------------------------------
 src/pcscdaemon.c       |  2 +-
 src/powermgt_generic.h |  3 +--
 src/prothandler.c      | 24 ++++++++++----------
 src/winscard_scf.c     | 12 +++++-----
 src/winscard_svc.c     |  8 +++----
 9 files changed, 57 insertions(+), 74 deletions(-)

commit 0e8a0a81bd1b57cef41f7d4a6b1d75ba1ec33647
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:29:56 2008 +0000

    declare log_init() static to avoid the prototype declaration
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2895 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit f34c9c75eee9e99ae583628a46c3c6b5cc172e1e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:27:41 2008 +0000

    correct LogLevel comment to be accurate
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2894 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit eb011181db64a6a34a69d0460f6936e50793070a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:25:39 2008 +0000

    doxygen: convert C comments in doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2893 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9acfe47a2a296996612c5a28478ef77779106878
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:22:44 2008 +0000

    doxygen: convert C comments in doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2892 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 66 +++++++++++++++++++++++++--------------------------
 1 file changed, 33 insertions(+), 33 deletions(-)

commit fa5dfc621e91ee2cdd09bfce9316ca5c9612dc99
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:14:46 2008 +0000

    removed unused TO and T1 struct from CardCapabilities struct
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2891 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 10 ----------
 src/atrhandler.h | 29 -----------------------------
 2 files changed, 39 deletions(-)

commit 148836c80019f3dcbc944156599581bb2596551f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:11:35 2008 +0000

    removed unused PtsData struct from CardCapabilities struct
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2890 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.h | 10 ----------
 1 file changed, 10 deletions(-)

commit 7a5e8ec80de95e30ebf4db4e76df2edda8ed9f9d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 13:06:42 2008 +0000

    doxygen: convert C comments in doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2889 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 50 +++++++++++++++++++++++++-------------------------
 1 file changed, 25 insertions(+), 25 deletions(-)

commit 7a81cb03953a0e5fc108ac50eb6238ccb57185dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 12:51:35 2008 +0000

    remove unused RdrCapabilities and ProtOptions structures
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2888 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 46 ----------------------------------------------
 1 file changed, 46 deletions(-)

commit 8d7c7cb34cdc3966eb4360a9526dcecdcf998835
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 12:48:55 2008 +0000

    doxygen: document struct SerialReader fields
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2887 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 29215b8bc26e31dc8d74d434d2657846372cefa7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 12:45:38 2008 +0000

    doxygen: wrap long lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2886 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

commit d3cce6473c7ba0a084178e6d7221fbc4af81b6ea
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 12:44:25 2008 +0000

    doxygen: create an API group
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2885 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c         |  1 +
 src/winscard_clnt.c | 18 ++++++++++++++++++
 2 files changed, 19 insertions(+)

commit 3402364bf9e5f4b2127066e167b599d4973d701e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 12:30:58 2008 +0000

    doxygen: use - instead of <li>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2884 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c      |  10 +-
 src/winscard_clnt.c | 258 +++++++++++++++++++++++-----------------------------
 2 files changed, 120 insertions(+), 148 deletions(-)

commit 68309d924a989ef7ec2c84c2dac1eaf343d3ed14
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 12:26:15 2008 +0000

    doxygen: document SCARD_* commands and \ref them from struct doc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2883 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 66 +++++++++++++++++++++++++++---------------------------
 1 file changed, 33 insertions(+), 33 deletions(-)

commit 3501aac9d65ac85b4fd523b3ddece2ede1162b1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 21 09:56:51 2008 +0000

    RFAddReader(): log if we are using pcscd or reader polling thread
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2882 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 983bab431d1a45f31a73d15b30b4d11718de1bdb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 20 15:52:46 2008 +0000

    remove "use a callback from IFD handler to pcscd instead of polling to
    get the card status" since this feature is now available using
    TAG_IFD_POLLING_THREAD when the driver is collaborating
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2881 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 3 ---
 1 file changed, 3 deletions(-)

commit c0a3397a7a87c91f2f6076ff865afd5f356db231
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 20 14:18:39 2008 +0000

    improve colorization
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2880 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 56 ++++++++++++++++++++++++++++++++++----------------------
 1 file changed, 34 insertions(+), 22 deletions(-)

commit 11337f6bca97d404d5d2f3a7c3c520c4de06ea6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 20 11:47:06 2008 +0000

    start pcscd as an normal user daemon
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2879 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 4 ++++
 1 file changed, 4 insertions(+)

commit e990c1c2f963c40e5cc865021457d9c283fc46e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 10 09:59:22 2008 +0000

    HPRegisterForHotplugEvents(): correctly check if no bundle files in pcsc
    drivers directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2878 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c7f264d98b4c8da44a895f08580cce2e5d312ba6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 10 09:29:32 2008 +0000

    expand a tab
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2877 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5cb192e5c8aea897f58821505db748abad34f9ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 16:22:53 2008 +0000

    revert previous patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2868 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 5 -----
 1 file changed, 5 deletions(-)

commit ad95f3a285a62a2b1098988174c9e94f5df9a0d5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 16:22:11 2008 +0000

    start pcscd only when a reader is connected.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2867 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 6 +++++-
 c.sh | 5 +++++
 2 files changed, 10 insertions(+), 1 deletion(-)

commit b3a01f58f3b8544d1f327dd4e5385c90f557e64b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 4 13:43:33 2008 +0000

    add --sysconfdir=/etc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2866 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 84f0fd3697fd49f736985da0abd6c785750f57a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 4 13:42:42 2008 +0000

    update Should-Start: and Should-Stop: (see Debian bug #474238)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2865 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.init.in | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 5181385fb58cedc6cee61118c7c47ecdf8ccb12b (tag: 1.4.100)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 23 13:37:06 2008 +0000

    release 1.4.100
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2852 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 25 +++++++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 26 insertions(+), 1 deletion(-)

commit 887c8a9faa2482ea0d2016cb4fe7568dfdea9c68
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 14 16:00:35 2008 +0000

    typo pscsd -> pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2851 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.init.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8d274d0f0a29c5a1abc0689f30cec20dfd2e8587
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 14 15:59:28 2008 +0000

    SCardCheckDaemonAvailability(): lower the priority of the log message in
    case of "PCSC restarted" so that nothing is logged by default.
    PCSCLITE_DEBUG can be defined to see the message.
    
    See also revision 2731
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2850 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 42748a9b760e71a1daff9b41ce42686f945150a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 4 10:51:18 2008 +0000

    SCardReleaseContext(): remove the local context at the end like before
    revision 2833 (since we use the psContextMap[dwContextIndex].mMutex) or
    if SCardCheckDaemonAvailability() fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2845 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 25 ++++++++++++++++---------
 1 file changed, 16 insertions(+), 9 deletions(-)

commit 91616e965ed13dd4b20cb641db71fb5403482871
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 21 13:13:28 2008 +0000

    SCardReleaseContext(): revert revision 2834 since we need to get the
    value of dwContextIndex
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2839 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 39408c73973d454e186fe5911ab97f991ba31fa4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 21 13:07:33 2008 +0000

    pcscdaemon.c:394:34: warning: "/*" within comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2838 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7c2c49d11df4233f09b6336760e92e40da04c3a6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 19 13:45:50 2008 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2835 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 63 ++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 40 insertions(+), 23 deletions(-)

commit 24294b19ffd9d2ff34a27864f8ca08f09743e747
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 19 13:38:39 2008 +0000

    SCardReleaseContext(): do not call SCardGetContextIndice() since
    SCardRemoveContext() will call it internally
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2834 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++--------
 1 file changed, 3 insertions(+), 8 deletions(-)

commit ecb780dac73c41a84f44333c42d77c0936479297
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 19 13:35:09 2008 +0000

    SCardReleaseContext(): release the local resource even if the daemon
    does not respond
    
    Thanks to Eric Walter for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2833 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 83dd5a0929da4f2350cebe4e4ed324384be26600
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 16 12:24:34 2008 +0000

    do not create the PCSCLITE_IPC_DIR (/var/run/pcscd) directory with the
    sticky bit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2830 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fa8aeec449c1aa6dac788233e0771ed6d5760487
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 16 12:08:13 2008 +0000

    change a comment from /tmp/pcsc to /var/run/pcscd/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2829 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e87e795edabf862b953260028658f986da3eb709
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 16 12:04:53 2008 +0000

    update comments /var/run/ is now /var/run/pcscd/ by default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2828 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7ed820aa9e747915d602841126cbe7c79d6b0af5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 14 10:56:26 2008 +0000

    set svn:keywords Id
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2817 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit f863b8e3da976ab5705073528794ff1ae53de5e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 14 10:51:02 2008 +0000

    add --enable-twinserial
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2816 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 +
 1 file changed, 1 insertion(+)

commit 107cbd8c670c642b17ad0f487c3c5b3c9265fd52
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 14 10:49:57 2008 +0000

    move types unused by pcsc-lite at the end
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2814 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit ced45b07de9449a1e763f2402db36c0496ea5b2a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 9 10:02:30 2008 +0000

    display sysconfdir_exp instead of sysconfdir
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2812 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b1edb60012254e27b817e29c12352bfbd4ea059a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 9 10:00:55 2008 +0000

    set default value of confdir
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2811 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 +++
 1 file changed, 3 insertions(+)

commit 9473e1feaf9d8f68a63500ece76c0e62bbb0e5a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 4 13:58:25 2008 +0000

    RFAddReader(): also check returned value of dwGetSize
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2787 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 44a07de2bec00d2eddfb5fe6706485ce6c691ea7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 4 08:26:35 2008 +0000

    improve configuration display
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2785 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 55 ++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 36 insertions(+), 19 deletions(-)

commit a2350ca681c445dc8a85c97217bf215e21c99429
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 4 08:15:47 2008 +0000

    add set -x
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2784 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 2 ++
 1 file changed, 2 insertions(+)

commit 2018f29a67fb07f13b6b15fd205fc2042df444c1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 1 09:48:25 2008 +0000

    add support of TAG_IFD_POLLING_THREAD to use an asynchronous card
    movements detection instead of an active polling
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2780 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 51 ++++++++++++++++++++++++++++++---------------------
 src/eventhandler.h  |  2 +-
 src/readerfactory.c | 24 +++++++++++++++++++-----
 src/readerfactory.h |  1 +
 4 files changed, 51 insertions(+), 27 deletions(-)

commit e0766f0f41c2f84a16b3b5e2ac02ebceefb143b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 1 09:36:17 2008 +0000

    add TAG_IFD_POLLING_THREAD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2779 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 1 +
 1 file changed, 1 insertion(+)

commit 858b94d6fe418ee488f8e4f7010d9ba3c49c5695
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 1 09:35:05 2008 +0000

    SYS_GetPageSize(): cache the result of getpagesize() to improve
    performances
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2778 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 22dd5f8b6ad9da17bc92d4370b23e35144e24864
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 30 09:42:31 2008 +0000

    SCardCheckDaemonAvailability(): log the system error message in case
    PCSC Not Running
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2775 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da7fa3ba6976b94f7caf37aa1280cb7cfa8d7374
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 29 08:59:21 2008 +0000

    SCardListReaders(): returns SCARD_E_NO_READERS_AVAILABLE when no reader
    are available.
    
    Thanks to Thomas Harning for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2770 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit d988a855c4568540a5db47a305314fb1e3db5351
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 29 08:56:35 2008 +0000

    pcsc_stringify_error(): add support of SCARD_E_NO_READERS_AVAILABLE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2769 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 3 +++
 1 file changed, 3 insertions(+)

commit 482860aa84dce126fffb494763f3dba868d15736
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 29 08:52:19 2008 +0000

    SCardListReaders(): factorize code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2768 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 20 ++++++++------------
 1 file changed, 8 insertions(+), 12 deletions(-)

commit 016dfda78d0d68145b6a36c6fcac217ff5618320
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 24 15:12:11 2008 +0000

    SCardConnect(), SCardReconnect(), SCardDisconnect(): replace
    SYS_USleep(PCSCLITE_STATUS_POLL_RATE + 10) by SYS_MMapSynchronize()
    calls to gain performances.
    
    Thanks to Sean Wykes for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2767 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 42 ++++++++++++++++++------------------------
 1 file changed, 18 insertions(+), 24 deletions(-)

commit 941a3def2ecf1fedaed0064d3f146419c6bd0d2b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 24 10:32:05 2008 +0000

    use $Id$
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2766 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2437c4925d9b8ea6fee1f6099389d211428f0fd8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 24 10:29:59 2008 +0000

    HPAddDevice(): remove the device from readerTracker[] if RFAddReader()
    fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2765 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libhal.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 990bfcc0aeed63d48b35a81a78b04679cb524561
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 24 08:23:08 2008 +0000

    document what do do if pkg module hal is not found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2761 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 8788f5a6b29957d4804f7adc7d53debee1f1a66a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 22 21:04:43 2008 +0000

    revert libhal -> LIBHAL
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2760 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3a5907c80e08c14c5ddfb71032fbcaeb97106404
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 22 20:58:50 2008 +0000

    rename LIBHAL -> libhal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2759 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c09924c0de36d30bea9ee4c44ccb8e5f251fa6e4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 21 10:02:00 2008 +0000

    first argument of SYS_ThreadJoin() is now a PCSCLITE_THREAD_T instead of
    PCSCLITE_THREAD_T *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2750 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_generic.h | 2 +-
 src/thread_unix.c    | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit e858e9d9df097ee0a48c6f8029f027a59fb25a36
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 21 09:59:54 2008 +0000

    add SYS_ThreadSetCancelType()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2749 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_generic.h | 1 +
 src/thread_unix.c    | 5 +++++
 2 files changed, 6 insertions(+)

commit 4ac841a12af6bce2cabaa7561f90edf879143a24
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 21 09:10:58 2008 +0000

    add libhal support to avoid polling the USB bus.
    libusb is still supported but libhal is now the default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2748 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in          |  48 ++++-
 src/Makefile.am       |   6 +-
 src/hotplug_generic.c |   2 +-
 src/hotplug_libhal.c  | 517 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hotplug_linux.c   |   2 +-
 5 files changed, 569 insertions(+), 6 deletions(-)

commit 4369251b91a5e065bb0aef2692fa6dd0b1ee2235
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 21 08:36:19 2008 +0000

    Patch in revision 2743 was wrong. We need to hold the lock before
    traversing the reader list
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2747 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 259858ee1cfe486a70c9392e5e910efd02606b4f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 17 12:50:57 2008 +0000

    do not display dela times of more than 100 seconds to avoid overflows.
    The magic value 99999999 is used instead
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2745 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 9e3bcbd0aff470b4dbdacdc5caffdb452bf3ddad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 17 09:25:01 2008 +0000

    more details about deviceName argument of IFDHCreateChannelByName()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2744 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 35 ++++++++++++++++++++++++++++-------
 1 file changed, 28 insertions(+), 7 deletions(-)

commit f32809e6580dc000c523dba92e39f997e1217659
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 15:21:30 2008 +0000

    HPAddHotPluggable(): lock the mutex _after_ every possible return. (May
    cause a deadlock)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2743 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6f554e9b5f48e0e1b07e8394653906d0de0405fb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 14:25:20 2008 +0000

    #include "utils.h" instead of "hotplug.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2742 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4457b00c9d9729073dcdebf34c93e581b369e089
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 14:25:03 2008 +0000

    #include <sys/types.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2741 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.h | 1 +
 1 file changed, 1 insertion(+)

commit 7c602a75dcc8031bbd514570442639c62240c0cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 14:23:54 2008 +0000

    revert previous patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2740 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 3d787e13bd6d0a4ce3c659a2c3a0079e99c0d25e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 14:23:07 2008 +0000

    remove wrong comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2739 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.h | 1 -
 1 file changed, 1 deletion(-)

commit d4797479af3ee0f858fb94f4a39a1ea14ed27884
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 14:21:02 2008 +0000

    move SendHotplugSignal() from pcscdaemon.c to utils.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2738 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h    |  1 -
 src/pcscdaemon.c | 20 --------------------
 src/utils.c      | 21 +++++++++++++++++++++
 src/utils.h      |  1 +
 4 files changed, 22 insertions(+), 21 deletions(-)

commit 9067b66400320533d315e446676ad112e807691f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 13:58:02 2008 +0000

    HPRescanUsbBus() and HPEstablishUSBNotifications() are static functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2737 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2ca6bc7819a2e4cf84f67be7217e18c2a40354a1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 13:45:31 2008 +0000

    add a prototype for HPEstablishUSBNotifications() and make it static
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2736 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a30dba8fcb0c398d47bc6d8cce7e05cb837c3f68
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 15 13:20:37 2008 +0000

    declare local functions as static
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2735 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 12 ++++++------
 src/hotplug_linux.c  | 12 ++++++------
 2 files changed, 12 insertions(+), 12 deletions(-)

commit 8a3aa8c48f968a051a161094eea7d8c554ebbdd2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 14 10:51:42 2008 +0000

    DYN_LoadLibrary(): log an error message in case of failure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2733 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_macosx.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 05926ae0a9c34bf6afa9aa01e1cde1d35fa2141f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 12 13:38:43 2008 +0000

    default log level is PCSC_LOG_CRITICAL+1 so that NO log is sent to
    stderr by default. You need to explicitely set PCSCLITE_DEBUG to have
    logs.  (in a library stderr(2) can be any file opened with fd=2 so
    should not be used)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2732 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b307964d3814c293bb05d42c206331116e07c9eb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 11 16:49:44 2008 +0000

    CardCheckDaemonAvailability(): lower the priority of the log message in
    case of "PCSC Not Running" so that nothing is logged by default.
    PCSCLITE_DEBUG can be defined to see the message.
    
    Programs linked with libpcsclite will not display anything if pcscd is
    not running. Solves Red Hat bug 428299.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2731 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d84f88466714dc5477213d626ac7540386b89e2a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 11 16:42:26 2008 +0000

    add a \n after the pid number in PCSCLITE_RUN_PID so that cat(1) works
    correctly
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2730 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e211be77d29584c75830343b2dc64142df5b898d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 11 16:37:42 2008 +0000

    Log the socket name in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2729 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 8d36c2c29c03d8c21f49587cdd27d90bd06bc01c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 11 09:59:12 2008 +0000

    SCardEstablishContextTH(): also display the system error message if a
    system call fails (can't open PCSCLITE_PUBSHM_FILE)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2728 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit a5cc268c4ac5b6d6d486d807f33070ecfff9fb10 (tag: 1.4.99)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 9 08:58:49 2008 +0000

    release 1.4.99
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2726 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 26e48e3dea33c093e83e22746740bf9629a545d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 3 15:33:48 2008 +0000

    more @PTHREAD_LIBS@ from Libs: to Libs.private:
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2721 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/libpcsclite.pc.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 70ba6dfd3092cbf265ba3642e06108be50accd29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 3 15:13:55 2008 +0000

    add type for ExitValue
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2720 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bf5610c1b5e2cd511d6c06b64b83b37473b395a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 3 14:40:29 2008 +0000

    return EXIT_SUCCESS (instead of EXIT_SUCCESS) if parsing
    /etc/reader.conf fails.
    
    Closes Debian bug #457665
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2719 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 7a536c915fc6ca8846e9d10568146925cb0af616
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 3 14:33:14 2008 +0000

    improve detection of wrong format in reader.conf file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2718 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 2b1f476dc40902d941627be04e7b6601cb62ea7e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 13 21:36:59 2007 +0000

    EHStatusHandlerThread(): remove an unneeded SYS_USleep() before powering
    a card when its presence is detected.
    
    Thanks to Sean Michael Wykes for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2714 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit 9fda52bc6f612c8c0109498b5ffde7ec2ee717c2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 23 08:49:56 2007 +0000

    include call graphs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2710 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.conf.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit db61a23bcb318d5f7672deb58a8f6bdc201f6a8f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 23 08:43:45 2007 +0000

    add missing Doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2709 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 14 ++++----
 src/PCSC/reader.h.in   | 96 +++++++++++++++++++++++++-------------------------
 src/winscard_clnt.c    |  6 ++--
 3 files changed, 57 insertions(+), 59 deletions(-)

commit e981886a52eefc01a6b2ce088d6c7bb4572aea06
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 22 14:42:19 2007 +0000

    improve Doxygen documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2708 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 191 +++++++++++++++++++++++++++++++++-------------------
 1 file changed, 121 insertions(+), 70 deletions(-)

commit c1210e96468c79e7d85bb4a99171e4ebcd1aced9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 17 20:02:55 2007 +0000

    use uint32_t instead of int32_t for rv type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2707 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)

commit c9d7762de794f594e2d62bb19bda6e9b1f043cb2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 17 20:01:43 2007 +0000

    use LONG instead of int for rv in test_rv()
    The type was wrong on amd64 since the sign was extended
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2706 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fe9b41a461f0bce44a2239bf9e0ca1fa8044f7aa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Nov 17 20:00:01 2007 +0000

    only display the result of SCardControl() if it succeeded
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2705 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3ecc341d1cbb2b98eb84f86ce3dcb5e9f309d55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 9 13:33:59 2007 +0000

    typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2681 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c124456835d5d5216d5c2b1a795fd8e738df3c65
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 8 16:17:30 2007 +0000

    2 typos
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2680 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1b889bf1113d42cf55d902651eeaca570c077415
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 1 16:14:13 2007 +0000

    main(): create PCSCLITE_IPC_DIR _before_ writing PCSCLITE_RUN_PID
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2678 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

commit df05778d23d9845dd09ca39416fc1d9444f665a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 09:32:53 2007 +0000

    main(): do not create the PCSCLITE_IPC_DIR directory with write
    permission for group and other
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2663 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 5b2ecdd4f2aed3b34e143a4509bfb8ce2347b2f7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 09:14:24 2007 +0000

    check more prototypes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2662 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 1 +
 1 file changed, 1 insertion(+)

commit 9657eb4d7dcb4091b5592b8f8532b7c153a317a6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 09:13:16 2007 +0000

    winscard.c:660: warning: declaration of 'dwAtrLen' shadows a previous
    local
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2661 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9eda47fa306edc1b4ad5460fc11aad7ad3b56036
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 09:11:23 2007 +0000

    use (void) instead of () for function declaration
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2660 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 12 ++++++------
 src/ifdwrapper.c      |  4 ++--
 2 files changed, 8 insertions(+), 8 deletions(-)

commit 4fd6284fce0b3d67efc77bc69f7ea2241f994e9f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 09:08:58 2007 +0000

    pcsc_stringify_error(): argument is const
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2659 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 src/error.c            | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 40673c7dfd5713981f63ce6011574949797939e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 09:04:18 2007 +0000

    ignore pcsc-wirecheck, pcsc-wirecheck-dist.c, pcsc-wirecheck-gen and
    tags
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2658 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit ad7f36135993bc1dd53770c0b7687fe8af5c4389
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 18 08:58:37 2007 +0000

    call ./configure with nice arguments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2657 0ce88b0d-b2fd-0310-8134-9614164e65ea

 c.sh | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 342322ee5817692f6d5cc3566fc7d9e94675ce03
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 16 14:23:20 2007 +0000

    SYS_ThreadCancel() arg is a PCSCLITE_THREAD_T instead of a
    PCSCLITE_THREAD_T *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2654 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_generic.h | 2 +-
 src/thread_unix.c    | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 2029b7616370122bb685a55e53fb89fe54b5500c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:40:59 2007 +0000

    the SCardReconnect performance problem has been (partly) solved in
    revision 2385
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2647 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 3 ---
 1 file changed, 3 deletions(-)

commit 76cc026e3cd598617e9aad3fb98ef8f235b17864
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:36:35 2007 +0000

    update date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2646 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 31b7d3c7017bf5d706a838de131c448d63045fbe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:35:42 2007 +0000

    bug #303790 is now solved
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2645 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO         | 4 ----
 configure.in | 2 +-
 2 files changed, 1 insertion(+), 5 deletions(-)

commit 96586b590d4d1bb3ac64f532fea1e3b3af4e7843
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:30:12 2007 +0000

    use @ipcdir@ instead of @runpid@
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2644 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit d357b857cd62d4196e831a243d643a34c61891b9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:29:51 2007 +0000

    remove --enable-runpid=FILE option since it was not supported to NOT use
    a runpid file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2643 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 17 +----------------
 1 file changed, 1 insertion(+), 16 deletions(-)

commit ef2f8f8b6c6253678906a23455e7b56692025598
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:28:20 2007 +0000

    use PCSCLITE_RUN_PID instead of USE_RUN_PID
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2642 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 14 +++++++-------
 src/utils.c      |  5 +++--
 2 files changed, 10 insertions(+), 9 deletions(-)

commit 7b5f2e089ac7eec14b7bea82664759a46dd94b83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 09:27:53 2007 +0000

    define PCSCLITE_RUN_PID as PCSCLITE_IPC_DIR "/pcscd.pid"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2641 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 +
 1 file changed, 1 insertion(+)

commit 3430bc0e3b5b998a67a8db3bace76fb3f6283ecd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 08:46:05 2007 +0000

    default ipcdir is /var/run/pcscd instead of /var/run so the directory
    can be shared locally between 32/64 bits systems on chroots
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2640 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8daaa222760e2e8eb5d0b933bf01b9703973ce4c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 08:37:33 2007 +0000

    iREADER_STATE: remove the unused dummy field
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2639 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.h | 1 -
 1 file changed, 1 deletion(-)

commit e6aecfca34a1ca7dc7865856149d453625bac9a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 08:36:39 2007 +0000

    increase readername len from 50 to 100 since we now support longer
    reader names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2638 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 568408efead50fd36ab34d4d2ba398f2809d282e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 08:23:38 2007 +0000

    increase MAX_READERNAME from 52 to 100
    
    Closes bug [#304481] increase MAX_READERNAME from 52 to 100
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2637 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 35c8f4244a605fb3993d0984bc07a1be518b947b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 11 08:15:43 2007 +0000

    RFAddReader(): also count the length of " 00 00" in the reader name
    when rejectecting reader names too long
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2636 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 9670e9e76acf7f95a54c2efc2873d8cb6fd0d684
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 9 15:01:07 2007 +0000

    add support of mix 32/64 bits platforms. Closes bug [#303790] pcscd
    protocol depends on word size; breaks 32-bit clients with 64-bit server
    
    Thanks to Jacob Berkman for the big patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2635 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am           |  34 +++++-
 src/eventhandler.c        |  20 +++-
 src/eventhandler.h        |  14 ++-
 src/lassert.h             |  35 ++++++
 src/pcsc-wirecheck-gen.c  | 279 ++++++++++++++++++++++++++++++++++++++++++++++
 src/pcsc-wirecheck-main.c |   8 ++
 src/pcscdaemon.c          |   2 +-
 src/readerfactory.c       |  10 +-
 src/winscard.c            |  27 +++--
 src/winscard_clnt.c       |  34 +++---
 src/winscard_msg.c        |  19 ++--
 src/winscard_msg.h        | 199 +++++++++++++++++----------------
 src/winscard_msg_srv.c    |   6 +-
 src/winscard_svc.c        | 116 +++++++++++++++----
 src/winscard_svc.h        |   2 +-
 15 files changed, 633 insertions(+), 172 deletions(-)

commit eccf5ed3712ba1a9e1af55cc9ceb77da470f2f60
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 9 14:37:58 2007 +0000

    remove an extra space
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2634 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5942f1c021312ded92fb3025f4fcd8370691c3bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 3 13:53:06 2007 +0000

    display time delta between two lines of logs when printed to stderr
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2633 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 25 ++++++++++++++++++++++++-
 1 file changed, 24 insertions(+), 1 deletion(-)

commit f10cf3d1fb11b2495fe253decc737dedfbfe239f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 17 09:16:00 2007 +0000

    use NULL instead of 0 for a char *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2625 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e7c300c937469cd89a6fb382f3c81e11899567c2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 26 14:58:02 2007 +0000

    rename ChangeLog.cvs in ChangeLog.svn
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2623 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 7731a9acba14d5713439b5f1aba11f22428bdf3f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 26 14:56:19 2007 +0000

    ignore reader.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2622 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 3ecee8011f581b2390a441f7eb1e254e90b6227f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 26 14:55:49 2007 +0000

    ignore pcscd.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2621 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 3e78fc88a63a74858d6780162144faff4b927b33
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 26 14:54:35 2007 +0000

    ignore doxygen.conf, api & update-reader.conf.8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2620 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 73fae043f60c9caaaf120443a3c13cac190cd181
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 22 12:12:39 2007 +0000

    RFLoadReader(): change the log message from a scary "Warning" to a more
    informative one
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2618 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit c6c27d169f9042f6c6e47fac5a6835e1f917529b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 20 07:44:32 2007 +0000

    SYS_ThreadCreate(): call pthread_attr_destroy() to free memory allocated
    by pthread_attr_init()
    
    Thanks to Paul Klissner for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2615 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 0a9be1c3882ebde19c9b84e65e8cd94da169ba9d (tag: 1.4.4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 14 17:23:17 2007 +0000

    release 1.4.4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2614 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 10 ++++++++++
 configure.in |  2 +-
 2 files changed, 11 insertions(+), 1 deletion(-)

commit e6b208c34240087ef6345bd6345a69a3b1b8eb1d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 13 07:13:30 2007 +0000

    use SCARD_PROTOCOL_UNDEFINED instead of SCARD_PROTOCOL_UNSET
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2613 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c   |  8 ++++----
 src/eventhandler.c | 16 ++++++++--------
 src/winscard.c     | 14 +++++++-------
 3 files changed, 19 insertions(+), 19 deletions(-)

commit 2366689d9cb03f901c2a8821f67e5c673a377e0e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 13 07:12:35 2007 +0000

    rename SCARD_PROTOCOL_UNSET to SCARD_PROTOCOL_UNDEFINED to reflect the
    Windows winscard API
    SCARD_PROTOCOL_UNSET is still defined for backward compatibility
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2612 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 609845bf4c9985c972cd57f671a5c555d57d8702
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 8 14:35:57 2007 +0000

    HPEstablishUSBNotifications(): make the log message more explicit when
    the driver does not support IFD_GENERATE_HOTPLUG (it is not an error)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2611 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6734e1be2914a2af20af82982006409f5c18e7a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 2 11:38:15 2007 +0000

    update IFDHPowerICC() documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2601 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit e9475d8023484c8e86a39ab2de0d2a173e085b0a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 5 10:04:08 2007 +0000

    do not call a Log function in a signal handler and do hotplug
    synchronously. See Debian bug #430492
    
    Thanks to Russell Stuart for the bug report and patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2598 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 37 ++++++++++++++++++++++++++++++++-----
 src/pcscdaemon.c     | 14 --------------
 2 files changed, 32 insertions(+), 19 deletions(-)

commit 94622c16e1db5b166076af16e59c65016c00867d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 3 15:12:42 2007 +0000

    correct version number for 1.4.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2595 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a146fc68cbd4a3abc7adc80d4be657778f2eff4f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 2 15:13:08 2007 +0000

    use PCSC_ERROR() also for the second SCardListReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2594 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit f68dd1d8ebe92cebb00916d6ff38e7850e83c946
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 2 13:00:57 2007 +0000

    update version
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2589 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 00cf10b8af1c7814948cc2b4ea0df05776ee5614
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 2 12:59:51 2007 +0000

    use PCSC_ERROR() for SCardListReaders() call
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2588 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

commit 20ac94d134d78d438910bd9e3b75ac1ac12c3477
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 2 12:58:50 2007 +0000

    update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2587 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 673c113369c8e95907d119ecff908dff0bfc2126
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 2 12:58:20 2007 +0000

    do not free unallocated resources
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2586 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 9889494792261bd3ac80a9c06ebfdf47aa8eee29
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 25 12:28:18 2007 +0000

    Add LSB comment block
    See http://refspecs.freestandards.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/initscrcomconv.html
    
    Thanks to Ville Skytt√§ for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2580 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.init.in | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit e525e1abeaf1dcc894c6c088091d0af07a419687
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 23 19:59:55 2007 +0000

    dynamically generate update-reader.conf.8 by ./configure
    
    Thanks to Klaus Heinz. Closes: [#304518] update-reader.conf.8 should be
    created from update-reader.conf.8.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2578 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in                | 1 +
 doc/update-reader.conf.8.in | 8 ++++----
 2 files changed, 5 insertions(+), 4 deletions(-)

commit 96442711703f6b660050f0a0fe7b9229cda1b436
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 23 19:58:04 2007 +0000

    distribute update-reader.conf.8.in instead of update-reader.conf.8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2577 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a4ca2a46811f287bfd35d1564b8fc7d0d252b3b4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 23 19:54:14 2007 +0000

    rename doc/update-reader.conf.8 in doc/update-reader.conf.8.in since
    ./configure with generate doc/update-reader.conf.8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2576 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/{update-reader.conf.8 => update-reader.conf.8.in} | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit a3c1c05f52303a175d70b749ad549d8b2864d2ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 23 19:51:29 2007 +0000

    remove 3 unused AC_PATH_PROG(TEST_MINUS_S_SH, *) lines
    
    Thanks to Klaus Heinz. Closes: [#304517] Check for bash/ksh/sh and
    variable TEST_MINUS_S_SH not necessary anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2575 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 ---
 1 file changed, 3 deletions(-)

commit 0110608216890c246eee73376583ae6337825122
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 21 12:20:45 2007 +0000

    replace 0 by NULL
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2574 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7c2ba9884a3b216c5b5cdd65cab3f43a8e195729
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 21 12:17:28 2007 +0000

    add AM_PROG_CC_C_O as requested by:
    doc/example/Makefile.am:4: compiling `pcsc_demo.c' with per-target flags
    requires `AM_PROG_CC_C_O' in `configure.in'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2573 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 79c374d18770f0d996b0efdcfbd5649fd185dd7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 20 07:24:35 2007 +0000

    Solaris, like Max OS X, does not support pack(push, 1). Use pack(1)
    instead
    
    Thanks to David Markowitz
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2572 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5764bf72c25a23671e8f421eb0e02bfbbf508650 (tag: 1.4.3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 19 19:10:35 2007 +0000

    release 1.4.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2570 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 8 ++++++++
 configure.in | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 1a905d0267fa9fdf5979bfed3d7e45d2ceb42114
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 19 19:10:19 2007 +0000

    move definitions of SCardLockThread() and SCardUnlockThread() at the
    beginning of file and remove their declarations
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2569 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 43 ++++++++++++++++++++-----------------------
 1 file changed, 20 insertions(+), 23 deletions(-)

commit 125b2a154269b9b13f1ca45bc8e51b8803fefc02
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 19 12:37:13 2007 +0000

    SVCServiceRunLoop(): do not exit is CreateContextThread() fails. Avoids
    a denial of service.
    
    Thanks to Joshua J. Drake
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2568 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ----
 1 file changed, 4 deletions(-)

commit f729153550cb9411f15c013e6a82f4e431f35f44
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 18 14:44:57 2007 +0000

    SCardStatus(): check for hCard == 0
    
    Thanks to Joshua J. Drake for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2567 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +++
 1 file changed, 3 insertions(+)

commit 957b640c352a615788943d9474729ac5559a92b4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 17 16:48:47 2007 +0000

    replace PCSCLITE_MAX_MESSAGE_SIZE by sizeof(msgStruct.data)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2565 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit e15c1a664e705dcf0a21be7d5e90986fed803c11
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 17 16:47:19 2007 +0000

    patch in revision 2535 was not correct for exteneded APDU. It generated
    a buffer overflow.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2564 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 90f9f106978b0cf04cac7a900108844e88e8e0f7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 17 12:10:55 2007 +0000

    use EXIT_FAILURE instead of 1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2563 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8b2510e3000c8d19f37d26b41cc4c666dea065c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jun 17 11:53:37 2007 +0000

    typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2562 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52a77a918e3d5b2d7608c4dddfbbf22eadc45fbb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 13 12:48:12 2007 +0000

    use NULL instead of 0 for pointers (detected by sparse)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2561 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 10 +++++-----
 src/pcscdaemon.c     | 24 ++++++++++++------------
 src/readerfactory.c  | 16 ++++++++--------
 3 files changed, 25 insertions(+), 25 deletions(-)

commit 96a69f5d0c5e57be47cc2041351ca57a7983dead
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 13 12:47:21 2007 +0000

    do not use inline for SCardLockThread() and SCardUnlockThread()
    declaration but only for definition (detected by parse)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2560 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0f486b64c95c8f658b93df1aad3024f83c46aee6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 13 12:44:36 2007 +0000

    add a missing #include <wintypes.h> (detected by sparse)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2559 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_generic.h | 1 +
 1 file changed, 1 insertion(+)

commit a6113af57300312880cb43aa65196cbff07b6af7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 13 12:35:37 2007 +0000

    EHStatusHandlerThread(): use SYS_ThreadExit(NULL) instead of
    SYS_ThreadExit(0) (detected by sparse)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2558 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ebc1a21c0045f417e8d354339554056f33b1f27e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 5 06:52:59 2007 +0000

    RFLoadReader(): use INFO instead of ERROR log level is the same driver
    library is use twice. It is not an error.
    
    Thanks to Nils Larsch for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2556 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 049767f239bd5f21e89bdd685ca4ed4fa4bcc373
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 30 09:44:22 2007 +0000

    declare prototypes of debug_msg() and debug_xxd() to avoid
    debuglog.c:265: warning: no previous prototype for ‚Äòdebug_msg‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2555 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 ++
 1 file changed, 2 insertions(+)

commit fcdadf1d0922b23a66c423d354a50c281af9c7d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 30 09:41:49 2007 +0000

    HPRemoveHotPluggable(): rename index to reader_index to avoid
    warning: declaration of ‚Äòindex‚Äô shadows a global declaration
    /usr/include/string.h:304: warning: shadowed declaration is here
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2554 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 646ff6857b9ffad222fb5f5491e69ac324b56017
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 30 09:39:40 2007 +0000

    change prototype of SCardAddHandle() to remove an explicit cast
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2553 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit d22d8311e53e914d70a7c3064186643ee49ad327
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 30 08:57:26 2007 +0000

    SCardEstablishContextTH(): remove a local declaration of msgStruct to
    avoid warning: declaration of 'msgStruct' shadows a previous local
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2552 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit c06e5944ab3deb8ab299f5effb29d6c5afa11981
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 29 13:19:11 2007 +0000

    set the permission on USE_RUN_PID so that the file is world readable.
    The file is used by libpcsclite to check the availability of pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2551 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 19 +++++++++++++++----
 1 file changed, 15 insertions(+), 4 deletions(-)

commit cb9b3e4a8499d4cd84da20114e3991ee7444be6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 29 13:18:09 2007 +0000

    move definition of PID_ASCII_SIZE from utils.c to utils.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2550 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.c | 1 -
 src/utils.h | 1 +
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 3e02ac2e61127dff6d715836e8cf42574fa956fb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 24 09:58:34 2007 +0000

    RFSetReaderEventState(): unlock the card on removal. This will unlock
    any waiting SCardConnect() and SCardReconnect()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2549 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 39bdbcd1db17748fd3916add7a473972a97016e8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 24 08:54:41 2007 +0000

    SCardConnect()/SCardDisconnect(): the reader may be removed while we are
    waiting after a lock. fix a crash of pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2548 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 487029816cabf2217c58ee8ba50dd07e7848c260 (tag: 1.4.2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 16:37:52 2007 +0000

    release 1.4.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2546 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 12 ++++++++++++
 configure.in |  2 +-
 2 files changed, 13 insertions(+), 1 deletion(-)

commit 0b19130917fea0408d13fe741c8dc55682e18178
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 14:27:12 2007 +0000

    SCardDisconnect(): do not block if dwDisposition == SCARD_LEAVE_CARD.
    
    We block only for SCARD_UNPOWER_CARD, SCARD_RESET_CARD and
    SCARD_EJECT_CARD since that would impact other running transactions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2545 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 16a2856a104ef2bf32a2a759280a0b86426909f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 14:19:45 2007 +0000

    lockState field of READER_STATE was not used. Remove it and the
    associated dead code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2544 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 6 ------
 src/eventhandler.h  | 3 +--
 src/readerfactory.c | 2 --
 3 files changed, 1 insertion(+), 10 deletions(-)

commit 49893ad9504640b9b13638a241973dac03b198c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 14:03:46 2007 +0000

    add a Lock counter so that SCardBeginTransaction/SCardEndTransaction can
    be nested
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2543 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 9 ++++++++-
 src/readerfactory.h | 1 +
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 55cefefb3eb3bbb13ac0a3cff43f3a4f71f13a91
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 08:15:36 2007 +0000

    SCardTransmit(): adjust size of data to send to pcscd.
    Avoid a valgrind warnings.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2542 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 003e3ec919c8710656dc885805ecfe702890d671
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 07:34:42 2007 +0000

    no need to initialise pioRecvPci. It is a out only variable
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2541 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 1 -
 1 file changed, 1 deletion(-)

commit 9f9c086561586284016bed700ff168ef193d1eb9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 07:33:14 2007 +0000

    SCardTransmit(): we do not need to correctly initialize
    scTransmitStruct.pioRecvPci since it is only a out variable
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2540 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

commit 98c72893ee3417f9d1a9b44ed82359b96d0b8d39
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 07:28:21 2007 +0000

    #include "utils.h" since we use SCardCheckDaemonAvailability()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2539 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 1 +
 1 file changed, 1 insertion(+)

commit f72747438e3ee8701e918b06e33e2c3ecf8f6b5c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 23 07:27:49 2007 +0000

    move declaration of SCardCheckDaemonAvailability() from winscard_clnt.c
    to utils.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2538 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils.h         | 5 +++++
 src/winscard_clnt.c | 2 --
 2 files changed, 5 insertions(+), 2 deletions(-)

commit 1980611ab1dfec02a3df1f096d549e49179cb28b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 22 15:02:26 2007 +0000

    LPTSTR and LPCTSTR types are no more deprecated since they are found in
    many applications. And using them is not a problem.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2537 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 18 ++++--------------
 1 file changed, 4 insertions(+), 14 deletions(-)

commit f6679ebc81ef55843573252f8df932b5f9317c30
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 22 14:45:57 2007 +0000

    initialise pioRecvPci before using it
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2536 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 1 +
 1 file changed, 1 insertion(+)

commit f65491a856c28735c3d07f282432399621c72bbe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 22 14:44:49 2007 +0000

    Initialize memory to avoid valgrind warnings: Syscall param write(buf)
    points to uninitialised byte(s)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2535 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 35 ++++++++++++++++++++++++++++++-----
 src/winscard_msg.c  |  4 +++-
 2 files changed, 33 insertions(+), 6 deletions(-)

commit 7d76f50ea9b2a6226d6a0ac1dec59e1d1afc513e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 22 13:20:05 2007 +0000

    use sizeof() instead of a constant
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2534 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit e36d353f972c61c650634fc90ecd9a6fba86d59c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 16 11:39:54 2007 +0000

    typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2530 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 896e8bfdf9ad640d71f547c8e722baaaf6d7dff9 (tag: 1.4.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 16 09:55:34 2007 +0000

    release 1.4.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2529 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 20 ++++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 21 insertions(+), 1 deletion(-)

commit 4cf6d4488eebd6ef66e2c57ebdfafa1517396a1b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 15 20:55:20 2007 +0000

    SHMMessageReceive(): on the client side, if the daemon does not respond
    after 2 minutes (PCSCLITE_CLIENT_ATTEMPTS) we call
    SCardCheckDaemonAvailability() to be sure the daemon is still there and
    continue waiting.
    
    Thanks to Harsh Sangal for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2528 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit beeb7610a30b4741ad3bceadfa16fb166fa55a7d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 15 20:53:49 2007 +0000

    export SCardCheckDaemonAvailability()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2527 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b74c63744cd1f84f272aaf224ac708efbf3e0034
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 10 14:45:19 2007 +0000

    do not build and include the pdf documentation files in the archive. The
    html online versions should be enough.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2525 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 96fa2ca9f68847bb5694ebfb752233fb64ad2e30
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 7 09:37:56 2007 +0000

    "poll the reader only if an application is using this reader"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2513 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 69cae13046cf960aa7fa067386b8ba67aa45b36f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 7 09:34:21 2007 +0000

    "do not use an active polling in hotplug_libusb.c" solved using
    IFD_GENERATE_HOTPLUG
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2512 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 5 -----
 1 file changed, 5 deletions(-)

commit a36b1493ee3d5c606309db32595bc9dd87b6f8bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 21 13:51:34 2007 +0000

    USE_IPCDIR is always defined. The default value is set by ./configure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2507 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 4 ----
 1 file changed, 4 deletions(-)

commit 413857712ed0fa61a3eb71dedddabea4bcf47262
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 21 13:48:05 2007 +0000

    use $ipcdir/pcscd.pid as the default value for so that the use of
    --enable-runpid=FILE is not mandatory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2506 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 34 ++++++++++++++++------------------
 1 file changed, 16 insertions(+), 18 deletions(-)

commit f2a3dc06c6b00557772a139e1b376c8c4637180a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 12 09:41:13 2007 +0000

    update copyright dates
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2505 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 0dd442e25badc53a4e490157a2810125e531da7d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 4 09:10:50 2007 +0000

    use of --enable-runpid=FILE is now mandatory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2504 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in     |  2 +-
 src/pcscdaemon.c | 15 ---------------
 2 files changed, 1 insertion(+), 16 deletions(-)

commit a70e1838952e6a76726de5584229efd199c8efdd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 4 09:03:01 2007 +0000

    add a prototype for test_rv() to avoir a compiler warning: no previous
    prototype for ‚Äòtest_rv‚Äô
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2503 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 1 +
 1 file changed, 1 insertion(+)

commit 465c089ec328f6f16554df9cd1dca2f65535a1ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 4 08:57:35 2007 +0000

    client and server use utils.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2502 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit 505314a3bd54b95af76a9cdc944f89c4117c197c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 4 08:57:11 2007 +0000

    SCardCheckDaemonAvailability(): when the _first_ reader is connected
    _after_ pcscd has started the ctime of PCSCLITE_PUBSHM_FILE changes (no
    idea why)
    
    So to be sure a new pcscd is running we also check the pcscd pid
    available from USE_RUN_PID
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2501 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 43 ++++++++++++++++++++++++++++++-------------
 1 file changed, 30 insertions(+), 13 deletions(-)

commit c327d5ad30109f8436f3a8e4ac68902819cbca47
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 4 08:51:42 2007 +0000

    move GetDaemonPid() in utils.c so we can also use it elsewhere
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2500 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 32 +-------------------------------
 src/utils.c      | 53 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/utils.h      | 16 ++++++++++++++++
 3 files changed, 70 insertions(+), 31 deletions(-)

commit b19dddb3e156b9163f910c92b5642c4e66c423a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 29 14:05:22 2007 +0000

    SCardGetStatusChange(): do not release the mutex if it does not exist
    anymore after a pcscd restart
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2499 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6f86e87efa2d2eb983facf6c3f115dcb36bb8a73
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 28 16:35:06 2007 +0000

    SCardGetStatusChange(): do not check for SCARD_STATE_ATRMATCH,
    SCARD_STATE_EXCLUSIVE or SCARD_STATE_INUSE bits when the card is not
    present.
    
    Thanks to Matheus Ribeiro for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2497 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 1161e226baaf0a0ef30373d6e24471961a5a70d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 28 08:20:59 2007 +0000

    SCardGetStatusChange(): add a counter in the upper word of dwEventState
    so it is possible to detect a card movement betweeen two calls to
    SCardGetStatusChange()
    
    Thanks to Matheus Ribeiro for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2496 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 14 ++++++++++++++
 src/winscard_clnt.c | 15 +++++++++++++++
 2 files changed, 29 insertions(+)

commit 70a07f8906e8ac67dcca49d539f6afeb71a39d68
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 27 12:21:38 2007 +0000

    use pcscd.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2495 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 1 +
 1 file changed, 1 insertion(+)

commit c8f7d3eb765add8d831623d2f9c0bddba21a9429
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 27 12:17:53 2007 +0000

    use pcscd.h when needed.
    
    Thanks to Yziquel Guillaume for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2494 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c  | 2 +-
 src/powermgt_macosx.c | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit f5a9bb9ce13c39821376e90e342dfaf4ebba6372
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 22 20:10:39 2007 +0000

    typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2490 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6704083ebaa3d959c132ed852eb9cf4837761718
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 18 20:51:50 2007 +0000

    print sent & received APDU
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2486 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 26 +++++++++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)

commit 82f0c257d234681ecfeb1e998f40360dd84b349c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 15 08:29:14 2007 +0000

    WrapSHMWrite(): clean the data buffer for SCardTransmit() to clean the
    APDU buffer to remove any possible PIN or secret value
    
    Thanks to Nils Larsch for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2482 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit b1015b701dd04bf988bfe4f09194e331059829f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 15 08:23:07 2007 +0000

    move definition of min() from winscard_clnt.c to misc.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2481 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h          | 4 ++++
 src/winscard_clnt.c | 4 ----
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 770c586a59bed9f6069a58f2d76fb1af4e6375e3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 13 09:46:43 2007 +0000

    profiling: more explicit warning in case of thread
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2479 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit 77f5588aa331c7c0bc1886f9fda51cb5be074d43
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 13 08:56:30 2007 +0000

    profiling: the mechanism does not work correctly when threads are used.
    Display warnings in that case.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2478 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 696939168e9be4d626e443f8154a46586e10a51d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 13 08:29:08 2007 +0000

    profiling: detect missing PROFILE_END calls
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2477 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

commit e7f1afa3153af546156ef9b10089801dde937b55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 13 08:11:58 2007 +0000

    profiling: display the return value if different from SCARD_S_SUCCESS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2476 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 77 ++++++++++++++++++++++++++++++++---------------------
 1 file changed, 46 insertions(+), 31 deletions(-)

commit 8ee4394f0beaddcd1cc20d16f485b590d4f79016
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 13 08:10:25 2007 +0000

    SCardReconnect(): block instead of returning SCARD_E_SHARING_VIOLATION
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2475 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 49 ++++++++++++++++++++++++++-----------------------
 1 file changed, 26 insertions(+), 23 deletions(-)

commit 99ff329069c05490977c5f3e400dfe87d69ece88
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 12 10:39:29 2007 +0000

    define RESPONSECODE type only if RESPONSECODE_DEFINED_IN_WINTYPES_H is
    not defined (needed to compile the driver with an old pcsc-lite)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2474 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 ++
 1 file changed, 2 insertions(+)

commit 0f0b24904eebc00fedd7940607eea1eadd3b5dd5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 17:26:31 2007 +0000

    CreateContextThread(): avoid a buffer overflow if no more context
    available
    
    thanks to Petr Gajdos for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2467 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 --
 1 file changed, 2 deletions(-)

commit 5f5ccb105a7fcfe21944a0895c9f2434b82113a6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 10:41:29 2007 +0000

    improve Doxygen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2466 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 68dac4b465e463bd12c29468b11e4edf569784b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 09:16:24 2007 +0000

    when we are waiting for a card insertion a reader may be
    connected/disconnected so SCardGetStatusChange() will return but a card
    is not inserted
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2465 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 863bd38062242af12d84a592d6f7e203cfa0e940
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 08:49:38 2007 +0000

    SCardCheckDaemonAvailability(): if the daemon is restarted we invalidate
    all the existing handles so SCard functions returns
    SCARD_E_INVALID_HANDLE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2464 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 26 +++++++++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)

commit 20e438efe3bb9a5d7fc071d80b24a445fec29d00
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 08:47:53 2007 +0000

    add prototype for SCardUnload()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2463 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit adcf59a90d7ca05362ae4e24857f037a47146d6e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 08:46:32 2007 +0000

    move code from SCardRemoveContext() to a new function
    SCardCleanContext() and call it from SCardRemoveContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2462 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 40 ++++++++++++++++++++++------------------
 1 file changed, 22 insertions(+), 18 deletions(-)

commit 624b0387b7fed97270047692683e2a532b19e393
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 08:35:45 2007 +0000

    move call to SCardCheckDaemonAvailability() from
    SCardEstablishContextTH() to SCardEstablishContext() to move it oustide
    of SCardLockThread()/SCardUnlockThread() since
    SCardCheckDaemonAvailability() may also lock (and then deadlock)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2461 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 65c7dda9ed8cc3b44b4dd2dc255c7c3fe56537bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 08:30:59 2007 +0000

    Oops. pcscd.h.in is already in SVN
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2460 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h | 83 -------------------------------------------------------------
 1 file changed, 83 deletions(-)

commit f9268e45ad3c884eaca56b551a63515149395f35
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 6 08:29:28 2007 +0000

    new file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2459 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h | 83 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 83 insertions(+)

commit ea22641fd7a15d82bcecc49e2ed000be7f855891
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 5 14:38:34 2007 +0000

    SCardIsValidContext(): return SCARD_E_INVALID_HANDLE if the daemon has
    been restarted
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2458 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 66b6077813bcf4bc5b34b8ef529baf6497962f8a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 5 14:37:05 2007 +0000

    SCardCheckDaemonAvailability(): detects if pcscd has been restarted and
    returns SCARD_E_NO_SERVICE in that case
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2457 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit e5fa57b3a8485c096b0667922cba82797ec77f6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 26 14:48:27 2007 +0000

    SCardEstablishContextTH(): call fcntl(mapAddr, F_SETFD, FD_CLOEXEC); to
    close on exec the file descriptor on /var/run/pcscd.pub so that child
    processes do not inherits it. The child process will call
    SCardEstablishContext() if needed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2449 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 8b35f3ed7f426fd79d2bf1d071774340d9693ef6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Feb 25 19:48:49 2007 +0000

    the comment about LPTSTR was wrong
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2447 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eb83cf5888de7c2e7f1025a2fa757fa9acc6ee79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 21 22:13:47 2007 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2419 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 38 +++++++++++++++++++++-----------------
 1 file changed, 21 insertions(+), 17 deletions(-)

commit e2e173aec54e45922afa28b370f82c07ade7f3df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 21 22:11:32 2007 +0000

    HPReadBundleValues(): ignore driver with readerName == NULL (non-ASCII
    readerName in Info.plist for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2418 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit c93062031f6a66af6c67f5cb6b0ca6ec533d1959
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 19 09:16:29 2007 +0000

    SYS_USleep(): use select() instead of usleep() if nanosleep() can't be
    used. usleep() is not thread safe on some old Solaris systems.
    
    Thanks to Nils Larsch for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2403 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 84b9436cc34f7d85580546e734698d6d8c13a1d7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 17 16:07:29 2007 +0000

    support --docdir=... to install documentation files
    
    Thanks to Alon Bar-Lev for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2401 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit e6117ab2734c4548b6003fd874daf1a6a6157de2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Feb 17 15:04:03 2007 +0000

    add a log_line() function and use it form log_msg() and log_xxd() to
    also have colors in log_xxd()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2400 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 432796c9a72f827d28528e316b2b29d14d43d7dd (tag: 1.4.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 13 20:26:17 2007 +0000

    release 1.4.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2397 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 18 ++++++++++++++++++
 configure.in |  2 +-
 2 files changed, 19 insertions(+), 1 deletion(-)

commit 57f394b3cd29d226e009a69a7739e99ca126bda6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 13 09:19:32 2007 +0000

    only check for foo.h file when HAVE_FOO_H is really used in the code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2394 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f8f9a960f533ac917bfedc7b49b66b8e11244be
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 20:29:59 2007 +0000

    use SCARD_SCOPE_USER instead of the pcsc-lite specific SCARD_SCOPE_GLOBAL
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2388 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd67ed480f4da9b681d09d532049170fddcc93ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 17:10:26 2007 +0000

    ChangeLog.svn: use svn2cl instead of svn2cl.sh
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2386 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 51263ad71d6fdbb127b0200eff36c48c138eff80
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:55:01 2007 +0000

    SCardReconnect(): call SYS_USleep() to "allow the status thread to
    convey information" only if the application requests SCARD_RESET_CARD or
    SCARD_UNPOWER_CARD.
    We do not wait if the application requests SCARD_LEAVE_CARD.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2385 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit e3c8d05ccae0a803e5ab8e44c91548f07f0ab95e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:47:51 2007 +0000

    SCardDisconnect(): call SYS_USleep() to "allow the status thread to
    convey information" only if the application requests SCARD_RESET_CARD or
    SCARD_UNPOWER_CARD.
    We do not wait if the application requests SCARD_LEAVE_CARD.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2384 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit e8f4e8ab2121f35ac71f10c8d73a59ff4658615f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:36:50 2007 +0000

    use unsigned int i; instead of int i; to avoid a compiler warning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2383 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 558c5623a6d2e0748566f94960ca78206ccc8dfe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:35:31 2007 +0000

    add SCardBeginTransaction() & SCardEndTransaction
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2382 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 982d70b9b4f2df79417435a333f64b6c01e4b80e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:34:36 2007 +0000

    use SCARD_SHARE_SHARED instead of SCARD_SHARE_EXCLUSIVE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2381 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 61f5b5c73767e24bd9f985ec6f97eb570fa9f29c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:32:11 2007 +0000

    add pcscd.h and pcscd.h.in to pcscd_SOURCES:
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2380 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 3269641bd8503770c1dffc37b78551bfb4b6a39b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:27:50 2007 +0000

    SCardBeginTransaction(): document the SYS_USleep() call
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2379 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +++
 1 file changed, 3 insertions(+)

commit caff221d739e56849d1d206f5faa21a7df2991b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:16:18 2007 +0000

    define and use PCSCLITE_LOCK_POLL_RATE as SYS_USleep() argument when
    waiting after a lock
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2378 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscd.h.in | 1 +
 src/winscard.c | 6 +++---
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 2b4d4d3f90d2e9fb5235c6e6836ad4d501567fdb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:13:56 2007 +0000

    use pcscd.h instead of pcsclite.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2377 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l       | 2 ++
 src/eventhandler.c     | 2 +-
 src/hotplug_libusb.c   | 3 ++-
 src/ifdwrapper.c       | 2 +-
 src/pcscdaemon.c       | 1 +
 src/prothandler.c      | 2 +-
 src/readerfactory.c    | 2 +-
 src/winscard.c         | 2 +-
 src/winscard_clnt.c    | 2 +-
 src/winscard_msg.c     | 2 +-
 src/winscard_msg_srv.c | 2 +-
 src/winscard_svc.c     | 2 +-
 12 files changed, 14 insertions(+), 10 deletions(-)

commit 029a5804bd3ed61e6d07c4e9e751c9f365bead08
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:12:56 2007 +0000

    generate src/pcscd.h from src/pcscd.h.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2376 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 1a59350afa4d5f93dc6a0b906d95d61e021d256d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 13:12:18 2007 +0000

    move pcscd internal constants from pcsclite.h to pcscd.h so they are no
    more available in /usr/include/pcsclite.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2375 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 52 --------------------------------
 src/pcscd.h.in         | 82 ++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 82 insertions(+), 52 deletions(-)

commit b7654e09e25cdb255321a6bdb17af38e30d83405
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 09:41:09 2007 +0000

    SCardBeginTransaction() client and server side: call SYS_USleep() on the
    server side insead of client side and only if needed.
    SCardBeginTransaction() will be much faster
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2374 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c      |  2 ++
 src/winscard_clnt.c | 24 ------------------------
 2 files changed, 2 insertions(+), 24 deletions(-)

commit 7f75a877641104cc77196d2dd403c30134b2fa80
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 09:38:30 2007 +0000

    profile_end(): call fflush() to sync the profile file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2373 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit ce2f3f0922667efacc87f23f3eb32d7c84d9dfef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 09:27:49 2007 +0000

    SCardBeginTransaction(), SCardEndTransaction() and
    SCardCancelTransaction(): display PC/SC return value in hex instead of
    decimal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2372 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8cc1cba5bfe6a991c32f61dae126534778eb19d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 5 09:10:45 2007 +0000

    profile_start(): use a different profile file name for each user so two
    users can use profiling at the same time
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2371 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 5679b080aa46850a6c049859bab9a067814d483d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 31 13:09:40 2007 +0000

    HPEstablishUSBNotifications(): do not overwrite the value specified with
    --force-reader-polling=val
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2370 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit b26386b62f0ae09654f2f4b3d93ddddfa0107944
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 31 09:19:30 2007 +0000

    HPEstablishUSBNotifications(): USB polling was not active even if a driver
    does not support IFD_GENERATE_HOTPLUG
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2369 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f3e6bfef891b59168fd4c6329d31cec750c6917
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 31 09:18:04 2007 +0000

    add profiling framework on the server side
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2368 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 90 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 90 insertions(+)

commit bf31f6d5afab502387f17b0f5b0aaecf90ffa881
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 31 09:08:11 2007 +0000

    RFInitializeReader(): add debug logs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2367 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++++
 1 file changed, 4 insertions(+)

commit d2d02ed1ece514330df6ca1c01a3f83bed1af9ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 23 17:29:41 2007 +0000

    do not install formaticc.1 manpage since the binary is no more installed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2354 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 96e1438fafade71f3573c9ab107d68eb79b1293a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 23 10:31:50 2007 +0000

    SYS_USleep(): also work for a duration greater than 1 sec
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2353 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6d2a49c61727c897ef15d7588675aa09f72d40bf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 23 08:50:31 2007 +0000

    FreeBSD needs to timeout in select() to get the Ctrl-C signal
    Revert revision 2148 and 2149 for *BSD
    
    Thanks to Tilman Linneweh for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2352 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       |  8 ++++++++
 src/winscard_msg_srv.c | 21 ++++++++++++++++++++-
 2 files changed, 28 insertions(+), 1 deletion(-)

commit ddb00f636ebdec5e065acd534bb9f9d0ba0dc7c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 20 15:45:44 2007 +0000

    EHStatusHandlerThread(): also display the hexa value of the return code
    if power up fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2350 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9bf21f4239d39b4cafa1842903cf9f818d880c88
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 20 15:44:56 2007 +0000

    SCardConnect(): return SCARD_W_UNPOWERED_CARD if the card is mute
    instead of returning SCARD_E_PROTO_MISMATCH because the requested
    protocol is not supported by the (mute) card
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2349 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 4d220eeed3cef6112184fd8749c548925a29d438
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 20 15:12:19 2007 +0000

    move RESPONSECODE definition from wintypes.h to ifdhandler.h since it
    should only be used as return type of IFDHandler functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2348 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 ++
 src/PCSC/wintypes.h   | 1 -
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 471b461fbbdbabc07ab16365f27215a69563c885
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 20 15:04:31 2007 +0000

    use IFD_SUCCESS instead of 0 as initial value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2347 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 27 +++++++++++++++------------
 1 file changed, 15 insertions(+), 12 deletions(-)

commit 232475f0616287ba70f757ecb7fff5761d6fb8c9 (tag: 1.3.3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 19 19:47:00 2007 +0000

    release 1.3.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2343 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit f9b9ecd27038c13d23b17aa0a6f7faa5ab231162
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 19 14:52:32 2007 +0000

    use the default Doxygen CSS file instead of a (bad) local one
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2341 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f63187bdd89f7a449c61851ef1bb2e5bea9e6fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 18 09:56:57 2007 +0000

    do not reference formaticc since this tool is deprecated and no more
    installed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2340 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 1 -
 1 file changed, 1 deletion(-)

commit 57a41db5b591b2be065549ffcaa7d730bdbc87d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 18 09:54:13 2007 +0000

    document --hotplug option
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2339 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit ee76f6d2edb8ae1d301f358a6c9268400b695588
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 11 18:05:12 2007 +0000

    document --force-reader-polling in the online help
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2335 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit e87e0c192e95243c8f81aa56f8f76adcb978f9bb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 11 17:58:43 2007 +0000

    add --force-reader-polling command line option to force the bus polling
    even if the drivers says they support IFD_GENERATE_HOTPLUG
    
    Thanks to Alon Bar-Lev for the suggestion
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2334 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 10 +++++++++-
 src/pcscdaemon.c     |  9 +++++++++
 2 files changed, 18 insertions(+), 1 deletion(-)

commit a03b0b1cf3847f430683c8c6a2fe220c8e71e31b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 11 17:56:32 2007 +0000

    define OPT_STRING to avoid duplicating the getopt option string
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2333 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 6e2975f75f4134535e49dc211f96829c9c0ef8eb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 11 17:55:34 2007 +0000

    newReaderConfig is a char * so use NULL instead of 0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2332 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fe3c806ff4fd6a5d14ebf6aa93e363c43fe2d10e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 11 16:54:51 2007 +0000

    DBGetReaderList() prototype: use const char *readerconf instead of char
    *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2331 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.h | 2 +-
 src/configfile.l | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 9dbfeab6ff4cc9c27d6cb63b9388ca9235b3a473
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 11 16:54:16 2007 +0000

    RFStartSerialReaders(): use const char * instead of char *
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2330 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 src/readerfactory.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit c15779f0036c9212d0d74118656d28d05a040332
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 10 20:48:29 2007 +0000

    log "pcscd was not configured with --enable-runpid=FILE" if pcscd
    --hotplug is called but can't be used because no pidfile is available.
    
    Thanks to Alon Bar-Lev for the idea.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2327 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 +++
 1 file changed, 3 insertions(+)

commit 6398a235c89b779abf52850df2f05c64af15c74c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 10 09:57:33 2007 +0000

    improve code to be able to also use T=1 cards
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2325 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 22 ++++++++++++++++++----
 1 file changed, 18 insertions(+), 4 deletions(-)

commit 5dd0a018af4e2275bd6da088e13e421b8f6ccc8d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 10 09:41:13 2007 +0000

    add IFD_GENERATE_HOTPLUG documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2324 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 124 +++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 106 insertions(+), 18 deletions(-)

commit 64d7edd75cef6d9bca8b90c0df228bc0dadf5565
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 10 08:12:32 2007 +0000

    add SCardIsValidContext() documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2323 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 42 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 42 insertions(+)

commit 04d3f1cd2937b177e59f17881dd3af588aaf06ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 9 15:30:45 2007 +0000

    Doxygen: correct parameter names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2321 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f6b35bdc099e208b1da0ca64884155b9d2f1d7e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 9 15:28:13 2007 +0000

    test for SCardIsValidContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2320 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit ae743afcdaf9b0f459533b3b266eaeebbd476988
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 9 15:27:56 2007 +0000

    implement SCardIsValidContext()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2319 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h |  2 ++
 src/winscard_clnt.c | 44 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 46 insertions(+)

commit ccaa993729d3dbf78908bb8873ba10eff3cf553f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 21:14:56 2007 +0000

    add support for IFD_GENERATE_HOTPLUG bit in driver Info.plist ifdCapabilities
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2310 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h        |  1 +
 src/hotplug_libusb.c | 31 +++++++++++++++++++++++++++----
 2 files changed, 28 insertions(+), 4 deletions(-)

commit 94617b5354bc288924a665857b10c28631cb7e15
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 20:30:33 2007 +0000

    correct a warning: assignment discards qualifiers from pointer target type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2309 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ebf0478eb616ed418a457faffc58723f0ea40981
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 20:26:57 2007 +0000

    change prototype of SHMCleanupSharedSegment() from (..., char *pcFilePath) to
    (..., const char *pcFilePath) to avoid:
    warning: passing argument 2 of 'SHMCleanupSharedSegment' discards
    qualifiers from pointer target type
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2308 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 2 +-
 src/winscard_msg.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 3e793634b4be16b0b4980e32391f4bdb714cf346
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 20:21:47 2007 +0000

    use f1 instead of f to avoid:
    warning: declaration of ‚Äòf‚Äô shadows a previous local
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2307 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit a0b27b5fa6c09277910400d3e9f7b961b9a94622
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 19:01:26 2007 +0000

    define GetDaemonPid() prototype
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2306 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit 98b15022f4ea1a6f6b1be82273ffbad64e14cd54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 19:00:20 2007 +0000

    define prototypes for HPRescanUsbBus() and HPEstablishUSBNotifications()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2305 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 ++
 1 file changed, 2 insertions(+)

commit da21723b957312c65da2778ff69b370af4978f03
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 18:05:26 2007 +0000

    tpevalToken(): use unsigned int to avoid:
    tokenparser.l:74: warning: comparison between signed and unsigned
    tokenparser.l:90: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2304 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 004d59d880852348fc9bf816bd2651cbe64b8a6b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 18:02:13 2007 +0000

    change prototype of LTPBundleFindValueWithKey() from "char *fileName,
    char *tokenKey, ..." to "const char *fileName, const char *tokenKey,
    ..."
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2303 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/parser.h      | 2 +-
 src/tokenparser.l | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit d0336abdc441d6cd206dcfd61484793d20d53434
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 17:57:58 2007 +0000

    DebugLogSetLogType(): use unsigned int to avoid:
    debuglog.c:182: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2302 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 201418c490c914a22b6db5ab0fbe350974b952c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 17:53:46 2007 +0000

    evaluatetoken(): use unsigned int to avoid the warning:
    configfile.l:80: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2301 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a4f9212850ca55fe8047f8c82ba23f37cfcbfb2e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 6 17:48:33 2007 +0000

    use unsigned int to solve the warning:
    debug.c:60: warning: comparison between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2300 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c          | 2 +-
 src/hotplug_libusb.c | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 8765ce71a1d1d0460d9587e5f9f0348d6cde32fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 25 22:39:32 2006 +0000

    IOCTL_SMARTCARD_VENDOR_VERIFY_PIN is deprecated. Use
    CM_IOCTL_GET_FEATURE_REQUEST instead
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2286 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 6 ------
 1 file changed, 6 deletions(-)

commit 0f7a35634f6ad70f7a06f0016bf3dddfe058107b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 25 22:29:27 2006 +0000

    IFDStatusICC(): correctly set card status to SCARD_UNKNOWN. patch in
    revision 2283 was bogus
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2284 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d42a54e2241ba3cd61279c7c003b89d5dbc40da8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 25 22:01:55 2006 +0000

    IFDStatusICC(): if IFDHICCPresence() set card status to SCARD_UNKNOWN
    instead of an uninitialised value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2283 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 1 +
 1 file changed, 1 insertion(+)

commit 12fa22bf3aa8cd01ef85281a4e903f6beab1e256
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 25 21:42:44 2006 +0000

    RFAddReader(): fails if RFSetReaderName() fails (too many readers for
    the same driver for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2282 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit 1e06797ca8b536bee2ff42b779e58fffb6bbec21
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 25 21:41:51 2006 +0000

    RFSetReaderName(): fails if the number of readers exceeds the number of
    supported readers by the driver.
    
    If the driver does not implement TAG_IFD_SIMULTANEOUS_ACCESS it is
    assumed to only support 1 reader.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2281 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit f8d00c24f5598fd2a3402444cc1664af36f1f6dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 25 20:38:50 2006 +0000

    signal_reload(): disable hotplug when shutdown is on going
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2279 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 +++
 1 file changed, 3 insertions(+)

commit 713c0dea5445194382e421d8534d8f4d89180341
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 12 13:08:22 2006 +0000

    SCardGetAttrib()/SCardSetAttrib(): if the driver returns IFD_ERROR_TAG
    we return SCARD_E_UNSUPPORTED_FEATURE instead of the generic error code
    SCARD_E_NOT_TRANSACTED
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2274 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 4f93dea5b5c1ba39f5f8ad91bbeddf5d59fe7aa2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 11 08:54:26 2006 +0000

    add PKG_PROG_PKG_CONFIG
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2272 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 1d8cc96b5d1bd73dd30559cf38a3c58d16bc4486
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 5 14:01:28 2006 +0000

    SCardStatus(): move an initialization outside of a for() loop (improve
    speed)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2267 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1d4cd2408f9a583e5afdbbabca6ef9d1061d5309
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 5 13:56:02 2006 +0000

    SCardGetIndicesFromHandle(): check that hCard is non null (used as
    marker for unused entry)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2266 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit 632e863dfd98a60928807a8c386f2738f8f4828c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Dec 3 13:17:42 2006 +0000

    pcFunction argument of DYN_GetAddress is "const char *" instead of "char *"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2265 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_generic.h | 2 +-
 src/dyn_hpux.c    | 2 +-
 src/dyn_macosx.c  | 2 +-
 src/dyn_unix.c    | 2 +-
 src/dyn_win32.c   | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

commit a83f574a460c5e4d32a498ea3755d1f1cb786123
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Dec 3 13:15:03 2006 +0000

    use "const char *" instead of "char *" when needed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2264 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 14 +++++++-------
 src/sys_unix.c    | 12 ++++++------
 2 files changed, 13 insertions(+), 13 deletions(-)

commit a933fbe8e47d6414cd4a19adfdc9e0ace6c76711
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Dec 3 13:10:15 2006 +0000

    warning: no previous prototype for 'log_init'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2263 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 1 +
 1 file changed, 1 insertion(+)

commit c3c6528baf90bba9180c8d376b3bd1c5d3c2f94b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 2 17:28:55 2006 +0000

    #include "strlcpycat.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2262 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcat.c | 1 +
 1 file changed, 1 insertion(+)

commit 42b6b047d6454626827aa43650e25e1d55cfc03c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 2 17:27:10 2006 +0000

    #include "powermgt_generic.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2261 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_generic.c | 1 +
 1 file changed, 1 insertion(+)

commit b28a32969fe870605b49fd6ae407de9209cb2101
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 2 17:17:35 2006 +0000

    #include "strlcpycat.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2259 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcpy.c | 1 +
 1 file changed, 1 insertion(+)

commit 387b718feb6267fd04362af3b9badd9eab72a5a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 22:26:35 2006 +0000

    add support of "extended" SCardControl()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2250 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 139 ++++++++++++++++++++++++++++++++++++++++------------
 src/winscard_msg.c  |   3 +-
 src/winscard_msg.h  |  23 ++++++++-
 src/winscard_svc.c  |  72 ++++++++++++++++++++++++++-
 4 files changed, 201 insertions(+), 36 deletions(-)

commit 3b98ea8fbe759f108fee8c7b81d1ce91b6d9e9f3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 20:54:22 2006 +0000

    SCardEstablishContextTH(): return the error code if the connection to
    the server fails (wrong protocol version for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2249 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit 3d74e0db4c84fcdd2f354fcc5670747178871baa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 20:53:18 2006 +0000

    ContextThread(): check that the client protocol version is not newer
    than the protocol version of the server or returns SCARD_E_NO_SERVICE
    otherwise.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2248 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

commit 27638111644f2b159971f3632a906df512eaac54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 20:48:08 2006 +0000

    use "char *" variables instead of "void *" when arithmetic is done
    (typically ptr+offset).
    
    Avoids: warning: pointer of type 'void *' used in arithmetic
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2247 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit a60b5835a0a1ae8d60bf659e0add386ee825d6ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 20:39:09 2006 +0000

    warning: C++ style comments are not allowed in ISO C90
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2246 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5d5e45977b6971587197aa80fcf494b3015f97b4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 20:37:18 2006 +0000

    warning: C++ style comments are not allowed in ISO C90
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2245 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4adbdfe1cd7851776ebd921eb626f8214a02721f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 30 16:26:25 2006 +0000

    SCardControl(): do not limit cbSendLength to MAX_BUFFER_SIZE bytes since
    we now transparently support up to MAX_BUFFER_SIZE_EXTENDED bytes.
    
    Thanks to Martin F√ºhrlinger for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2244 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 ---
 1 file changed, 3 deletions(-)

commit 974ec57660ec90dde738e71a636b70fbc30b1096
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 29 10:43:27 2006 +0000

    do not define GetDaemonPid if USE_RUN_PID is NOT defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2243 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 ++
 1 file changed, 2 insertions(+)

commit 39a32cdf5db2725bd88410bd4ba4138534985f93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 29 10:42:51 2006 +0000

    SendHotplugSignal() does nothing if USE_RUN_PID is NOT defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2242 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 ++
 1 file changed, 2 insertions(+)

commit 0f30a72ecf1368c7b1d49ee9a448e456daaff70f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 29 10:37:43 2006 +0000

    HPRescanUsbBus(): replace .driver by .fullName also for *BSD systems
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 823a8cd4457eca966a1f75905ca2ea2f8d7f59f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 23 09:38:26 2006 +0000

    Allow connection from a 32-bits and 64-bits client to the same pcscd
    server. This is part of the Apple patches and improvements.
    see Alioth bug #303790
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2236 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 781fab26576b1e627e19c131e322e9e75640291f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 22:32:52 2006 +0000

    Doxygen ATRDecodeAtr()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2233 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 24a0f3c5e42712075f8309728920ab5c119d55ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 14:59:44 2006 +0000

    remove the driver field from struct readerTracker
    use the fullName field to check if the reader entry is valid or not
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2232 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit f452b3d3ce2472ca7a32f66c755bf7f1a8484184
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 14:56:32 2006 +0000

    signal_reload(): log the End reload serial configuration
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2231 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit cb4d513ade5565e751ac75f56cb5696ed373da0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 14:55:07 2006 +0000

    HPRescanUsbBus(): setenv USB_DEVFS_PATH to /proc/bus/usb
    
    libusb default is /dev/bus/usb but the devices are not yet visible there
    when a hotplug is requeste
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2230 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 4 ++++
 1 file changed, 4 insertions(+)

commit c640a69a9b9fa91b969928ad8d46b8bf0429d5df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 13:57:20 2006 +0000

    add Doxygen cross-references to #define values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2229 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c      |   6 +-
 src/winscard_clnt.c | 409 ++++++++++++++++++++++++++--------------------------
 2 files changed, 210 insertions(+), 205 deletions(-)

commit be30f5521431e3a5be1353cabc9621cd041a47ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 10:44:04 2006 +0000

    reorder SCARD_E_* codes in increasing order
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2228 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 1951178d0a0207d6a0f3c7654e3322c6942a1d57
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 10:18:17 2006 +0000

    add Doxygen documentation for SCARD_E_* error codes (text reused from
    MSDN)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2227 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 74 +++++++++++++++++++++++++-------------------------
 1 file changed, 37 insertions(+), 37 deletions(-)

commit e0d82c6a2fd376a9b5c76bc6ef00e98aa1d5f92b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 21 10:03:16 2006 +0000

    add SCARD_E_NO_READERS_AVAILABLE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2226 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 +
 1 file changed, 1 insertion(+)

commit c3913495f8bfe74a462a5c8316ded4ce7566099f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 14:46:19 2006 +0000

    version 1.3.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2209 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4dab9e8c20845f8467005358361d0039f7e8c4e8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 14:27:40 2006 +0000

    if a driver command returns IFD_NO_SUCH_DEVICE we call
    SendHotplugSignal() to rescan the USB/serial/etc. readers and purge the
    removed readers from the reader list
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2204 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)

commit 5aa20af43e9af4c5872dd46d567a9224d50b1280
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 14:13:26 2006 +0000

    add SendHotplugSignal() prototype
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2203 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h | 1 +
 1 file changed, 1 insertion(+)

commit 1a93b450e156fcf07a9d6cf19c4dbf144c9b3f5e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 14:13:10 2006 +0000

    reorganise code to create GetDaemonPid() and SendHotplugSignal()
    functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2202 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 76 ++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 52 insertions(+), 24 deletions(-)

commit bdab9b17936033cd4ef05f3255dae526f835d3a6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 14:12:14 2006 +0000

    add IFD_NO_SUCH_DEVICE return value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2201 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 1 +
 1 file changed, 1 insertion(+)

commit 0fdbfe24fd9a4258529ef02ab90114e8278cbcbf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 10:27:58 2006 +0000

    use fgets() instead of scanf() to also consume the carriage return
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2200 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 24f9e08af984cacc9739ecb9ac46cac3e2f74fe0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 10:23:54 2006 +0000

    use tabulations for alignment instead of spaces
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2199 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 54 +++++++++++++++++++++++++++---------------------------
 1 file changed, 27 insertions(+), 27 deletions(-)

commit 4b060ab1c5a493322bee5e1ba213b4036e5820dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 15 10:07:25 2006 +0000

    test for SCARD_ATTR_MAXINPUT (only supported by my CCID driver for now)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2198 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit 327d040ac68468bf7afd05f665d182f4e8f9a032
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 10 20:13:41 2006 +0000

    do not include src/utils/ since the tools installifd and formaticc are
    now completly outdated and should not be used anymore.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2196 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 1 -
 src/Makefile.am | 1 -
 2 files changed, 2 deletions(-)

commit 49db2b2871364e4edfb0b73227c525b8d651068e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 31 07:54:25 2006 +0000

    remove SCardUnload() since it is not in the PC/SC API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2194 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 2 --
 1 file changed, 2 deletions(-)

commit 3738efc1cc281d875ebcf6995963d92c467dc82e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 29 19:27:52 2006 +0000

    check for rescan ongoing in pcscdaemon.c:signal_reload() instead of
    hotplug_libusb.c:HPReCheckSerialReaders() since the code is not specific
    to libusb
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2193 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 12 ------------
 src/pcscdaemon.c     | 12 ++++++++++++
 2 files changed, 12 insertions(+), 12 deletions(-)

commit a9800f45123429779c79bf3513f438d0cfc3fddf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 23 14:57:51 2006 +0000

    move code of HPEstablishUSBNotifications() into a new function
    HPRescanUsbBus()
    
    HPRescanUsbBus() is called:
    - periodically from HPEstablishUSBNotifications() if USB_POLLING is defined
    - by HPReCheckSerialReaders() when a SIGUSR1 signal is received so we can use
    udev hotplug events to rescan the USB bus instead of polling
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2192 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 228 +++++++++++++++++++++++++++------------------------
 1 file changed, 122 insertions(+), 106 deletions(-)

commit 471d1696fe145654f7b470af36537142640833fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 23 14:52:26 2006 +0000

    removed unused external reference to ReCheckSerialReaders
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2191 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 -
 1 file changed, 1 deletion(-)

commit 7c3fc1865c1283865241a49b4518123706993885
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 23 14:42:24 2006 +0000

    SHMProcessEventsServer(): returns -2 in case of syscall interrupted
    (EINTR) and -1 for other errors.
    
    SVCServiceRunLoop(): do not log an error message in case of -2 since it
    happens when SIGUSR1 (reload) or SIGINT (Ctrl-C) is received. We just
    try again
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2190 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       | 11 +++++++----
 src/winscard_msg_srv.c |  8 +++++---
 2 files changed, 12 insertions(+), 7 deletions(-)

commit 3acca0b6adb182f071dde22fc2c676c3e1ae4d34
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 23 14:36:36 2006 +0000

    main(): fail if hotplug is requested but no pcscd is running
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2189 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 961796681c3e1700f48e274411abe5b73fbbc465
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 19 11:29:29 2006 +0000

    do not use visibility("default") for gcc versions <= 3.3
    
    Thanks to Hemanth Kumar for the bug report and Karsten Ohme for the
    patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2188 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b70d02211dc4577c8ead0cf8466d914bd3275cd3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 19 11:27:53 2006 +0000

    main(): do not use USE_RUN_PID in a Log message if it is not defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2187 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 ++
 1 file changed, 2 insertions(+)

commit 38b59f69200652334315fc4535a9d0df7cef6487
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 11 09:33:50 2006 +0000

    SCardConnect(): add some debug output in the "waiting for release of
    lock"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2185 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit bfe33f058b6f0c6e5f22bb3b16427b3f0a135003
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 11 09:32:36 2006 +0000

    SCardDisconnect(): wait for the lock to be released only if it held by
    someone else (and not just by ourself).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2184 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 3bf947ccebf9b4f619fd9197037eb3de549deda2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 11 09:29:31 2006 +0000

    MSGRemoveContext(): do not reset the card if it is locked by by someone
    else but simulate a card removal instead
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2183 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 28 ++++++++++++++++++++--------
 1 file changed, 20 insertions(+), 8 deletions(-)

commit 29d880cf2673fbfeb1e27d475bc5af7fb76a49c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 11 09:28:01 2006 +0000

    RFUnlockSharing(): small rewrite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2182 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit c72d8d90ee5d674da6c4fdaf0d94a1a32fb06bfe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 5 14:53:48 2006 +0000

    add update-reader.conf.8 manpage.
    
    Thanks to Florian Schmaus for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2181 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am          |  4 ++--
 doc/update-reader.conf.8 | 32 ++++++++++++++++++++++++++++++++
 2 files changed, 34 insertions(+), 2 deletions(-)

commit f6577630f39ea09fa692fa42c70dd53135d59c80
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 27 13:50:56 2006 +0000

    MSGRemoveContext(): Unlock the sharing so we do not get blocked in
    SCardDisconnect() waiting forever
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2180 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 31 ++++++++++++++++++++-----------
 1 file changed, 20 insertions(+), 11 deletions(-)

commit 978870f789b2773ba0749a6cc77394423a400cf0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 27 13:36:39 2006 +0000

    SCardConnect()/SCardDisconnect(): use a loop of 0.1 second instead of
    0.1 millisecond to wait until the sharing is over
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2179 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6855b65ae4efff1711e9a34ed38a1e49415646b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 26 14:13:21 2006 +0000

    SCardConnect() & SCardDisconnect(): wait until any transaction finishes
    before going on.
    This avoids the possibility to reset a card in the middle of a transaction
    
    Thanks to Martin Paljak for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2178 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)

commit 99bf4ed948a85b14f3c46bdf09c705ef1e842671
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 26 13:43:48 2006 +0000

    factor the return value test code and add some color
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2177 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 135 ++++++++++++++++++---------------------------------------
 1 file changed, 41 insertions(+), 94 deletions(-)

commit cd860002bb464c9601598e364da7826e6518702c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 20 14:01:34 2006 +0000

    test SCARD_ATTR_VENDOR_NAME tag for SCardGetAttrib
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2169 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 619910e8472ec95cfdac962726f71bfb93fd4134
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 20 13:41:25 2006 +0000

    add a test for SCardGetAttrib(... SCARD_ATTR_VENDOR_IFD_VERSION...)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2167 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 1ee82178b906b984d64f4626610e5f8bbc7d7e2f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 20 07:14:52 2006 +0000

    pcsc_stringify_error(): correct a off-by-one buffer overflow. Closes
    #303836 "pcsc-lite-1.3.2: array subscript out of range"
    
    Thanks to David Binderman for the bug report and patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2164 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6bd13091fc92253d42bfd363cb8f25c9e7d9070f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 13 09:06:59 2006 +0000

    change dwContextIndex type from DWORD to LONG since we compare it to -1
    
    Thanks to -Wextra for the potential bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2160 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 2d712b98db856bc51a85906ab4b30808f126b84a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 13 09:05:11 2006 +0000

    correct some variable types to avoid compiler warning: comparison
    between signed and unsigned
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2159 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 231d0508a9d2ebb68b7cdab6e160bfbd926d5e87
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 13 08:48:21 2006 +0000

    reformat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2158 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 78 +++++++++++++++++++++++------------------------------
 1 file changed, 34 insertions(+), 44 deletions(-)

commit 3d658d322d41c7358bfc54a2ea56d4a3c6a771d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 13 08:26:59 2006 +0000

    add -H --hotplug argument to ask the daemon to rescan the avaiable
    readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2157 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 49 ++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 36 insertions(+), 13 deletions(-)

commit f6754917105aa4625247b69b80d231e5b1ebabad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 6 20:02:47 2006 +0000

    remove trailing spaces at end of lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2151 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING                  |   2 +-
 ChangeLog                |   4 +-
 HELP                     |   4 +-
 NEWS                     |   2 +-
 README                   |  24 +-
 SECURITY                 |   2 +-
 bootstrap                |   2 +-
 doc/README.DAEMON        |   4 +-
 doc/doxygen.conf.in      | 996 +++++++++++++++++++++++------------------------
 doc/doxygen.css          |   2 +-
 doc/formaticc.1          |  13 +-
 doc/ifdhandler-3.tex     |   6 +-
 doc/pcscd.8.in           |  26 +-
 doc/reader.conf.5.in     |   2 +-
 src/PCSC/debuglog.h      |   4 +-
 src/PCSC/ifdhandler.h    |  20 +-
 src/README_INTERNALS.txt |   8 +-
 src/atrhandler.c         |  24 +-
 src/atrhandler.h         |   4 +-
 src/configfile.l         |   6 +-
 src/debug.c              |   2 +-
 src/debuglog.c           |   6 +-
 src/dyn_macosx.c         |   4 +-
 src/dyn_win32.c          |   2 +-
 src/error.c              |   2 +-
 src/eventhandler.c       |  46 +--
 src/eventhandler.h       |   4 +-
 src/hotplug_libusb.c     |   2 +-
 src/hotplug_macosx.c     |   2 +-
 src/ifdwrapper.c         |  90 ++---
 src/ifdwrapper.h         |   2 +-
 src/libpcsclite.pc.in    |   2 +-
 src/misc.h               |   4 +-
 src/pcscdaemon.c         |  58 +--
 src/powermgt_generic.h   |   4 +-
 src/powermgt_macosx.c    |  20 +-
 src/prothandler.c        |  10 +-
 src/readerfactory.c      | 160 ++++----
 src/readerfactory.h      |   8 +-
 src/strlcat.c            |   2 +-
 src/strlcpy.c            |   2 +-
 src/sys_unix.c           |   8 +-
 src/testpcsc.c           |   4 +-
 src/thread_unix.c        |   6 +-
 src/utils/formaticc.c    |   4 +-
 src/utils/installifd.c   |   2 +-
 src/winscard.c           |  10 +-
 src/winscard_clnt.c      | 266 ++++++-------
 src/winscard_msg.c       |  54 +--
 src/winscard_msg.h       |   2 +-
 src/winscard_msg_srv.c   |  28 +-
 src/winscard_scf.c       |  36 +-
 src/winscard_svc.c       |  56 +--
 win32/pthread.h          |  14 +-
 win32/sched.h            |  12 +-
 55 files changed, 1044 insertions(+), 1045 deletions(-)

commit dea7baefd39e3ab647388b9c987fae19ac166915
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 5 16:41:05 2006 +0000

    SVCServiceRunLoop(): SHMProcessEventsServer() will not timeout anymore
    so remove the managenemt code (which did nothing)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2149 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 8 --------
 1 file changed, 8 deletions(-)

commit dd4e84c18855b5b56341fa4ed3bba948d46e8caf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 5 16:39:58 2006 +0000

    SHMProcessEventsServer(): do not use a 1 second timeout in select() to
    catch Ctrl-C since SIGINT will cause select() to return with EINTR
    
    See https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=205182 for the
    bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2148 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg_srv.c | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

commit 1eaa0bca61a16299e6e7bfc4abcd0506bd3e566c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 5 12:01:43 2006 +0000

    add "do not use an active polling in hotplug_libusb.c"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2147 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit d80ec81ea485c23381adc5811afc3857c9d41aa0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 31 19:51:52 2006 +0000

    struct transmit_struct_extended: use BYTE data[1]; instead of BYTE
    data[0]; since Sun Studio 11 does not like 0-sized arrays.
    
    Thanks to Iain MacDonnell for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2146 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3fda40bc6a17405c310e06ef1631c270232a0f9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 31 19:17:32 2006 +0000

    struct ReaderContext: use int32_t instead of DWORD for dwContexts since
    we also use negative values (SCARD_EXCLUSIVE_CONTEXT defined as -1)
    
    Thanks to -Wextra for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2145 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d9c835512cb688e73e09b9448a7cb881ed92d5ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 31 19:08:47 2006 +0000

    SCardStatus(): do not check for negative value of
    rContext->readerState->cardAtrLength since it is a DWORD (unsigned)
    
    Thanks to -Wextra for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2144 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 521fbefad5958bc3644325ea7addd13b0853d70f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 31 18:59:10 2006 +0000

    SHMClientSetupSession(): store the returned value of socket() in an int
    instead of a DWORD (unsigned) so we can check for negative values
    
    Thanks to -Wextra for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2143 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 8a0262d38bf7f85486dda960c3d43c178153d06b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 31 18:55:51 2006 +0000

    SCardGetStatusChange(): do not test for (cReaders < 0) since cReaders is
    a DWORD and a DWORD is unsigned.
    
    Thanks to -Wextra for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2142 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ---
 1 file changed, 3 deletions(-)

commit 88713d5535b89bc1694a2b49b9490d670b84cd28
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 15 15:36:13 2006 +0000

    add manage power suspend/resume
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2141 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit bfd2d56ef72d51fc70d1ea0adee631e49d0847cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 13 16:24:30 2006 +0000

    remove unused functions.
    SYS_Mknod() could not be compiled using tcc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2139 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h |  18 ---------
 src/sys_unix.c    | 111 ------------------------------------------------------
 2 files changed, 129 deletions(-)

commit 0d39e0b106afda96c4f891f6237fd481d2c337d0 (tag: 1.3.2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 11 18:26:39 2006 +0000

    release 1.3.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2138 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 26 ++++++++++++++++++++++----
 configure.in |  2 +-
 2 files changed, 23 insertions(+), 5 deletions(-)

commit 19f5591102ccdc37c084b81d2dfa7165fb48e8d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 11 18:10:55 2006 +0000

    do not fail to remove api when the directory is not there
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2137 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a635b62aa78d17a824e6ada3791d8f0d3f3bef6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 9 07:16:11 2006 +0000

    Revert patch in revision 2127. The problematic to try a second driver
    start if the first one fails has to be in the driver itself, not in
    pcscd.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2129 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 12 +-----------
 1 file changed, 1 insertion(+), 11 deletions(-)

commit 5c0dbab4e230769f39814b83ababe70993d7959c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 8 15:05:57 2006 +0000

    CreateContextThread(): log an error message in case of failuer since the
    pcscd daemon will die shortly after that
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2128 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 3 +++
 1 file changed, 3 insertions(+)

commit 2fec58797f9e4456ba250594668627efa3858949
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 8 14:51:43 2006 +0000

    HPAddHotPluggable(): if a reader fails to start we try to start it a
    second time
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2127 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 103a8d7fbc5ba484d1c6ca5bc53b39360de3121b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 7 21:11:47 2006 +0000

    in SCardStatus subsection, the argument is pdwProtocol and not
    dwPreferredProtocols
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2126 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9109ffd70a14b6d42cbb126c7699783c87efbefe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 7 14:32:55 2006 +0000

    Transform C comments into Doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2125 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 116 ++++++++++++++++++++++++++-------------------------
 1 file changed, 59 insertions(+), 57 deletions(-)

commit 41ede5eb3e6a13fdb811ec2043dc527f4b95ff7b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 7 14:18:52 2006 +0000

    Transform C comments into Doxygen comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2124 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 144 ++++++++++++++++++++++++-------------------------
 1 file changed, 72 insertions(+), 72 deletions(-)

commit 5a1f285e4787c00d2e89766ac80bd60e7c343cc2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 31 13:36:16 2006 +0000

    #include "config.h" and define strlcpy/strlcat only if they are not
    already provided by the OS (test HAVE_STRLCPY)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2115 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcat.c | 7 +++++++
 src/strlcpy.c | 8 ++++++++
 2 files changed, 15 insertions(+)

commit cd7fb446d861abc2f8a188574437684d4f941b01
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 31 13:28:50 2006 +0000

    do not cast malloc() return value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2114 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l    | 2 +-
 src/readerfactory.c | 6 +++---
 src/testpcsc.c      | 6 +++---
 src/winscard_clnt.c | 2 +-
 4 files changed, 8 insertions(+), 8 deletions(-)

commit 41bcb2c116a30ef7bdeab953a7e66fdb0f534cd2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 31 09:51:57 2006 +0000

    document that the 4 bytes field value in PCSC_TLV_STRUCTURE is always in
    big endian as documented in PCSC v2 part 10 ch 2.2 page 2. You can use
    ntohl() to convert the value.
    
    Thanks to Ulrich Vogl for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2113 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2d1114b39ccdaa962e9ad67afba1e82e62d99ed5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 10 09:37:40 2006 +0000

    SCardCheckDaemonAvailability(): test the presence of
    PCSCLITE_PUBSHM_FILE (/var/run/pcscd.pub) instead of PCSCLITE_IPC_DIR
    (/var/run) to detect the presence of pcscd
    
    Thanks to Geoff Elgey for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2102 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1b5f1fb30ccbc28502dcfadfc9971a07e4375f7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 15 08:53:14 2006 +0000

    revert the last change. It was a manipulation error.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2080 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b06676828de7ce631f4e31891a6c808c7a2873a4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 15 08:48:47 2006 +0000

    This file is dual licenced:
    - BSD-like, see the COPYING file
    - GNU Lesser General Licence 2.1 or (at your option) any later version.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2079 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/error.c    | 4 ++++
 src/testpcsc.c | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

commit 8a96aeddea8124caeeaa23c3b460eab6a22d7ffa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 7 12:59:07 2006 +0000

    SCardUnload(): use SYS_PublicMemoryUnmap() to free the memory mapped
    segment.
    
    Thanks to Stefan Schuermans for the bug report and patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2077 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 22f35168a8bc8a0bad204e9ec2a3876ee915c844
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 7 12:58:14 2006 +0000

    implement SYS_PublicMemoryUnmap()
    
    Thanks to Stefan Schuermans for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2076 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h |  2 ++
 src/sys_unix.c    | 11 +++++++++++
 2 files changed, 13 insertions(+)

commit 795c7bbb5476afaf04ba51e95dedbcbcb21e43c7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 7 12:56:03 2006 +0000

    SYS_PublicMemoryMap(): check the value returned by mmap() to detect a
    memory exhaustion
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2075 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit f7f9301e4008227d22d741df245be71db1621ce5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 6 09:42:01 2006 +0000

    document the parameters changes for SHMMessageSend() and
    SHMMessageReceive() for Doxygen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2074 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 79a232e7f3fc259f1f1ac30d8ecb500d6c7d91ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 6 09:34:09 2006 +0000

    do not cast malloc() return value.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2073 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex   | 4 ++--
 src/readerfactory.c | 9 +++------
 src/winscard_clnt.c | 4 ++--
 3 files changed, 7 insertions(+), 10 deletions(-)

commit c44938dcac80380fdee6c08b8a2abe2914299af6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 6 09:31:07 2006 +0000

    replace LPTSTR and LPCTSTR by LPSTR and LPCSTR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2072 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c |  2 +-
 doc/pcsc-lite.tex       | 24 ++++++++++++------------
 src/PCSC/ifdhandler.h   |  8 ++++----
 src/PCSC/winscard.h     | 10 +++++-----
 src/eventhandler.c      |  2 +-
 src/ifdwrapper.c        |  2 +-
 src/readerfactory.c     | 16 ++++++++--------
 src/readerfactory.h     | 14 +++++++-------
 src/utils/formaticc.c   |  4 ++--
 src/winscard.c          | 10 +++++-----
 src/winscard_clnt.c     | 30 +++++++++++++++---------------
 src/winscard_scf.c      | 36 ++++++++++++++++++------------------
 12 files changed, 79 insertions(+), 79 deletions(-)

commit 6a033a2ed52bd9414769256553b3969cc333609d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 6 09:20:19 2006 +0000

    use LPCSTR and LPSTR instead of LPCTSTR and LPTSTR.
    
    LPCTSTR is either LPCSTR or LPCWSTR depending on the value of UNICODE
    under Windows. So this type name should not be used directly.
    
    See http://archives.neohapsis.com/archives/dev/muscle/2006-q2/0149.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2071 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit 01ab87f8766fa5aef35b8511da155f38b4034be1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 26 14:32:15 2006 +0000

    define MAX_BUFFER_SIZE_EXTENDED to contain up to 64KB of data instead of
    just 32KB
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2068 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d01eb04770f17d8320ebca79e9c9abfff61493f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 26 13:41:15 2006 +0000

    MSGFunctionDemarshall(): remove two debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2067 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 --
 1 file changed, 2 deletions(-)

commit f84394d05467f36a1fe92149853aabe1fc875b9c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:56:01 2006 +0000

    remove "allow the use of extended APDU without breaking libpcsclite ABI"
    since it is implemented now
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2066 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 4 ----
 1 file changed, 4 deletions(-)

commit e35958770cfa206e3ecbb9bc9b12fc608907ce1c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:55:38 2006 +0000

    do not document --enable-extendedapdu any more
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2065 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 2 --
 1 file changed, 2 deletions(-)

commit 31dc941f3e21879ec77e8eecadfa7163cb114c56
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:53:03 2006 +0000

    remove --enable-extendedapdu since it is useless now
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2064 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 18 ------------------
 1 file changed, 18 deletions(-)

commit 89ee1fc6c9f200b85a1daae414b78351cdd5db79
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:52:34 2006 +0000

    add support of extended APDU as a new command so we do not need to
    compile pcsc-lite with or without extended APDU
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2063 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 188 ++++++++++++++++++++++++++++++++++++++--------------
 src/winscard_msg.c  |  30 ++++++++-
 src/winscard_svc.c  |  81 +++++++++++++++++++++-
 3 files changed, 244 insertions(+), 55 deletions(-)

commit 4b97d6de13644b02c5e64b6a04887b06f2635127
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:50:34 2006 +0000

    SCardTransmit(): do not check if cbSendLength or dwRxLength are >
    MAX_BUFFER_SIZE since this is done by the client already
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2062 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 16 ----------------
 1 file changed, 16 deletions(-)

commit 1caed753390e377352a23218daae0244b158978b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:42:21 2006 +0000

    use new SHMMessageReceive/SHMMessageSend API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2061 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c    | 4 ++--
 src/winscard_msg.c     | 5 +++--
 src/winscard_msg_srv.c | 4 +---
 src/winscard_svc.c     | 7 ++++---
 4 files changed, 10 insertions(+), 10 deletions(-)

commit d929646eb882d0bd48159b4005017bcf8d5ec9e8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:35:58 2006 +0000

    SHMMessageSend() and SHMMessageReceive() use "void *buffer, size_t
    buffer_size" instead of psharedSegmentMsg msgStruct with a fixed size
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2060 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 20 ++++++--------------
 src/winscard_msg.h | 10 ++++++----
 2 files changed, 12 insertions(+), 18 deletions(-)

commit c3ddc5675badf9bb449b2b4ff61247cb2d1b8221
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:31:23 2006 +0000

    add SCARD_TRANSMIT_EXTENDED in pcsc_msg_commands and
    transmit_struct_extended structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2059 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 21 ++++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

commit 242602cd007705ae17371a68d1b33406239edca0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:30:31 2006 +0000

    PROTOCOL_VERSION_MINOR changed from 0 to 1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2058 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit de3e9d939b579eef2adff89141fb17f02c56d310
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 21:28:42 2006 +0000

    #define MAX_BUFFER_SIZE_EXTENDED and remove the @extended_apdu@
    management
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2057 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 21 ++++-----------------
 1 file changed, 4 insertions(+), 17 deletions(-)

commit 3b10ad23690d4678837f484f3dbca75011b8ea85
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 20:53:55 2006 +0000

    MSGFunctionDemarshall(): log an error if pcscd receives an unknown
    command
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2056 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 1 +
 1 file changed, 1 insertion(+)

commit 3add45600e9d5945272870c9d3ef2b46191e87f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 25 12:42:56 2006 +0000

    log_init(): remove a "pouet" printf() debug message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2054 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 3 ---
 1 file changed, 3 deletions(-)

commit 422b07d252932f62144285bf4a6717eaf9aa0362
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 24 07:51:13 2006 +0000

    move the .h file in the *_SOURCES targets so that "make ctags" include them
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2053 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 56 ++++++++++++++++++++++++++++++--------------------------
 1 file changed, 30 insertions(+), 26 deletions(-)

commit 33339df1c0891bdf84e0e1656c5538f20c6af4d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 23 13:05:05 2006 +0000

    correct typos
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2052 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 487505daae49b5eb7c6ce04a1d616060121f8c83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 23 13:01:30 2006 +0000

    update the list of source filesfor pcscd and libpcsclite.la
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2051 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 33 +++++++++++++++++++++++----------
 1 file changed, 23 insertions(+), 10 deletions(-)

commit fd298482cb0b3b9c1251a71e03b3f88ac925905c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 20 14:26:13 2006 +0000

    log_xxd(): replace strlen(c) by 3 since the string length is constant
    (gain a few CPU cycles)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2050 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2ff306c3083a06d38463ce32c8d904c6c2571f92
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat May 20 14:25:07 2006 +0000

    log_xxd(): if the buffer is too small then end it with "..."
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2049 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 ++++
 1 file changed, 4 insertions(+)

commit e9d6b846730aafb39aced23838e5313019fcc395
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 12 13:51:21 2006 +0000

    improve the @brief comment to differentiate between debug for pcsclite
    and debug for pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2042 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c    | 2 +-
 src/debuglog.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 865aeb358e7585e322a50dee11567b9b3d35f201
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 9 19:27:01 2006 +0000

    RFInitializeReader(): display the name of the driver used in addition to
    the name of the reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2040 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 07516ee407966873c2e1926a4bc152c9fc960c6d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 2 07:57:51 2006 +0000

    update to the latest version available from OpenBSD (2005/08/06)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2030 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcat.c | 21 +++++----------------
 src/strlcpy.3 | 19 +++++++++++++------
 src/strlcpy.c | 21 +++++----------------
 3 files changed, 23 insertions(+), 38 deletions(-)

commit 90bb643c155bb6e684b6ecb098426be8006e0f88
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 2 07:00:10 2006 +0000

    EHInitializeEventStructures(): check against MAP_FAILED instead of 0 for
    the returned value of SYS_MemoryMap().
    
    Thanks to Davide Rizzo for the bug report and patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2029 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3cf12ad4d0e23b6ed43602b0bf0b68ff19234df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 2 06:58:07 2006 +0000

    #include <sys/mman.h> so that MAP_FAILED is defined (value returned by
    SYS_MemoryMap() in case of error)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2028 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_generic.h | 1 +
 1 file changed, 1 insertion(+)

commit 9a372054cbfe098c1d65d1373bc8886077258636
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 2 06:56:03 2006 +0000

    SYS_MemoryMap(): document in Doxygen that the function returns
    MAP_FAILED in case of error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2027 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 1 +
 1 file changed, 1 insertion(+)

commit 63e1ccbcbfdd7b5fb05bddcc3e6575baf30dc2c9 (tag: 1.3.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 22 18:56:53 2006 +0000

    release 1.3.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2025 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 17 +++++++++++++++++
 configure.in |  2 +-
 2 files changed, 18 insertions(+), 1 deletion(-)

commit 9be663580c7fec4409c1a46d6ea78877ce96fe4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 22 18:52:09 2006 +0000

    RFLoadReader(): change the way DYN_GetAddress() is used to have a
    simpler code and avoid a warning: dereferencing type-punned pointer will
    break strict-aliasing rules
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2024 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 43 ++++++++++++++++++++-----------------------
 1 file changed, 20 insertions(+), 23 deletions(-)

commit 390310017c9893e580b7b2f1bde2fff286cfa6f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 20 18:56:49 2006 +0000

    do not use EXTERNAL to export the symbols (revert the previous patch)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2018 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 52 +++++++++++++++++++++++----------------------------
 1 file changed, 23 insertions(+), 29 deletions(-)

commit 410e7f97eb4fdb5846aab785cfdd4de672c72b08
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 19 08:39:36 2006 +0000

    Add a comment regarding the use of LDFLAGS="-lpthread"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2015 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 4 ++++
 1 file changed, 4 insertions(+)

commit 9fe3ce6bff90390fe7169847a886b7e9a6af0c6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 18 14:00:59 2006 +0000

    do not export LTPBundleFindValueWithKey() to the drivers anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2010 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 37 -------------------------------------
 src/parser.h         |  2 +-
 2 files changed, 1 insertion(+), 38 deletions(-)

commit 7661ddacef724fec656674dba2a8ad868958b456
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 18 13:59:11 2006 +0000

    tag the functions of the API as EXTERNAL. This can be used to export
    only those symbols from the driver library.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2009 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 54 ++++++++++++++++++++++++++++-----------------------
 1 file changed, 30 insertions(+), 24 deletions(-)

commit 5b0d7f61b2c6be8d09e9140eb741e28e03efbc21
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 18 13:57:30 2006 +0000

    EXTERNAL is a synonym for PCSC_API but more anonymous
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@2008 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 1 +
 1 file changed, 1 insertion(+)

commit bdaa9c2819e17b73ea972ba5e03ecb9b7317cfa7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 11 09:06:50 2006 +0000

    CreateContextThread(): do not use a pointer to the argument but the
    argument itself to avoid using the same value for two consecutive
    threads
    
    Thanks to Fabien Merlet for the bug report.
    See http://archives.neohapsis.com/archives/dev/muscle/2006-q2/0038.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1998 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 17 +++++------------
 1 file changed, 5 insertions(+), 12 deletions(-)

commit 3a66877baddbb7654efda7eb2d60e149125ad7f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 31 14:30:56 2006 +0000

    use \texttt{} instead of \file{} (it works with latex2html but not with
    pdflatex)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1991 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a8bfec84349a052d932795152e5c3c85ff2f08cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 31 14:23:52 2006 +0000

    use __misc_h__ instead of __local_h__ since the file name is misc.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1990 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 3acb70e388723d5aacdbeadd8e3a5f767a050a1a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 31 14:19:18 2006 +0000

    log_msg: document that you should use the macros defined in <debuglog.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1989 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 47951271b064271e7c0b9260cb7f1a98d84378b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 30 09:14:24 2006 +0000

    log_msg and log_xxd are only available for pcscd drivers. These
    functions are no more provided by libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1988 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit e872ce2b8647b910edff4f3ca1650b231d09a94e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 27 13:34:36 2006 +0000

    use use_libusb="${use_libusb-yes}" so that use_libusb is defined to yes
    only if it was not previously defined
    
    libusb is not used by default on Mac OS X and use_libusb=no is already
    used in that case a few lines above in the script
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1980 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e2c503abfcedae083c74e40f6f7c10cd8e8d0d70
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 27 13:29:39 2006 +0000

    compile only on Apple and if libusb is not used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1979 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3582e73bd604ed8d62295dd5478b926eb8da2dfb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 27 13:25:16 2006 +0000

    add $(LIBUSB_CFLAGS) to pcscd_CFLAGS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1978 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f52cfce1a4f37b8da32c1838c0cb27d42358b730
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 27 06:58:18 2006 +0000

    SCardConnect(): the paramater name is dwShareMode instead of dwScope
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1975 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 96c31b0da99096cbad0c0087649b77fa9cddc7e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 23 12:56:54 2006 +0000

    HPAddHotPluggable(): add the USB serial number only if ADD_SERIAL_NUMBER
    is defined (default).
    just #undef the macro if you do not like the serial number addition.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1970 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 3 +++
 1 file changed, 3 insertions(+)

commit 8799980d50374a75b313b8e6c958775e2b7a39dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 16:01:57 2006 +0000

    add -DLIBPCSCLITE to libpcsclite_la_CFLAGS (used in debug.c)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1964 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 38c84ebd54535d23adcf49b909ba91891b1f46a1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 16:00:21 2006 +0000

    add debug.c to libpcsclite_la_SOURCES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1963 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 356c20e5c5a9b373c0ded854f054c458a4d72a22
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 15:59:28 2006 +0000

    provice log_msg() and log_xxd() implementation for the client side
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1962 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.c | 162 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 162 insertions(+)

commit 702c8555f9688c99520672708e9bc6c09343d479
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 15:58:41 2006 +0000

    use log_msg() instead of fprintf() for Logx() macro used in libpcsclite
    so we can manage priority and color
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1961 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.h | 20 +++++++++++++++-----
 1 file changed, 15 insertions(+), 5 deletions(-)

commit 668cb92be9e379ea3f7addb32e07274855c46467
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 15:57:38 2006 +0000

    use debug.h instead of debuglog.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1960 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 89faac0b6788555e348e6dd6dcdc14a65f13ae1c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 14:02:03 2006 +0000

    do not use libpcsclite-core anymore since the same source code generates
    two different object files (depending on the presence of -DPCSCD)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1959 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 99 +++++++++++++++++++++++++++++++++------------------------
 1 file changed, 58 insertions(+), 41 deletions(-)

commit 63e251bd544f4ea8d35708e8d562235f8b3e3d3d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 14:00:35 2006 +0000

    do not use MUSCLECARD_DEBUG environment variable anymore to activate the
    logs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1958 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

commit 0d115ab58d9a43e7d6fdcb3d1fe756d3d4566ff1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 13:59:18 2006 +0000

    #include "debug.h" instead of "debuglog.h" to use fprintf() or syslog()
    depending if the file is used for pcscd (if PCSCD is defined) or for
    libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1957 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_hpux.c     | 2 +-
 src/dyn_macosx.c   | 2 +-
 src/dyn_unix.c     | 2 +-
 src/dyn_win32.c    | 2 +-
 src/sys_unix.c     | 2 +-
 src/winscard_msg.c | 2 +-
 src/winscard_scf.c | 2 +-
 7 files changed, 7 insertions(+), 7 deletions(-)

commit 156c025b5b0dc1e5fcfc7cddaf6def5ed80b0d6b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 13:56:38 2006 +0000

    define Logx() functions for use in libpcsclite (just a fprintf(stderr,
    ...))
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1956 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debug.h | 68 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 68 insertions(+)

commit 51a7c7af4e9da0bb44fd8fa640cc8627f275fe9e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 13:55:00 2006 +0000

    do not declare pcsc_stringify_error() here since it is already declared
    in PCSC/pcsclite.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1955 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 2 --
 1 file changed, 2 deletions(-)

commit cc97bdf2983ebfcbfe3146df9130ded71f9f41aa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 13:54:12 2006 +0000

    do not use pcsc_stringify_error() since I don't want this code in the
    daemon just for _one_ function
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1954 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 86045f106ae3c7a2817c5e13b83c6a11c4601a2c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 13:46:28 2006 +0000

    move pcsc_stringify_error() in its own file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1953 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 145 -------------------------------------------------
 src/error.c    | 169 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 169 insertions(+), 145 deletions(-)

commit e3623bd063349ffd01c99ec5eff2017bee221e1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 21 10:08:23 2006 +0000

    remove duplicate Log3() definition
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1952 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 1 -
 1 file changed, 1 deletion(-)

commit bddfa4318f14c06365b496d15045a6c729b25c54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 20 09:52:09 2006 +0000

    document log_msg and log_xxd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1948 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit be36b531c56a73258191ff19763c7b7811517fca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 20 09:35:04 2006 +0000

    document VERIFY_PIN and MODIFY_PIN commands using PCSCv2 part 10
    instead of the "proprietary" mechanism now unsupported
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1947 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.bib |   6 +++
 doc/pcsc-lite.tex | 149 +++++++++++++++++++++++++++++-------------------------
 2 files changed, 87 insertions(+), 68 deletions(-)

commit 9a080e70d39ee869e5598828fe7d9a7cdc9ff85f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 20 09:17:49 2006 +0000

    upgrade sample code for IOCTL_SMARTCARD_VENDOR_IFD_EXCHANGE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1946 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 7a3803e11e35e40a47d5ceea6abdc24decdff403
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 17 15:02:59 2006 +0000

    add IFD_NOT_SUPPORTED in the possible return values for
    IFDHSetProtocolParameters()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1937 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 1 +
 1 file changed, 1 insertion(+)

commit a60abc646e563809171f5bf23c9d26fbd2795395
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 17 14:58:39 2006 +0000

    document the possible values for Protocol argument in
    IFDHSetProtocolParameters()
    
    Closes bug [ #303238 ] IFDHSetProtocolParameters is called with
    Protocol=1 even though debug log says T=0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1936 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 4d3607d3eb543ee86f4fec91fd5b9c9b45e3c573
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 16 08:17:58 2006 +0000

    do not use #define INTERNAL __hidden on Solaris since the linker can't
    use symbol declared __hidden in the file it is declared.
    
    See http://archives.neohapsis.com/archives/dev/muscle/2006-q1/0144.html
    Thanks to Iain MacDonnell for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1935 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 4 ----
 1 file changed, 4 deletions(-)

commit f594c79fa1930ac1a4a5d6a11e331f2da14bd944
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 15 08:01:32 2006 +0000

    document --disable-libusb instead of --enable-libusb since libusb is
    used by default.
    
    Thanks to Shawn Willden for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1933 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6bd44538b111273390269ca5f5365e9cdea5daa6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 8 17:33:09 2006 +0000

    Add support of Solaris
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1931 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 +++
 1 file changed, 3 insertions(+)

commit a9b79074e3ac715a5f352a935bb20de6ec968285
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 7 07:50:27 2006 +0000

    remove documentation on --enable-muscledropdir=DIR since this option
    moved to libmusclecard now
    
    Thanks to Ville Skytt√§ for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1929 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 2 --
 1 file changed, 2 deletions(-)

commit 9c2aa52e87b25fffddff4f5a24cbc7a2d865f1bb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 7 07:49:16 2006 +0000

    remove a useless AC_SUBST(muscledropdir)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1928 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 -
 1 file changed, 1 deletion(-)

commit 48c62c0baf0ac376daba82db69f4dfed38e1158e (tag: 1.3.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 3 13:58:26 2006 +0000

    release 1.3.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1906 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 16 ++++++++++++++++
 configure.in |  2 +-
 2 files changed, 17 insertions(+), 1 deletion(-)

commit 2cb27d4b847663e3f485470716aa57077909e8df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 19:18:34 2006 +0000

    the correct path is /usr/local/lib instead of /usr/local/pcsc/lib
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1902 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit af56ddea208be6cf191d2f05c41ac5dec4de76a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 10:23:12 2006 +0000

    ChangeLog.svn rule: search and replace corcoran-guest before corcoran
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1894 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7179f4d69f704b96ed127bcacb7583bd0c0f0d08
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 10:21:12 2006 +0000

    remove libmusclecard directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1893 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2e995c510df12c14bc6351321a4f3be2bed8e0aa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 10:20:55 2006 +0000

    remove libmusclecard code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1892 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 38 --------------------------------------
 1 file changed, 38 deletions(-)

commit 84448b0d2a7b5300837c40311f12d81a959a9f45
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 28 08:09:12 2006 +0000

    move PCSC/libmusclecard in its own package
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1885 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/Makefile.am                      |    4 -
 libmusclecard/doc/Makefile.am                  |    7 -
 libmusclecard/doc/muscle-api-1.3.0.pdf         |  Bin 195231 -> 0 bytes
 libmusclecard/src/Makefile.am                  |   42 -
 libmusclecard/src/PCSC/mscdefines.h            |  149 --
 libmusclecard/src/PCSC/musclecard.h            |  957 -----------
 libmusclecard/src/libmusclecard.pc.in          |   12 -
 libmusclecard/src/musclecard.c                 | 2144 ------------------------
 libmusclecard/src/muscletest.c                 |  374 -----
 libmusclecard/src/tokenfactory.c               |  733 --------
 libmusclecard/src/tokenfactory.h               |   33 -
 libmusclecard/utils/Makefile.am                |    4 -
 libmusclecard/utils/bundleTool/Makefile.am     |   15 -
 libmusclecard/utils/bundleTool/bundleTool.8.in |   37 -
 libmusclecard/utils/bundleTool/bundleTool.c    |  286 ----
 15 files changed, 4797 deletions(-)

commit 72944c05ef5f2cd47f1aec12df996dea12baa67c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 27 13:47:19 2006 +0000

    add a call to SCardTransmit()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1884 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 37 +++++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)

commit a6b080f01394a654d8e472581c502b41879ea10b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 24 17:05:51 2006 +0000

    automatically call SCardUnload() when the libpcsclite library is unloaded
    
    Thanks to Najam Siddiqui. See
    http://archives.neohapsis.com/archives/dev/muscle/2006-q1/0177.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1882 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 1a4eddbb66d9f752bf816a2af7f832f817450130
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 24 10:28:06 2006 +0000

    SCardTransmit(): use 0x%08lX instead of %ld since the return codes are
    defined in hex in PCSC/pcsclite.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1881 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 956f7737ff9a601ccd782a853344f92f3973912a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 23 07:26:41 2006 +0000

    correctly detect the use of --enable-libusb (--enable-libusb has the
    same effect as --disable-libusb)
    
    Thanks to Iain MacDonnell for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1880 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 47c02f2906024be25223bd56118d0c41c0529eab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 22 09:25:57 2006 +0000

    SCardReleaseContext(): do not check that the thread releasing the
    context is the one that established it. This check is not performed on
    Windows and creates portability problems
    
    See http://archives.neohapsis.com/archives/dev/muscle/2006-q1/0134.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1879 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 16 ----------------
 1 file changed, 16 deletions(-)

commit b35fd57b56fd28853a9d3ecce457bdf8884fb15a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 22 09:03:27 2006 +0000

    We can't use a # inside a #define so it is not possible to use
    #define CONSTRUCTOR_DECLARATION(x) #pragma init (x)
    
    The #pragma is used directly where needed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1878 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 11 ++++++++---
 src/misc.h                     | 17 +++++------------
 2 files changed, 13 insertions(+), 15 deletions(-)

commit 0973ea5606f1d0d53e14810f763a945ba51a7024
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 22 08:16:46 2006 +0000

    update the available ./configure options
    
    Thanks to Shawn Willden for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1877 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 59 +++++++++++++++++++++--------------------------------------
 1 file changed, 21 insertions(+), 38 deletions(-)

commit c51c14c33e17c2c0bfd00845cea8211037d903ae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 21 22:50:04 2006 +0000

    correct the Perl regexp in ChangeLog.svn rule
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1871 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit 3a5eabd024a24a25cafd37d2ec1ede62ceff015e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 21 09:05:45 2006 +0000

    add subversion revision in ChangeLog.svn
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1868 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c479247c1621df360edd6315c1dc4e3fe8ff6748
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 3 13:46:16 2006 +0000

    remove $(LIBUSB_LIBS) from libpcsclite_la_LIBADD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1852 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 231660c886cb096e3243e3fcaaab26d0864cfece
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 3 13:12:48 2006 +0000

    release 1.2.9-beta10
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1851 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog    | 11 +++++++++++
 configure.in |  2 +-
 2 files changed, 12 insertions(+), 1 deletion(-)

commit 22f748792b2147e0ad2e2161efe73bc8d08d6378
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Feb 3 13:01:56 2006 +0000

    use ChangeLog.svn instead of ChangeLog.cvs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1850 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 72954c13d8ccd8cfcbd848d47bd4388b526c05b6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 31 13:29:28 2006 +0000

    if the USB reader defines a serial number then include it in the reader
    name (between parenthesis)
    
    Thanks to Achraf Karray for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1849 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 24 ++++++++++++++++++++++--
 1 file changed, 22 insertions(+), 2 deletions(-)

commit 48407e9342b62ce34116ca9cc661d9581d32753c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 30 15:44:47 2006 +0000

    use libmusclecard.la instead of
    $(top_builddir)/libmusclecard/src/libmusclecard.la so that "make -j2"
    works. Closes bug "[ #302971 ] 'make -j2' fails"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1848 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd18451b411f07ddeac12e03aed2397bb9a99116
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 30 15:44:01 2006 +0000

    add $(LIBUSB_CFLAGS) and $(LIBUSB_LIBS) where needed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1847 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 9330bb74396aa0ba989f6ef891d44a2e4ab68e33
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 30 14:11:52 2006 +0000

    use xyes instead of xtrue in x$use_libusb test
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1844 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bb864e179c4977020d4fc530cc71acbf0e654b96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 30 14:06:18 2006 +0000

    reuse libusb detection code from my CCID driver
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1843 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 74 +++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 43 insertions(+), 31 deletions(-)

commit ade2c03b164b6556b08d5cc81b11d1c0c518e826
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 25 12:03:17 2006 +0000

    MSCEstablishConnection(): avoids a segfault
    
    Thanks to Shawn Willden for the patch
    http://archives.neohapsis.com/archives/dev/muscle/2006-q1/0057.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1838 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 1 +
 1 file changed, 1 insertion(+)

commit d04a54873a32c6231728e91dec6b74348775c51b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 25 11:00:42 2006 +0000

    use $(SYMBOL_VISIBILITY) instead of -fvisibility=hidden
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1837 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/Makefile.am | 2 +-
 src/Makefile.am               | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit ec8d5804dbd79d120796081d290b49f6d266bcb2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 25 11:00:26 2006 +0000

    check if the compiler supports -fvisibility=hidden and define
    SYMBOL_VISIBILITY accordingly
    
    Only GCC 4.0 support it AFAIK
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1836 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit e4d68216e381c85a241bc82dc4d8ff54176358dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 25 10:42:23 2006 +0000

    #define PCSC_API as no-op if not already defined (needed when included
    by a driver)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1835 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 4 ++++
 1 file changed, 4 insertions(+)

commit 1366fab05f09d98bf9fea1593aa48ee818b0b24e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:52:16 2006 +0000

    Compile with -fvisibility=hidden to hide all symbols by default.
    The export of symbol must now be explicit. That only works for the ELF
    format.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1830 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/Makefile.am | 3 ++-
 src/Makefile.am               | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit dedd8fc55b6deb31d714b46306d0211f873c8caf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:51:05 2006 +0000

    #include "misc.h to get the definition of PCSC_API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1829 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 437c3da7f00de7e61209a0f5a1a62614f07b52a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:50:31 2006 +0000

    export variables g_rgSCardT0Pci, g_rgSCardT1Pci and g_rgSCardRawPci
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1828 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 21d809e7037ecb7d981799d702b9e1b93343fc17
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:49:52 2006 +0000

    #include "misc.h to get the definition of PCSC_API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1827 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 2 +-
 libmusclecard/src/tokenfactory.c | 1 +
 src/atrhandler.c                 | 1 +
 src/configfile.l                 | 1 +
 src/debuglog.c                   | 2 +-
 src/dyn_macosx.c                 | 1 +
 src/dyn_unix.c                   | 2 +-
 src/eventhandler.c               | 1 +
 src/hotplug_libusb.c             | 1 +
 src/hotplug_linux.c              | 1 +
 src/hotplug_macosx.c             | 1 +
 src/ifdwrapper.c                 | 1 +
 src/pcscdaemon.c                 | 1 +
 src/powermgt_macosx.c            | 1 +
 src/prothandler.c                | 1 +
 src/sys_unix.c                   | 2 +-
 src/thread_generic.h             | 1 -
 src/tokenparser.l                | 1 +
 src/winscard_msg.c               | 2 +-
 src/winscard_msg_srv.c           | 2 +-
 20 files changed, 19 insertions(+), 7 deletions(-)

commit 6d0f73909670e7522cad85f70c08a1a3fe866a9e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:45:15 2006 +0000

    declare log_msg(), log_xxd(), DebugLogSetLevel() and
    pcsc_stringify_error() as exported symbols since they are used by
    libmusclecard or some applications
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1826 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 4d2f554041198b966d2749880810d351ae5e1f01
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:44:22 2006 +0000

    declare the symbols as exported using PCSC_API macro
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1825 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 44 ++++++++++++++++++++++++--------------------
 1 file changed, 24 insertions(+), 20 deletions(-)

commit a9a22f47fb45ab8129eb0ba98b03dc5588305bcb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 14:43:20 2006 +0000

    declare LTPBundleFindValueWithKey as an exported symbol (used by the
    pcscd drivers)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1824 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/parser.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 27097c03687633da4c5bd1c966598d3ab71177b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 12:44:45 2006 +0000

    define PCSC_API as a way to export a symbol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1823 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 3 +++
 1 file changed, 3 insertions(+)

commit 05c778fc92add6b5542d3b9bfb06cfc8e1a3ee86
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 12:43:17 2006 +0000

    use __GNUC__ instead of __GCC__
    
    see
    http://gcc.gnu.org/onlinedocs/gcc-3.3.5/cpp/Common-Predefined-Macros.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1822 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit db5acea30d0d7d3c5464d733783da41357b78a08
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 24 10:38:09 2006 +0000

    reformat comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1821 0ce88b0d-b2fd-0310-8134-9614164e65ea

 win32/PCSC.h | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 2dd2d70ff2bea19d828dcc2227c45026503785f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 21:31:29 2006 +0000

    add speed profiling code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1817 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 163 +++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 162 insertions(+), 1 deletion(-)

commit c21648ae8441b36136a1347de52a4f4fb41817e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 21:30:18 2006 +0000

    SCardTransmit(): code simplification
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1816 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 18 +++++-------------
 1 file changed, 5 insertions(+), 13 deletions(-)

commit cd880eee7b45259842bcd180805213ca9c2a9603
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 13:19:04 2006 +0000

    explicitely add $(PTHREAD_CFLAGS) $(PTHREAD_LIBS) to
    libpcsclite_la_LIBADD and pcscd_LDADD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1813 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 93d988bce1833188a6fb7c6181272ca728be46c9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 13:15:02 2006 +0000

    use $(FOO) instead of @FOO@ to not replace the values but the variables
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1812 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 68a4bc6e2a15da65320f3543da2257b83dd381f9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 18 13:13:51 2006 +0000

    do not globaly add $PTHREAD_* to LIBS and CFLAGS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1811 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 --
 1 file changed, 2 deletions(-)

commit c09067295ba92c9ec482dc95b4380973224a701c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 3 17:11:29 2006 +0000

    Add missing ReCheckSerialReaders and HPReCheckSerialReaders() so
    pcsc-lite can compile on FreeBSD and others
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1786 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_generic.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit ae97adc49c56147d08d7edc756d2aff494e023e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 15 13:53:16 2005 +0000

    allow to have pcscd and libpcsclite on two different machines.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1783 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 3ac4b1d0f0f32cd3a3e1d4c5bd198e1670eb4a4c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 12 13:22:54 2005 +0000

    use $prefix/pcsc/services instead of $prefix/services when --prefix= is
    used but --enable-muscledropdir= is not.
    Same code as for --enable-usbdropdir=
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1781 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7a6f033b0a352dddfc51322daf2be0d0c70726a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 1 17:17:46 2005 +0000

    remove a duplicated comment line
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1777 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 1 -
 1 file changed, 1 deletion(-)

commit e2ea32a222e75347203459efd84f28d74cd7cfaa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 29 13:42:03 2005 +0000

    typo corrected
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1772 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 02b243948df01b2d3bca1bf9f6ec28c4aa6eb3dd (tag: 1.2.9-beta9)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Nov 27 16:40:04 2005 +0000

    release 1.2.9-beta9
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1757 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit c30bb745949f55e270fb030903f5cd90e7713405
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 25 16:10:53 2005 +0000

    libmusclecard needs tokenparser.l but I do not want to provide it
    through libpcsclite so libmusclecard uses it directly
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1756 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit be1656958d99ba0f793e24a1df1bcdcc48bf4966
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 16:18:06 2005 +0000

    version 1.2.9-beta9
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1753 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 815d7d99e8d8355b56467cbc9d8ae240f0f628fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 16:00:29 2005 +0000

    Apple gcc does not support #pragma pack(push, 1) but only #pragma
    pack(1)
    powerpc-apple-darwin8-gcc-4.0.0 (GCC) 4.0.0 20041026 (Apple Computer,
    Inc. build 4061)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1748 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 334ded25ad282aad0e49c23f158f7ae12e2d681c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 15:42:19 2005 +0000

    SCardConnect(): do not print an error ""Active Protocol: unknown 0" when
    we are connecting in direct mode. The card is not supposed to be used at
    this time.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1744 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)

commit 09a96ea84c122483dc96a05895bd578a6d7dc0a7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 15:09:00 2005 +0000

    use uint8_t instead of int8_t since the fields are defined as BYTE,
    USHORT and ULONG in PC/SC v2 part 10 specification
    
    This avoids a "warning: overflow in implicit constant conversion" when
    using values bigger than 127
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1741 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 68 ++++++++++++++++++++++++++--------------------------
 1 file changed, 34 insertions(+), 34 deletions(-)

commit 8897e32e476849704e77c821bf463a8ceb3baef9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 13:45:01 2005 +0000

    tokenparser.l is used by pcscd only and not by libpcsclite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1736 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 5a0e96ee450a7ac6c56118eeb8a418ed7135ca90
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 09:14:14 2005 +0000

    we need to provide LTPBundleFindValueWithKey for all plateforms. This
    function is NOT provided by Mac OS X. The bug I wanted to correct
    yesterday is in the CCID driver instead.
    patch reverted.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1732 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 4 ----
 src/Makefile.am | 8 ++------
 2 files changed, 2 insertions(+), 10 deletions(-)

commit f2736ba40b257329d18100e43777433d502baa83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 24 08:52:18 2005 +0000

    do not use smaller fonts for functions names so it looks nice with
    Safari
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1731 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/doxygen.css | 3 ---
 1 file changed, 3 deletions(-)

commit b53129e69dcf7ecc8c3a35d524a948536ae046ef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 16:00:10 2005 +0000

    replace dnl by # for comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1728 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 62 ++++++++++++++++++++++++++++++------------------------------
 1 file changed, 31 insertions(+), 31 deletions(-)

commit dd6f18d3b8c8623136e2b20418e52954b65e775a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 15:58:59 2005 +0000

    we need tokenparser.l (LTPBundleFindValueWithKey) only on non Mac OS X
    plateforms. So we avoid linking with tokenparser.o and a possible
    "multiple definitions of symbol _LTPBundleFindValueWithKey" ldd error
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1727 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 4 ++++
 src/Makefile.am | 8 ++++++--
 2 files changed, 10 insertions(+), 2 deletions(-)

commit 9cf94b63460ed0204612de1354efcf0ddca2c0a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 15:25:23 2005 +0000

    HPSearchHotPluggables(): fill a "usb:%04x/%04x" string as deviceName[]
    so it is possible to differentiate two non-identical readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1726 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)

commit 83565c0859b23f81f1d8322fa43a57c08fa13cc4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 13:18:11 2005 +0000

    PMRegisterForPowerEvents(): use (PCSCLITE_THREAD_FUNCTION( )) instead of
    (LPVOID) to cast the function pointer passed to SYS_ThreadCreate()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1725 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_macosx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f4ab353b05994f829830002859edd9338846eb9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 13:17:00 2005 +0000

    PMRegisterForPowerEvents(): use THREAD_ATTR_DEFAULT instead of NULL in
    SYS_ThreadCreate()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1724 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_macosx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d80c15201141cd5b43586a787a4179924b8244b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 13:13:30 2005 +0000

    PMPowerRegistrationThread(): use 0 instead of NULL since
    IORegisterForSystemPower() returns a number and not a pointer
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1723 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_macosx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 40a538bf6ed26d355f403773d24034104bd465a4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 13:05:20 2005 +0000

    use NULL instead of 0 for pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1722 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 18 +++++++++---------
 src/winscard.c      |  4 ++--
 src/winscard_clnt.c | 14 +++++++-------
 src/winscard_scf.c  | 24 ++++++++++++------------
 4 files changed, 30 insertions(+), 30 deletions(-)

commit 6907f9b50aeaec7ced73b94550a4259701daa1a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 12:52:49 2005 +0000

    RFAddReader(): initialize the pdwMutex field of a new reader.
    The bug resulted in a crash on pcscd exit on Mac OS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1721 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 114bb8e0ec08de69b04e7ed2bb70f9826301fbc8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Nov 21 10:32:31 2005 +0000

    DebugLogSetLogType(): add support for "xterm-color" used by Mac OS X
    Terminal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1720 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 528a8825c27caab48e638e9273c8b7a1078e048c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 16 10:36:47 2005 +0000

    remove "PCSC/" from filenames in the generated ChangeLog.cvs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1719 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e9bc7234f2ed3578f8b9f002ccd117da640d2b9c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 16 10:36:03 2005 +0000

    do not use `pkg-config libpcsclite --variable=libdir` since we _are_
    installing libpcsclite.
    This code was ok when libmusclecard was separate from libpcsclite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1718 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit cfd86732551ee2712a5a7f07455fe57b3a99b984
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 29 20:40:52 2005 +0000

    use a customized CSS file for Doxygen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1698 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am |   1 +
 doc/doxygen.css | 311 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 312 insertions(+)

commit b8e173891b7345f3b2455587ebf7be7b2bc91e5c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 29 17:36:04 2005 +0000

    add a rule to generate Doxygen documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1697 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 68b4b951abcd577120ac153b44bca9039eef5d08
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 29 16:38:02 2005 +0000

    add doc/doxygen.conf.in and generation of doxygen.conf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1696 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in        |    1 +
 doc/Makefile.am     |    2 +-
 doc/doxygen.conf.in | 1218 +++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 1220 insertions(+), 1 deletion(-)

commit 3b92074fed36b557dbe0bcc07f813b3bdfdb13db
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 29 16:27:33 2005 +0000

    correct some Doxygen warnings
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1695 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l      | 17 +++++++++++++++++
 src/winscard_clnt.c    |  2 +-
 src/winscard_msg.c     | 18 +++++++++---------
 src/winscard_msg.h     |  2 +-
 src/winscard_msg_srv.c |  2 +-
 src/winscard_svc.c     |  4 ++--
 6 files changed, 31 insertions(+), 14 deletions(-)

commit 568e28a4bba83df35a156d80eca07f1511a31651
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 29 15:49:32 2005 +0000

    todo list
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1694 0ce88b0d-b2fd-0310-8134-9614164e65ea

 TODO | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 1d1bebe211fa448b4560e6d6ec269655fc0857cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Oct 21 08:01:38 2005 +0000

    SYS_Daemon(): manually detatch from terminal on Solaris in case
    daemon(3) does not exist
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1693 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

commit 6f5f137290d71a3769bd1e93a265e21792fb35f6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 18 12:38:49 2005 +0000

    do not try to find yywrap() since we use %option noyywrap now
    
    pcsc-lite can now be compiled without (f)lex installed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1690 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 8 --------
 1 file changed, 8 deletions(-)

commit 9051421472ab85965c66a40e2b84a70476f8db9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 18 12:37:01 2005 +0000

    do not link pcscd with @LIBFL@
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1689 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 90189cf260a560f39554424dd2d092b64cdd4419
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 18 12:36:11 2005 +0000

    use %option noyywrap so we do not use yywrap() and do have to link with
    flex lib
    See http://www.gnu.org/software/flex/manual/html_node/flex_17.html
    
    Thanks to Toni Andjelkovic for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1688 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l  | 1 +
 src/tokenparser.l | 7 +------
 2 files changed, 2 insertions(+), 6 deletions(-)

commit e61ebc890638350ad21d3e3e15842b3257ee3c5d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 18 06:21:54 2005 +0000

    PCSC_SCF_Initialize(): use PCSC_Initialized instead of
    PCSC_SCF_Initialized (typo)
    
    thanks to Najam Siddiqui for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1687 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6836c142bf3d0b5f72ba0c7e628a68ad5abaa94a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 12 13:09:02 2005 +0000

    EventCallback() & PCSC_SCF_Initialize(): Fix issue where
    SCardGetStatusChange() returns incorrect status when it is called right
    after SCardEstablishContext() the first time after the libpcsclite.so is
    loaded in memory, the fix is to make PCSC_Initialize() wait till OCF has
    been initialized and the internal states are consistent.
    
    Thanks to Najam Siddiqui for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1684 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 38 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)

commit 13dfc407d807916f44cda633bf06c2211acaa8d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 12 13:06:24 2005 +0000

    add function isActiveContextPresent() missing from my previous commit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1683 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 26051ca493ce21763851e86c945a16a4d1547a92
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 12 12:47:06 2005 +0000

    SCardUnload(): add cleanup code
    
    Thanks to Najam Siddiqui for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1682 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 38 +++++++++++++++++++++++++++++++++++---
 1 file changed, 35 insertions(+), 3 deletions(-)

commit 3de1559e56a043aa39a32fa0c86fc6bbb2c81108
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 12 12:34:11 2005 +0000

    SCardGetStatusChange(): Context index was being used instead of Reader
    index, it worked only when there was just one context.
    
    Thanks to Najam Siddiqui for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1681 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

commit dc631adb72832c328dcd52ede337d0b35a39d48a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 28 08:06:09 2005 +0000

    EHStatusHandlerThread(): Solaris 10 IFDhandler expect to have
    CardAtrLength set to a sensible value. So add an initialisation before
    calling IFDPowerICC()
    
    Thanks to Douglas E. Engert for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1680 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 ++
 1 file changed, 2 insertions(+)

commit 5439523634d1aa89c9a1ee97d744fc330e3e5f1a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 28 08:02:23 2005 +0000

    PHSetProtocol(): Solaris 10 IFDhandler returns
    IFD_PROTOCOL_NOT_SUPPORTED if the protocol is not supported
    
    Thanks to Douglas E. Engert for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1679 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 24 ++++++++++++++----------
 1 file changed, 14 insertions(+), 10 deletions(-)

commit 99d1d873ca7bd176c422c197ab4d45c5b0e48ce0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 28 07:49:37 2005 +0000

    EHStatusHandlerThread(): log the error code in case of "Error powering
    up card."
    
    Thanks to Douglas E. Engert for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1678 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 427749e19efa9436f4c3e081613c48113b1535ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 26 12:28:30 2005 +0000

    SCardGetStatusChange(): exists if the list of readers changed (one
    reader added) so that the application can update its list of readers
    
    Thanks to Najam Siddiqui for a preliminary patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1673 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit b5ec7331533b63e643ae437ca223e9ee076a6d1e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 10:28:39 2005 +0000

    use CONSTRUCTOR_DECLARATION() and DESTRUCTOR_DECLARATION() to support
    SUN C compiler
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1664 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 2 ++
 1 file changed, 2 insertions(+)

commit 90434fae6133d70cf09ffb2ab5d13b806abfee3e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 10:28:07 2005 +0000

    add support of SUN C compiler (using __SUNPRO_C)
    
    Thanks to Heiko Nardmann for the info
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1663 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 25 +++++++++++++++++++++++--
 1 file changed, 23 insertions(+), 2 deletions(-)

commit 95969eb21774d8edeb4dedfe8a45c668ab33b0ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 08:07:48 2005 +0000

    add rxvt-unicode to the terminals with color support
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1662 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7623198e4915df0acfe808a9da4742302b6c5087
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 08:07:20 2005 +0000

    use #pragma pack instead of GCC specific __attribute__
    
    Thanks to Heiko Nardmann for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1661 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 22 +++++++++++++++-------
 1 file changed, 15 insertions(+), 7 deletions(-)

commit 2b9140546cff3f2d868e56e2532ac060c9310f1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 08:06:06 2005 +0000

    use CONSTRUCTOR & DESTRUCTOR macros instead of GCC specific __attribute__ ...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1660 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 2e88d063426c267dda289ed1e17126540529a0cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 08:05:33 2005 +0000

    define CONSTRUCTOR and DESTRUCTOR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1659 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 87ec9eb150ec57ac01be9228570080c03c167035
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 19 08:05:12 2005 +0000

    use __attribute__ ... only for GCC
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1658 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 4 ++++
 1 file changed, 4 insertions(+)

commit 9b77ccb93c5946aae8024cf84ac3ff2e56fb061f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 15 12:25:15 2005 +0000

    define HOST_TO_CCID_16() and HOST_TO_CCID_32 instead of just
    HOST_TO_CCID()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1656 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in         | 9 ++++++---
 src/PCSC/reader.h.in | 5 +++--
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 133b2c84efbe8a9b5a11b1d8e8bd34f8e66e7ad2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 15 12:09:18 2005 +0000

    muscle-api-1.3.0.pdf is already present in libmusclecard/doc/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1655 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d5ca4df79c2836a86fee3e3d4250ff8589693e8d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 15 12:08:42 2005 +0000

    this document is already present in libmusclecard/doc/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1654 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/muscle-api-1.3.0.pdf | Bin 195231 -> 0 bytes
 1 file changed, 0 insertions(+), 0 deletions(-)

commit dcc35839d343987c6606fd9e90374233ee691476
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 15 12:03:08 2005 +0000

    install PCSC/reader.h and PCSC/pcsclite.h but do not distribute them
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1653 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 8ff62c92bfe251e860865e79f6cddcb708a4a1d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 15 11:44:36 2005 +0000

    add --stdout argument to svn2cl.sh so we don't have to patch the
    svn2cl.sh anymore. The feature is now included in svn2cl v0.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1652 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 1a7d046e6e38d24019e91627e96d51aba0528a88
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 15 11:35:34 2005 +0000

    move some header files from src/PCSC to src and do not distribute them
    in /usr/include/PCSC
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1651 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am                 | 9 ++++-----
 src/{PCSC => }/dyn_generic.h    | 0
 src/{PCSC => }/parser.h         | 0
 src/{PCSC => }/sys_generic.h    | 0
 src/{PCSC => }/thread_generic.h | 0
 5 files changed, 4 insertions(+), 5 deletions(-)

commit 19d7b37d1c42050b0014226c088497c103be8a00
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 14 14:43:21 2005 +0000

    add -I$(top_builddir)/src/PCSC to find the generated files (pcsclite.h)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1650 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/Makefile.am                    | 2 +-
 libmusclecard/src/Makefile.am              | 4 ++--
 libmusclecard/utils/bundleTool/Makefile.am | 2 +-
 src/Makefile.am                            | 2 +-
 src/utils/Makefile.am                      | 2 +-
 5 files changed, 6 insertions(+), 6 deletions(-)

commit c381d7917f0e7d41bdca593350094f0e11f7e286
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 14 14:42:11 2005 +0000

    do not include PCSC/pcsclite.h in the tar.gz since it is generated from
    PCSC/pcsclite.h.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1649 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7c6c059d42a9f1e217d8142b523ebfed63927068
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 14 14:28:27 2005 +0000

    include muscle-api-1.3.0.pdf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1648 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 736294e4a6386be443b068dd4bda61a9ac2712f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 14 14:23:55 2005 +0000

    copy from rel-1_2_9-beta7
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1647 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/muscle-api-1.3.0.pdf | Bin 0 -> 195231 bytes
 1 file changed, 0 insertions(+), 0 deletions(-)

commit 642e1429ce52300388edaf14eb6269b2c241ee57
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 8 13:58:35 2005 +0000

    do not fail if svn2cl fails (command not installed for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1646 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6d9c5ab8340cbdb3a08628c7f68430ad23ff8024
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 8 13:58:11 2005 +0000

    do not fail if $(PDFLATEX) fails (command not installed for example)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1645 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0bd473bab43fa465a99fc449b7f792fbdc024cdb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 7 19:05:49 2005 +0000

    svn2cl --group-by-day
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1644 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ad8bdef9a725ea65ac76da744ceee7853775d49b (tag: 1.2.9-beta8)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 6 19:51:36 2005 +0000

    release 1.2.9-beta8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1642 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit f9bc091493e13bc6e503ecccc8e98c28cdcacb80
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 1 13:54:11 2005 +0000

    use [...].mMutex = NULL; instead of [...].mMutex = 0; since it is a
    pointer
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1637 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 727e151997f5b8e08c280634290a2bb112fc05ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 1 13:23:11 2005 +0000

    SCardCancel(): do not synchronise using .mMutex since it may be hold by
    another thread blocked for a very long time in SCardGetStatusChange()
    
    Thanks to Roland van Rijswijk for a preliminary patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1636 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ----
 1 file changed, 4 deletions(-)

commit 49f1fc82654105a35950945f2b2e2ec4732569f8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 1 08:25:50 2005 +0000

    RFAddReader(): correct max length tests for reader, library and device
    I was too pessimistic
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1629 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 3c39d8914f194c1eac92b956814e9368dc9d19ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 31 14:58:19 2005 +0000

    RFAddReader(): do not silently truncate the reader, library or device
    name if they are too long
    
    Thanks to Ribamar Santarosa de Sousa for the bug report
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1628 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit 786caed43d707ff3e32360ceab44231278e2a0a7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 31 14:48:53 2005 +0000

    RFAddReader(): return in error if lpcDevice == NULL
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1627 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1f15d1ed4f5c34affe2164d976141da41281d399
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 23 15:06:08 2005 +0000

    use svn2cl instead of rcs2log
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1624 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 34a74449827f0547636d5ed3354329561f5f99f3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 23 15:01:42 2005 +0000

    SCardEstablishContextTH() and SCardReleaseContext(): initialize rv field
    of scEstablishStruct/scReleaseStruct structures to avoid a valgrind
    warning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1623 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit b3ffcbbfc0475df6c65c071d63e08d07a57e4490
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 17 13:29:58 2005 +0000

    Pack the complete structures instead of just the 16-bits fields
    This syntax is more readable
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1621 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

commit 4652ea0e74462477bc0a534e5ce1659f4f90c0ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 17 06:45:00 2005 +0000

    use __attribute__ ((__packed__)) for 16-bits fields since they are not
    aligned on word boundaries
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1620 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

commit 49366c415bd2852bc4dae952b147c4cb354b6834
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 16 06:50:18 2005 +0000

    removed since we use SVN and not CVS anymore
    
    Thanks to Martin Paljak for the idea
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1619 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .cvsignore                                | 24 ------------------------
 doc/.cvsignore                            | 20 --------------------
 doc/example/.cvsignore                    |  5 -----
 etc/.cvsignore                            |  5 -----
 libmusclecard/.cvsignore                  |  2 --
 libmusclecard/doc/.cvsignore              |  2 --
 libmusclecard/src/.cvsignore              | 15 ---------------
 libmusclecard/utils/.cvsignore            |  2 --
 libmusclecard/utils/bundleTool/.cvsignore |  6 ------
 m4/.cvsignore                             |  2 --
 src/.cvsignore                            | 13 -------------
 src/PCSC/.cvsignore                       |  1 -
 src/utils/.cvsignore                      |  7 -------
 win32/.cvsignore                          |  2 --
 14 files changed, 106 deletions(-)

commit 52a5c3221863bb444992b2f53d62f969c6f63bb8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 15 09:59:03 2005 +0000

    update
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1615 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/formaticc.1      | 51 +++++++++++++----------------
 doc/pcscd.8.in       | 92 ++++++++++++++++++++++++++++++----------------------
 doc/reader.conf.5.in | 34 ++++++++++---------
 3 files changed, 94 insertions(+), 83 deletions(-)

commit 35608383ad53333bf7dcabe6d3ccf872fbf5d8dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 8 10:34:26 2005 +0000

    remove AM_CONDITIONAL(PCSC_USE_LIBUSB...) since it is not used anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1607 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 -
 1 file changed, 1 deletion(-)

commit cfa2c9893dd1d732fef3e33461d22ee46a4fd703
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 8 10:29:11 2005 +0000

    disable libusb on Darwin (MacOS X) since native usb layer is preferred
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1606 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 ++
 1 file changed, 2 insertions(+)

commit d3b4566fe7185574e61050435e90a1674b830dca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 8 10:23:14 2005 +0000

    use libtool's "-export-dynamic" instead of gcc's "-rdynamic"
    
    see http://www.gnu.org/software/libtool/manual.html#Link-mode
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1605 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c13075c1b383f56fc798bd58569cbd3982e721e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 13:28:34 2005 +0000

    include definitions of:
    - HOST_TO_CCID() macro
    - PIN_VERIFY_STRUCTURE structure
    - PIN_MODIFY_STRUCTURE structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1603 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 59 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 59 insertions(+)

commit 11527722511dee410fadd155c34e914ffaa7ac58
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 13:27:01 2005 +0000

    use inttypes.h instead of stdint.h
    (stdint.h does not exist on Solaris)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1602 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 28f056da490563cff3dd63cee4e88f73d61782c8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 4 13:24:52 2005 +0000

    check is the plateform is big or little endian and generate the
    corresponding HOST_TO_CCID() macro in PCSC/reader.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1601 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit b9b03bad7440e927786d32db62c21c17795ef1b7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 3 08:00:22 2005 +0000

    HPAddHotPluggable(): off by 1 buffer overflow. The last character of a
    string is "sizeof(string) -1" and not "sizeof(string)".
    
    Thanks to Amira Solomovici for the bug report. A crash occured on Fedora
    Core 4.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1599 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 11b83bfb4865ac4fa39b577c4b8a7365a9de618f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 3 07:58:27 2005 +0000

    HPAddHotPluggable(): use sizeof() instead of BUS_DEVICE_STRSIZE to be
    less error prone
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1598 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 3d44c14a5621e5fc42faace055aad0adee2d9ac1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 2 14:21:15 2005 +0000

    HPSearchHotPluggables(): start the HPEstablishUSBNotifications thread
    only if HPReadBundleValues() returns TRUE (some USB drivers are found)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1597 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 6a44714a81f8dfb4df9420e9871a640fda335912
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 2 14:17:54 2005 +0000

    HPReadBundleValues(): return TRUE only if some USB drivers are found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1596 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 8d384851a37e85df4b40460fee1e098c071b5802
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 2 14:09:29 2005 +0000

    HPEstablishUSBNotifications(): free data allocated for driverTracker[]
    on exit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1595 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 1bfa6d040cc9c507931fa8632eec1ce407872c7e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 1 08:24:24 2005 +0000

    SCardReconnect(): remove duplicate checking code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1582 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 11 +++--------
 1 file changed, 3 insertions(+), 8 deletions(-)

commit 55265612ee152337d68edca74e4a21ff64be5112
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 27 13:20:51 2005 +0000

    HPReadBundleValues(): clean the newly allocated entries when
    driverTracker[] is enlarged
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1580 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 89433841dec45fef467152d9d66589c6dc301f05
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 27 09:56:16 2005 +0000

    SCardCancelTransaction(): Doxygen documented deprecation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1578 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 056f04ff8e732c9048ac51b009cdd54828c881a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 27 09:50:19 2005 +0000

    move the Doxygen for SCardCancel() to the correct function (it was
    attached to SCardCancelTransaction())
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1576 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 54 ++++++++++++++++++++++++++---------------------------
 1 file changed, 27 insertions(+), 27 deletions(-)

commit c50fc24f835152aeef7f043532acf3aac5a3a1bb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 27 09:36:25 2005 +0000

    typos in doxygen documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1574 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 2b5e553227ca9a57516d95fe99eba08707180018
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 27 09:29:00 2005 +0000

    typos in doxygen documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1573 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 2 +-
 src/winscard.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b81f343f7365d36eb1cd81b4af8cb3e37fb7a768
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 6 07:20:23 2005 +0000

    use ISO C99 integer types in PCSC_TLV_STRUCTURE instead of __int*
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1572 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 4003dfb34d132c21cdf7a857ad843d2711ff3496
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jul 4 13:59:32 2005 +0000

    add PCSC_TLV_STRUCTURE structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1571 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/reader.h.in | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit b2894ab7874fbd907e62ce526659fdae21818384
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 27 08:42:33 2005 +0000

    add option -e -C so that systems without getopt_long() can use them.
    remove code to parse the long options.
    
    Solaris does not have getopt_long(). Thanks to Heiko Nardmann for the
    bug report.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1565 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 38 ++++++++++++++++----------------------
 1 file changed, 16 insertions(+), 22 deletions(-)

commit 53f7a286cbc83d8d7c400387b67ffcec3013b411
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 16 17:30:01 2005 +0000

    DBGetReaderList(): *caller_reader_list = NULL by default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1564 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 ++
 1 file changed, 2 insertions(+)

commit 773314bfe23b6273c99fb1ef0f393b25a7b5b388
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 15 11:57:31 2005 +0000

    HPRegisterForHotplugEvents(): void function so remove return 0;
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1554 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 1 -
 1 file changed, 1 deletion(-)

commit f5f7b0a563b33e0b8dcd270bf70f380a72d7ce60
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 15 11:56:17 2005 +0000

    SCardTransmit(): initialise sSendPci.Protocol to T=0 by default
    (avoids a compiler warning)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1553 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 4b22484dc4645ab5a4ec3c828743518c4c2a2cf2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 15 11:55:22 2005 +0000

     #include "configfile.h" to define DBGetReaderList()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1552 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 306775d61cf814afd83bd1e559d2d14f65d93a30
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 15 11:54:47 2005 +0000

     #include "configfile.h" to check the function prototype
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1551 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 1 +
 1 file changed, 1 insertion(+)

commit 81bdd7738b617508cc1da931cf036ffaf0ddf06c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 15 11:54:21 2005 +0000

    correct function prototype according to configfile.l new version
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1550 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f67043b8d8df0bd846ee1efa787ac30aa18c52a5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 4 12:59:57 2005 +0000

    HPReadBundleValues(): use >= instead of > to check if too many readers
    are declared in the previous patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1549 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 71a092342e47f8230ace76177491b877b4389ee2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jun 4 12:10:31 2005 +0000

    HPReadBundleValues(): exit early if too many readers are declared since the
    array to store them is static (PCSCLITE_MAX_READERS_CONTEXTS)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1548 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit f5803902367ef4e0d5c320827f5b57990fb1fe76
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 15:09:58 2005 +0000

    1.2.9-beta8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1544 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a43b581929b54488a86805d5541700862407b73d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:54:24 2005 +0000

    HPRegisterForHotplugEvents(): use THREAD_ATTR_DEFAULT instead of NULL
    and (PCSCLITE_THREAD_FUNCTION( )) instead of (LPVOID)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1543 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 20851723f57ebbb5035fdb666647d2184f1aa684
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:52:42 2005 +0000

    replace NULL by 0 in the 4th argument of
    IORegistryEntryCreateCFProperty()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1542 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit ed974326c5f7b6a771180bbd25e4c1aef71d2246
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:51:52 2005 +0000

    define char ReCheckSerialReaders and HPReCheckSerialReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1541 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 751af0abda355e39eccd158305ad840d7b1abaec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:50:13 2005 +0000

    define an empty HPReCheckSerialReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1540 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 4 ++++
 1 file changed, 4 insertions(+)

commit e0751d7c469d948438c990fd958d2242fa7022dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:49:50 2005 +0000

    define char ReCheckSerialReaders used by pcscdaemon.c and winscard_msg_srv.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1539 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 1 +
 1 file changed, 1 insertion(+)

commit c245d3c1a518d2cf4eaa5529308ef573f3fe12cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:48:00 2005 +0000

    add HPReCheckSerialReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1538 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h | 1 +
 1 file changed, 1 insertion(+)

commit 69b179d529092dd0990c00d848b4f1644bac05b7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 14:01:56 2005 +0000

    do not declare SHMProcessCommonChannelRequest() since it is a static
    function in winscard_msg_srv.c never used elsewhere
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1537 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 1 -
 1 file changed, 1 deletion(-)

commit bbc77f4369afd2b4836437b8f50ad75d0e8f79e4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 13:05:25 2005 +0000

    do not log an error if select() is interrupted because of a manual
    hotplug signal (SIGUSR1)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1536 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       | 4 +++-
 src/winscard_msg_srv.c | 3 ++-
 2 files changed, 5 insertions(+), 2 deletions(-)

commit 01ec8febda50f1e18e7a466e663f7801c0dac9be
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 13:03:40 2005 +0000

    call signal_reload() when a SIGUSR1 signal is received
    
    This provides a manual serial hotplug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1535 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 0831d1dd75cf9a7329876337059d550f74c179d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 13:01:48 2005 +0000

    call RFStartSerialReaders() instead of DBUpdateReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1534 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ce538cff1958c7afaa143d6545547b7d30f4f8e5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 13:00:04 2005 +0000

    implement HPReCheckSerialReaders() to set ReCheckSerialReaders flag
    if ReCheckSerialReaders flag is set we call RFReCheckReaderConf()
    
    This code has nothing to do with libusb or USB but is a serial hotplug
    so should be in a hotplug loop
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1533 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit b52b374f72eecd61193cc7e7666cf0716da584b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 12:57:18 2005 +0000

    implement RFStartSerialReaders() to start (serial) readers described in the
    configuration file (/etc/reader.conf)
    
    implement RFReCheckReaderConf() to stop or start readers described in
    the configuration file. This allows a serial hotplug.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1532 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 134 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 134 insertions(+)

commit 7247ae17dc3d5782203858ba6a2847caec7194f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 12:54:49 2005 +0000

    rename DBUpdateReaders() in DBGetReaderList()
    The function now just returns a list of readers described in the
    configuration file (/etc/reader.conf by default)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1531 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.h |  2 +-
 src/configfile.l | 62 ++++++++++++++++++++++++++++++++++++++++++--------------
 2 files changed, 48 insertions(+), 16 deletions(-)

commit 9a9c7ef04ecbbc3f48cdf928c15d2329732da244
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 12:52:07 2005 +0000

    add struct SerialReader, RFStartSerialReaders() and
    RFReCheckReaderConf() declarations
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1530 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 81de1bbffd6451766ada63660b3a790cb7c516bf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 26 12:51:28 2005 +0000

    remove #include "configfile.h"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1529 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 1 -
 1 file changed, 1 deletion(-)

commit 875c79d0094205cd72e29905f0704c304a92e53d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 25 14:20:18 2005 +0000

    DebugLogSetLevel(): do not print anything if the level is critical or
    error in order to not "pollute" logs in normal cases.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1528 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit 10e346b7d5fa4f04da8e8a1c55ec92863819e512
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 25 14:17:23 2005 +0000

    Do not log a critical or error debug message if pcscd is stopped using
    Ctrl-C or SIGQUIT
    Closes Debian bug 306061
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1527 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c       | 5 +++--
 src/winscard_msg_srv.c | 6 ++++--
 2 files changed, 7 insertions(+), 4 deletions(-)

commit 0a84a92f60accabf4aac00ac6fb97a2ff41c9a95
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 25 14:13:07 2005 +0000

    link pcscd with winscard_msg_srv.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1526 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3864e6d987f419ed051de54198dedef53dc7eec4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 25 13:44:06 2005 +0000

    move the functions only use by the server part from winscard_msg.c to
    winscard_msg_srv.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1525 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c     | 234 -----------------------------------------
 src/winscard_msg_srv.c | 279 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 279 insertions(+), 234 deletions(-)

commit 52cc13790577aaa22368763fa747d202e6627719
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 25 07:21:01 2005 +0000

    check if we should use color logs in DebugLogSetLogType() and not only
    the first time in log_msg()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1524 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 63 ++++++++++++++++++++++++++--------------------------------
 1 file changed, 28 insertions(+), 35 deletions(-)

commit 7a6cd4c4462be8c7ca9225c9b8b3e184964778a4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 17:07:21 2005 +0000

     #include "reader.h" to use SCARD_CTL_CODE() macro
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1519 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

commit d79f800986318b1b25c74894803990c94e1b0102
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 17:06:35 2005 +0000

    distribute PCSC/reader.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1518 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 85383b7d1ddacacbe500304d2d6a1d3cb57e4b2b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 17:06:07 2005 +0000

    reader.h now contains the #defines shared between the driver and the
    application
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1517 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in |  96 -----------------------------------------
 src/PCSC/reader.h.in   | 115 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 115 insertions(+), 96 deletions(-)

commit a33456b889f7da376aa87bf8bff55f7c3819f615
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 16:45:55 2005 +0000

     #define SCARD_CTL_CODE(code)
    and some TeleTrust Class 2 reader tags
    
    Thanks to Martin Paljak for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1516 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit f0cd97753b6d1af329bc69c1a411456e9bcab878
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 18 16:36:06 2005 +0000

    SCardControl(): a 0 byte long pbSendBuffer is no more rejected since the
    command is in dwControlCode
    
    Thanks to Martin Paljak for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1515 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ---
 1 file changed, 3 deletions(-)

commit de9817882ef5cb01ff46fbab9ce2cbec079f9550
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 3 06:56:57 2005 +0000

    add @endcode in SCardGetStatusChange() doxygen doc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1502 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 ++
 1 file changed, 2 insertions(+)

commit 7799e773e2278b5714b15c5b42153db1a0b5ef83
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 3 06:48:09 2005 +0000

    minor corrections in doxygen doc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1501 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

commit 3374f6c6cda47d8737aac505cbbcef4c3af0ef9a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 3 06:38:46 2005 +0000

    reformat doxygen pargraphs to 79 colunms
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1500 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 65 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 32 insertions(+), 33 deletions(-)

commit 4fae860c755af8d7bb3d1126331899bb657dbaf8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 3 06:36:38 2005 +0000

    remove @typedef. It is useless and makes doxygen crash
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1499 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.h | 1 -
 1 file changed, 1 deletion(-)

commit 24a1862f6503f55174b6d28302a67fe4d501f33f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 2 14:12:04 2005 +0000

    do not build pcscd if SCF is used since the library talks directly to
    ocfserv and pcscd is not used.
    
    Thanks to Jeffrey Hutzelman for the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1498 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 9a8d73988004f290540616d741cc70370425d5b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 2 14:05:25 2005 +0000

    add SCardGetAttrib()/SCardSetAttrib() even if they return
    SCARD_E_NOT_TRANSACTED for now. testpcsc can now link when SCF is used.
    
    Thanks to Jeffrey Hutzelman for the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1497 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 7ad149ad0112e6cd608879fc4f3d72fc17e7aed8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 12:41:57 2005 +0000

    add libmusclecard in SUBDIRS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1466 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 04c15c653914260cac75d16f42cb6cc744ccbede
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 12:41:37 2005 +0000

    add --enable-muscledropdir=DIR and --enable-musclecarddebug for
    libmusclecard support
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1465 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

commit 7403d033c004326a8d53282a65add6db51234758
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 12:40:09 2005 +0000

    update the files to ignore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1464 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/.cvsignore     | 22 ----------------------
 libmusclecard/src/.cvsignore |  4 ++++
 2 files changed, 4 insertions(+), 22 deletions(-)

commit eb7408f51bce51027c6776ef65485169f08d475b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 12:39:19 2005 +0000

    use the headers from pcsclite in $(top_srcdir)/src/PCSC
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1463 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/Makefile.am | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit d34bfe3d5df6e535743171be3ed7e01d1cff3b85
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 12:38:35 2005 +0000

    use the header and sources files from pcsclite (in $(top_srcdir)/src/)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1462 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/Makefile.am | 42 ++++++++++++++----------------------------
 1 file changed, 14 insertions(+), 28 deletions(-)

commit 1a31c9e56c1606bd8eb2fc8915a586a8c2b9dc6e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 12:37:34 2005 +0000

    new file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1461 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/Makefile.am | 4 ++++
 1 file changed, 4 insertions(+)

commit c8639e03ecf048aea6e7f0d89e81a78637461979
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 09:25:44 2005 +0000

    only use "__attribute__ ((deprecated))" if __GNUC__ is defined.
    Otherwise it does not compile with Solaris C compiler.
    
    Thanks to Jeffrey Hutzelman for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1457 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 994da7d8935be072fe9023cce017b519bc0476f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 09:14:41 2005 +0000

    SCardControl(): use the new API (with DWORD dwControlCode added)
    
    Thanks to Jeffrey Hutzelman for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1456 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 44c77e2056b284fe56eb8573a1b05986543ab986
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 27 09:11:50 2005 +0000

    SYS_Daemon(): add the missing priority argument to Log2()
    
    Thanks to Jeffrey Hutzelman for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1455 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit e3b1c2b08837306e4b7f30abc4c16421a7d17b9d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 21 09:35:02 2005 +0000

    release the context when the library is unloaded.
    
    Thanks to Karsten Ohme for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1432 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit d111cecc4b1fb9bf0e8e75da02e01b378a024609
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 21 09:28:46 2005 +0000

    also distribute misc.h, dyn_hpux.c, dyn_macosx.c, dyn_unix.c, dyn_win32.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1431 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/Makefile.am | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit a323f9a8ed17d15e9876fc9ace9d6a6d9a2e27fa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 21 09:26:43 2005 +0000

    do not perform a windows specific treatment for PCSC_MCARD_mutex
    declaration/initialisation
    
    Thanks to Karsten Ohme for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1430 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 5 -----
 1 file changed, 5 deletions(-)

commit e486de7baaaa7e6d6b6081601344aa34286f12bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 21 09:23:38 2005 +0000

    add a missing \ in "%s\\%s\Contents\\Win32\\%s"
    
    Thanks to Karsten Ohme for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1429 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3da56c6f22d9eb9b99529716850cfc1a1afdd60
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 21 09:23:02 2005 +0000

    add some #define
    
    Thanks to Karsten Ohme
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1428 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit ca1a815d1b08a29c35e3cda32977fb91ed3edea7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 13 06:34:05 2005 +0000

    use "signed char" instead of "char" for LogDoColor since we use the value -1
    and on some platforms (like PowerPC) char is unsigned bu default.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1424 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 519d21f412e31173a01224a1fd8671dab4df72e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 12 20:46:38 2005 +0000

    add misc.h in libpcsclite_la_SOURCES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1423 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit f53ee3d89881da56e5b90d7cedb218dcc5024237
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 12 12:09:21 2005 +0000

    add (some) Doxygen documentation
    
    Thanks to Luiz Reuter Silva Torro for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1421 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h       |  16 +-
 src/PCSC/dyn_generic.h    |   7 +-
 src/PCSC/ifdhandler.h     |   7 +-
 src/PCSC/parser.h         |   7 +-
 src/PCSC/pcsclite.h.in    |   7 +-
 src/PCSC/sys_generic.h    |   7 +-
 src/PCSC/thread_generic.h |   7 +-
 src/PCSC/winscard.h       |   7 +-
 src/PCSC/wintypes.h       |   7 +-
 src/atrhandler.c          |  36 +-
 src/atrhandler.h          |   9 +-
 src/debuglog.c            |  30 +-
 src/dyn_hpux.c            |   7 +-
 src/dyn_macosx.c          |   7 +-
 src/dyn_unix.c            |   7 +-
 src/dyn_win32.c           |   7 +-
 src/eventhandler.c        |   9 +-
 src/eventhandler.h        |  13 +-
 src/hotplug.h             |   7 +-
 src/hotplug_generic.c     |  15 +-
 src/hotplug_libusb.c      |   7 +-
 src/hotplug_linux.c       |   7 +-
 src/hotplug_macosx.c      |   7 +-
 src/ifdwrapper.c          |   7 +-
 src/ifdwrapper.h          |   9 +-
 src/pcscdaemon.c          |  22 +-
 src/powermgt_generic.c    |   7 +-
 src/powermgt_generic.h    |   7 +-
 src/prothandler.c         |   7 +-
 src/prothandler.h         |   7 +-
 src/readerfactory.c       |   7 +-
 src/readerfactory.h       |   7 +-
 src/strlcpycat.h          |   7 +-
 src/sys_unix.c            | 138 ++++++++
 src/testpcsc.c            |   7 +-
 src/thread_unix.c         |   7 +-
 src/thread_win32.c        |   7 +-
 src/utils/formaticc.c     |   7 +-
 src/utils/installifd.c    |   7 +-
 src/winscard.c            | 105 +++++-
 src/winscard_clnt.c       | 882 ++++++++++++++++++++++++++++++++++++++++++++--
 src/winscard_msg.c        | 142 +++++++-
 src/winscard_msg.h        |  95 ++++-
 src/winscard_scf.c        |   7 +-
 src/winscard_svc.c        |  62 +++-
 src/winscard_svc.h        |   9 +-
 46 files changed, 1643 insertions(+), 159 deletions(-)

commit 7f65a1ba004a63a3ea723a182b7f6bcd613079d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 12 07:42:15 2005 +0000

    DebugLogSuppress(), debug_msg() and debug_xxd are defined only for pcscd
    and not for libpcsclite.so
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1420 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 4b602a912575f1ef08c90e2c423d1bd0e5f535ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 12 07:40:58 2005 +0000

    define some/most functions as INTERNAL (see misc.h) so the function symbols
    are not visible in libpcsclite.so
    
    This will prevent function names collision with homonym functions
    defined in a library or program linked with libpcsclite.so
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1419 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c     |  5 ++--
 src/dyn_unix.c     |  7 +++---
 src/strlcat.c      |  3 ++-
 src/strlcpy.c      |  3 ++-
 src/sys_unix.c     | 74 ++++++++++++++++++++++++++++--------------------------
 src/thread_unix.c  | 23 +++++++++--------
 src/winscard_msg.c | 23 +++++++++--------
 7 files changed, 73 insertions(+), 65 deletions(-)

commit a07717ec9f478c06be33a28c8d76699d305c05d7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 12 07:34:31 2005 +0000

    remove debuglog.c from libpcsclite_core_la_SOURCES so the same source
    file can be compiled with different -D arguments for
    libpcsclite_la_SOURCES and pcscd_SOURCES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1418 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 435ab2d9c839f0bcdcbc4b11bcfdd08ecea715ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 12 07:31:00 2005 +0000

     #define INTERNAL
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1417 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/misc.h | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit d5727f43680a4b409f14bb6eacb6224e05c4ba39
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 6 14:16:44 2005 +0000

    MSCReleaseConnection(): call SCardReleaseContext()
    
    Thanks to Karsten Ohme for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1416 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 154fda59e20eeb1c5d6670bc2651aee7393ab46e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 22 11:00:59 2005 +0000

    main(): print usage and exit if a unknown parameter is passed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1415 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 6310f91e7e1a5677850ebaa0477f36d2dfec6f70
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 21 12:46:27 2005 +0000

    remove libmusclecard documentation since it is now in a separate package
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1414 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 21 +++------------------
 1 file changed, 3 insertions(+), 18 deletions(-)

commit a2dc05a803ce6d017ee8eedcf7f96a69a6849b32
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 21 12:43:32 2005 +0000

    update documentation of --debug, --info, --error, --critical and
    --foreground
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1413 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 25 +++++++++++++++----------
 1 file changed, 15 insertions(+), 10 deletions(-)

commit 8c98e7335a303c938f2e4d4ffe97fdcabb756e65
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Mar 21 07:38:44 2005 +0000

    DISTCLEANFILES = ifdhandler-3.pdf pcsc-lite.pdf
    The two PDF files are only removed by "make distclean" so normal users
    will not have to (re)build them after a "make clean"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1412 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d196407124aa94ccd34730033a72c215307f03b3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 17 08:22:19 2005 +0000

    add colorization of the logs when sent to stderr. The color depends on
    the priority level:
    - critical: bright red
    - error: magenta
    - info: blue
    - debug: black
    
    A correct implementation should use ncurses to be portable but I don't
    want to add a dependency on pcscd.
    
    The code and idea is greatly inspired from OpenSC.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1403 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 68 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 67 insertions(+), 1 deletion(-)

commit 34d96678f2fcaf598f4bd70cce12aede6f5c43d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 17 07:53:53 2005 +0000

    change global variable names to use a capital first letter
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1402 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 52 ++++++++++++++++++++++++++--------------------------
 1 file changed, 26 insertions(+), 26 deletions(-)

commit 385fbae52f42e6c99603abf6b5f34ae784b51e7b (tag: 1.2.9-beta7)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 2 15:42:52 2005 +0000

    release 1.2.9-beta7
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1389 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)

commit e5cbee77ddfacd98a1f74a905ba518abdffd086c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 2 15:18:25 2005 +0000

    RFAddReader(): revert the previous patch.
    
    The wait delay is moved to SCardGetStatusChange()/winscard_clnt.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1388 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 ---
 1 file changed, 3 deletions(-)

commit 2162c47839da9c683362781b96b319105f902619
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 2 15:12:49 2005 +0000

    SCardEstablishContextTH(): if MUSCLECARD_DEBUG environment variable is
    defined we use the more verbose debug level
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1387 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit a2da51b507034e6d2f2ac138136c87f110ca1a34
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 2 15:11:22 2005 +0000

    SCardGetStatusChange(): if the card is present but not yet powered up
    we give some time to the status thread to do his job
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1386 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 573b661bff1cad04609386b8941b23a7620c9447
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 1 09:27:43 2005 +0000

    RFAddReader(): give some time to EHStatusHandlerThread() to
    asynchronously power the card.
    
    The problem was that the reader was initialised but the card in the
    reader was not powered up immediately. So if you are fast enough to call
    SCardConnect() it would fail with a wrong protocol (since the card ATR
    is not yet known).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1385 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 3 +++
 1 file changed, 3 insertions(+)

commit 1a8a0fedc37a9286e106e0a916d1cf7f43eff727
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 1 09:22:52 2005 +0000

    SCardConnect(): use "Attempting Connect to %s using protocol: %d"
    instead of "Attempting Connect to %s %d"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1384 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9e6cb91cf60103278641812dc1a1c5e36898b9a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 1 09:17:03 2005 +0000

    use Logx() instead of debug_msg()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1383 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 949564799d7c3fa8521ddee7dce0581791abd749
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 1 09:15:47 2005 +0000

    add Log9()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1382 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 1 +
 1 file changed, 1 insertion(+)

commit a6af72245628c10c161ceb73bd8b3fe1fd8a02f6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 1 09:14:59 2005 +0000

    add () after the function name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1381 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit af774d45bff56a89e4b3d015899359dd30319596
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 15:38:30 2005 +0000

     #define Log0()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1380 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit c608f34df43bb272c91cade89ee4027c15e69e0e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 15:15:22 2005 +0000

    typo: "Reader/s" -> "Reader"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1379 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5243f47c1f1ce53c95be8c9c7cdf74b9672959dc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 15:08:19 2005 +0000

    SCardControl(): rContext was used before initialisation (segmentation
    fault)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1378 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 93ef4aca487dcd97c9c595b182a1dc21146580f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 14:25:24 2005 +0000

    DebugLogSetLogType(): do not modify dbgtype argument since it is "const"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1377 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 720168496b1c4894d73ec72cfcf30c1e455c02d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 14:23:58 2005 +0000

    use pcsc_demo_CFLAGS instead of AM_CPPFLAGS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1376 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/Makefile.am | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit a0586ccdeeb99ed92b29368e8e56f002a204491e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 14:23:32 2005 +0000

    use "%lX" instead of "%X" for rgReaderStates[0].dwEventState field
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1375 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1ab8a9127805d7d42c333f1f862fe98b3753f2a8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 13:45:44 2005 +0000

    improve SCardGetStatusChange() documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1374 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 17 +++++++----------
 1 file changed, 7 insertions(+), 10 deletions(-)

commit 49c85055e8c54d709e3fe61f7b42ec7491f979bc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 13:41:53 2005 +0000

    add SCardGetStatusChange() code sample
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1373 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit 9cf8057df89df6d20c82820f03dcd0216b55f523
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 12:45:03 2005 +0000

    update copyright
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1372 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 1 +
 1 file changed, 1 insertion(+)

commit e8e41d6a6775dd8581357adf569daeaa37518aae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 12:44:25 2005 +0000

    simplify the debug output switch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1371 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 92 ++++++++++++----------------------------------------------
 1 file changed, 19 insertions(+), 73 deletions(-)

commit 108d701401aec644fbd25658d9e57eaed9372b9f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 12:35:18 2005 +0000

    DebugLogSetLogType(): check the log type argument value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1370 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 3e1bf86cd8dd4c4c0a7acb959737f46f1d3fa300
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 09:46:03 2005 +0000

    DebugLogSetLevel(): display the unknown level value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1369 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit f544c4bcbbb48a06ac881cf334ab116ed0a683d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 08:58:03 2005 +0000

    remove --enable-threadsafe since it is now useless
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1366 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 16 ----------------
 1 file changed, 16 deletions(-)

commit ca4c041dc85d151842a936ef11491d3830de9729
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 08:49:23 2005 +0000

    code cleanup
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1365 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 139 ++++++-----------------------------------------------
 1 file changed, 16 insertions(+), 123 deletions(-)

commit 5af1519e3336eb8fc3b43c492fef5428f375f8d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 08:42:29 2005 +0000

    code reindentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1364 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 3089 ++++++++++++++++++++++++++++------------------------
 1 file changed, 1659 insertions(+), 1430 deletions(-)

commit 217bbf2fd4d82176c84d7f21000251938d5a742c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 08:40:50 2005 +0000

    remove #ifdef USE_THREAD_SAFETY since it _must_ be defined for the file
    to compile
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1363 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 33 +++++----------------------------
 1 file changed, 5 insertions(+), 28 deletions(-)

commit e0d8f0697c380903be256c58cffeefa0343630db
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 28 08:38:57 2005 +0000

    remove --enable-debug since it is not used anymore (log level is no
    dynamic at execution time)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1362 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 16 ----------------
 1 file changed, 16 deletions(-)

commit 23c3e621716374565b9441bae6dd9f048f5fcbaf
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Feb 27 17:01:13 2005 +0000

    - Upgrade Xcode project related files a bit,
      compiles yet untested otherwise.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1357 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/config.h                |  28 ++-
 pcsc.pbproj/project.pbxproj | 451 +++++++++-----------------------------------
 2 files changed, 97 insertions(+), 382 deletions(-)

commit 9f9286eb7d8f04751e83a40ffa36d4f49a84bde5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Feb 24 12:53:00 2005 +0000

    SCardControl(): check if the pbSendBuffer is NULL or no bytes are sent
    for API v2 only. With API v3 we can use dwControlCode as the only data
    to send.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1348 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit f4b88c1d824b141c2f0016cef8109dd55a6bd949
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 14:31:58 2005 +0000

    simplify the detection and use of strlcpy and strlcat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1347 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 12 +-----------
 src/Makefile.am | 14 ++------------
 src/strlcat.c   |  6 ++++++
 src/strlcpy.c   |  6 ++++++
 4 files changed, 15 insertions(+), 23 deletions(-)

commit 3b7fc95b26f8a9d3ed7c55a96e4a225d956c48d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 13:11:37 2005 +0000

    remove DEBUGLOG_STDOUT_DEBUG case since it is never used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1345 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h |  7 +++----
 src/debuglog.c      | 12 ------------
 2 files changed, 3 insertions(+), 16 deletions(-)

commit 0864009955cfda5acf1448df5fa79ae08848d4a6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 13:10:11 2005 +0000

    use "const int" instead of "int" for priority
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1344 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit a5e7fe5755e6ea08200a3f1081fbf7bec2e0e208
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 09:49:10 2005 +0000

    update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1340 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 1 +
 1 file changed, 1 insertion(+)

commit 7950f9df6159f2437db4048708c925a89bcee792
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 09:48:32 2005 +0000

    document Log1() instead of DebugLogA() in comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1339 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 681cd12ddec923a763a3b92e4ac571116e17b1c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 09:46:11 2005 +0000

    use "const int" instead of "int" for priority
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1338 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 308e56ab143c62e93ddf027cbe6329840b06f774
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 23 08:27:29 2005 +0000

    document log_msg() and log_xxd()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1337 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 57 +++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 41 insertions(+), 16 deletions(-)

commit 22db393c2fe7e8cff63ab2f451368cb37edb04d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 16:04:12 2005 +0000

    add a complete Info.plist configuration file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1336 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 48 ++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit dda7ab90d10de1d0efa539ed42145ddd034a4ba0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 15:38:55 2005 +0000

    use dynamic debug level: LogX() instead of DebugLogX()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1335 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 24 +++++------
 libmusclecard/src/tokenfactory.c | 93 ++++++++++++++++++++--------------------
 2 files changed, 59 insertions(+), 58 deletions(-)

commit afad3cd08a6fe1bd7ad0b95cf50a4cd82c2d33db
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 14:40:26 2005 +0000

    Use dynamic level logging using LogX() instead of DebugLogX()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1334 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c      |   8 ++--
 src/configfile.l      |  15 +++----
 src/dyn_hpux.c        |   6 +--
 src/dyn_macosx.c      |   2 +-
 src/dyn_unix.c        |   6 +--
 src/dyn_win32.c       |   6 +--
 src/eventhandler.c    |  32 +++++++--------
 src/hotplug_libusb.c  |  40 ++++++++++---------
 src/hotplug_linux.c   |  22 ++++++-----
 src/hotplug_macosx.c  | 106 +++++++++++++++++++++++++++-----------------------
 src/ifdwrapper.c      |   8 ++--
 src/powermgt_macosx.c |   8 ++--
 src/prothandler.c     |   8 ++--
 src/readerfactory.c   |  52 +++++++++++++------------
 src/sys_unix.c        |   8 ++--
 src/tokenparser.l     |   6 +--
 src/winscard.c        |  70 +++++++++++++++++----------------
 src/winscard_clnt.c   |  18 ++++-----
 src/winscard_msg.c    |  47 ++++++++++++++--------
 src/winscard_svc.c    |  17 ++++----
 20 files changed, 260 insertions(+), 225 deletions(-)

commit 5a8c65a9b37d7afc992e059ba6b056aae9a8a0c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 14:38:33 2005 +0000

    Implement the dynamic level logging
    
    The new command line options are:
      -d, --debug           display lower level debug messages
          --info            display info level debug messages (default level)
          --error           display error level debug messages
          --critical        display critical only level debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1333 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 156 +++++++++++++++++++++++++++++--------------------------
 1 file changed, 81 insertions(+), 75 deletions(-)

commit 8a85c4601b28c6d7e9ed9f0ec97fd11849891609
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 14:21:58 2005 +0000

    implement log with priority level.
    
    debug_msg() is still provided for backward object code compatibility
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1332 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 109 +++++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 102 insertions(+), 7 deletions(-)

commit 4da30d3f63f4111281a6c060abe01b1780c73f94
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Feb 22 14:20:19 2005 +0000

    use Log1(priority, fmt) instead of DebugLogA(fmt) to add a priority
    level so that pcscd log verbosity is dynamic
    
    We define DebugLogA(a) as Log1(PCSC_LOG_INFO, a) for backward source
    code compatibility
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1331 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 32 +++++++++++++++++++-------------
 1 file changed, 19 insertions(+), 13 deletions(-)

commit 6ab145d79936a4d8b49a21002b30b912499ec661
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Jan 16 17:38:56 2005 +0000

    move *.m4 files from aclocal/ to m4/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1315 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am  |  4 +++-
 bootstrap    |  2 +-
 configure.in | 13 ++++++++-----
 3 files changed, 12 insertions(+), 7 deletions(-)

commit ef030a6c5a51dfaa26fb0fae4b732efe37fde8e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 11 20:54:14 2005 +0000

    add autotools version used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1308 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 5 +++++
 1 file changed, 5 insertions(+)

commit a0be788545c06295756f47e8363f7cd8017d1b80
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 11 20:45:46 2005 +0000

    use SYS_RandomInt() instead of SYS_Random() to improve performances.
    
    Thanks to Philipp Marek for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1307 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 src/winscard.c      | 3 +--
 src/winscard_clnt.c | 4 ++--
 src/winscard_scf.c  | 6 ++----
 4 files changed, 7 insertions(+), 10 deletions(-)

commit f7d13c8a57b41699dbaf9a60a07f37855d96a7f1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 11 20:44:54 2005 +0000

    convert SYS_Random() into SYS_RandomInt() to improve performances.
    
    Thanks to Philipp Marek for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1306 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/sys_generic.h | 2 +-
 src/sys_unix.c         | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 41c0c9895209d175e755670f6eb81a7ca08b0a61
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 11 20:28:31 2005 +0000

    WrapSHMWrite(): eliminate a valgrind/memcheck-warning
    
    Thanks to Philipp Marek for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1305 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 1 +
 1 file changed, 1 insertion(+)

commit 8f6a8032e5f430d6233e28a8eb2620241a8a17ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 11 20:27:54 2005 +0000

    SCardEstablishContextTH(): eliminate a valgrind/memcheck-warning
    
    Thanks to Philipp Marek for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1304 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 +
 1 file changed, 1 insertion(+)

commit 2c240d4160b19bf013b461152af04cc8cf88289d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 11 20:23:42 2005 +0000

    SYS_Random(): improve performances
    
    Thanks to Philipp Marek for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1303 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/sys_unix.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit d8f2dafd141fe729797e6089222faf4244ebf0f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 2 19:18:43 2004 +0000

    CardGetStatusChange(): do not sleep at each reader check but only once
    per cycle. Before the change the total sleep time was
    cReaders * PCSCLITE_STATUS_WAIT
    
    Thanks to Oivind H. Danielsen for the three patches
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1296 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit c7a978f384cfe2d93e9f08f9dcd61fa45f1b6616
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 2 19:08:47 2004 +0000

    SCardGetStatusChange(): move timeout check after other checks so we do
    not exit with timeout if the timeout is less than 200 ms
    (PCSCLITE_STATUS_WAIT)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1295 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 29 ++++++++++++++---------------
 1 file changed, 14 insertions(+), 15 deletions(-)

commit bc7a37acf09e01c09b801ddc478a6c8585f7aaee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Dec 2 18:52:14 2004 +0000

    SCardGetStatusChange(): do not sleep if dwCurrentState =
    SCARD_STATE_UNAWARE
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1294 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 --
 1 file changed, 2 deletions(-)

commit 5cbe81db879879b4814c6ba34967ff90c5ff8a91
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 23 21:08:11 2004 +0000

    SCardStatus: document that pcbAtrLen will contain the necessary size if
    it is too small
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1293 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

commit 5cfb14ac53f44dadc912265c6b01ee72486d547c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 20 20:49:15 2004 +0000

    pcsc_stringify_error(): differentiate the error messages for
    SCARD_F_INTERNAL_ERROR and SCARD_F_UNKNOWN_ERROR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1291 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a847390f6972681516770d273ee8c32e05391180
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 09:13:20 2004 +0000

    new build infrastructure. Patch from Toni Andjelkovic
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1274 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/doc/Makefile.am              |  7 +++++
 libmusclecard/src/Makefile.am              | 47 ++++++++++++++++++++++++++++++
 libmusclecard/utils/Makefile.am            |  4 +++
 libmusclecard/utils/bundleTool/Makefile.am | 18 ++++++++++++
 4 files changed, 76 insertions(+)

commit 28ef377ba61699f959262b345f340b950e5b9a74
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 09:02:22 2004 +0000

    do not force the libpcsclite version to use since the two packages are
    now independents
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1273 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/libmusclecard.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 218c43d2b4e8296f11bacb5ae19c6bde36239d80
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 08:46:59 2004 +0000

    use < > instead of " " for the include files provided by pcsc-lite (and
    already installed in the system)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1272 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 10 +++++-----
 libmusclecard/src/tokenfactory.c |  7 ++++---
 2 files changed, 9 insertions(+), 8 deletions(-)

commit 1c20cc6384cb576e846d114f63b058c8bd6bfdad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 08:35:59 2004 +0000

    use MSC_ARCH instead of PCSC_ARCH
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1271 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a827de2cbba1f723a6aaf275f66200fad1d2d66a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 08:18:17 2004 +0000

    list of files to ignore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1270 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/.cvsignore                  | 24 ++++++++++++++++++++++++
 libmusclecard/doc/.cvsignore              |  2 ++
 libmusclecard/src/.cvsignore              | 11 +++++++++++
 libmusclecard/utils/.cvsignore            |  2 ++
 libmusclecard/utils/bundleTool/.cvsignore |  6 ++++++
 5 files changed, 45 insertions(+)

commit a7c6a4d99a91fb2b6ee46acee449ee71da750068
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 08:11:51 2004 +0000

    patch from Toni Andjelkovic for the pcsc-lite/libmusclecard separation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1269 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c              | 98 +++++++++++++++--------------
 libmusclecard/src/muscletest.c              |  6 +-
 libmusclecard/utils/bundleTool/bundleTool.c |  6 +-
 3 files changed, 58 insertions(+), 52 deletions(-)

commit f28051c8a494aca866ae513c990a5c218adf18b6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 07:10:07 2004 +0000

    1.2.9-beta7
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1268 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 92d9ce1243d305797bac4065bd24f243a649a90f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 6 07:08:57 2004 +0000

    install reader.conf in reader.conf.d/ instead of just creating an empty
    directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1267 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 416afc1b2e183187f3da994afe55d3fde6074abb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Oct 4 14:11:26 2004 +0000

    move libmusclecard from pcsc-lite to its own archive/package
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1266 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in          | 34 ----------------------------------
 doc/Makefile.am       |  6 +++---
 src/Makefile.am       | 35 ++++++++++-------------------------
 src/utils/Makefile.am |  5 +----
 4 files changed, 14 insertions(+), 66 deletions(-)

commit e325c68aa12ccfdc64bab1c66951b7a2fb7ee2c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 3 12:58:55 2004 +0000

    add "THIS PROGRAM IS NOT DESIGNED AS A TESTING TOOL FOR END USERS!"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1264 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 3 +++
 src/testpcsc.c          | 5 ++++-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 47656624ebf56c0d85659288022520ebba1e30d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 29 16:55:54 2004 +0000

    TPSearchBundlesForAtr(): revert the previous patch.
    
    Thanks to Toni Andjelkovic for his patch patch :-)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1255 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 1 -
 1 file changed, 1 deletion(-)

commit 8ea727f4a5dac3ac6e785ef2ac050af412992eff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 29 06:46:10 2004 +0000

    TPSearchBundlesForAtr(): initialise tokenInfo so that it contains safe
    default values when no pcsc/services/ directory is found.
    
    Thanks to Toni Andjelkovic for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1250 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 1 +
 1 file changed, 1 insertion(+)

commit 75bcb7656a4ec4e9c6a3ddf96ecf4d02c9456466
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 22 18:22:23 2004 +0000

    fflush(stdout) so that "Please insert a working reader   : " is
    displayed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1249 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 1 +
 1 file changed, 1 insertion(+)

commit 6c25d10aa89512862fe5c27202124ca8f0e68571
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 21 18:33:54 2004 +0000

    use "%option nounput" to avoid the "warning: `yyunput' defined but not
    used"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1248 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l  | 2 ++
 src/tokenparser.l | 2 ++
 2 files changed, 4 insertions(+)

commit 34ab3ebcc87dbe8a43810d74b4514f2d75e6d3ab
Author: David Corcoran <invalid@example.com>
Date:   Fri Sep 17 19:02:56 2004 +0000

    rewrite of mscreadallocateobject
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1242 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 69 +++++++++++++++++++++++++-----------------
 1 file changed, 42 insertions(+), 27 deletions(-)

commit 323fdb9ac7b8eddfea1efb0a37b10c2478cb0b0b
Author: David Corcoran <invalid@example.com>
Date:   Fri Sep 17 18:49:12 2004 +0000

    initialized more vars in ListTokens
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 450b8b2e3e15194bc56aec8ec9ae86347e3ec266
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 22:51:17 2004 +0000

    add "Card not transacted" error messages. Thanks to Bruce Barnett for
    the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1239 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 12 ++++++++++++
 src/winscard.c   |  1 +
 2 files changed, 13 insertions(+)

commit 5f7d5d38027f77b20ec0a8face6f53e6069c6ceb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 22:47:05 2004 +0000

    LTPBundleFindValueWithKey(): sizeof(tokenValue) is not what we want
    since tokenValue is a char * and not a char []
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1238 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b3bc713a5ab8bb3c976e380091333ecab4d74f7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 08:34:06 2004 +0000

    use strlcpy and simplify the code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1237 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 60 ++++++++++++++++++++++++++-----------------------------
 1 file changed, 28 insertions(+), 32 deletions(-)

commit 903bb07ca6934bd5f53ac17c2754f50c6cf76eab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 08:13:52 2004 +0000

    remove PCSC/ from the #include path
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1236 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 730b3f77c7e760a070ad08310a300549820d7ff1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 07:33:18 2004 +0000

    SCardListReaders(): simplify the code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1235 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 48 ++++++++++++++++++++++--------------------------
 1 file changed, 22 insertions(+), 26 deletions(-)

commit 1c5ca2f4be8fda0a8c557b5de01d1f1b9b75d5d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 07:16:24 2004 +0000

    SCardListReaders(): simplify the multi-string creation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1234 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit 100767b89f659ec9635cf9dd86f3595fb2373929
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 07:10:51 2004 +0000

    comment out unsused function RFListReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1233 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit 8e394880122a7bc7901ac3cfebf0a5ccaee5047c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 07:09:07 2004 +0000

    use strlcpy() instead of strcpy()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1232 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c |  7 +++++--
 src/eventhandler.c               |  4 +++-
 src/readerfactory.c              | 16 +++++++++++-----
 3 files changed, 19 insertions(+), 8 deletions(-)

commit 98f265bc48bd9c4f5f81c96ad341a198a62087ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 14 06:38:44 2004 +0000

    use strlcpy() insted of strcpy()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1231 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c | 73 +++++++++++++++++++++---------------------
 1 file changed, 37 insertions(+), 36 deletions(-)

commit 3607b9859055ea0e0422469bfc3de27503e90594
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 11 18:31:39 2004 +0000

    EHDestroyEventHandler(): do not try to stop a not started thread (for a
    reader that failed initialisation and never started)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1230 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 24c4ea01ed48285b9e9b8940336fec743222ee91
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 11 18:26:07 2004 +0000

    RFAddReader(): stop if EHSpawnEventHandler() returns an error. This
    occurs if the initial reader check (IFDStatusICC) fails.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1229 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 624b2618f1d164a3edaffe54b90baca12ded858e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 21:36:44 2004 +0000

    convert MSC_INCORRECT_P1/P2 to the corresponding text error message
    (instead of "Unknown SW").
    
    Thanks to Bruce Barnett for the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1224 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 4c10eb36614596203853c91cd87befb438cd98bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 08:40:44 2004 +0000

    use strlcpy/strlcat instead of strncpy/strncat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1223 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 79 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 40 insertions(+), 39 deletions(-)

commit 989dd1e3e0a85c0e38422ccfd297383489b1fa98
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 08:39:28 2004 +0000

    use internal strlcpy.c and strlcat.c if these functions are not provided
    by the OS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1222 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 4d444a606dc9d509ec1589a73a04442cf30d02d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 08:38:20 2004 +0000

    check if strlcpy/strlcat are provided by the OS (OpenBSD and some
    others)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1221 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

commit 2022e3676502752b3afafce4a8d631358501dbbd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 08:35:00 2004 +0000

    prototypes of strlcpy/strlcat
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1220 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcpycat.h | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

commit 9d84d59a720ce4a69a761c8b6fbd574c8dbae817
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 08:34:19 2004 +0000

    imported from ftp://ftp.openbsd.org/pub/OpenBSD/src/lib/libc/string/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1219 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/strlcat.c |  59 +++++++++++++++++++
 src/strlcpy.3 | 179 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/strlcpy.c |  55 ++++++++++++++++++
 3 files changed, 293 insertions(+)

commit afc17cf0e027d2aad151e5deae5c31de27803ca9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 07:04:22 2004 +0000

    update copyright: add my name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1218 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 ++
 1 file changed, 2 insertions(+)

commit 2b36066ba93c1ce863d3f0fd9aed2b35debe2871
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 07:02:45 2004 +0000

    add a test for SCardReconnect()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1217 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 101bce153f429f101b726e2356d854619adebaec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 7 07:02:02 2004 +0000

    EHStatusHandlerThread(): remove comment from call to
    RFSetReaderEventState(rContext, SCARD_RESET);
    The comment is present from the initial CVS version. I don't know why
    is was ever needed.
    
    This is needed so that SCardReconnect() works after a card movement.
    Otherwise SCardReconnect() returns "Card was removed" even if the new
    card is reseted.
    
    Note: the comment was present from the initial CVS version (2002/03/30).
    I don't know why is was ever needed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1216 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 20058286452efa91317d4d908c93c364c47f9ba3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 3 19:49:42 2004 +0000

    SCardConnect()/SCardReconnect(): do not set
    rContext->readerState->cardProtocol if PHSetProtocol() returns an error.
    
    This will avoid having a protocol set to -2 (SET_PROTOCOL_PPS_FAILED)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1215 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 24 ++++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)

commit ce54abe3b4604a12c3497d8a5b363ebd12e25519
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 3 19:45:40 2004 +0000

    PHSetProtocol(): add the error code returned by the driver in case of
    PTS failure in the debug message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1214 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d5e4edc1e02e04b4088a2c7565b9d48e912ca4ca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 1 18:41:08 2004 +0000

    use $prefix value instead of /usr/local/ in usbdropdir and muscledropdir
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1211 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 9f11498bbec9ca791e2f2d9ba9bd7c7b003a8e6d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 1 08:13:06 2004 +0000

    test SCardGetAttrib() with a NULL pbAttr paraleter
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1210 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 45682b6a8cd61461253c5ee522fed90813c2f4c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 1 08:11:33 2004 +0000

    add support of SCardGetAttrib() with a NULL pbAttr parameter to only get
    the needed lenth in pcbAttrLen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1209 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 21 ++++++++++++++++-----
 1 file changed, 16 insertions(+), 5 deletions(-)

commit fd46bc0a562c5dd8662a22b0c523b47c8a25a921
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:48:34 2004 +0000

    ignore ifdhandler-3, ifdhandler-3.bbl and ifdhandler-3.blg
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1207 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/.cvsignore | 3 +++
 1 file changed, 3 insertions(+)

commit a644ad76bc381e79eab3e85880db8c0eef2d7831
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:46:57 2004 +0000

    always use @confdir_exp@ instead of #ifndef USE_READER_CONF ...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1206 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 43f908cd83cb612f3279cf15f655396ecac960fc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:46:14 2004 +0000

    do not define USE_READER_CONF but expand $confdir in confdir_exp
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1205 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 5d83ed43b7d36b0ad86fb08086a002bfe599d3f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:39:24 2004 +0000

    generate etc/update-reader.conf from etc/update-reader.conf.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1204 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit 8d8f041a895ad93492a33f66f4fc0ed0cc36f169
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:38:57 2004 +0000

    call update-reader.conf to update /etc/reader.conf before starting the daemon
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1203 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.init.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 93db38434d75e44ec61209aba36b3e74032f5ccf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:38:15 2004 +0000

    use $(mkinstalldirs) instead of $(mkdir_p)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1202 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ecdb5a7cdb13fb44226d69018d9e1c51a14a10cb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:21:33 2004 +0000

    - distribute update-reader.conf
    - create /etc/reader.conf.d/ during installation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1201 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 7f64936e5e0b5c18baf90efb7881811dc7254566
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:20:16 2004 +0000

    ignore update-reader.conf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1200 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/.cvsignore | 1 +
 1 file changed, 1 insertion(+)

commit 8f60f872e8f3bbd39765e7b3c2a48e6957bf4326
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 21:19:56 2004 +0000

    use update-reader.conf to regenerate /etc/reader.conf from files in
    /etc/reader.conf.d/ (thanks to Ville SkyttÔøΩ)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1199 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/update-reader.conf.in | 42 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 42 insertions(+)

commit a5fcebbf6eec9b4a47c30bdc2f234acc897464dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 18:58:57 2004 +0000

    LTPBundleFindValueWithKey(): also print the configuration filename if
    the key is not found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1198 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c1a96f08b9c77a6b703d3e0b280979b218b00139
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 24 14:02:36 2004 +0000

    SCardStatus(): pdwState and pdwProtocol parameters may be NULL (mimic Windows)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1197 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 39c818c85ed930ca16ae700b4a736bdfe1e5e7ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 23 08:27:38 2004 +0000

    add SCARD_STATE_UNPOWERED.
    
    This #define is not (yet) used by pcsc-lite but is defined by Windows
    PC/SC and may be used by Windows applications
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1192 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 +
 1 file changed, 1 insertion(+)

commit 02aae269db03c8645830f8b43a64bac5f492bddf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 18 22:13:50 2004 +0000

    define and use an internal SCARD_PROTOCOL_ANY_OLD for backward
    compatibility for applications compiled with the old SCARD_PROTOCOL_ANY
    definition.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1191 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c      | 16 +++++++++-------
 src/winscard_clnt.c |  6 ++++--
 2 files changed, 13 insertions(+), 9 deletions(-)

commit 3e2d78a85c7384e70d386549e0b11c40fb33d1b6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 18 22:11:53 2004 +0000

    correctly define SCARD_PROTOCOL_ANY as (SCARD_PROTOCOL_T0|SCARD_PROTOCOL_T1)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1190 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 48cff45707ed250549235c89ab7422be48212a41
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 16 15:13:58 2004 +0000

    forgot to remove 4 DebugLogA("POUET"); debug statements. Thanks Damien
    Sauveron for noticing :-)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1188 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 4 ----
 1 file changed, 4 deletions(-)

commit 5776ed9dae5cda7dddd7844d4143e783fb3f290b (tag: 1.2.9-beta6)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 15 14:44:21 2004 +0000

    release 1.2.9-beta6 (real one)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1181 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 80d73cc867fed5da4e64894ff7398a3f2179d07e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 20:49:08 2004 +0000

    libpcsclite0 -> libpcsclite1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1180 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/formaticc.1 | 23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)

commit a7628374ea14153863417b67b05c6e291518809e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 20:31:46 2004 +0000

    remove unused fields in FctMap_V1 structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1179 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ----
 src/readerfactory.h | 5 +----
 2 files changed, 1 insertion(+), 8 deletions(-)

commit 91feccf0779c9f9ce6336ce0de5fc4cf3b9f4250
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 20:28:35 2004 +0000

    use the new psFunctions C union
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1178 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    | 191 ++++++++++++++--------------------------------------
 src/readerfactory.c | 104 ++++++++++++++++------------
 2 files changed, 111 insertions(+), 184 deletions(-)

commit 50d8ae97e617c500ff7041ac5319fca50b4f6a9e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 20:27:29 2004 +0000

    psFunctions field is now a C union with three structures for the 3 API.
    - each structure has complete functions prototypes
    - only the needed functions are in each structure (some bytes saved :-)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1177 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 74 +++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 61 insertions(+), 13 deletions(-)

commit aa92c13ea2297efb04bd682ff70d4d325249d6e3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 13 14:09:39 2004 +0000

    remove #define SCARD_PROTOCOL_UNSET 0x00 since it is already defined in
    PCSC/pcsclite.h.in. Thanks to Toni Andjelkovic
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1176 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 2 --
 1 file changed, 2 deletions(-)

commit 67953b857c937806e37edb3327378229873ff3c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 20:27:09 2004 +0000

    replace an empty line by @HAVE_RUNPID@ to avoid having two empty lines
    when --enable-runpid is not used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1175 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 99f4b633de918377d4e7ec58ce29c2309ae421c8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 20:21:58 2004 +0000

    do not distribute pcscd.init since it will be generated from
    pcscd.init.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1174 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d44f312d5feba709a4cac574e58ee1774f976176
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 20:04:18 2004 +0000

    remove a call to free() of a pointer that was not malloc()ed and caused a
    segmentation fault
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1173 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/installifd.c | 1 -
 1 file changed, 1 deletion(-)

commit 0b077ab1cd22f72c12e77f6727f3a033af8fbaef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:53:47 2004 +0000

    define DEVICENAME as /dev/null instead of GEN_SMART_RDR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1172 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/installifd.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 36dd8501a1534cd0fe30bfec61947bf7c9d87e47
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:52:52 2004 +0000

    document runpid file depending on the ./configue options
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1171 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in   |  4 ++++
 doc/pcscd.8.in | 60 +++++++++++-----------------------------------------------
 2 files changed, 15 insertions(+), 49 deletions(-)

commit 8cec30c75d7725eb4803a7cb2d860144be14fde9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:50:50 2004 +0000

    typos
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1170 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/reader.conf.5.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 746f1692da0f968f06ea3d75673bdd1f56a37f47
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:48:57 2004 +0000

    generate etc/pcscd.init with the correct paths
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1169 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 4 ++++
 1 file changed, 4 insertions(+)

commit d84da2e9651f9ce44e3ff5d76b28fe1eb0f1eac9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:48:19 2004 +0000

    distribute as-ac-expand.m4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1168 0ce88b0d-b2fd-0310-8134-9614164e65ea

 m4/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 47f919f2ee7dd69a97183cec58e65068be672fcc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:47:23 2004 +0000

    pcscd.startup is replaced by pcscd.init generated from pcscd.init.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1167 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/.cvsignore                       |  1 +
 etc/Makefile.am                      |  2 +-
 etc/{pcscd.startup => pcscd.init.in} | 21 +++++++--------------
 3 files changed, 9 insertions(+), 15 deletions(-)

commit 826f0e92e84da464d5f46beb5ab5537e9b29d045
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 19:45:51 2004 +0000

    provides a AC_SUBST-like macro (AS_AC_EXPAND) but using expanded
    variables. From the autostars project (http://sf.net/projects/autostars/)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1166 0ce88b0d-b2fd-0310-8134-9614164e65ea

 m4/as-ac-expand.m4 | 43 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 43 insertions(+)

commit 62de090b2c3512449d7f4c1402b6e5a135ebdb77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 14:57:36 2004 +0000

    release 1.2.9-beta6
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1164 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 48 +++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 43 insertions(+), 5 deletions(-)

commit 9f5bd478f1b3541e021a7e708c6fe17961e95b1d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 14:40:34 2004 +0000

    1.2.9-beta6
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1163 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f82de8d3b656874566a7ea1e2620c7eda3fc0720
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 14:38:29 2004 +0000

    updated to reflect the RPM version from Ville SkyttÔøΩ & Fritz Elfert
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1162 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.startup | 105 +++++++++++++++++++++++++++---------------------------
 1 file changed, 52 insertions(+), 53 deletions(-)

commit aafb979b6dce1bb4664e210bb551a0c63cf55412
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 10 14:04:15 2004 +0000

    add and distribute the full text of the GNU General Public License used
    by pcsc_demo.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1161 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/GPL-2       | 340 ++++++++++++++++++++++++++++++++++++++++++++++++
 doc/example/Makefile.am |   2 +
 2 files changed, 342 insertions(+)

commit 0bb7f7b8d3e996d5abe341c6b10dc8cbf0ef3086
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 6 12:13:35 2004 +0000

    use AM_CPPFLAGS = -I$(top_srcdir)/src/PCSC to find the header files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1159 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/Makefile.am | 2 ++
 src/Makefile.am         | 1 +
 src/utils/Makefile.am   | 2 ++
 3 files changed, 5 insertions(+)

commit 3b2489355b69a010325a1187851eb35c77613054
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 6 12:12:20 2004 +0000

    remove PCSC/ from the header files path since the path is given by
    pkg-config --cflags libpcsclite or the correct -I directive
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1158 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h | 2 +-
 libmusclecard/src/PCSC/musclecard.h | 2 +-
 libmusclecard/src/musclecard.c      | 6 +++---
 libmusclecard/src/muscletest.c      | 8 ++++----
 libmusclecard/src/tokenfactory.c    | 4 ++--
 libmusclecard/src/tokenfactory.h    | 2 +-
 src/PCSC/ifdhandler.h               | 2 +-
 src/PCSC/pcsclite.h.in              | 2 +-
 src/PCSC/winscard.h                 | 2 +-
 src/atrhandler.c                    | 4 ++--
 src/debuglog.c                      | 4 ++--
 src/dyn_hpux.c                      | 4 ++--
 src/dyn_macosx.c                    | 4 ++--
 src/dyn_unix.c                      | 4 ++--
 src/eventhandler.c                  | 6 +++---
 src/hotplug_generic.c               | 2 +-
 src/hotplug_libusb.c                | 6 +++---
 src/hotplug_linux.c                 | 6 +++---
 src/hotplug_macosx.c                | 6 +++---
 src/ifdwrapper.c                    | 6 +++---
 src/pcscdaemon.c                    | 4 ++--
 src/powermgt_generic.c              | 2 +-
 src/powermgt_macosx.c               | 4 ++--
 src/prothandler.c                   | 6 +++---
 src/readerfactory.c                 | 6 +++---
 src/sys_unix.c                      | 2 +-
 src/testpcsc.c                      | 4 ++--
 src/thread_unix.c                   | 2 +-
 src/utils/formaticc.c               | 4 ++--
 src/winscard.c                      | 8 ++++----
 src/winscard_clnt.c                 | 6 +++---
 src/winscard_msg.c                  | 6 +++---
 src/winscard_scf.c                  | 6 +++---
 src/winscard_svc.c                  | 6 +++---
 34 files changed, 74 insertions(+), 74 deletions(-)

commit dacaeb4e4b0a63f5a13b718253beae129b256d5c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 3 19:52:02 2004 +0000

    MSGCleanupClient(): always reset all the fields. Thanks to Michael Gold for
    the patch.
    Closes: [ #300863 ] Clear dwClientID in MSGCleanupClient
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1137 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 82451d32e3300b4afe0ad1b3c399bb5f09d18ba5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 22:06:44 2004 +0000

    use THREAD_ATTR_DETACHED in SYS_ThreadCreate() to automatically
    deallocate resources allocated by the thread when the thread exits
    (because the thread is not joined with SYS_ThreadJoin())
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1136 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c   | 2 +-
 src/hotplug_libusb.c | 2 +-
 src/hotplug_linux.c  | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 871988c1ce50ae1d21bac19a7629d0a14d2622d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 22:02:43 2004 +0000

    remove useless call to undocumented function SCardUnload()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1135 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 3 ---
 1 file changed, 3 deletions(-)

commit b64cca7cbd1ee6caeff422fc8b66989956c6f2a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 22:01:14 2004 +0000

    use THREAD_ATTR_DEFAULT argument in SYS_ThreadCreate()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1134 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8889c7b9054e20e1c7cb15858ead53b752572ad0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 21:59:36 2004 +0000

    CreateContextThread(): use THREAD_ATTR_DETACHED in SYS_ThreadCreate() so
    that the resources allocated by pcscd are deallocated when the client die.
    
    Closes [ #300862 ] Don't create threads as joinable
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1133 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 24d54d8b593885035a528d063de05c66e8808472
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 21:54:16 2004 +0000

    use THREAD_ATTR_DEFAULT argument in SYS_ThreadCreate()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1132 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c   | 2 +-
 src/hotplug_libusb.c | 2 +-
 src/hotplug_linux.c  | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit c1b8003bf6096fcebca224c5a242e7e68d8b395a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 21:52:17 2004 +0000

    update SYS_ThreadCreate() API but do not modify the code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1131 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_win32.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 98abe6cd891a117498e21ea476f68f5d43a82941
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 21:51:38 2004 +0000

    SYS_ThreadCreate(): set the thread state: joinable or detached
    default is joinable
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1130 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit f5e4bbf563847ff6153a94e4039a9084f3f81e64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 21:48:08 2004 +0000

    the second argument of SYS_ThreadCreate if no more LPVOID pthAttr but
    int attributes so that attributes can be passed in a portable way.
    
     /* thread attributes */
     #define THREAD_ATTR_DEFAULT            0
     #define THREAD_ATTR_DETACHED           1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1129 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/thread_generic.h | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit b4982b9108c990aa35055d5c247c01676e2231c8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:57:52 2004 +0000

    use "%ld bytes" instead of "%lx" for ATR Size
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1128 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 556bc63e51c714bf652d993192b0e3b75d119d6e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:56:25 2004 +0000

    use "T=%ld" instead of "%lx" for Reader Protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1127 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5b77a911df221a0caa7b058cd468a5161e5e69c6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:54:52 2004 +0000

    use "0x%.4lx" instead of "%lx" for Reader State
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1126 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 784488b254337e7864de39b84cf0bc8e0d55ffb1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:43:15 2004 +0000

    add SCardTransmit() code sample
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1125 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 38 +++++++++++++++++++++++++++++++++++++-
 1 file changed, 37 insertions(+), 1 deletion(-)

commit 012bb6d58cf4e5d9435f0a0d053796f5f15d65e1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:21:10 2004 +0000

    perform a PPS (PHSetProtocol()) only if the current protocol is
    SCARD_PROTOCOL_UNSET otherwise only check that the requested protocol is
    available.
    
    This will avoid generating a PPS request that would not be just after a
    power up. The previous code worked only when the card was reseted at
    SCardDisconnect() but not when SCARD_LEAVE_CARD was used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1124 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 86 +++++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 52 insertions(+), 34 deletions(-)

commit fa3c543dbbd96c98bd4baad7c1b3e38bc2814044
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:12:44 2004 +0000

    ...->cardProtocol = SCARD_PROTOCOL_UNSET; after a power up so that
    the next SCardConnect() with perform a PPS with the desired protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1123 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 14e43a6d30098564efc3e473c3f18c33636f4e1b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:08:42 2004 +0000

    ...->cardProtocol = SCARD_PROTOCOL_UNSET; after a power up so that
    the next SCardConnect() with perform a PPS with the desired protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1122 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit e444dad0a40294d421c46ba4a43337a61be7354b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 20:05:26 2004 +0000

    set ..->cardProtocol = SCARD_PROTOCOL_RAW instead of -1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1121 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 32019a2a349aaa896eb283ae72a2f28d88aef6f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 18:18:15 2004 +0000

    ...->cardProtocol = SCARD_PROTOCOL_UNSET; after a power up so that
    the next SCardConnect() with perform a PPS with the desired protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1120 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

commit d57215686726d402588f0796e07dd82ce4779ff4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 18:13:49 2004 +0000

    use ..->cardProtocol = SCARD_PROTOCOL_UNSET instead of ..->cardProtocol = 0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1119 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 880aa31811637da041f2f7e27d2dd787a5769406
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 2 18:08:53 2004 +0000

     #define SCARD_PROTOCOL_UNSET           0x0000  /* protocol not set */
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1118 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 +
 1 file changed, 1 insertion(+)

commit b7381e46c8a6012d1ef8293cbff321f951a6ed94
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 1 15:55:28 2004 +0000

    if the file referenced by DEVICENAME can't be use (because it is not a
    correct filename) we now display:
    You should use 'DEVICENAME /dev/null' if your driver does not use this field
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1117 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 1 +
 1 file changed, 1 insertion(+)

commit a499e423b1dbca879f67aad7a41f757e99f4444a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 1 15:39:49 2004 +0000

    initialise dwSlot field for the new reader slot
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1116 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 ++
 1 file changed, 2 insertions(+)

commit 0f79c5312559280bdae6d7c482b9163cef2801c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 1 15:38:46 2004 +0000

    initialise the lpcDevice field of the new slot and not of the main reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1115 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f3558439e857e3edf2dbab2b88de63ccc0e1d751
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 1 15:35:51 2004 +0000

    typo in comment (empty spot -> empty slot)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1114 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d9cf3c088f63b3a680a7e1391aa38898b912d4cf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 29 20:44:26 2004 +0000

    replace #ifdef MSC_DEBUG by #ifndef NO_MSC_DEBUG
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1113 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 10 +++++-----
 libmusclecard/src/tokenfactory.c | 10 +++++-----
 2 files changed, 10 insertions(+), 10 deletions(-)

commit 69cdf7e1c4743a4a1aa5820cc8243df605295585
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 29 20:42:31 2004 +0000

    define NO_PCSC_DEBUG and NO_MSC_DEBUG if debug is set to NO instead of
    defining PCSC_DEBUG and MSC_DEBUG when debug is selected.
    The debug messages are now displayed by default.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1112 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit e7e95ae4d7191c3c3b910984291821113ef86af4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 29 20:40:07 2004 +0000

    use NO_PCSC_DEBUG instead of PCSC_DEBUG.
    
    The debug messages are now displayed by default
    (no need to #include "config.h" in PCSC/debuglog.h)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1111 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7efae9ae21ff788c3a66a4e6c02a94dd17ba6429
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 28 13:48:25 2004 +0000

    typo: verions -> versions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1110 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c0d2874928a88572224e41886b8001183cdd6b54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 28 13:46:54 2004 +0000

    add documentation for IFDHGetCapabilities(..., TAG_IFD_THREAD_SAFE, ...),
    IFDHGetCapabilities(..., TAG_IFD_SLOT_THREAD_SAFE, ...) and
    IFDHSetCapabilities(..., TAG_IFD_SLOTNUM, ...)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1109 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 40 +++++++++++++++++++++++++++++++++++-----
 1 file changed, 35 insertions(+), 5 deletions(-)

commit 79747cce4c8b78dfec592d931aa0fef093568f96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jul 28 13:44:12 2004 +0000

    the function SCardSetTimeout() is deprecated and does nothing
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1108 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 19 ++++---------------
 1 file changed, 4 insertions(+), 15 deletions(-)

commit 923038c4f5a0e3108475a87173699eaa0801a5dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 24 22:48:24 2004 +0000

    add a "(don't panic)" after a "Transaction failed." if it is not a
    critical failure.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1100 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 1447b1cc82f28527f3f6ed22e5f9eb0c3e21ca54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 22 13:31:17 2004 +0000

    RFBindFunctions(): replace the code replication by macros definition and
    use (FctMap' fields were renamed for this to be easy)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1099 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 253 ++++++++++++----------------------------------------
 1 file changed, 57 insertions(+), 196 deletions(-)

commit dada82973d47d2ad4b3b0a6da48d52c1941bf311
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 22 13:29:16 2004 +0000

    use new FctMap' fields names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1098 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 61dc90cb24c0d3b9ac77a9779d2a51e44b345b11
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 22 13:28:47 2004 +0000

    rename some FctMap' fields so the field name is the same as in the
    function name of V3.0 IFDHandler API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1097 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7dabdb0665a04c361f97b4eb37ccec35e628f15e (tag: 1.2.9-beta5)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 16 14:04:04 2004 +0000

    release 1.2.9-beta5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1081 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit 669b4fed533bc4fc8d7f6e22d62283749c9ff8d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 16 14:03:27 2004 +0000

    1.2.9-beta5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1080 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7d33b47f780f83b4dd12f27b2221313a11e1fc98
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jul 8 12:34:52 2004 +0000

    TPSearchBundlesForAtr(): use "%s/%s" insead of "%s%s" when generating
    the MuscleCard bundle name on MacOSX
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1041 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6b0d5e43e47cd3e36b8492ef23177cd6fa31decf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 17:05:04 2004 +0000

    add type LPSTR (again) so that "old" drivers and applications can compile
    but mark it deprecated.
    
    See http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Type-Attributes.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1040 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 4 ++++
 1 file changed, 4 insertions(+)

commit 6b25808f925b333b67a986ea2e4105cbff55a6bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 08:48:41 2004 +0000

    'make clean' also removes the LaTeX temporary files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1039 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 6 ++++++
 1 file changed, 6 insertions(+)

commit b7c12fffe2e18cb4f1555cca400dd1b34e4763d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 06:56:37 2004 +0000

    IFDHGetCapabilities(): document the flags SCARD_ATTR_ATR_STRING and
    IOCTL_SMARTCARD_VENDOR_VERIFY_PIN
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1038 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)

commit aab61527d70e52a7f5daf1c8e697af5094ae8de3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 06:52:04 2004 +0000

    SCardControl() (new API) can now be used with a IFDHandler v2.0 or v3.0.
    The previous code was broken and only worked with an IFDHandler v3.0
    (crashed with a v2.0).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1037 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 508c1b2ce7c7ef0b6042ac8c4b59838f67beb989
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 06:47:32 2004 +0000

    IFDHControl(): use PUCHAR instead of LPCVOID and LPVOID so the driver
    can use TxBuffer[x] without needing a cast.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1036 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 08e23cde43212c953d6e9fa323d688a33f348efd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 06:45:02 2004 +0000

    it is now possible to compile a IFDHandler v2.0 with this include file.
    Just #define IFDHANDLERv2 in your source code before #include <ifdhandler.h>
    
    By default it is setup for for most recent version of the API (V3.0)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1035 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit ab10fc5ae8536aa0a24464203916fcf1be28731f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 06:08:59 2004 +0000

    IFDControl_v2() is supported by IFD_HVERSION_2_0 drivers (not
    IFD_HVERSION_1_0)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1034 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 71b180caecd6ce77b655ff9b62db3fd823afe449
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 6 05:58:53 2004 +0000

    add an entry from pcsc-lite documentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1033 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.bib | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 7b6af770268db37cd8c0bcea780e13bbb23f9a9c
Author: Damien Sauveron <invalid@example.com>
Date:   Sun Jul 4 09:24:34 2004 +0000

    IFDHControl(): correct the types of pbSendBuffer and pbRecvBuffer.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1032 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c46db2b936b21c8ebf3843003f75404279f3c080
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 20:20:14 2004 +0000

    IFDHControl(): RxLength is a DWORD not a PDWORD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1031 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bdee8e5dfab506cd7affda9ee08ff68522f0bace
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 16:32:53 2004 +0000

    1.2.9-beta4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1029 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e88d027f3e22ce1275dad8d8f0a7845e5278dcd9 (tag: 1.2.9-beta4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 16:25:43 2004 +0000

    release 1.2.9-beta4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1028 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 45f45f94db45108a2f66ddb66825e8f3f59c41a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 16:18:25 2004 +0000

    add @PTHREAD_CFLAGS@ to Cflags: and @PTHREAD_LIBS@ to Libs: so that the
    compiler and linker do the "right" thing.
    Thanks to Ville SkyttÔøΩ for the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1027 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/libpcsclite.pc.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c13972aa79def2b6ca1e8373545cac56b270731b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 16:16:56 2004 +0000

    use "Requires: libpcsclite = @VERSION@" instead of just "-lpcsclite"
    Thanks to Ville SkyttÔøΩ for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1026 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/libmusclecard.pc.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 8afcaffa53b0214633fc2d674227441e58629cb8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 16:07:41 2004 +0000

    add /PCSC to includedir instead of Cflags:
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1025 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/libpcsclite.pc.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 254102a3670496e570680fa6d819d3b1fb5f0272
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jul 3 16:07:12 2004 +0000

    includedir is now @includedir@/PCSC
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@1024 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/libmusclecard.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 13ddafbae2eb8c1d40fdcd6bbc4e1a93eeb1de44 (tag: 1.2.9-beta3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 30 06:57:16 2004 +0000

    release 1.2.9-beta3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@983 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 55 +++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 53 insertions(+), 2 deletions(-)

commit bf1f0ef171559bc0e97912f9544f7844f0a5db67
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 18:09:19 2004 +0000

    the include directory is now ${includedir}/PCSC.
    
    If your application Makefile uses
      CFLAGS=`pkg-config libpcsclite --cflags`
    you have nothing to change and the migration of the include files in
    /usr/include/PCSC/ will be painless.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@982 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/libpcsclite.pc.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 736ec95c597a08b8c70d2274475adc99ac4fa649
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 12:12:00 2004 +0000

    IFDControl_v2(): if the driver version is != IFD_HVERSION_1_0 we
    _return_ SCARD_E_UNSUPPORTED_FEATURE (not just set the return value)
    
    IFDControl(): if the driver version is < IFD_HVERSION_3_0 we
    _return_ SCARD_E_UNSUPPORTED_FEATURE (not just set the return value)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@981 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit cc9a760637044caa57bdc79e532b3df838849c55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 08:31:40 2004 +0000

    SCardReconnect(): if the reset fails it may be either because:
    - the card is unresponsive (SCARD_W_UNRESPONSIVE_CARD)
    or
    - no card is present (SCARD_E_NO_SMARTCARD) and the SCardConnect() was
      successfull with SCARD_SHARE_DIRECT (no need for a card)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@980 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit d19f6a45cc96a2c37e0d7bfaf7da22c8276bdbcf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 08:00:23 2004 +0000

    in SCardConnect() and SCardReconnect(), returns
    SCARD_W_UNRESPONSIVE_CARD if PHSetProtocol() fails with
    SET_PROTOCOL_PPS_FAILED
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@979 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 3f7b1ac6c26136ff97b060d3f4743fe5e85c6ac3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 07:49:00 2004 +0000

    define the constant SET_PROTOCOL_WRONG_ARGUMENT and
    SET_PROTOCOL_PPS_FAILED
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@978 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.h | 5 +++++
 1 file changed, 5 insertions(+)

commit 0cff52e15959f11fb4a54f6fb15f071346e13770
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 29 07:48:34 2004 +0000

    PHSetProtocol(): returns SET_PROTOCOL_PPS_FAILED if IFDSetPTS() is
    supported but fails:
    ISO 7816-3:1997 ch. 7.2 PPS protocol page 14
    - If the PPS exchange is unsuccessful, then the interface device shall
      either reset or reject the card.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@977 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

commit 31c74c9d39b83e2b293aae3211ed345d2ff871be
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 25 13:57:40 2004 +0000

    do not #undef ATR_DEBUG since it may be defined in config.h with
    ./configure --enable-debugatr
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@976 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7416cee67f7cf4559388b3ca1d88eb99b8d3873a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 23 15:03:42 2004 +0000

    add definition of SCARD_PROTOCOL_T15
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@974 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 +
 1 file changed, 1 insertion(+)

commit 2ca95fe9e110742435349b3116f1450e04a43ed1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 23 15:00:52 2004 +0000

    - set SCARD_PROTOCOL_T15 in CardCapabilities.AvailableProtocols if T=15
      is defined (not yet used)
    - in specific mode CardCapabilities.AvailableProtocols shall also be set
      the the specified protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@973 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 49 +++++++++++++++++++++++++++++--------------------
 1 file changed, 29 insertions(+), 20 deletions(-)

commit b3afb78d4c330cc451f9ae2453ec0887a9b60bca
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 22 14:38:14 2004 +0000

    remove the hack introduced in version 1.28. It is no more needed since
    the changes in version 1.32 of winscard.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@968 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 16 ----------------
 1 file changed, 16 deletions(-)

commit 397a78143e9ef1006b0cfa58f8d16787f390f4aa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 22 14:33:28 2004 +0000

    PHSetProtocol(): only try to use protocols that are available
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@967 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 3 +++
 1 file changed, 3 insertions(+)

commit fffa155a055f8bd1e3c4d0f5cd9316091244cf8d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 21 07:40:26 2004 +0000

    local variables reorganisations:
    - remove unused variables
    - remove useless initialisations
    - move declaration in the inner block the variable is used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@963 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c    |   7 +--
 src/dyn_hpux.c      |  17 +-----
 src/dyn_unix.c      |   5 --
 src/ifdwrapper.c    | 131 +++++++++-------------------------------------
 src/readerfactory.c | 148 ++++++++++++----------------------------------------
 src/winscard.c      |  95 ++++++---------------------------
 src/winscard_clnt.c | 129 ++++++++-------------------------------------
 7 files changed, 104 insertions(+), 428 deletions(-)

commit 20ffc40c0a2cf3a6cd9eabc92c6a13dbc4bcb60c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 14:48:58 2004 +0000

    rewrite the parts managing the protocol in SCardConnect() and
    SCardReconnect() to use the new PHSetProtocol() prototype and simplify
    the code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@962 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 119 ++++++++++++++++++---------------------------------------
 1 file changed, 38 insertions(+), 81 deletions(-)

commit a7d1e0f1ac60344e04f0ec323c9a213b95c9b0c3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 14:46:31 2004 +0000

    PHSetProtocol():
    - add a ucDefault argument as the default protocol to use
    - completely redesign the function so that IFDSetPTS() is always called
      to tell the driver which protocol to use and to initialise its
      internal state
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@961 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 110 +++++++++++++++++++++---------------------------------
 src/prothandler.h |   2 +-
 2 files changed, 43 insertions(+), 69 deletions(-)

commit e547c3b5d339fc8306169f9626389ac1a71b4422
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 14:37:28 2004 +0000

    the protocol number in the "Send Protocol:" debug message was wrong
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@960 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

commit 7774f870fc312477c8aa8efde76606efaa8e0597
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 08:44:31 2004 +0000

    update the code to use the new READER_CONTEXT structure with the
    struct pubReaderStatesList *readerState field
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@959 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 291 ++++++++++++++++++++++------------------------------
 src/prothandler.c   |   7 +-
 src/readerfactory.c |  17 ++-
 src/winscard.c      | 223 +++++++++++++++++++++-------------------
 4 files changed, 253 insertions(+), 285 deletions(-)

commit 31be1b6b3e3f21ac5d32a4008d38b96f5552b807
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 08:43:07 2004 +0000

    in the structure READER_CONTEXT remove:
      UCHAR ucAtr[MAX_ATR_SIZE];
      DWORD dwAtrLen;
      DWORD dwProtocol;
      DWORD dwStatus;
      DWORD dwPublicID;
    and replace them by a link to the reader structure:
      struct pubReaderStatesList *readerState;
    
    The fields (ATR, procotol, state) were duplicated in both structures
    PREADER_STATE and READER_CONTEXT. It was useless and misleading.
    
    It was uneasy to change the ATR or the card protocol after the card was
    powered on. A protocol change may occur if the card supports both T=0
    and T=1 and the SCardConnect() does not select the default protocol.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@958 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 157654df085f5486aa30dc0911d4f97a0a3801e4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 08:32:01 2004 +0000

    in IFDStatusICC() the argument pdwProtocol was set as:
      *pdwProtocol = rContext->dwProtocol;
    and rContext was an input argument.
    
    So IFDStatusICC() had _no_ action on pdwProtocol expect make a copy form
    an IN parameter to an OUT parameter. This was useless and misleading.
    PDWORD pdwProtocol is now removed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@957 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 35 ++++++++++++++++++++---------------
 src/ifdwrapper.h |  3 ++-
 2 files changed, 22 insertions(+), 16 deletions(-)

commit 5120765d1bee5499dc4b97134e080e4839a9e7bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 18 08:26:04 2004 +0000

    add a chapter "Memory structures"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@956 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 61 +++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 50 insertions(+), 11 deletions(-)

commit 0704cfa8b39c947ebcb9b66fa50a02bf9c244e5f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 13:43:37 2004 +0000

    put back the structure name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@955 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e1041d30ea59ba4515e863c461f6d7578fffd7e6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 08:41:04 2004 +0000

    do not use a dwAllocNum argument in RFAllocateReaderSpace() since the
    number of contexts is _fixed_ by the declaration of sReadersContexts[].
    
    It may be interpreted as a (false) possibility of dynamicity and will then
    cause a buffer overflow if dwAllocNum > PCSCLITE_MAX_READERS_CONTEXTS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@954 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c    | 2 +-
 src/readerfactory.c | 9 +++------
 src/readerfactory.h | 2 +-
 3 files changed, 5 insertions(+), 8 deletions(-)

commit cf94cd5eabda12fcd671d0e7a0f8ec2d08899268
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 08:14:56 2004 +0000

    psFunctions.pvf* fields are function pointers so NULL is more appropriate
    than 0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@953 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    | 44 +++++++++++++++++------------------
 src/readerfactory.c | 66 ++++++++++++++++++++++++++---------------------------
 2 files changed, 55 insertions(+), 55 deletions(-)

commit d59e3bdf6442e9f6b091b998dc236236acafaae3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 08:04:56 2004 +0000

    correct a bug introduced in version 1.47 that occurs if a reader is
    muti-slot and no more sReadersContexts[] entries are available:
    RFRemoveReader() was called with a NULL lpcReader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@952 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f0e3a79c59618aa2f480ad56dc4ed151b35c6dbc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 07:59:26 2004 +0000

    move declaration of dwContextB in the block it is used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@951 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 69c8b6008a13579923974c5373d562cdc719e010
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 07:50:39 2004 +0000

    move the lpcStripReader[] declaration in the block it is used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@950 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit be7131cc34cef45f26ab5c99280346380986a72e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 07:44:03 2004 +0000

    rename the structure READER_STATES in READER_STATE (singular) since the
    structure stores only the state of ONE reader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@949 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 6 +++---
 src/eventhandler.h  | 6 ++++--
 src/winscard_clnt.c | 8 ++++----
 src/winscard_scf.c  | 2 +-
 4 files changed, 12 insertions(+), 10 deletions(-)

commit 320f10686705df0c6c60c905bb53578d652715e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 06:44:01 2004 +0000

    correct foobar(); prototypes in foobar(void);
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@948 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/sys_generic.h    | 12 ++++++------
 src/PCSC/thread_generic.h |  2 +-
 src/eventhandler.c        |  2 +-
 src/eventhandler.h        |  2 +-
 src/hotplug_libusb.c      |  2 +-
 src/hotplug_linux.c       | 10 +++++-----
 src/pcscdaemon.c          |  4 ++--
 src/powermgt_generic.c    |  2 +-
 src/powermgt_generic.h    |  2 +-
 src/sys_unix.c            | 12 ++++++------
 src/thread_unix.c         |  2 +-
 src/tokenparser.l         |  2 +-
 src/winscard_msg.h        |  2 +-
 src/winscard_scf.c        | 14 +++++++-------
 src/winscard_svc.c        |  2 +-
 src/winscard_svc.h        |  2 +-
 16 files changed, 37 insertions(+), 37 deletions(-)

commit 87875d84f2d9c3904365916a7d91d23e31d64a4f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 06:31:07 2004 +0000

    complete the prototypes of RFSuspendAllReaders() and RFAwakeAllReaders()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@947 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 4 ++--
 src/readerfactory.h | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit a08caf0ae0c819b720498de246a08c21b530397f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 17 06:29:07 2004 +0000

    psCapabilites and psProtOptions fields are not used in struct
    ReaderContext so "#if 0" them
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@946 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit b865aefe0772ae17e6c96cb874057bd24d2a4da1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 16 14:03:45 2004 +0000

    PHSetProtocol() correctly return the selected protocol
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@945 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 22 +++++++++-------------
 1 file changed, 9 insertions(+), 13 deletions(-)

commit cd887bc3a67a8ba7e685efbb44056c3447b1fc12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 16 12:44:05 2004 +0000

    print the Send Protocol in T=? format instead of internal representation
    value.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@944 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit cea4c168dd0cb62508c9e7ec1e0671d64e9d1d9d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 15 20:49:46 2004 +0000

    improve my previous patch: correctly print an unknown Active Protocol if
    it happens
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@943 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit ebc8427b32cf4b549056dc2fbf1e8cc0a49f70d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 15 20:34:33 2004 +0000

    add ChangeLog.cvs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@942 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .cvsignore | 1 +
 1 file changed, 1 insertion(+)

commit 59cf8cc880b783756a482e8d145644a9a73df5ef
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 15 20:33:16 2004 +0000

    print the "real" active protocol in the format T=? instead of the
    internal representation of that value (T=0 is coded as 1)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@941 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 49be1fa0f7d097b1b957caf0de751f52bc2c1cb1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 11 08:06:54 2004 +0000

    1.2.9-beta3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@939 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f4d1b58459e22944cd1925cde11a27b8d1e02103
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 11 08:05:52 2004 +0000

    ChangeLog.cvs is not a .PHONY target but a real file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@938 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 1 -
 1 file changed, 1 deletion(-)

commit 19a2c963934393e74cdd0e52f7d70e9afd177d12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jun 11 07:40:56 2004 +0000

    - add documentation for LTPBundleFindValueWithKey, debug_msg and debug_xxd
    - ifdhandler.h moved in PCSC/ifdhandler.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@937 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 133 ++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 121 insertions(+), 12 deletions(-)

commit 51608a13cd57c2de8a2028a99051fc1a2ef8a545
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 20:18:10 2004 +0000

    version 1.9 to add support of GNU Pth (http://www.gnu.org/software/pth/)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@936 0ce88b0d-b2fd-0310-8134-9614164e65ea

 m4/acx_pthread.m4 | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit d73fa09f5b15bba7baa07a20c1bae949fd39f4e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 18:11:12 2004 +0000

    pcsclite.h moved from src/ to src/PCSC/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@935 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/.cvsignore      | 1 -
 src/PCSC/.cvsignore | 1 +
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 0f5fdd9f1fb22f88aabef8aaef439110b71a2f17
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 18:09:21 2004 +0000

    simplify:
      #if defined(__APPLE__)
      #include <PCSC/wintypes.h>
      #else
      #include <wintypes.h>
      #endif
    since we now use PCSC/ for all Unix platforms
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@934 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h | 4 ----
 libmusclecard/src/PCSC/musclecard.h | 4 ----
 src/PCSC/pcsclite.h.in              | 4 ----
 src/PCSC/winscard.h                 | 4 ----
 4 files changed, 16 deletions(-)

commit a22dd2fafa1efda00eb875e833820cb5d26e37f7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 18:05:02 2004 +0000

    include PCSC/pcsclite.h instead of pcsclite.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@933 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7e7e1512311a302acceaaac3d0370afdb417f901
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 18:04:16 2004 +0000

    src/pcsclite.h moved in src/PCSC/pcsclite.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@932 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 2 +-
 src/Makefile.am | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit eda5e8c5d4ffe761758d2e7143e2b6f1a5c3bf9f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 14:57:47 2004 +0000

    use the new PCSC/ location for header files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@931 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c                     |  5 +++--
 libmusclecard/src/musclecard.c              |  6 +++---
 libmusclecard/src/muscletest.c              | 10 ++++------
 libmusclecard/src/tokenfactory.c            |  4 ++--
 libmusclecard/src/tokenfactory.h            |  2 +-
 libmusclecard/utils/bundleTool/bundleTool.c |  5 +++--
 src/atrhandler.c                            |  5 ++---
 src/configfile.l                            |  5 ++---
 src/debuglog.c                              |  5 ++---
 src/dyn_hpux.c                              |  5 ++---
 src/dyn_macosx.c                            |  5 ++---
 src/dyn_unix.c                              |  5 ++---
 src/eventhandler.c                          |  7 +++----
 src/hotplug_generic.c                       |  3 +--
 src/hotplug_libusb.c                        |  7 +++----
 src/hotplug_linux.c                         |  7 +++----
 src/hotplug_macosx.c                        |  7 +++----
 src/ifdwrapper.c                            |  7 +++----
 src/pcscdaemon.c                            |  5 ++---
 src/powermgt_generic.c                      |  3 +--
 src/powermgt_macosx.c                       |  5 ++---
 src/prothandler.c                           |  7 +++----
 src/readerfactory.c                         |  7 +++----
 src/sys_unix.c                              |  2 +-
 src/testpcsc.c                              |  4 ++--
 src/thread_unix.c                           |  2 +-
 src/tokenparser.l                           |  4 ++--
 src/utils/formaticc.c                       |  5 +++--
 src/utils/installifd.c                      |  5 +++--
 src/winscard.c                              |  9 ++++-----
 src/winscard_clnt.c                         |  7 +++----
 src/winscard_msg.c                          |  7 +++----
 src/winscard_scf.c                          |  7 +++----
 src/winscard_svc.c                          |  7 +++----
 34 files changed, 83 insertions(+), 103 deletions(-)

commit 754a9bc8e28e349c846ad41978801a84e3bd77d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 14:56:32 2004 +0000

    install the exported header files in ../include/PCSC/ to avoid name
    polution in ../include/
    also install parser.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@930 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit fa8ed64b39866b593a6f1d89399808bd56ff2cc3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 13:19:35 2004 +0000

    use /* */ instead of // for comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@929 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 38cb094e1a9074da35dd1ad2a5a55ba85d2b7729
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jun 10 13:18:42 2004 +0000

    rework RFSetReaderName() to simply the code and always start with the
    lowest number available (like in previous pcsc-lite version)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@928 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 228 +++++++++++++++++++---------------------------------
 1 file changed, 81 insertions(+), 147 deletions(-)

commit 0bf787111d80c0556e182098975dfe21d66e51fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 09:57:02 2004 +0000

    use a dynamic array for available USB drivers:
    - avoid a buffer overflow (argh!)
    - allow to use more than 16 drivers/supported readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@926 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 46 ++++++++++++++++++++++++++++++++++------------
 1 file changed, 34 insertions(+), 12 deletions(-)

commit 027494ec3c9fd8cace1db3a8e92f1d7b41bab700
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 07:29:33 2004 +0000

    replace SCARD_PROTOCOL_ANY by SCARD_PROTOCOL_T0 | SCARD_PROTOCOL_T1
    since SCARD_PROTOCOL_ANY is _not_ defined by Microsoft PC/SC and is not
    equals to SCARD_PROTOCOL_T0 | SCARD_PROTOCOL_T1
    
    SCARD_PROTOCOL_ANY is deprecated and should not be used!
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@925 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 1a190906215745c6496ac2cbc35e46e38e8038bf
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 07:27:15 2004 +0000

    improve debug messages and comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@924 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 35 +++++++++++++++++------------------
 1 file changed, 17 insertions(+), 18 deletions(-)

commit 2d089e53ea98c00fb3ca393def47d52da694219f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 07:13:55 2004 +0000

    remove useless ' ' at the end of some lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@923 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 258 ++++++++++++++++++++++++++++-----------------------------
 1 file changed, 125 insertions(+), 133 deletions(-)

commit 8bda8a07d834cb6b36b928c1037616527991ef43
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 06:58:44 2004 +0000

    - add support of specific mode by the presence of TA2 (protocol not
      negociable)
    - improve debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@922 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 75 ++++++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 54 insertions(+), 21 deletions(-)

commit 4a1074994f84251cc7daebea1bcec50d734a1405
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 06:19:16 2004 +0000

    code reindentation and remove useless blank and { } lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@921 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 85 ++++++++++++++++++++++++--------------------------------
 1 file changed, 37 insertions(+), 48 deletions(-)

commit a96b728ca316bb475aaebd6350aceb83bfd4f63b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 9 06:12:59 2004 +0000

    make debug messages work when ATR_DEBUG is set
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@920 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 8de84256a26532fa505bacde2fb7363b4128b46e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jun 8 07:04:46 2004 +0000

    add #include <pcsclite.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@919 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 2 ++
 1 file changed, 2 insertions(+)

commit 81a35567e482879b52a6d89a2ae210bac15853b0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 7 13:52:58 2004 +0000

    remove two unused #define
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@918 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 3 ---
 1 file changed, 3 deletions(-)

commit b11665d382927ad12efaf5173a96ba55b2d1e126
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 7 13:40:55 2004 +0000

    a lexer library (lex or flex) is mandatory to parse /etc/reader.conf so
    exit ./configure if none is found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@917 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit ccb882c1c949c573811dfc935266cd2f34de7b66
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jun 7 13:39:01 2004 +0000

    the libpcsclite library does not compile and work without a thread library
    even with --disable-threadsafe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@916 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 11 ++++-------
 src/Makefile.am |  6 +-----
 2 files changed, 5 insertions(+), 12 deletions(-)

commit 74302e41df47a4b0c92a0e2c0c713e5ddf10bd7e
Author: Damien Sauveron <invalid@example.com>
Date:   Sat Jun 5 16:04:11 2004 +0000

    Change the names of the types LPCSTR to LPCTSTR and LPSTR to LPTSTR to be compliant with the Microsoft SCard API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@915 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 905583ad6f15d2e6fd4af440ba84e52cc50278a8
Author: Damien Sauveron <invalid@example.com>
Date:   Sat Jun 5 15:58:47 2004 +0000

    Add the include needed <errno.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@914 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 1 +
 1 file changed, 1 insertion(+)

commit ce56a71db348c2989e723f24bb05081171c5a9f2
Author: Damien Sauveron <invalid@example.com>
Date:   Sat Jun 5 15:52:11 2004 +0000

    Add a note about 2 unused functions in the SCF part.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@913 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 538ed4b8d9a3688a1bc25068a74560ae9b6de18b
Author: Damien Sauveron <invalid@example.com>
Date:   Sat Jun 5 15:43:11 2004 +0000

    Change the names of the types LPCSTR to LPCTSTR and LPSTR to LPTSTR to be compliant with the Microsoft SCard API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@912 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c |  2 +-
 doc/pcsc-lite.tex       | 22 +++++++++++-----------
 src/PCSC/ifdhandler.h   |  8 ++++----
 src/PCSC/winscard.h     | 10 +++++-----
 src/PCSC/wintypes.h     |  4 ++--
 src/eventhandler.c      |  4 ++--
 src/ifdwrapper.c        |  4 ++--
 src/readerfactory.c     | 16 ++++++++--------
 src/readerfactory.h     | 12 ++++++------
 src/winscard.c          | 10 +++++-----
 src/winscard_clnt.c     | 20 ++++++++++----------
 src/winscard_scf.c      | 36 ++++++++++++++++++------------------
 12 files changed, 74 insertions(+), 74 deletions(-)

commit bd41dde1c25e850b222938fbb1210c2c7886d114
Author: Damien Sauveron <invalid@example.com>
Date:   Sat Jun 5 15:33:53 2004 +0000

    Add the two inline in the declarations to avoid warning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@911 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1da8b6d40232d9a2fc0dfcfc942fd7fb3906b73f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 30 19:33:07 2004 +0000

    display the error message (errno) if the bundle file cannot be opened
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@909 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 679e256fb7b163fc0a38653b17c9866b58babed7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 26 21:16:16 2004 +0000

    declare internal only function as "static" (and two one-line functions as "inline")
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@908 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 19 ++++++++++---------
 1 file changed, 10 insertions(+), 9 deletions(-)

commit fb443e6ea9516a3a70dd4147d14ee4d44d90d42f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 26 20:53:38 2004 +0000

    add a ' ' argument in PCSCLITE_THREAD_FUNCTION( ) so that old gcc
    (gcc-2.95) does not comply with "macro `PCSCLITE_THREAD_FUNCTION' used
    without args" any more.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@907 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/thread_generic.h | 2 +-
 src/eventhandler.c        | 2 +-
 src/hotplug_libusb.c      | 2 +-
 src/winscard_svc.c        | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit 77a78e4384ab3a22be0fa68cdec7d28e883d18cc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 26 07:46:39 2004 +0000

    add "Some SCardControl commands" section (IFD_EXCHANGE and VERIFY_PIN)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@902 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 158 ++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 155 insertions(+), 3 deletions(-)

commit b22bd63550997f56e6d84c4da73c8b1fe132f5b8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 26 07:45:25 2004 +0000

    add CCID spec reference
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@901 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.bib | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 11962d52d8df3ea0b157738259005e6c64deb3e7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 25 12:59:26 2004 +0000

    signedness issue detected by gcc -pedantic
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@899 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 9e93ff25ff9d86ea6dd2acfac8f6820f48c04c35
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 25 12:52:09 2004 +0000

    remove useless { } and simplify the code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@898 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 95 ++++++++++++++++---------------------------------------
 1 file changed, 28 insertions(+), 67 deletions(-)

commit a2b11de6b09382c62ea896c0fc975a1f4b7ab938
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 25 12:44:30 2004 +0000

    recompile using -pedantic and correct lots of cast "problems"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@897 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c |  9 +++++----
 src/PCSC/debuglog.h            |  6 +++---
 src/PCSC/thread_generic.h      |  5 ++++-
 src/debuglog.c                 |  3 ++-
 src/dyn_macosx.c               |  9 +++++----
 src/eventhandler.c             |  2 +-
 src/hotplug_libusb.c           |  2 +-
 src/hotplug_linux.c            |  3 ++-
 src/hotplug_macosx.c           |  3 ++-
 src/powermgt_macosx.c          |  3 ++-
 src/testpcsc.c                 |  2 +-
 src/thread_unix.c              |  2 +-
 src/utils/formaticc.c          | 11 +++++++----
 src/winscard_msg.c             |  2 +-
 src/winscard_svc.c             |  3 ++-
 15 files changed, 39 insertions(+), 26 deletions(-)

commit edd81a112a301c25ad9afa403827cdf2f1d61ce1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 24 06:36:19 2004 +0000

    - allow ':' in DEVICENAME
    - use ':' to indicate a non-real device (do not test for its existence
      as a file).
      You can use this in something like "net://1.2.3.4/foobar" to indicate
      a reader on a remote machine like an X11 terminal.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@884 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 8782678e493064ada6daf9b1e13e75f1a03ecc57
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 19 09:43:19 2004 +0000

    for SCardConnect()
    - dwPreferredProtocols is a bit mask of acceptable protocols
    - SCARD_SHARE_DIRECT can be used to talk to the reader without a card inserted
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@883 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit 287bed32476e12d9c242224094a486c54e13ab0c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 13 13:28:49 2004 +0000

    do not install pcsc_demo since it is just a sample code for developpers
    that is not supposed (the code) to do anything useful
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@870 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bc640638e1159b8993ceadf1730695deb7890800
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 13 13:26:56 2004 +0000

    ignore autom4te.cache directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@869 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .cvsignore | 1 +
 1 file changed, 1 insertion(+)

commit 68d911c8255c4cdbae953251af6ba1a11e692d92
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 13 13:26:17 2004 +0000

    ignore pcsclite.h since it is generated from pcsclite.h.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@868 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/.cvsignore | 1 +
 1 file changed, 1 insertion(+)

commit 66a6c3ffaf9d968c6b4e33c7e9a1b685b8f1776f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 13 13:25:06 2004 +0000

    Typos. thanks to Ville SkyttÔøΩ for the patches
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@867 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog                   | 8 ++++----
 DRIVERS                     | 6 +++---
 README                      | 2 +-
 SECURITY                    | 2 +-
 doc/formaticc.1             | 6 +++---
 doc/pcsc-lite.tex           | 6 +++---
 doc/pcscd.8.in              | 4 ++--
 doc/reader.conf.5.in        | 8 ++++----
 etc/SmartcardServices       | 6 +++---
 etc/StartupParameters.plist | 4 ++--
 etc/pcscd.startup           | 2 +-
 src/README_INTERNALS.txt    | 2 +-
 12 files changed, 28 insertions(+), 28 deletions(-)

commit 3b22af03dfbf6d98a1da72e10fc722c315bde3b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 13 12:28:18 2004 +0000

    install ifdhandler.h so drivers can use it for compilation.
    Patch by Ville SkyttÔøΩ
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@866 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 443055047470ef446cc5cfe198a53d86a3cc9563
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 12 12:28:13 2004 +0000

    remove reader.conf from EXTRA_DIST since it is already in sysconf_DATA
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@865 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b1f2586898c0d60cc8b89178418a4a6e098e022e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 12 12:27:42 2004 +0000

    comment the configuration lines since they are not valid and will
    prevent the start of pcscd if they are not modified
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@864 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/reader.conf.in | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit 651f18c29418f9d179df822a4186e48d5da05a69
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 12 07:53:39 2004 +0000

    use the modern form for AC_INIT() instead of the deprecated one.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@859 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 021a65abda2841fa8ebae64cf4620c88ee4b47ce
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 12 07:51:52 2004 +0000

    use @VERSION@ for PCSCLITE_VERSION_NUMBER instead of a manual value.
    Thanks to Damien Sauveron for the idea.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@858 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a575dc16712b610cafc95d4f7d90a1ab2744b68e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 12 07:48:35 2004 +0000

    install bundleTool and installifd in ../sbin/ instead of ../bin/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@857 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/Makefile.am | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 65df08db1868ae1f884147193738e10eb93f528f (tag: 1.2.9-beta2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 12:25:20 2004 +0000

    release 1.2.9-beta2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@855 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 04704b7116391ffeca1e95ce513f547641e8ef93
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 09:49:22 2004 +0000

    beta2 version
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@854 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0f4dbf517b43529145d4efa6e4dd4a55e187118d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 09:44:10 2004 +0000

    change libmusclecard current version to 1 so that old libmusclecard0 and
    new libmusclecard1 can cohabitate on the same system and will not break
    existing programs during upgrades.
    
    This is because libmusclecard is provided in the same distrib/package as
    libpcsclite. If we want two libpcsclite to cohabitate we must also
    ensure that the two libmusclecard can also cohabitate.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@853 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 4d772c186f234735e9b99898ab56c2fdfdb60b9e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 09:28:35 2004 +0000

    generate local icons for the latex2html generated pages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@852 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8ea3027a66bdd9e3c1ce03cac77ba6dabf80cf89
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 08:11:58 2004 +0000

    add a / at the end of URLs and directory names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@851 0ce88b0d-b2fd-0310-8134-9614164e65ea

 DRIVERS | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

commit e33a0fc3f6e2d010e8ccd74dadad28ccef67572b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 11 08:08:33 2004 +0000

    print pcsc-lite version number during startup
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@850 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f7cb13fc506ffce2418497128056dc17a82a32ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 15:12:00 2004 +0000

    install pcsclite.h instead of pcsclite.h.in
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@849 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 73a76150ee40d404a29a6528cf46d167bc280903
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 14:41:15 2004 +0000

    add the chapter "Multithreading and contexts"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@848 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit 09ed963fa30eae495bfc3ded39a4f2708090ee2c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 13:29:40 2004 +0000

    ignore ifdhandler-3 temporary files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@847 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/.cvsignore | 5 +++++
 1 file changed, 5 insertions(+)

commit c6795408f83cea44f525d8ae828a985f8e740877
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 13:24:33 2004 +0000

    some rewrite
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@846 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 493b3cd044cf9d19700ffa892dc98ca66fdea5bd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 13:16:51 2004 +0000

    caracters -> characters
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@845 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/formaticc.1 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 17cf1fb271c10aabbb1039f2619f60db86477bc9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 13:16:04 2004 +0000

    approprate -> appropriate
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@844 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.8.in | 6 +++---
 libmusclecard/utils/bundleTool/bundleTool.c    | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 72f5641951986c52f69f1bfcd0565cb283aab490
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 13:14:30 2004 +0000

    smartcard -> smart card, musclecard -> MuscleCard
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@843 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog                                      |  4 ++--
 HELP                                           |  2 +-
 NEWS                                           |  2 +-
 README                                         |  4 ++--
 configure.in                                   |  6 +++---
 doc/formaticc.1                                |  2 +-
 doc/pcsc-lite.tex                              | 14 +++++++-------
 doc/pcscd.8.in                                 |  4 ++--
 etc/SmartcardServices                          |  6 +++---
 etc/StartupParameters.plist                    |  4 ++--
 libmusclecard/src/PCSC/musclecard.h            | 17 +++--------------
 libmusclecard/src/muscletest.c                 |  2 +-
 libmusclecard/utils/bundleTool/bundleTool.8.in |  2 +-
 src/debuglog.c                                 |  2 +-
 src/utils/formaticc.c                          |  2 +-
 15 files changed, 31 insertions(+), 42 deletions(-)

commit 462df9984245ce42fbf60603e2e55293c5485c81
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 12:50:25 2004 +0000

    add ifdhandler-3.tex ifdhandler-3.pdf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@842 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 5fa2e14d6e039d7bd0acc76ae41e2c34bd894c44
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 12:49:45 2004 +0000

    IFD Handler API in LaTeX format
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@841 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/ifdhandler-3.tex | 994 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 994 insertions(+)

commit 931d099adcc8bb878ed621db56eb91db9412e283
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 10 07:47:49 2004 +0000

    in SCardReconnect(), SCardDisconnect() and SCardEndTransaction()
    SCARD_UNPOWER_CARD is "Power down the card and reset it (Cold Reset)" so
    we really power down _and_ then power up the card.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@839 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 161 ++++++++++++++++++++++-----------------------------------
 1 file changed, 63 insertions(+), 98 deletions(-)

commit eb3d821186364baafc69cbaa2f2b280cc1f0f0b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 7 18:18:17 2004 +0000

    the comment for --enable-extendedapdu was wrong. The maximum APDU size
    is 32KB and not 128KB. Thanks to Damien Sauveron.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@838 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 475d110d372678dacdb91d52798f12aa6215edfc (tag: 1.2.9-beta1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 09:05:59 2004 +0000

    release 1.2.9-beta1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@834 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 87 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 87 insertions(+)

commit e661731ad86c1e56e511c49bdec1cde008c313ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 09:04:44 2004 +0000

    version 1.2.9-beta1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@833 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit e879509d6d1fb405b75f38598c717b3463564a72
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 09:03:31 2004 +0000

    in IFDControl_v2 and IFDControl test the ifd handler version and
    possibly return before the critical section (mutex)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@832 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 40 ++++++++++++++++++----------------------
 1 file changed, 18 insertions(+), 22 deletions(-)

commit d36e3d8a224ad603d3d44e7ba10ea28548f4e4e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 08:58:12 2004 +0000

    in IFDControl_v2() and IFDControl(), do not return between SYS_MutexLock
    and SYS_MutexUnLock but set rv to the correct value. Otherwise the daemon
    is dead locked.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@831 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit d519c1af79bfeafaad3c4c161262e43ec0fe7f58
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 08:17:46 2004 +0000

    add an empty HPStopHotPluggables() function
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@830 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_generic.c | 5 +++++
 src/hotplug_macosx.c  | 5 +++++
 2 files changed, 10 insertions(+)

commit a4b70926c08d36e9b5a90647963898b7370b8358
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 08:12:43 2004 +0000

    use the local pcsclite.h instead of the (old) one already installed
    
    This was problematic for MacOSX since winscard.h wanted to include
    <PCSC/pcsclite.h> which is the old and incompatible one.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@829 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c | 3 +++
 1 file changed, 3 insertions(+)

commit 98ca5cdcbb4ca8d1a4def0ada060037f7543cf40
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 06:38:14 2004 +0000

    add support of --enable-extendedapdu argument to allow the use of big
    APDUs (up to 128 KBytes)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@828 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 19 +++++++++++++++++++
 src/Makefile.am        |  2 +-
 src/PCSC/pcsclite.h.in |  1 +
 3 files changed, 21 insertions(+), 1 deletion(-)

commit 2ab5b80456ebbd5475ec574a4f46ae3eff9cc803
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 06:36:46 2004 +0000

    minor reindentations
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@827 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 12 +++---------
 1 file changed, 3 insertions(+), 9 deletions(-)

commit a1acec93a25cb91f42815e565c815398428ec928
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu May 6 06:36:13 2004 +0000

    in SCardSetAttrib() the cbAttrLen is a DWORD and not a LPDWORD so use
    gsStr->cbAttrLen instead of &gsStr->cbAttrLen. Bad cut-n-paste here!
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@826 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit a5e270b9d945ade6bc5fd3b40d46c51420381cba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 3 13:54:23 2004 +0000

    - rename dwFeeds and dwMutex to pdwFeeds and pdwMutex since they are
      pointers
    - add a check to avoid removing an aleady removed driver (closes bug
      [ #300684 ] pcscd segfaults on 'if (*sContext->dwMutex == 1)')
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@823 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 112 +++++++++++++++++++++++++++-------------------------
 1 file changed, 59 insertions(+), 53 deletions(-)

commit 542ae252ba878fe9ce5afd4fd5a9142087e13f12
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 3 13:51:38 2004 +0000

    rename dwFeeds and dwMutex to pdwFeeds and pdwMutex since they are
    pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@822 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2bd838d87212bc81ffa466b0ef24af7716a614d3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 27 13:27:03 2004 +0000

    patch from Damien Sauveron to rectify the source code examples.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@821 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 55 ++++++++++++++++++++++++++++---------------------------
 1 file changed, 28 insertions(+), 27 deletions(-)

commit 717f2a5d8d71688223ef259592c5c03499826156
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 21 22:45:27 2004 +0000

    do not stop if pcsc-lite does not exist and is removed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@820 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 05d1c9a0f306e7008b076da8f452a05013a39633
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 21 22:42:38 2004 +0000

    distribute pcsc-lite.tex
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@819 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7810c238ddd9a96ff609335810f084c86dc9c5e1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 21 22:18:46 2004 +0000

    - SCardControl new API
    - add SCardGetAttrib()/SCardSetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@818 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.tex | 172 ++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 168 insertions(+), 4 deletions(-)

commit 5799df7408a30cacac13998cae7105c690a62a00
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 21 21:42:33 2004 +0000

    remove the function names from the debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@817 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 58 +++++++++++++++-----------------
 src/dyn_hpux.c                   | 17 +++++-----
 src/dyn_macosx.c                 | 20 ++---------
 src/dyn_unix.c                   |  8 +++--
 src/eventhandler.c               | 33 ++++++++-----------
 src/pcscdaemon.c                 | 45 +++++++++++++------------
 src/powermgt_macosx.c            |  6 ++--
 src/prothandler.c                | 39 ++++++++--------------
 src/readerfactory.c              | 58 ++++++++++++++++----------------
 src/sys_unix.c                   |  8 ++---
 src/winscard.c                   | 71 +++++++++++++++++++---------------------
 src/winscard_clnt.c              |  7 ++--
 src/winscard_msg.c               | 44 ++++++++++---------------
 src/winscard_svc.c               | 10 +++---
 14 files changed, 186 insertions(+), 238 deletions(-)

commit 9e64e4fea24413963cf41e4aaf7f6cc508fede7c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 21 21:40:19 2004 +0000

    add __FUNCTION__ in the debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@816 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 85fa8e5662f3affce8de095528312d714129c801
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Apr 19 16:49:39 2004 +0000

    Typo in email address.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@815 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2e1befd6908ff86b14c2a69d88ddd725b8817094
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 16:42:02 2004 +0000

    update copyright date
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@814 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 310b09f54bb39db091a46d777afccee5ba3f2fbb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 16:29:35 2004 +0000

    add SCARD_ATTR_* tags for SCardGetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@813 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 75 ++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 75 insertions(+)

commit 424bd39b6e82fa774fffd4e7908b72616d967352
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 16:28:46 2004 +0000

    RxBuffer argument of IFDControl is LPVOID and not LPCVOID
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@812 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit bacb06b891128248c5efb7231683a99ca07b7821
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 16:27:51 2004 +0000

    FDHControl() argument lpInBuffer and lpOutBuffer are LPCVOID and LPVOID
    and not PUCHAR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@811 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ff19eedf825f6d5e484de2e47a3f5e552de6510a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 16:26:02 2004 +0000

    add test for SCardSetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@810 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 1a815430dd83ca97bae8faaeeaa124d7b1e9745b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 16:25:23 2004 +0000

    add support for SCardGetAttrib() and SCardSetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@809 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h |   8 +++-
 src/winscard.c      |  98 ++++++++++++++++++++++++++++++++++++++++++
 src/winscard_clnt.c | 120 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/winscard_msg.h  |  15 ++++++-
 src/winscard_svc.c  |  17 ++++++++
 5 files changed, 255 insertions(+), 3 deletions(-)

commit 9b73647686427fa66213a44d44dba897fb3239b2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 15:24:25 2004 +0000

    do not ask for reader number if only one reader is present
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@803 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 27 ++++++++++++++-------------
 1 file changed, 14 insertions(+), 13 deletions(-)

commit 66808e13cb41c5a950b567b38d8bdf934b89832f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 15:21:06 2004 +0000

    remove useless REPEAT_TEST conditional code
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@802 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 31 +++++++------------------------
 1 file changed, 7 insertions(+), 24 deletions(-)

commit d903e9876a5393b49897c8012ae4fd4e4a08e86b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 15:18:25 2004 +0000

    test SCardGetAttrib()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@801 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 237592b32299c59b58f96f2f6fd66b6258afeeea
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 19 14:59:59 2004 +0000

    lpOutBuffer argument is LPVOID not LPCVOID in IFDControl
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@800 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ae5489041d20c82b45de685832f6f60144a92505
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 16 16:11:15 2004 +0000

    do not SCardReleaseContext() in case of error in SCardControl test
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@799 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 18 ++----------------
 1 file changed, 2 insertions(+), 16 deletions(-)

commit 08b9e175dfccd0169b4dbc52e3e50165f6ae3bc7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 16 15:27:21 2004 +0000

    add support of the new IFDHControl() API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@798 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h |   6 +--
 src/ifdwrapper.c    |  96 +++++++++++++++++++++++++++++++++++++++++++----
 src/ifdwrapper.h    |   4 +-
 src/winscard.c      |  61 ++++++++++++++++++++++++++----
 src/winscard_clnt.c | 106 ++++++++++++++++++++++++++++++++++++++++++++++++----
 src/winscard_msg.h  |  13 +++++++
 src/winscard_svc.c  |  11 ++++++
 7 files changed, 270 insertions(+), 27 deletions(-)

commit 0f3996597a32742bc787b7bcff03b11aa0c11def
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 16 15:24:54 2004 +0000

    add a test for SCardControl()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@797 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

commit 31e10d5de520b475a381b28c832c1344f2a00b3f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 16 15:23:48 2004 +0000

    rename IFDHControl() to IFDHControl_v2() and add a new IFDHControl()
    with the new API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@796 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 983a893d380a1e32de2d3fdec06d7e5cf4647557
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 09:53:58 2004 +0000

    remove implicit/useless { }
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@793 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 184 ++++++++++++++-----------------------------------------
 1 file changed, 47 insertions(+), 137 deletions(-)

commit dfe6d455366c6406646df48e5021d35f107a57dd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 09:01:52 2004 +0000

    document the SCardControl migration
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@792 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 96 +++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 78 insertions(+), 18 deletions(-)

commit 46fcf21f4e5e7b2c22972a9f1d65aad3c44ef0f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 08:43:33 2004 +0000

    pcscd and libpcsclite now exchange a protocol version to know what API
    to use
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@791 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 41 +++++++++++++++++++++++++++++++++++++----
 src/winscard_msg.h  | 15 ++++++++++++++-
 src/winscard_svc.c  | 43 ++++++++++++++++++++++++++++++-------------
 3 files changed, 81 insertions(+), 18 deletions(-)

commit c8c3797237970b43ca57c2b3f65f5f2536c33d28
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 08:38:50 2004 +0000

    change library version to 1:0:0 since the interface changed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@790 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0a79b56b626f6d94cce507baf4cb0a457a614e67
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 08:37:23 2004 +0000

    ignore LaTeX temporary files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@789 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/.cvsignore | 8 ++++++++
 1 file changed, 8 insertions(+)

commit b82dc434c6f9ff087e48bc12167bb752bcf9272f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 08:36:05 2004 +0000

    bibliography in BibTeX format
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@788 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite.bib | 5 +++++
 1 file changed, 5 insertions(+)

commit 42d1893f7a5e365bf975c4bbb8cd228b74cd0049
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 08:29:40 2004 +0000

    - generate .pdf from .tex
    - distribute the generated pcsc-lite.pdf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@787 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 28 +++++++++++++++++++++++++++-
 1 file changed, 27 insertions(+), 1 deletion(-)

commit 7e3fdfff9d147dbd4eb8fb69c2d855a4405d7523
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 15 08:27:42 2004 +0000

    the pcsc-lite pdf documentation is now generated from a LaTeX document
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@786 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcsc-lite-0.8.7.pdf |  Bin 127963 -> 0 bytes
 doc/pcsc-lite.tex       | 1323 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 1323 insertions(+)

commit 4ee0690e88c47597ab7a8a11e5e6b8947016932d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 14 20:19:52 2004 +0000

    document in the help text that '--foreground' imply '--debug stderr'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@785 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fa7581b615a0e55f496de6e6eee425b6b7956ff4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 14 14:36:38 2004 +0000

    add a dummy field (to replace request_id) in sharedSegmentMsg to have
    the same structure size as in previous pcsc-lite versions so that a new
    pcscd can talk to an old libpcsclite and vice-versa.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@784 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 1 +
 1 file changed, 1 insertion(+)

commit a1eb29897ff5bc2365057c33e16c094aefb67d78
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Apr 14 14:34:37 2004 +0000

    add a default case in pcsc_stringify_error()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@783 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit d63c30569cc58f563da4027bd91e1d3180bcc69c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 13 15:03:31 2004 +0000

    test SCardListReaderGroups()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@782 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 36 +++++++++++++++++++++++++++++++++++-
 1 file changed, 35 insertions(+), 1 deletion(-)

commit 8f19ad1f522dc4812403092e5fed52c24574c45b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Apr 6 06:56:22 2004 +0000

    remove the code to map SCARD_UNPOWER_CARD on IFD_RESET.
    SCARD_UNPOWER_CARD is power down and power up (cold reset) => IFD_POWER_DOWN
    SCARD_RESET_CARD is just power up (warm reset) => IFD_RESET
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@767 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ------
 1 file changed, 6 deletions(-)

commit f40f7eb05a04f3713d7658067651c08ca61e967a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 5 14:44:59 2004 +0000

    initialize readers to NULL to avoid a "`readers' might be used
    uninitialized" compilation warning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@765 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e2ab474ec1bc03a0c51dfd0ecf4862d8a43b7304
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 2 14:43:58 2004 +0000

    add support for doc/reader.conf.5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@761 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    | 2 ++
 doc/Makefile.am | 4 ++--
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 00d2effbc90639f97cf273a1cbd9321565507d1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 2 14:42:58 2004 +0000

    new manpage
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@760 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/reader.conf.5.in | 76 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 76 insertions(+)

commit d81e5dab3d6344f937b1730b285efba8dfd0817c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 2 13:38:21 2004 +0000

    typos
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@759 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.8.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 5317b75a50c2909b8d905fea81c2df70ae46eed8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 2 06:52:16 2004 +0000

    add two missing free()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@758 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 4 ++++
 1 file changed, 4 insertions(+)

commit d88fdbd14946ae92b9ed82efe7471cd1ee9c106d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 1 09:14:05 2004 +0000

    do not try to restart a USB driver if the first execution fails (because
    of a bug in the driver or whatever) since the next execution of the
    driver will, with a great probability, also fail. The user has to
    unplug/replug the reader to restart the driver. This prevents to fill
    the system logs with an error message every 1 second.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@757 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)

commit 8d5bb328b410d47fecab6ce7eda3503615123e03
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 1 07:21:41 2004 +0000

    remove a useless occurence of PCSCLITE_MAX_READERS_CONTEXTS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@756 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 638146217763a0cd809cd7670f8691cef2ac4a6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 14:57:50 2004 +0000

    use sizeof(lpcStripReader) instead of MAX_READERNAME
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@754 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 024e0a81cb54d79abf3e420e6b6e5ce380e8aee3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 13:50:54 2004 +0000

    also print tokenType field as a number and string
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@753 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

commit f902bc46ba415b89de7864bee6cd82d04ea01843
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 13:48:31 2004 +0000

    Initialize currentToken->tokenType in MSCListTokens(). Closes "[ #300607 ]
    MSCListTokens should set tokenType to know state before OR operation"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@752 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 1 +
 1 file changed, 1 insertion(+)

commit fce295963be598ba52923962bc4ea75c53a236f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 13:33:25 2004 +0000

    replace some 0 bu NULL for pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@751 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 94 +++++++++++++++++++++---------------------
 1 file changed, 46 insertions(+), 48 deletions(-)

commit 845a021535e437d4c7dd8a57550e30e5477061d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 13:11:27 2004 +0000

    - replace 0 by NULL
    - remove some { } for one line blocks
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@750 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c | 27 ++++++++-------------------
 1 file changed, 8 insertions(+), 19 deletions(-)

commit b36f022a0fee40aed48aeb91c76a4aac2c3738ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 09:54:31 2004 +0000

    recode the readers enumeration to avoid the use of PCSCLITE_MAX_READERS_CONTEXTS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@749 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 32 ++++++++++++++++++++++----------
 1 file changed, 22 insertions(+), 10 deletions(-)

commit 3602ae93753d134b0d09a81fb3899f0ce7e8825e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 09:42:30 2004 +0000

    use SCARDCONTEXT and SCARDHANDLE instead of MSCLong32
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@748 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f13ff1898bcc5106c65b66f80848091512d4c639
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 09:42:01 2004 +0000

    use SCARDCONTEXT, DWORD, LPSCARDHANDLE, etc. instead of long, unsigned
    long, long *, etc. to be more Windows PC/SC compliant
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@747 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 77 +++++++++++++++++++++++++----------------------------
 1 file changed, 37 insertions(+), 40 deletions(-)

commit 9b5dc38b6e3453ff6eaf137d6713eda16521cf4b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 09:40:12 2004 +0000

    remove two "by najam" comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@746 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

commit 39f6e810c909b59ed6e300d4cbe49f4f7710b1fa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 09:38:54 2004 +0000

    use MAX_ATR_SIZE instead of 33 in the declaration of SCARD_READERSTATE_A
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@745 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 43a06a2cd77f441c84c57ef4d8bafbfb7c6d3210
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 31 09:37:59 2004 +0000

    proposed patch: define PCSCLITE_MAX_READERS with a deprecated attribute
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@744 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 4 ++++
 1 file changed, 4 insertions(+)

commit cd6c5f15803cfffb48d46bd7ae7ee268dc129864
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 15:12:22 2004 +0000

    remove the warning if no /etc/reader.conf is found. It is normal to not
    have an /etc/reader.conf for USB readers only.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@743 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit f7f9e88cb7ef1353b78e2cdd36e87f7ffcadb31b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 15:08:59 2004 +0000

    print a warning if the LIBPATH contains ".bundle". USB drivers SHOULD NOT be declared in reader.conf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@742 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 7 +++++++
 1 file changed, 7 insertions(+)

commit 96fe7aa58a01b1b039e2ac9422bf3575ff13ccc0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 14:54:19 2004 +0000

    add strerror(errno) in the error message.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@741 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 80255c5aee7602976187f978b538909e2f324366
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 14:48:28 2004 +0000

    use NULL instead of 0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@740 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 52 ++++++++++++++++++++++++----------------------------
 1 file changed, 24 insertions(+), 28 deletions(-)

commit 6db7dba454f7dbda0b82696272aeea5790e6211c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 14:43:47 2004 +0000

    code reindentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@739 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 250 ++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 148 insertions(+), 102 deletions(-)

commit e4ea34598fd4737d817af7beb35a1a977c0711ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 12:40:59 2004 +0000

    remove etc/ from filename
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@735 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/.cvsignore | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 9e9087d95dcacb380666a54cb6b66d3e20a20fb6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 12:40:00 2004 +0000

    remove PCSC/ from filenames
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@734 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .cvsignore | 44 ++++++++++++++++++++++----------------------
 1 file changed, 22 insertions(+), 22 deletions(-)

commit 1a5fae92f83c4b6830c4f67b568052a48a82b0d9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 30 12:38:57 2004 +0000

    files to ignore by CVS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@733 0ce88b0d-b2fd-0310-8134-9614164e65ea

 .cvsignore | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit 843023f79c58944644cda7f4fc0b3bcfad01c889
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 28 21:27:47 2004 +0000

    simplify a bit an hex->decimal conversion
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@732 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit ab53edb670e5a972876f264d40c37b76c43a7302
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 28 21:18:43 2004 +0000

    left shift one bloc of code that was in a isolated { }
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@731 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 251 +++++++++++++++++++++++++---------------------------
 1 file changed, 123 insertions(+), 128 deletions(-)

commit fa1f807eb2914c33c7622018e1705ccafa430d2d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 28 21:13:55 2004 +0000

    remove { } for one instruction if () blocs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@730 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 162 ++++++++++------------------------------------------
 1 file changed, 29 insertions(+), 133 deletions(-)

commit 7ab4d2da8aec4c81e41482ed0f891243b8c10abc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Mar 28 21:00:02 2004 +0000

    use a direct "DWORD dwNumReadersContexts" instead of an indirect "DWORD
    *dwNumReadersContexts". This will remove bugs like the one at line 90:
    "if (dwNumReadersContexts != 0)" is not "if (*dwNumReadersContexts != 0)"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@729 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 25 +++++++++----------------
 1 file changed, 9 insertions(+), 16 deletions(-)

commit b501f471613bb6023d5db84411933cf9f3df48c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Mar 24 14:32:07 2004 +0000

    correct atrString[] buffer size. The ATR is in ASCII so it must be MAX_ATR_SIZE*2 +1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@728 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fe48acd9fba5d28015dd5cdc9630317b7819a3a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 23 17:22:27 2004 +0000

    add void argument in HPStopHotPluggables()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@727 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 895618a9db0d6f1c0f3dcdf31e2805b061a4dd99
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 23 15:31:51 2004 +0000

    initialize vHandle field to NULL in RFAllocateReaderSpace() (caused a
    crash under MacOS X)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@726 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit a970f61bf7d92bbf6a3441a6accaaf698a3a6908
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 23 14:51:53 2004 +0000

    add the errno text message if specified reader.conf file is not found
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@725 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7e013ec153c040f626ae13f1165d7293e387a98c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 23 14:45:42 2004 +0000

    use PCSCLITE_READER_CONFIG instead of reader.conf in debug message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@724 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d61491c77e530f8fcc974d1ba4b1aae7b27b1478
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Mar 20 17:53:22 2004 +0000

    add support for HPStopHotPluggables()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@721 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit ca4467aee73ae48309d9aba361bcb742cac6d9c1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 19 10:36:44 2004 +0000

    new files to ignore files not in CVS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@720 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/.cvsignore         |  4 ++++
 doc/example/.cvsignore |  5 +++++
 etc/.cvsignore         |  3 +++
 m4/.cvsignore          |  2 ++
 src/.cvsignore         | 13 +++++++++++++
 src/utils/.cvsignore   |  7 +++++++
 win32/.cvsignore       |  2 ++
 7 files changed, 36 insertions(+)

commit 61d6ff21b1d9d525696be2be9c6a2ba14d11c0f5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 19 10:24:46 2004 +0000

    really reset the card when asked to in SCardReconnect()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@719 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 28 ++++++++++++++++++++++++----
 1 file changed, 24 insertions(+), 4 deletions(-)

commit 9d7c4df70efa78f894ff3df784ff36683779b9d1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 19 10:15:47 2004 +0000

    This is hack to allow a change of ATR at Reconnect without physically
    changing the card. This should not happen in real life so should not be
    problematic and so is active by default (ATR_CHANGE_AT_RECONNECT).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@718 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit 5c1030e405a58c436ae5b5f498b86d6ee9123c86
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Mar 19 10:08:29 2004 +0000

    remove duplicated SYS_MutexUnLock() in SCardStatus()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@717 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 6 ------
 1 file changed, 6 deletions(-)

commit 6894aa35301b843dfb7d35549fb669b82ac5a8c9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 18 10:10:45 2004 +0000

    call HPStopHotPluggables() before stopping the drivers to avoid a new
    reader detection/start by hotplug when we want to stop everything
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@715 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit 3129a7c889497c67ef052cc7f2179c43ffbbdb8b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 18 10:08:50 2004 +0000

    add HPStopHotPluggables() to exit the hotplug thread
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@714 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h        |  1 +
 src/hotplug_libusb.c | 15 +++++++++++++++
 2 files changed, 16 insertions(+)

commit ba06995b83bf628de71579402fe03b0feff1fb1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 18 09:20:04 2004 +0000

    set AraKiri to TRUE instead of 1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@713 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ba390b5573fd227d31b49469f6d367e9a9c0086c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 18 07:40:47 2004 +0000

    - add SCardReconnect() sample code
    - allow to select the reader number instead of selecting always the first
      one
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@712 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 41 +++++++++++++++++++++++++++++++++++++----
 1 file changed, 37 insertions(+), 4 deletions(-)

commit 454ada0f67c02d6554b6a72b4a7dd0d7f7b24517 (tag: 1.2.1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Mar 11 10:31:42 2004 +0000

    version 1.2.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@711 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ec2afd4dc7138556ad3f1d69235ebb9fc6b785f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Mar 2 14:07:27 2004 +0000

    version 1.2.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@710 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b809de72bcf79c7c62615fddc714b194d543f75f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Feb 23 09:57:29 2004 +0000

    use deviceName defined as usb:idVendor/idProduct:libusb:busname:filename
    in HPAddHotPluggable(). This should avoid wrong USB enumeration when
    used in IFDHCreateChannelByName()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@705 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 78 ++++++++++++++++------------------------------------
 1 file changed, 24 insertions(+), 54 deletions(-)

commit a60c1fadb9b64594da8a2435fe38ed25b5c625c0 (tag: 1.2.0)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 11 08:25:31 2004 +0000

    merge 1.2.0 final branch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@684 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 4 ++++
 1 file changed, 4 insertions(+)

commit b0f4d49662f356bd093b54e1d68c531299ec2f61
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Feb 4 21:48:00 2004 +0000

    DIR in --enable-usbdropdir=DIR may not finish by / in (deprecated) hotplug_linux.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@675 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 512dd5ed1a59e83e627bb747384216bfccf52aa2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 24 11:23:43 2004 +0000

    use "DEVICENAME /dev/ttySx_not_configured" to make it (more) clear it
    should be configured.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@646 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/reader.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7643190df5a4a44926acd0ad2eeb038ec39a65ea
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Jan 24 11:21:58 2004 +0000

    reader.conf may also be needed for PCMCIA readers and not olny serial.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@645 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/reader.conf.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4c4d3e65ac046160ae0a4265c2ee517ec31a42ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 23 22:01:23 2004 +0000

    add a note: "This file has to be configured for serial readers only."
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@644 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/reader.conf.in | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit a7d1258c21614b06a48520a08b886f6c1e1837d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jan 23 10:54:21 2004 +0000

    check that psContextMap[dwContextIndex].psChannelMap[dwChannelIndex].readerName is non NULL before accessing it in strcmp()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@643 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 54 ++++++++++++++++++++++++++---------------------------
 1 file changed, 27 insertions(+), 27 deletions(-)

commit cf0f28100074c8b6c4415d059b2acb87aa3bae13
Author: Antti Tapaninen <invalid@example.com>
Date:   Thu Jan 22 14:32:07 2004 +0000

    - Simplify the psContext/psContextMap declarations to fix
      build conflicts against some operating systems headers.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@642 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c |  8 ++------
 src/winscard_svc.c  | 10 +++-------
 2 files changed, 5 insertions(+), 13 deletions(-)

commit 34546799ce60fce4df590c4cacc2a19900122463
Author: David Corcoran <invalid@example.com>
Date:   Wed Jan 21 17:06:19 2004 +0000

    Changed unsigned char * to char * and did some typecasting
    to get rid of warnings when building in 64bit mode ...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@639 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit c0e82aa20fab8fa8b383ebf54c99c960863478e6
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 21 06:46:40 2004 +0000

    Remove an useless include
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@638 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_unix.c | 1 -
 1 file changed, 1 deletion(-)

commit 6c79dcf95df651c8b00fc4eb4ead228ca7d3e82b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 20 07:09:30 2004 +0000

    correct comment about empty deviceName argument
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@637 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c  | 3 ++-
 src/hotplug_macosx.c | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit a6cff8bb67581ed1cc098096a9fd77f5de81b481
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Jan 19 10:28:40 2004 +0000

    Use the device name to create channel only if defined.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@636 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 3b1fb91bd86693497d36acd5066bd0e98c54a36b
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Jan 19 10:24:40 2004 +0000

    Add an empty parameter for deviceName to allow the compilation.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@635 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c  | 3 ++-
 src/hotplug_macosx.c | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit a573c7b05e36dac400a94bc57c492b36ffadee1d
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Jan 19 00:50:43 2004 +0000

    Remove the useless include of sys/mman.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@634 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 1 -
 1 file changed, 1 deletion(-)

commit ebda20f3d39d530a707259088632f7ca9a170fb2
Author: Damien Sauveron <invalid@example.com>
Date:   Sun Jan 18 23:45:45 2004 +0000

    Remove unused function.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@633 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 6 ------
 1 file changed, 6 deletions(-)

commit 6afd15d075e1e0b29911fbe629c3af8511a6d5a6
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 11:35:48 2004 +0000

    Update the copyright.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@632 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h     | 3 ++-
 src/PCSC/thread_generic.h | 3 ++-
 src/configfile.l          | 3 ++-
 src/hotplug_libusb.c      | 1 +
 src/ifdwrapper.c          | 3 ++-
 src/ifdwrapper.h          | 2 +-
 src/readerfactory.c       | 2 +-
 src/thread_unix.c         | 3 ++-
 src/winscard_clnt.c       | 3 ++-
 src/winscard_msg.c        | 3 ++-
 src/winscard_msg.h        | 3 ++-
 src/winscard_svc.c        | 3 ++-
 src/winscard_svc.h        | 3 ++-
 13 files changed, 23 insertions(+), 12 deletions(-)

commit 0c9f57763d9028adeb45a3cfb5da58cd1d1b0524
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 11:13:39 2004 +0000

    Add my name, my email and the copyright.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@631 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit dd63f4af2574674e22c436923b018546c4bd261f
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 08:55:13 2004 +0000

    Remove the useless PID information field. Also remove the WrapSHMWrite argument related to PID information.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@630 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 38 ++++++++++++++------------------------
 1 file changed, 14 insertions(+), 24 deletions(-)

commit 49748bbea0ca560755cfc33520d9fb06dc66f887
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 08:51:11 2004 +0000

    Remove an useless information field of the messages sent by the client to the server. Also remove in the prototype of WrapSHMWrite the parameter related to the deleted field.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@629 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 572edb08f2dc074a6859c47fd1295e01bdb0d96e
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 08:50:01 2004 +0000

    Remove a useless information field of the messages sent by the client to the server. Also remove in the prototype of WrapSHMWrite the parameter related to the deleted field.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@628 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 7b8b56406b15b4ac2f186816981ff36df19f5d04
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 08:43:09 2004 +0000

    Correct the indentation of some lines and add debug information.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@627 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 74 ++++++++++++++++++++++++++---------------------------
 1 file changed, 36 insertions(+), 38 deletions(-)

commit 5192445a042df6a9c4a2228a249aed73ded9c4e0
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 08:09:15 2004 +0000

    Cleanup the code.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@626 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 019d04393ce0151bbe72242392fc94f4a0db1232
Author: Damien Sauveron <invalid@example.com>
Date:   Fri Jan 16 08:08:01 2004 +0000

    Modify the output of the debug message.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@625 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_macosx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c0118f214fc16110fdac790b2945851be48a3285
Author: David Corcoran <invalid@example.com>
Date:   Thu Jan 15 21:32:13 2004 +0000

    Changed Co to C(ZERO) instead.  The Oh caused big problems with
    formaticc
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@624 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/sample.in | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit cb7982146f65025b668536664a241c01304ccbf5
Author: David Corcoran <invalid@example.com>
Date:   Thu Jan 15 21:07:52 2004 +0000

    Needed to define dwAtrLen so it would not just pick up garbage
    for SCardStatus.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@623 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/testpcsc.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 62a88b15ba29ee2d50bfd33db84cc8423c65f55f
Author: David Corcoran <invalid@example.com>
Date:   Thu Jan 15 21:06:55 2004 +0000

    In SCardStatus some of the memcopy's and strcpy's were occurring
    before bounds checking.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@622 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 49464df570537c88d34d26c4cdbdeb4353e175b7
Author: David Corcoran <invalid@example.com>
Date:   Thu Jan 15 18:31:26 2004 +0000

    Changed error return from SYS_OpenFile of PCSCLITE_PUBSHM_FILE from UNKNOWN to
    SCARD_E_NO_SERVICE.  Sorry for no diffs, I'll put them in next time ...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@621 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit acee4d8f736c3430693bcc360fc5f7f98d1a7874
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jan 14 22:09:03 2004 +0000

    reformat and add Damien Sauveron and Antti Tapaninen
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@605 0ce88b0d-b2fd-0310-8134-9614164e65ea

 AUTHORS | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 13692c9275526e465c70c0f4a3f00c00e4678335
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 12:07:59 2004 +0000

    Add the support of IFDHandler interface v3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@604 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    | 27 ++++++++++++++++++++------
 src/readerfactory.c | 55 ++++++++++++++++++++++++++++++++---------------------
 2 files changed, 54 insertions(+), 28 deletions(-)

commit 99e8b1653c948538b5df01d175a04e71e285be53
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 12:07:04 2004 +0000

    Modify the prototype of IFDOpenIFD.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@603 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dfcd283f4c294b378b00a544f8bb98fe1c009fee
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 12:02:45 2004 +0000

    Add the function's pointer for the new function introduced in IFDHandler interface v3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@602 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 1c2720644a12f3b87a9ce982cda28d5ecfedf2e7
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:58:11 2004 +0000

    Define the length maximum of a device name.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@601 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 +
 1 file changed, 1 insertion(+)

commit c2d8f6c71bdf8cfa082cdcc9308e8fc290cf5bb0
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:56:39 2004 +0000

    Get the device name of the USB device and give it to RFAddReader.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@600 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 75 ++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 55 insertions(+), 20 deletions(-)

commit 3bcf8b70ce0c1b5cb11f8194e4748e7bfde08efd
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:52:58 2004 +0000

    Give the device name to RFAddReader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@599 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 003756f3a83139c73d52d291b918506b9f07f251
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:48:57 2004 +0000

    Add a new parameter to the prototype of RFAddReader according to the changes in readerfactory.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@598 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5ffbcc0d318f48743bd5c9835257c572c0c6f158
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:46:23 2004 +0000

    Add a new parameter to RFAddReader to get the device name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@597 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 93d56fdaa8ee742113fb7759b3666c62afd9df43
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:15:11 2004 +0000

    Add the device name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@596 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 1 +
 1 file changed, 1 insertion(+)

commit b3160d04662965362fb502123bac062dde9d5f7a
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 11:03:00 2004 +0000

    Add the prototype of the new function introduced in the IFDHandler interface v3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@595 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit f0b9a9a5be4115c633e2c1146df8fad6e4d5d714
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 01:57:12 2004 +0000

    Remove a line commited by error. Sorry.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@594 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c6bad43fba77aba1b42c966ba28d4bdff3f80b39
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Jan 14 01:46:46 2004 +0000

    Check that DEVICENAME and LIBPATH files exist and if an error occurs during the parsing the reader is not added.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@593 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit 7ab63d973769cff2091389efd14ca255ea9fd8b5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 13 20:17:59 2004 +0000

    small code reorganisation for an easier reading
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@592 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 86 ++++++++++++++++++++++------------------------------
 1 file changed, 37 insertions(+), 49 deletions(-)

commit 62796da45f9ab607b8da25d0a1caf1a346d99e7b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 13 20:16:43 2004 +0000

    use macro DebugLogB() instead of debug_msg()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@591 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7937fb9c972e6d0de6313fb2ad7c1097f7b8619e
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Jan 13 17:54:03 2004 +0000

    Modify tests in order to be homogeneous with those for next IFDHandlers versions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@590 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c    | 58 ++++++++++++++++++++++++++---------------------------
 src/readerfactory.c |  4 ++--
 2 files changed, 31 insertions(+), 31 deletions(-)

commit 7947a5dcdea005d98f1b1db48d07890563b6ee4e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 13 07:25:54 2004 +0000

    simplify the perl expression in ChangeLog.cvs rule
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@589 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f25ae9717ebe02d6e13a7834623c355b9b0d1350
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jan 13 07:10:19 2004 +0000

    reformat to 72 columns
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@588 0ce88b0d-b2fd-0310-8134-9614164e65ea

 make-dirs/README | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit e3f39062c76629be33e5b5620a6d9584f6458ab5
Author: David Corcoran <invalid@example.com>
Date:   Mon Jan 12 17:07:43 2004 +0000

    Added README for Makefile directory and sample config.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@587 0ce88b0d-b2fd-0310-8134-9614164e65ea

 make-dirs/Makefile.solaris |  2 +-
 make-dirs/README           |  4 ++++
 make-dirs/config.h         | 38 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 43 insertions(+), 1 deletion(-)

commit 953bbf3567a6105e71179e8a843393b1112f6994
Author: David Corcoran <invalid@example.com>
Date:   Mon Jan 12 16:49:18 2004 +0000

    C
    Adding make-dirs plus Makefiles for certain configurations when people don't want to
    try and fix autoconf
    
    VS: ----------------------------------------------------------------------
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@586 0ce88b0d-b2fd-0310-8134-9614164e65ea

 make-dirs/Makefile.solaris | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit 2e48f08cedfcefdb3e27ef86e9152e45438d370f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Jan 12 09:49:17 2004 +0000

    correct the file header. It was a cut-n-paste from hotplug_linux.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@585 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 8a7c2837a3a1be2cc5c6149ad17a22e12882c870
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 8 15:24:55 2004 +0000

    buffer overflow: the driver list was not terminated and caused crashes.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@583 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit a3e96f5a909cf89a7582258837b3350bd7176126
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 8 09:40:04 2004 +0000

    correct my email address
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@582 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0ef09b0dc4052068d6c0f8d70ed39494793a12a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Dec 16 23:59:58 2003 +0000

    code reordering to make it a bit more clear
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@577 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 13 +++----------
 1 file changed, 3 insertions(+), 10 deletions(-)

commit 11ce59e2e7e3b4f7a2666027ad22771951c0fafb
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Dec 16 22:49:10 2003 +0000

    Remove the old functions and add the new functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@576 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.h | 16 +++++++---------
 src/winscard_svc.h | 10 ++--------
 2 files changed, 9 insertions(+), 17 deletions(-)

commit 1613a05587c19e702dfed9d78d9942fab725531e
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Dec 16 22:47:19 2003 +0000

    Set up the new functions needed by the thread handling the client connection/disconnection and needed by the thread handling the requests in a context
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@575 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 206 +++++++++++++++++++++++------------------------------
 1 file changed, 89 insertions(+), 117 deletions(-)

commit b0a8b1adc30759241ab245befbab0d235dfa668e
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Dec 16 22:41:39 2003 +0000

    Design to handle all the requests in the context
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@574 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 361 +++++++++++++++++++++++++++++++----------------------
 1 file changed, 215 insertions(+), 146 deletions(-)

commit 6b31429cd41e4e77b7a4503f451b1852352946a0
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Dec 16 22:36:49 2003 +0000

    Change the design of pcscdaemon. It gets the connection/disconnection from the client to the server (create/destroy a context), creates a new thread and then this thread will manage all the requests for this context
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@573 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 66 ++++++++++++++++++++++++--------------------------------
 1 file changed, 28 insertions(+), 38 deletions(-)

commit 331a0db273f8cc7f686fee3d44bd186d454e9599
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Dec 16 22:29:59 2003 +0000

    Add mutex for each context and remove the global mutex except for some operations
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@572 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 923 ++++++++++++++++++++++++++--------------------------
 1 file changed, 469 insertions(+), 454 deletions(-)

commit 88e881e19f0cf0f1e0fcb478856ae1020703f5fe
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Dec 16 16:58:39 2003 +0000

    Add functions for identify and compare threads
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@571 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/thread_generic.h |  4 +++-
 src/thread_unix.c         | 19 +++++++++++++++++++
 2 files changed, 22 insertions(+), 1 deletion(-)

commit 67eec764c8a4d4f06993a05b1bff3875c69785e6
Author: David Corcoran <invalid@example.com>
Date:   Thu Dec 11 19:56:50 2003 +0000

    Index: winscard_scf.c
    ===================================================================
    RCS file: /cvsroot/pcsclite/PCSC/src/winscard_scf.c,v
    retrieving revision 1.8
    diff -r1.8 winscard_scf.c
    52c52
    <   BYTE bufferLength;
    ---
    >   LONG bufferLength;
    
    The byte buffer length would break any APDU over 255 bytes.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@567 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f05d10ff2850c5962c346c90caca11662bcd2a6c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Dec 8 17:14:58 2003 +0000

    use /etc/sysconfig/pscsd and correct some typos
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@566 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.startup | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 146099fd70aba930fded1d8a31f9259780114ecb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Nov 20 09:15:00 2003 +0000

    new upstream version to avoid checking for pthread.h which does not
    exist on *BSD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@562 0ce88b0d-b2fd-0310-8134-9614164e65ea

 m4/acx_pthread.m4 | 82 ++++++++++++-------------------------------------------
 1 file changed, 17 insertions(+), 65 deletions(-)

commit 83b1d64bdbdeb41b951d75e4387c745b7eb934ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Nov 18 15:57:20 2003 +0000

    revert test of return value from FreeLibrary. Thanks to Peter Williams
    for the patch.
    http://archives.neohapsis.com/archives/dev/muscle/2003-q4/0136.html
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@561 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_win32.c | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

commit eb6299373999e7a6765a2b28670c47c2ab82e531
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Nov 9 14:42:34 2003 +0000

    - Upgrade MacOS X project build files for XCode
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@560 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/config.h                | 194 +++++++++++++++++++++++++++++++---
 pcsc.pbproj/project.pbxproj | 246 ++++++++++++++++++++++++++++++++++++++++++--
 2 files changed, 415 insertions(+), 25 deletions(-)

commit d91ff552410c91213f29efab1b6af657ab6217a6
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Nov 9 14:39:11 2003 +0000

    - Build fix
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@559 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 4 ++++
 1 file changed, 4 insertions(+)

commit d5c1b25d1c70492c2982e1ad5aa5b77b63da9736
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Nov 9 13:49:11 2003 +0000

    - Cleanups
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@558 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 320 +++++++++++++++++++++++++------------------------
 1 file changed, 163 insertions(+), 157 deletions(-)

commit efde32748a6d080d3582e8bf1b683b2d6c3be37d
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Nov 9 13:33:49 2003 +0000

    - Allow regular pcsclite.h to be used under win32 platform
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@557 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.c |  7 ++----
 src/PCSC/pcsclite.h.in                      | 39 +++++++++++++++++++----------
 2 files changed, 28 insertions(+), 18 deletions(-)

commit dbecffbdfd72881e6e0ed15f1dba5e314b86b805
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Nov 5 21:22:42 2003 +0000

    add muscledropdir (in libmusclecard) and usbdropdir (in libpcsclite) so
    we can use `pkg-config libpcsclite --variable=usbdropdir` to find the
    directory to use. Should be used by drivers and plugins installation.
    Thanks to Ville SkyttÔøΩ for the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@555 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/libmusclecard.pc.in | 1 +
 src/libpcsclite.pc.in                 | 1 +
 2 files changed, 2 insertions(+)

commit 1dc0a1e976ef56334af7436337cf9db258c2c2e5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Nov 2 20:05:31 2003 +0000

    port under Win32 (patch from Peter Williams) and some code cleanup
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@546 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.c | 149 +++++++++++++++++++++-------
 1 file changed, 112 insertions(+), 37 deletions(-)

commit 9e2bb05d9f08250866afc2389afdd9b08d58b25a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 30 17:42:21 2003 +0000

    changed back PCSCLITE_MAX_READERS_CONTEXTS from 256 to 16. 16 readers is
    clearly enough for most users. The correct solution is to use a list
    instead of an array.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@540 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 261f54328d05a69707f19c788da7c2b81bedf12c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 30 17:08:19 2003 +0000

    remove definition of PCSCLITE_MAX_COMSIZE (Maximum arg size) now useless
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@539 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 1 -
 1 file changed, 1 deletion(-)

commit 5945dd4625b824a43cb756c8bdd342d66295b478
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 30 17:07:13 2003 +0000

    - send debug to syslog by default
    - send debug to stderr if --foreground|-f is used (no need to add
      --debug stderr anymore)
    - use strcmp() instead of strncmp() in --debug parsing since one
      argument has a fixed size anyway
    - define and use TRUE/FALSE constants
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@538 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 100 +++++++++++++++++++++++++++++++------------------------
 1 file changed, 57 insertions(+), 43 deletions(-)

commit ded87b2cff8a336fc62c73991b5bfc5c717ebea2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 30 17:02:31 2003 +0000

    remove log to a file service since it was not used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@537 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 20 ++++++++--------
 src/debuglog.c      | 66 ++++++++++-------------------------------------------
 2 files changed, 21 insertions(+), 65 deletions(-)

commit 52e96c4e41045e3337fed2d382487e2af63e51e2
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Oct 29 15:02:25 2003 +0000

    Add the option [-a] to the usage of pcscd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@527 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7551c7adbdc3835f854733ed22b73758bcd9305c
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Oct 29 13:24:25 2003 +0000

    Solve a problem of recognizition by serviceconf (patch from Tommaso Cucinotta)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@526 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/pcscd.startup | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 7e3d357909ff608d28a6e2c84023ab7d7c916e3f
Author: Damien Sauveron <invalid@example.com>
Date:   Thu Oct 23 21:57:06 2003 +0000

    Sorry I have done an error in the name that I want! Now it is the good name for this structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@519 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 54 +++++++++++++++++++++++++++---------------------------
 1 file changed, 27 insertions(+), 27 deletions(-)

commit 7d03fe5d39de4ecded9dd7154fe0b6b0c0e018f2
Author: Damien Sauveron <invalid@example.com>
Date:   Thu Oct 23 21:27:47 2003 +0000

    Change the name of a structure to better explain its usage
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@518 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 54 +++++++++++++++++++++++++++---------------------------
 1 file changed, 27 insertions(+), 27 deletions(-)

commit 3634c7733687f1fb67e544186d2518c0d3037996
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Oct 22 12:44:14 2003 +0000

    Add a debug message when a client disappears
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@517 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 1 +
 1 file changed, 1 insertion(+)

commit b4fa672733cb26446a0daa5f5d4b1313c4dc97d5
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Oct 22 12:43:27 2003 +0000

    Move a debug message in an other file to have the good client number when it disappears
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@516 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 14 --------------
 1 file changed, 14 deletions(-)

commit 32fd5d3744df3999be8b2dc5523dbbe1914a4040
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Oct 21 21:00:20 2003 +0000

    - Potential security fixes to SCF client
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@515 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in |  2 --
 src/winscard_scf.c     | 64 ++++++++++++++++++++++++--------------------------
 2 files changed, 31 insertions(+), 35 deletions(-)

commit e7799c730aaa8b72071c863b85158998db520fee
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Oct 21 20:47:22 2003 +0000

    - More merging between the hotplug implementations
    - Get rid of some internal limitation defines, there
      seems to be more than enough of these things in
      pcsclite.h already
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@514 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 35 ++++++++++++++++-------------------
 src/hotplug_linux.c  | 27 +++++++++++----------------
 src/hotplug_macosx.c | 14 +++++++-------
 3 files changed, 34 insertions(+), 42 deletions(-)

commit 425611f8c9ac945199e10d335fed2580a195d49f
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Oct 21 20:00:53 2003 +0000

    - Move all common hotplug defines into hotplug.h
    - Remove extra LTPBundleFindValueWithKey declarations
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@513 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c |  2 --
 src/PCSC/parser.h                | 13 +++++++++++++
 src/hotplug.h                    | 14 +++++++++++++-
 src/hotplug_libusb.c             | 18 ++++++------------
 src/hotplug_linux.c              | 21 ++++++++-------------
 src/hotplug_macosx.c             | 15 ++++-----------
 6 files changed, 44 insertions(+), 39 deletions(-)

commit 0b5d04a08da30d0218e4eb0e27b4a1d210776bae
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Oct 21 19:59:18 2003 +0000

    - errno.h cleanups
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@512 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c    | 3 +--
 src/readerfactory.c | 2 +-
 2 files changed, 2 insertions(+), 3 deletions(-)

commit 9bdff64fe9da3cbb9e0be0557e2c99a1d43ad5fb
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Oct 21 19:28:26 2003 +0000

    - Forgot to commit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@511 0ce88b0d-b2fd-0310-8134-9614164e65ea

 win32/PCSC.dsp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3543259ea6264b36e0e1e2f92ade95b094d05a82
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Oct 21 19:27:03 2003 +0000

    - Remove win32_pcsclite.h, it's out of sync anyway and the one
      who wishes to use pcsc-lite under win32 platform in any
      situation should probably patch src/pcsclite.h and renew
      win32/config.h.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@510 0ce88b0d-b2fd-0310-8134-9614164e65ea

 win32/Makefile.am      |   2 +-
 win32/win32_pcsclite.h | 195 -------------------------------------------------
 2 files changed, 1 insertion(+), 196 deletions(-)

commit b11ea5a73cd30606c4cfb6866ee03aac24d6c75a
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 19:59:07 2003 +0000

    Increase the max readers contexts value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@509 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 39df480797db11cc22565ef70c791d0a18522ae0
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 19:58:25 2003 +0000

    Support of 255 readers max
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@508 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 129 +++++++++++++++++++++++++++-------------------------
 1 file changed, 68 insertions(+), 61 deletions(-)

commit 286cc8f05366c5481b1737d4e754b69622b282cb
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 19:56:36 2003 +0000

    Correct a bug introduce by me. Sorry. It will be good in the future to improve this part
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@507 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 13181804e9c0df03c767eaa9f7f373efcc96da63
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 16:48:43 2003 +0000

    Correct with the goods concepts constants
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@506 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 18 +++++++++---------
 src/hotplug_linux.c  |  2 +-
 2 files changed, 10 insertions(+), 10 deletions(-)

commit d2bbf3cb3ec9d6e530e68f57be12c870b32eb2a7
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 16:46:22 2003 +0000

    Change variables names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@505 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 328 ++++++++++++++++++++++++++--------------------------
 1 file changed, 164 insertions(+), 164 deletions(-)

commit 090558ba221236b3b9b9349b2eeb5d765d3b02d3
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 16:32:04 2003 +0000

    Correct with the goods concepts constants, correct some comments and variable name
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@504 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 118 ++++++++++++++++++++++++++++------------------------
 1 file changed, 64 insertions(+), 54 deletions(-)

commit 3d2e3a0e20c2d81afeb70569e76b7d80792e4769
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 16:15:13 2003 +0000

    Correct with the goods concepts constants
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@503 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit cd0b14fe2df4176613e4e4cfc2453ee0291a0c98
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 16:08:34 2003 +0000

    Correct with the goods concepts constants
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@502 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 10 ++++----
 src/pcscdaemon.c    |  2 +-
 src/readerfactory.c | 74 ++++++++++++++++++++++++++---------------------------
 src/readerfactory.h |  2 +-
 4 files changed, 44 insertions(+), 44 deletions(-)

commit 0d16e25cf298b3a6dacd476883ed9d1a1c40049a
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 15:53:28 2003 +0000

    Correct with the good concept
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@501 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b511c38bb106729c3e485bc050e495a7a43c1f88
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 15:51:07 2003 +0000

    Introduce the limitations about the concepts
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@500 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

commit d850e6a195b52914b5beb2f9d3579a4e77b85649
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 15:49:19 2003 +0000

    A clean up.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@499 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a6c165ce10e2582945d72f5e503491a63ec02ddd
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 20 15:38:45 2003 +0000

    Add a description of PC/SC Lite Concepts.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@498 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/README_INTERNALS.txt | 59 ++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 54 insertions(+), 5 deletions(-)

commit 28c2aff3ca461dad15691f6ec2c989dbef058891
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 18 20:00:01 2003 +0000

    put back the GNU GPL license since it is not protected by the BSD
    license used by the other files.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@497 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit c91c36c8807eab65544fa0a029cf2a8d2bb74e71
Author: Antti Tapaninen <invalid@example.com>
Date:   Sat Oct 18 18:24:00 2003 +0000

    - Unify the copyright/description header part for most of the files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@496 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l  | 21 ++++++++++-----------
 src/tokenparser.l | 23 +++++++++++------------
 2 files changed, 21 insertions(+), 23 deletions(-)

commit dc90707d0addc0bc817d85bcd4daf9ddc68f6e9a
Author: Antti Tapaninen <invalid@example.com>
Date:   Sat Oct 18 17:19:36 2003 +0000

    - Unify the copyright/description header part for most of the files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@495 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c                     | 28 ++++++++----------------
 libmusclecard/src/PCSC/mscdefines.h         | 29 ++++++++++++-------------
 libmusclecard/src/PCSC/musclecard.h         | 28 ++++++++++++------------
 libmusclecard/src/musclecard.c              | 33 ++++++++++++-----------------
 libmusclecard/src/muscletest.c              | 23 +++++++++-----------
 libmusclecard/src/tokenfactory.c            | 22 +++++++++----------
 libmusclecard/src/tokenfactory.h            | 26 +++++++++++------------
 libmusclecard/utils/bundleTool/bundleTool.c | 27 +++++++++--------------
 src/PCSC/debuglog.h                         | 25 ++++++++++------------
 src/PCSC/dyn_generic.h                      | 23 +++++++++-----------
 src/PCSC/ifdhandler.h                       | 21 +++++++++---------
 src/PCSC/parser.h                           | 23 ++++++++++----------
 src/PCSC/pcsclite.h.in                      | 27 ++++++++++-------------
 src/PCSC/sys_generic.h                      | 24 +++++++++------------
 src/PCSC/thread_generic.h                   | 22 +++++++++----------
 src/PCSC/winscard.h                         | 27 ++++++++++-------------
 src/PCSC/wintypes.h                         | 23 +++++++++-----------
 src/atrhandler.c                            | 23 ++++++++++----------
 src/atrhandler.h                            | 23 ++++++++++----------
 src/configfile.h                            | 21 +++++++++---------
 src/debuglog.c                              | 25 ++++++++++------------
 src/dyn_hpux.c                              | 23 +++++++++-----------
 src/dyn_macosx.c                            | 23 +++++++++-----------
 src/dyn_unix.c                              | 23 +++++++++-----------
 src/dyn_win32.c                             | 24 +++++++++------------
 src/eventhandler.c                          | 26 ++++++++++-------------
 src/eventhandler.h                          | 23 ++++++++++----------
 src/hotplug.h                               | 23 +++++++++-----------
 src/hotplug_generic.c                       | 23 +++++++++-----------
 src/hotplug_libusb.c                        | 30 ++++++++++++--------------
 src/hotplug_linux.c                         | 30 ++++++++++++--------------
 src/hotplug_macosx.c                        | 26 +++++++++++------------
 src/ifdwrapper.c                            | 21 +++++++++---------
 src/ifdwrapper.h                            | 24 ++++++++++-----------
 src/pcscdaemon.c                            | 23 +++++++++-----------
 src/powermgt_generic.c                      | 21 +++++++++---------
 src/powermgt_generic.h                      | 24 +++++++++------------
 src/prothandler.c                           | 21 +++++++++---------
 src/prothandler.h                           | 21 +++++++++---------
 src/readerfactory.c                         | 28 ++++++++++--------------
 src/readerfactory.h                         | 23 +++++++++-----------
 src/sys_unix.c                              | 24 +++++++++------------
 src/testpcsc.c                              | 22 +++++++++----------
 src/thread_unix.c                           | 22 +++++++++----------
 src/thread_win32.c                          | 21 +++++++++---------
 src/utils/formaticc.c                       | 27 ++++++++++-------------
 src/utils/installifd.c                      | 27 ++++++++++-------------
 src/winscard.c                              | 29 +++++++++++--------------
 src/winscard_clnt.c                         | 26 ++++++++++-------------
 src/winscard_msg.c                          | 23 +++++++++-----------
 src/winscard_msg.h                          | 24 ++++++++++-----------
 src/winscard_scf.c                          | 24 ++++++++++-----------
 src/winscard_svc.c                          | 25 ++++++++++------------
 src/winscard_svc.h                          | 25 ++++++++++------------
 win32/win32_pcsclite.h                      | 25 ++++++++++------------
 55 files changed, 593 insertions(+), 754 deletions(-)

commit 0fac734ed12bd1540e09b374a97eabbe31317296
Author: Antti Tapaninen <invalid@example.com>
Date:   Sat Oct 18 14:29:40 2003 +0000

    - Remove USB bundle platform (Linux) hardcoding and replace
      it with PCSC_ARCH.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@494 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c |  7 +++----
 src/hotplug_linux.c  | 10 +++++-----
 2 files changed, 8 insertions(+), 9 deletions(-)

commit 47c95a8e1a71cd995e61ba1f933194ad30ee1437
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 15 20:32:34 2003 +0000

    the release number was wrong :-)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@491 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0a8b57abf2891ac4d17b88bea57c8f3df55301fb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 15 20:29:29 2003 +0000

    release 1.2.0-rc3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@490 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 2a42c0a76c0cee1d6eb99483f5c117576b34d977
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 15 20:28:48 2003 +0000

    Antti Tapaninen and Damien Sauveron have now their names in ChangeLog.cvs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@489 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7c9716a9a0364c0d64299d69ec38da1fb03a548c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 15 20:27:55 2003 +0000

    correct a typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@488 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fe665316df89ffbb083f34ac3226eb9bbeb69cf8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 15 17:40:49 2003 +0000

    perform a round-robbin among clients to avoid starvation under heavy
    load. Patch from Bettina Martelli.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@487 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit fe97b5131d56a5041a7a86340d69b87b8d588228
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Oct 15 08:56:11 2003 +0000

    Verify the availabilty of the daemon before to try a connection.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@486 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 +++
 1 file changed, 3 insertions(+)

commit 7fbfdf2705cc60d8a130c6e033f263d2bd9a75f0
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Oct 13 20:26:03 2003 +0000

    Add a verification before to release a context.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@485 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit f04d8bff507109e694b3892b1c0187fe040fff18
Author: Damien Sauveron <invalid@example.com>
Date:   Sat Oct 4 09:15:44 2003 +0000

    correct the typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@484 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 052afa7498b6a24c8e0cb0c5033e6898237a2f08
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 30 21:01:35 2003 +0000

    SCardEstablishContextTH: print the shared file name if open fails
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@483 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit ed9c0cd61476d1ed97ebab1f318a1c108cba4b2b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 30 20:13:25 2003 +0000

    send debug to stdout only if the environment variable MUSCLECARD_DEBUG
    is defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@482 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit dbe60f2d1433dc5bf0a8f46169fb58d4f4d42e2d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 30 20:08:53 2003 +0000

    having a trailing / in MSC_SVC_DROPDIR (--enable-muscledropdir) is no more mandatory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@481 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit b4f9fc207e5f50a52d81711a27c5ad77dac87cc7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 30 19:56:14 2003 +0000

    print the directory name with the error message if opendir failed
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@480 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)

commit 5226a8d081875794b5b8280bade6a00b55250c1f
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Sep 29 14:05:26 2003 +0000

    Clean up 2 memory leaks
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@479 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 51 +++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 47 insertions(+), 4 deletions(-)

commit 2f6f62728c39581a9c87dd1ce2c611a3742e333e
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Sep 29 13:35:45 2003 +0000

    Clean up the mutex when a reader is removed if needed. This is a memory leak
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@478 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 37 +++++++++++++++++++++++++++++++++++--
 1 file changed, 35 insertions(+), 2 deletions(-)

commit 8e38025d769bb6501a14ea3abe615b4868238381
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Sep 29 13:33:14 2003 +0000

    Add a field needed for clean up the mutex when a reader is removed. This is needed since the support of simultaneous access to slots of a multi-slot reader or identical reader using the same ifdhandler
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@477 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 1 +
 1 file changed, 1 insertion(+)

commit ccda166eea5be6d3123e7c3e006fcb4f3025b766
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Sep 29 11:19:11 2003 +0000

    Correct a bug introduced by me and add a copyright.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@476 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit da0357935d96294c334404af58a54cf96a435918
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 27 16:09:29 2003 +0000

    add a new pkg-config file for application using libmusclecard. Closes
    "[ #300102 ] Should the pkgconfig file of 1.2.0-rc2 have -lmusclecard?"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@474 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in                          |  1 +
 libmusclecard/src/libmusclecard.pc.in | 10 ++++++++++
 src/Makefile.am                       |  2 +-
 3 files changed, 12 insertions(+), 1 deletion(-)

commit 700f657102fd0715b377e0f18168f54b54fc7586
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Sep 24 14:15:59 2003 +0000

    Some clean up on the debug message and indentation.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@473 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 35 ++++++++++++-----------------------
 1 file changed, 12 insertions(+), 23 deletions(-)

commit b67ee4d9f15069282f35f160a6453164c03b35d6
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Sep 24 11:17:06 2003 +0000

    Move some code to a better position.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@472 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 2328ab2f966bbe3beaa0f86df7f76e8e4d817e8c
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Sep 23 23:57:50 2003 +0000

    Some cleanups.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@471 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 0eb88d5039512255ad4673e2860565b187b5bd03
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 23 16:39:38 2003 +0000

    --enable-libusb was not working correctly is the lib is not installed in
    /usr or /usr/local
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@470 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit c477d78213b00388e6c7996bfa9294742fe20a94
Author: Damien Sauveron <invalid@example.com>
Date:   Tue Sep 23 12:28:18 2003 +0000

    Solve the problem of never exiting the loop when a smartcard is already inserted in the reader, thus blocking the application.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@469 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 06373a993baf2aeee08cefe0787d6eac664186eb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 22 13:15:24 2003 +0000

    initialize valueLength just before the call to IFDGetCapabilities().
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@458 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f868b35c10cab29727043fba1ecb9d8c4f1b3ad0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 22 12:59:32 2003 +0000

    initialize dwGetSize to the size of the value buffer before calling
    IFDGetCapabilities().
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@457 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit ad7146d82ed7231c8f47d52428444f3a3e512f1d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Sep 22 12:14:25 2003 +0000

    use a local output buffer instead of a global one to be thread safe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@456 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fce2a61b71d7a749a88072bb8c9c02e68203192c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 19 12:36:23 2003 +0000

    use AC_HELP_STRING() for a pretty look of `configure --help'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@454 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 27 ++++++++++++++++-----------
 1 file changed, 16 insertions(+), 11 deletions(-)

commit e22f5c491aa72cd61e0110c2ffaee4ebc54a3f03
Author: Damien Sauveron <invalid@example.com>
Date:   Thu Sep 18 06:11:48 2003 +0000

    Add the support of simultaneous access on different slots of a reader if the handling is thread safe.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@452 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 62 ++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 50 insertions(+), 12 deletions(-)

commit 213c7a67a2c3a00060cbf89b44221d607aafd0d3
Author: Damien Sauveron <invalid@example.com>
Date:   Thu Sep 18 06:10:21 2003 +0000

    Add the tag TAG_IFD_SLOT_THREAD_SAFE for testing if the handling of the slots is thread safe.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@451 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 1 +
 1 file changed, 1 insertion(+)

commit d5f7e53cc2968ddab39094ea095f425e854273a5
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Sep 17 13:03:20 2003 +0000

    Add a full clean up when there is no space for adding all the slots of a multi-slots reader.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@450 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit 2e3622644d7fd332500d55b2da5f122c5fc88cbb
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Sep 17 12:11:27 2003 +0000

    Clean up in the RFRemoveReader.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@449 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 84 +++++++++++++----------------------------------------
 1 file changed, 20 insertions(+), 64 deletions(-)

commit 46e8cbfd3ff5c5b54a5b16aaac559087b0e69e13
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Sep 16 15:54:02 2003 +0000

    Put back -rdynamic to pcscd linking because of some
    IFD drivers. IMHO this is wrong, but what can you do.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@447 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 599a83cb536fae6e2107b5a7e648558a1435a8e5
Author: Antti Tapaninen <invalid@example.com>
Date:   Tue Sep 16 15:50:55 2003 +0000

    Put back AC_PROG_CPP, it has nothing to do with C++.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@446 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 +
 1 file changed, 1 insertion(+)

commit df5fcfa97b0c07576ee3f2685be41e214bd4808d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 16 13:54:25 2003 +0000

    remove useless AC_PROG_CPP (no C++ code in pcsc-lite)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@442 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 1 -
 1 file changed, 1 deletion(-)

commit 3b3a1fa9d486df2206d814803a267d3d3865db3b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 16 13:50:32 2003 +0000

    -rc3 version (configure.in and src/pcsclite.h _shall_ be in sync)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@440 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 07e2f0eaf70bccf2e11394e2cd5e011aa07eea4d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 16 13:49:20 2003 +0000

    remove / at the end of usbdropdir, muscledropdir and ipcdir to be more
    homogeneous
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@439 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 14 +++++++-------
 src/PCSC/pcsclite.h.in |  2 +-
 src/hotplug_libusb.c   | 13 +++++++------
 3 files changed, 15 insertions(+), 14 deletions(-)

commit 45efef317176aa4d2d92e22e0539eb019f49f017
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Sep 15 13:55:47 2003 +0000

    Add the support of simultaneous access on the thread safe IFD.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@435 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 47f6521dace34a818c0ec809b39061a60e34383a
Author: Damien Sauveron <invalid@example.com>
Date:   Mon Sep 15 13:52:23 2003 +0000

    Add the tag TAG_IFD_THREAD_SAFE for testing if the IFD is thread safe.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@434 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/ifdhandler.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit fb7e0809c496835e397eb8aab7eab0f0e0b80c6e
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 15 06:17:06 2003 +0000

    Updates to requirements and tested platforms
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@433 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 17 ++++++++---------
 1 file changed, 8 insertions(+), 9 deletions(-)

commit fb9fa57dab3c7442c500348bafb37ed6d99635c7
Author: Damien Sauveron <invalid@example.com>
Date:   Thu Sep 11 21:25:38 2003 +0000

    Better explanation of a comment.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@432 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit daa742fb8c6f364803446e7e3c67d2ee9effc292
Author: Damien Sauveron <invalid@example.com>
Date:   Thu Sep 11 21:19:53 2003 +0000

    Cleanup a condition unused and undo some of my previous changes.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@431 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

commit 60c9ff4cd7669b4050711c7a248a905a1c27d162
Author: Antti Tapaninen <invalid@example.com>
Date:   Thu Sep 11 10:01:49 2003 +0000

    Add new files needed by the new bootstrap
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@430 0ce88b0d-b2fd-0310-8134-9614164e65ea

 m4/Makefile.am    |   3 +
 m4/acx_pthread.m4 | 238 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 win32/Makefile.am |   5 ++
 3 files changed, 246 insertions(+)

commit ab87ace754db578402b1af1637ee28c69294f6b7
Author: Antti Tapaninen <invalid@example.com>
Date:   Thu Sep 11 10:00:31 2003 +0000

    Remove build/ directory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@429 0ce88b0d-b2fd-0310-8134-9614164e65ea

 build/acinclude.m4   |    0
 build/acx_pthread.m4 |  238 ----
 build/install-sh     |  294 -----
 build/ltconfig       | 3017 --------------------------------------------------
 build/missing        |  336 ------
 build/mkinstalldirs  |  111 --
 build/ylwrap         |  160 ---
 7 files changed, 4156 deletions(-)

commit aef443dde166c9a24fa3f2b2436cd7fc66f53894
Author: Antti Tapaninen <invalid@example.com>
Date:   Thu Sep 11 10:00:05 2003 +0000

    - Simplify the bootstrapping mechanism
    - Remove reconf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@428 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am  | 33 ++-------------------------------
 bootstrap    | 41 ++++++-----------------------------------
 configure.in |  6 +++---
 reconf       | 15 ---------------
 4 files changed, 11 insertions(+), 84 deletions(-)

commit 466e3dabd5d349c3161f66bce0abb1477ee38e97
Author: Antti Tapaninen <invalid@example.com>
Date:   Thu Sep 11 09:58:05 2003 +0000

    Remove config.h.in, doesn't belong to the repository
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@427 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in | 193 ------------------------------------------------------------
 1 file changed, 193 deletions(-)

commit 5885d455fb2aea27d0fcfbad88961f710c41e7d6
Author: Antti Tapaninen <invalid@example.com>
Date:   Thu Sep 11 09:47:41 2003 +0000

    Rename win32_config.h to config.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@426 0ce88b0d-b2fd-0310-8134-9614164e65ea

 win32/PCSC.dsp                     | 2 +-
 win32/{win32_config.h => config.h} | 0
 2 files changed, 1 insertion(+), 1 deletion(-)

commit 714558dc0b2622637efe753f30bdc2b1e17b38ff
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Sep 10 09:47:14 2003 +0000

    Cleanup about variables already initialized and indent of some comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@419 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

commit b569698fd4914dd14eba5342bfe9c9f476331651
Author: Damien Sauveron <invalid@example.com>
Date:   Wed Sep 10 09:24:56 2003 +0000

    Add a comment about the usage of DebugLogC
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@416 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 1c614cbced0071f1d97984592ec348bfba52096d
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 18:52:31 2003 +0000

    Warning fix for PCSCLITE_HP_DROPDIR being already defined
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@401 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 3 +++
 1 file changed, 3 insertions(+)

commit a2c21082104d08510a84072d7897c391891ca912
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 12:25:49 2003 +0000

    HP-UX build fix, add sanity checks to not to use dlfcn
    if there's native dynamic loading interface available,
    like HP-UX and MacOS X does.
    
    The other option would be just to merge all dynamic
    loading routines into one file, a lot simpler solution.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@400 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_unix.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6ec0749a61573bafac7bbbe243a352eb76932564
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 12:05:27 2003 +0000

    Bootstrap update
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@399 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in | 3 +++
 1 file changed, 3 insertions(+)

commit b134217465c55a97847453b10ad85712d759d2e2
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 12:05:08 2003 +0000

    Finish SCF build support, add sanity checks
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@398 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 25ab78d5195fb9a9b4a9b3dcaca9f7f145bffceb
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 12:04:31 2003 +0000

    Add winscard_scf.c to EXTRA_DIST
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@397 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 34b09fdbf1ff93e7ee9c27c6a68e7efdca2c1522
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 12:04:13 2003 +0000

    Build fixes, add dummy SCardUnload()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@396 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

commit c7713ce22d69d930778d2db61544aeadbb4ee9fd
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 11:25:20 2003 +0000

    Bootstrap update
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@395 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in | 6 ------
 1 file changed, 6 deletions(-)

commit 915d44941ddc2997955bd335d66b4d07cfc765a4
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 11:25:08 2003 +0000

    - Make hotpluging / power management to compile again
    - Add MacOS X build fixes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@394 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    |  5 ++++-
 src/Makefile.am | 22 ++++++++++------------
 2 files changed, 14 insertions(+), 13 deletions(-)

commit 9e5f922df5f282654e00ef328e8020c70d229b90
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 11:23:57 2003 +0000

    Add necessary ifdef's
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@393 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_generic.c  | 10 ++++++++++
 src/hotplug_libusb.c   |  2 ++
 src/hotplug_linux.c    |  2 ++
 src/hotplug_macosx.c   |  2 ++
 src/powermgt_generic.c | 11 +++++++++++
 5 files changed, 27 insertions(+)

commit 2b3e84629f6771aaba3aaaed7732a9ad2dca24e3
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 11:21:49 2003 +0000

    Include hotplug.h to avoid warning message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@392 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_macosx.c | 1 +
 1 file changed, 1 insertion(+)

commit e08a6431bc0178d1c3a5eda33e441959296380c3
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 11:21:14 2003 +0000

    Build fix for MacOS X, don't bother including
    from <PCSC/..>, use standard header locations.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@391 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c                     | 2 +-
 libmusclecard/utils/bundleTool/bundleTool.c | 5 +----
 src/utils/formaticc.c                       | 5 +----
 src/utils/installifd.c                      | 5 +----
 4 files changed, 4 insertions(+), 13 deletions(-)

commit 85b064392b902f54f4968315c7c9c6972580277f
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 11:18:55 2003 +0000

    Back out socklen_t change that I made
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@390 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_msg.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 8b4ce68c1b0dd25b59069601edaa5e790ef7e3ed
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 10:36:09 2003 +0000

    Very minor cleanups
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@389 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 4dc1feeb33b7c72ae1b529ff6ea5ec1bf6e67d8a
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 10:35:59 2003 +0000

    Add missing config.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@388 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/thread_win32.c | 1 +
 1 file changed, 1 insertion(+)

commit 756431b0cc61c1b9fd53512ff71d10608a8032a5
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 10:10:46 2003 +0000

    - Remove --with-common-dir and overly complex libsocket, libresolv
      etc. probes that I added. Probe only for socket() in libsocket.
    - Reorder --disable-threadsafe code, needed to get over some
      libtool issues for various platforms.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@387 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 170 ++++++++---------------------------------------------------
 1 file changed, 22 insertions(+), 148 deletions(-)

commit b8b47bd289ffdc9ae963a598f93f009bdf5e2803
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 10:06:48 2003 +0000

    Fix --disable-threadsafe issues
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@386 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit d12f1c926a10d031d4f8f68dbfea62bef845eb7c
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 09:56:31 2003 +0000

    Don't mention -lposix4 for Solaris, AFAIK it's not needed
    anymore.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@385 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b2ec580b153354089591dda7e833460678800e8c
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 09:51:46 2003 +0000

    Fix compiler warning when compiling with --disable-threadsafe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@384 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 719e25820d8c1ca34aa783b40ba5da382daf5034
Author: Antti Tapaninen <invalid@example.com>
Date:   Mon Sep 8 08:50:50 2003 +0000

    AIX build fix, convert // comments into /* */ blocks.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@383 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c |   2 +-
 src/debuglog.c                   |   9 +--
 src/dyn_win32.c                  |  12 +++-
 src/hotplug_libusb.c             |  17 +++---
 src/hotplug_linux.c              |  23 ++++----
 src/ifdwrapper.c                 |   4 +-
 src/pcscdaemon.c                 |  28 +++++----
 src/testpcsc.c                   |   7 +--
 src/utils/formaticc.c            |   7 ---
 src/winscard.c                   |   6 +-
 src/winscard_clnt.c              |  12 ----
 src/winscard_msg.c               |   2 +-
 src/winscard_scf.c               | 122 ++++++++++++++++++---------------------
 13 files changed, 115 insertions(+), 136 deletions(-)

commit 704ca86e91803aea5926f182bc7f2c04dabb12e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Sep 7 20:36:48 2003 +0000

    remove useless \n in debug message strings
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@382 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 24 ++++++++++++------------
 libmusclecard/src/tokenfactory.c | 32 ++++++++++++++++----------------
 2 files changed, 28 insertions(+), 28 deletions(-)

commit 6b9300b60db35108dc759e4af0a1a97fd61fec04
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 20:28:53 2003 +0000

    Build fixes. The first version that actually compiles for
    Linux, Solaris, Tru64 and AIX after src/Makefile.am and
    configure.in modifications.
    
    - Untested
    - No hotplug/power management support
    - Untested for *BSD, MacOS X and HP-UX,
      there's other things to do before even
      trying to compile.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@381 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am            |  2 --
 configure.in           | 18 ++++++++++++++----
 src/Makefile.am        | 29 ++++++++++-------------------
 src/debuglog.c         |  1 +
 src/dyn_hpux.c         |  3 +++
 src/dyn_macosx.c       |  3 +++
 src/dyn_unix.c         | 22 +++++++++-------------
 src/dyn_win32.c        |  2 ++
 src/powermgt_generic.c | 20 ++++++++++++++++++++
 src/powermgt_macosx.c  |  6 ++----
 src/sys_unix.c         |  6 +++++-
 src/winscard_msg.c     |  3 ++-
 12 files changed, 71 insertions(+), 44 deletions(-)

commit d2c2223047f04983980913b648017de500cb36bb
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 18:06:58 2003 +0000

    - Cleanups for #include logic and ordering,
      it's better to include config.h first.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@380 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h         | 12 ++++------
 libmusclecard/src/PCSC/musclecard.h         |  6 ++---
 libmusclecard/src/musclecard.c              | 13 +++--------
 libmusclecard/src/muscletest.c              |  4 ++--
 libmusclecard/src/tokenfactory.c            |  7 ++----
 libmusclecard/utils/bundleTool/bundleTool.c | 16 +++++--------
 src/PCSC/pcsclite.h.in                      |  7 ++----
 src/PCSC/thread_generic.h                   |  2 --
 src/PCSC/winscard.h                         |  8 +++----
 src/PCSC/wintypes.h                         | 11 +++++----
 src/atrhandler.c                            |  2 +-
 src/atrhandler.h                            |  2 +-
 src/debuglog.c                              | 27 +++++-----------------
 src/dyn_hpux.c                              |  2 +-
 src/dyn_macosx.c                            |  2 +-
 src/dyn_unix.c                              |  2 +-
 src/dyn_win32.c                             |  2 +-
 src/eventhandler.c                          |  2 +-
 src/hotplug_generic.c                       |  3 +--
 src/hotplug_libusb.c                        |  2 +-
 src/hotplug_linux.c                         |  2 +-
 src/hotplug_macosx.c                        |  2 +-
 src/powermgt_macosx.c                       |  5 +----
 src/prothandler.c                           |  2 +-
 src/readerfactory.c                         |  5 +----
 src/sys_unix.c                              |  3 +--
 src/testpcsc.c                              |  2 +-
 src/thread_unix.c                           |  5 -----
 src/tokenparser.l                           |  9 ++++----
 src/utils/formaticc.c                       |  7 +++---
 src/utils/installifd.c                      | 19 ++++++++++------
 src/winscard.c                              |  2 +-
 src/winscard_clnt.c                         |  2 +-
 src/winscard_msg.c                          |  4 +---
 src/winscard_scf.c                          | 35 ++++++++++++++---------------
 src/winscard_svc.c                          |  2 +-
 36 files changed, 96 insertions(+), 142 deletions(-)

commit 60e797514db36f21648588a43c25b10d12781438
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 18:05:23 2003 +0000

    Checkpoint commit + bootstrap update
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@379 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in  |  80 +++++++++++++++-
 configure.in | 291 ++++++++++++++++++++++++++++++++++++++++++++++-------------
 2 files changed, 305 insertions(+), 66 deletions(-)

commit 80b5c18606dca65ee1b769b4cf8989f1d8a3fe27
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 17:57:34 2003 +0000

    - Polish and unify Makefiles a bit
    - More work towards working src/Makefile.am
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@378 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am             |   5 +-
 doc/Makefile.am         |   8 +--
 doc/example/Makefile.am |   4 +-
 etc/Makefile.am         |   2 +-
 src/Makefile.am         | 144 +++++++++++++++++++++++++++---------------------
 src/utils/Makefile.am   |   5 +-
 6 files changed, 89 insertions(+), 79 deletions(-)

commit 1723d60491a042cf990ac9c75557c63281df5a08
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 17:34:42 2003 +0000

    - Remove MSC/PCSC_TARGET_XYZ defines and the massive
      use of unflexible automake conditionals. The main
      reason why pcsc-lite requires "too much" work when
      porting to another OS. Introduced define PCSC_ARCH,
      which uses 'uname' as an input. Except Darwin->MacOS.
    - Removed --enable-usb
    - Preliminary rewrite of src/Makefile.am, doesn't work
      yet.
    - Use gcc specific compiler options only if
      gcc detected.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@377 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in                      |  42 --------------
 configure.in                     |  95 ++++----------------------------
 etc/Makefile.am                  |   4 --
 libmusclecard/src/tokenfactory.c |  42 ++------------
 pbx/config.h                     |   4 --
 src/Makefile.am                  | 115 +++++++--------------------------------
 src/hotplug_libusb.c             |   2 +-
 src/pcscdaemon.c                 |   7 +--
 src/winscard_msg.c               |   2 +-
 win32/win32_config.h             |  36 ------------
 10 files changed, 38 insertions(+), 311 deletions(-)

commit 65d9f375d3c36e199562dc9dfc7de6ab413bc0e7
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 17:26:20 2003 +0000

    Merged some changes from OpenSC
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@376 0ce88b0d-b2fd-0310-8134-9614164e65ea

 build/acx_pthread.m4 | 30 +++++++++++++++++++++++-------
 1 file changed, 23 insertions(+), 7 deletions(-)

commit 3cf6fce2423039885b08c75e87e06f1f381206a3
Author: Antti Tapaninen <invalid@example.com>
Date:   Sun Sep 7 17:20:22 2003 +0000

    - Removed most of the duplicated code, replaced
      with the usage of config.h's defines for
      portability issues:
      - Merged dyn_{bsd,unix}.c, left as dyn_unix.c
      - Merged thread_{macosx,unix}.c, left as thread_unix.c
      - Merged sys_{hpux,solaris,unix}.c, left as sys_unix.c
    - Removed MSC_ thread API from generic / win32,
      they're not used.
    
    Starting from now, the source tree might be broken for a
    few hours or even days. Sorry about that.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@375 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am           |   8 +-
 src/PCSC/sys_generic.h    |   2 -
 src/PCSC/thread_generic.h |   6 -
 src/dyn_bsd.c             |  92 ---------------
 src/dyn_unix.c            |  32 +++--
 src/dyn_win32.c           |   1 -
 src/pcscdaemon.c          |  24 ----
 src/sys_hpux.c            | 290 ----------------------------------------------
 src/sys_solaris.c         | 290 ----------------------------------------------
 src/sys_unix.c            |  88 +++++++++++++-
 src/thread_macosx.c       | 116 -------------------
 src/thread_unix.c         |  13 +--
 src/thread_win32.c        |  16 ---
 13 files changed, 109 insertions(+), 869 deletions(-)

commit 6c73ebcb20be12dd13aa7c038042ed0597e7076e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 5 21:06:22 2003 +0000

    add #include <unistd.h> to avoid an "implicit declaration of function `getpid'"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@374 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 1 +
 1 file changed, 1 insertion(+)

commit b56371d38883e8142600a9003bcda64352c91328 (tag: 1.2.0-rc2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 4 20:52:00 2003 +0000

    release 1.2.0-rc2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@372 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog              | 14 ++++++++++++++
 configure.in           |  2 +-
 src/PCSC/pcsclite.h.in |  2 +-
 3 files changed, 16 insertions(+), 2 deletions(-)

commit 3797a07dbae1fad573bef1297aadaa1ca981457f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 4 20:51:10 2003 +0000

    add thread_win32.c in the distribution
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@371 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

commit 9bff896215a6f025dd835ab0a093b5706015ccc2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 4 20:37:10 2003 +0000

    remove a _stupid_ bug that linked libpcsclite with libusb. Also generate
    libmusclecard and remove musclecard code from libpcsclite.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@370 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in    |   3 --
 src/Makefile.am | 123 +++++++++++++++++++++++++++++---------------------------
 2 files changed, 63 insertions(+), 63 deletions(-)

commit d0780e9e5bedb8c972af6dbb68f2fd74e339ddf2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 4 20:35:14 2003 +0000

    removed since they have nothing to do in CVS. They are generated from .l files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@369 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.c  | 1827 ----------------------------------------------------
 src/tokenparser.c | 1839 -----------------------------------------------------
 2 files changed, 3666 deletions(-)

commit ee47a9e81fb02a262fc61ae5e89b715b853b2e77
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 4 20:33:19 2003 +0000

    add #include <string.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@368 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c | 2 ++
 1 file changed, 2 insertions(+)

commit bc4a78414fb2a367bad0948b7f117ff29c76d4df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Sep 4 18:34:33 2003 +0000

    add prototype for SCardUnload()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@367 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 2 ++
 1 file changed, 2 insertions(+)

commit 6e1a0dc4168c09926b9c97ad1a46eb0270eefb91
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 3 21:13:03 2003 +0000

    add a call to SCardUnload(). This is not mandatory, just cleaner.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@358 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/pcsc_demo.c | 3 +++
 1 file changed, 3 insertions(+)

commit daef89fe00d98fb355c7d585e30c983242a7abab
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Sep 3 21:10:50 2003 +0000

    add SCardUnload() function to free allocated resources. It is mandatory
    only if you use dlopen/dlclose to often load/unload the library. Otherwise
    you will exhaust the ressources available and get a crash. Thanks to
    Guy Moreillon for the patch.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@357 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 24 ++++++++++++++++++++++--
 1 file changed, 22 insertions(+), 2 deletions(-)

commit bb30b7039521d0b164a9f8a19f86372e2513da54
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Sep 2 16:07:27 2003 +0000

    remove reference to USE_SYSLOG since it is replaced by --debug command
    line argument
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@356 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 08e97ca59ce3c24563a76ee6d95c0e496ce6d4f0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 31 21:56:45 2003 +0000

    remove documentation about --enable-syslog since it is not used anymore
    by ./configure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@355 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 1 -
 1 file changed, 1 deletion(-)

commit f3b50246c292fff85fb0e1d66c98ff53d687e1e9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 31 21:52:03 2003 +0000

    refer to ChangeLog instead of containing the version number
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@354 0ce88b0d-b2fd-0310-8134-9614164e65ea

 NEWS | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 4e4f80665dc242c7262438115cdf3a36cd1ce644
Author: David Corcoran <invalid@example.com>
Date:   Fri Aug 29 14:00:14 2003 +0000

    Removed advertising clause
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@353 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

commit 15c620efca4519c32f15c0555259e4c4e7f71aaa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 13:34:08 2003 +0000

    use CAPITAL hex, use default PIN "Muscle00" when none is given, allow to
    use more than one readers instead of using only the first one.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@349 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/muscletest.c | 52 +++++++++++++++++++++++++-----------------
 1 file changed, 31 insertions(+), 21 deletions(-)

commit c5ad26a0ce3a950dd727d2679b83be7184517cf8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 13:32:29 2003 +0000

    print SW (status word) in hex instead of decimal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@348 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 620a7585e24c5d762223d2bf4d31a3fa36839473
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 13:31:42 2003 +0000

    add rules to build muscletest. testpcsc is no more executed by make distcheck
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@347 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit f7ef8f061eea6239e8346ffbe4d4edec5b57d0c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 13:29:59 2003 +0000

    do not distribute pcscd.8 bundleTool.8 since they are generated from the
    .in versions by ./configure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@346 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 01b5db8c5fbd4103da8f87a9304fa5f15bf38c5f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 13:29:02 2003 +0000

    to not set use_libusb=false in case the argument is "" | "yes" | "YES"
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@345 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c5387248f91228f830199b98d845a76f07e5f2a6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 28 13:26:40 2003 +0000

    move ChangeLog.cvs to DISTCLEANFILES to avoid an error with 'make distcheck'
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@344 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 3efc0012528becf8541600b38464e8bd9844dfb4 (tag: 1.2.0-rc1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 19:33:02 2003 +0000

    release 1.2.0-rc1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@337 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 53 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 53 insertions(+)

commit e1f6552d1914f7f547e8ce7baa53fb1b866d7f52
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 14:29:01 2003 +0000

    move addition of -lusb since it is selected by default.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@336 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 09dfaa7a3ea0c9aab33d4d328b304c21ac94c72e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 13:38:58 2003 +0000

    disable USB debug by default
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@334 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c6d23a7fb40ab74c197847cedf702ba9adf50c6f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 13:20:41 2003 +0000

    add a note about deprecation of --enable-usb
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@333 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)

commit 6db0187165c2409bc8712889cffb3eebd1a2c1ae
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 13:14:28 2003 +0000

    --enable-usb is deprecated and off by default. Use --enable-libusb instead.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@332 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 31 ++++++++++++++++---------------
 1 file changed, 16 insertions(+), 15 deletions(-)

commit 49320475c097849f83757d79c28566f0acf2dcd8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 13:13:32 2003 +0000

    add example subdirectory
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@331 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 79db010d73b8466eac3bf5e3fa8be18f93c1e134
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 13:12:46 2003 +0000

    complete redesign to support up to PCSCLITE_MAX_READERS readers whatever
    the driver they use (correct bug [ #300067 ] More than 4 Hotplug Readers in
    the same time on Linux)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@330 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 352 ++++++++++++++++++++++++++-------------------------
 1 file changed, 183 insertions(+), 169 deletions(-)

commit a27b6e488b579447ac00f2a645d60fd378f31161
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 26 13:08:53 2003 +0000

    define PCSCLITE_MAX_READERS as the maximum number of readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@329 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 1c5fdeb0920f4720f6be4c3448f2f6ccf0283f0c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 25 08:55:37 2003 +0000

    correct bug #300063: PCSCd reports card is present when there is no card in the reader.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@325 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit 111ae6390d2515835f9f2fb253b84b36e52164e2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 25 08:10:48 2003 +0000

    reindentation
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@324 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 945 +++++++++++++++++------------------------
 1 file changed, 390 insertions(+), 555 deletions(-)

commit ff28596f94057f753defb03fbc8c0428fb616e2f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 25 08:01:16 2003 +0000

    free(evlist->tokenArray), avoid a memory leak (Toni Andjelkovic)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@323 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b26392eee274fe42ff839503a550914e97c483cd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 22 13:36:12 2003 +0000

    demo of a C program using the pcsc-lite API
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@320 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/example/Makefile.am |   8 +++
 doc/example/pcsc_demo.c | 146 ++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 154 insertions(+)

commit 54ef39500faf6c99b488a2640a3ce27d84b010e4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 21 17:27:53 2003 +0000

    typo in comments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@315 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 2 +-
 src/hotplug_linux.c  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit d700cf2b3582b463e8bec11a55c0732f8123d3ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 20 15:14:18 2003 +0000

    Sometimes unknown APDUs were being transmitted when 'SCardStatus'
    function was invoked (close #300061)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@313 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_svc.c | 1 +
 1 file changed, 1 insertion(+)

commit 757400ada4db9a19c4190147a905323fddd49ff2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 20 15:09:37 2003 +0000

    return SCARD_E_INVALID_PARAMETER for APDU of less than 4 bytes (close #300062)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@312 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 5a49c4201939d31973c42302c79e0ea8c7d368d2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 20 14:57:50 2003 +0000

    initialise pConnection->shareMode as early as possible (close #300064,
    thanks to Wan-Teh Chang)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@311 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 12 +++---------
 1 file changed, 3 insertions(+), 9 deletions(-)

commit 54537fcdf1aff995d75a95de6c53d9e30129d45f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 20 14:49:28 2003 +0000

    correct and remove unused types (close bug #300071)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@310 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit f3bbba238cc57490d63c907432f31590ccd522c9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 20 08:12:59 2003 +0000

    Add support of reader aliases using <array></array>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@298 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c | 181 ++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 157 insertions(+), 24 deletions(-)

commit 03ef4d769bdc1e6e0471341070c3529817dd1e5c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Aug 20 08:12:29 2003 +0000

    add empty HPRegisterForHotplugEvents() function
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@297 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit a5e717fb6f6b9f98b85cee40555caff647ba3a0e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 19 09:27:43 2003 +0000

    Add support of PCMCIA for MacOS X and major redesign of the hotplug
    support (thanks to Stephen M. Webb for the patch)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@296 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug.h         |  24 +-
 src/hotplug_generic.c |  26 +-
 src/hotplug_linux.c   |  13 +-
 src/hotplug_macosx.c  | 997 ++++++++++++++++++++++++++------------------------
 src/pcscdaemon.c      |  10 +-
 src/powermgt_macosx.c |   2 +-
 6 files changed, 572 insertions(+), 500 deletions(-)

commit 504cd05a66b3371aee124ee3a8dca29af6c6852f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 19 07:45:58 2003 +0000

    use <errno.h> instead of <sys/errno.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@295 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 36616ad926dd7534cee7f57e90e97259206b69ad
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 18 16:28:38 2003 +0000

    use #ifdef DEBUG_USB_HOTPLUG for USB debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@294 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 4fe86f188f43bcf14920e58ee43bc928438a0fdc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 18 12:15:19 2003 +0000

    remove unneeded \n in debug messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@293 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b3f3afb1a6bfb4ac168fb3d76af1452947a44223
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 18 09:05:37 2003 +0000

     #include <wintypes.h> even on MacOS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@292 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 444cf24ce29b3f576a66c4eebdac28fdbb47926c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 18 09:03:18 2003 +0000

    do not look for PCSC/pcsclite.h but pcsclite.h even on MacOS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@291 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/winscard.h | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit f5d86eba382824dfe56eceb15441518531368fb6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 18 08:04:06 2003 +0000

    add #include <sys/types.h> for FreeBSD (thanks Toni Andjelkovic)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@290 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e47814304daf3a083a5dede7d06201edff75a826
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 15 20:07:53 2003 +0000

    add void argument to the MSCCallbackCancelEvent() prototype definition
    (thanks to Toni Andjelkovic)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@289 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 2 +-
 libmusclecard/src/musclecard.c      | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 35951b75400ee1fe438bcf8b4b9e30316968b4ac
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 15 09:10:34 2003 +0000

    use *linux* instead of linux-gnu (patch from Toni Andjelkovic)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@288 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit eacf3d0be8820afd35e51c9a69673b6f0eb25ce6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 15 09:08:32 2003 +0000

    conditionnaly print hotplug debug messages. look for DEBUG_USB_HOTPLUG at the
    begining of the file.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@287 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_libusb.c | 29 +++++++++++++----------------
 1 file changed, 13 insertions(+), 16 deletions(-)

commit bbc455a06b4ea7659c62da671d62c90aab6060af
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 15 09:06:55 2003 +0000

    use FILENAME_MAX instead of manually defined values. Use snprintf()
    instead of sprintf() to fill filenames.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@286 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 27 ++++++++++++---------------
 1 file changed, 12 insertions(+), 15 deletions(-)

commit 76609d1ed09d0d37efc67c5f29d80fd62fb98706
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 14 16:46:01 2003 +0000

    add s/corcoran-guest /David Corcoran /;
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@285 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 4fef7c762dd30502214c1dedfd9893ab8e78273f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 14 16:36:00 2003 +0000

    new generated version
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@284 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit d5a9534458474178d91346932a8c308149bca18c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 14 16:35:41 2003 +0000

    do not remove build/aclocal.m4 anymore
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@283 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b9ff9eaee5b961d609663d03b6b5229c9ac88cf8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 14 16:35:11 2003 +0000

    add parser.h in pcscd_SOURCES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@282 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 39850accff30075800048c90f9cdb138514ccbbb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 14 14:41:38 2003 +0000

    cast sizeof() with (int) to avoid a warning under MacOS X
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@281 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/installifd.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d5bffd16debb98f781d32d893106b922a573227a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 14 13:19:36 2003 +0000

    add "Copyright (C) 2001-2003 by Ludovic Rousseau" for the version (-v) output.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@280 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit bafd2309ca40b8654d7c71127cae1510d71a4254
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 11 10:03:07 2003 +0000

    regenerated but should not be in CVS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@267 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.c | 101 ++++++++++++++++++++++++++++++------------------------
 1 file changed, 56 insertions(+), 45 deletions(-)

commit c841d1597e7c9a9ac3cb91cac834cc7c16139afe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 11 09:55:58 2003 +0000

    change filename in comment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@266 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit d9d84784db625510c45ae66575cf6631d0c2e17b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 11 09:55:36 2003 +0000

    add LTPBundleFindValueWithKey() function prototype
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@265 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/parser.h | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit e05c33b47980fc169e62ecf430b6a641a026a865
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Aug 11 08:00:37 2003 +0000

    use a size of 200 bytes instead of 256 otherwise it will break every
    drivers using the pcscd tokenparser (buffer overflow in the driver).
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@264 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/parser.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 42ee92baefe6a65fc2823f3da8869bd98edb9e89
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 10 21:59:09 2003 +0000

    add support of libusb
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@263 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README               |  22 +++
 configure.in         |  42 +++++-
 src/Makefile.am      |  23 ++--
 src/hotplug_libusb.c | 372 +++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 447 insertions(+), 12 deletions(-)

commit e1622d162750e4a61aff23f363e2e2a82660154d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 10 21:54:43 2003 +0000

    define maximum buffer lengths and avoid possible buffer overflows
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@262 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/parser.h |  5 +++++
 src/tokenparser.l | 50 +++++++++++++++++++++++++++++++++++++-------------
 2 files changed, 42 insertions(+), 13 deletions(-)

commit 8078a4823609fd56bab545d9a7fa0c1a65a818d0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 8 07:03:04 2003 +0000

    pcscd is in section 8 not 1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@261 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/formaticc.1 | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 903650c84d9d18470ee45769dcd272e6155f264c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Jul 4 17:59:52 2003 +0000

    Installation of the pkgconfig file did not honor libdir. Thanks to Ville
    SkyttÔøΩ for the patch (alioth patch #300045)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@260 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 346d0c790238c4f59b68bb30338ba7f5718180da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Jun 25 20:10:44 2003 +0000

    #include stdint.h only if HAVE_STDINT_H is defined since some platforms
    do not have stdint.h (Windows, FreeBSD, etc.)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@259 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.c  | 2 ++
 src/tokenparser.c | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 00d34798c2ded2504a12a6cc9e4104a3dea5b216
Author: David Corcoran <invalid@example.com>
Date:   Thu Jun 5 00:47:21 2003 +0000

    fixed MSC_Mutex functions to point to the SYS_Mutex functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@257 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/thread_generic.h |  5 +++--
 src/thread_win32.c        | 16 ++++++++++++++++
 2 files changed, 19 insertions(+), 2 deletions(-)

commit ed18ee67d04dc94385cc48a11bce245a76084f19
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 4 16:52:39 2003 +0000

    Commiting these files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@256 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h |  92 +++------------------
 libmusclecard/src/musclecard.c      |  74 +++++++++++------
 libmusclecard/src/tokenfactory.c    |   4 +-
 src/PCSC/debuglog.h                 |  13 +--
 src/PCSC/pcsclite.h.in              |   4 +
 src/PCSC/thread_generic.h           |  27 +++++--
 src/debuglog.c                      | 111 +++++++++++++++++++++-----
 src/thread_win32.c                  | 155 ++++++++++++++++++++++++++++++++++++
 src/tokenparser.c                   |  15 +++-
 win32/PCSC.cpp                      |  19 ++++-
 10 files changed, 372 insertions(+), 142 deletions(-)

commit 3a9e033f8eb33fdb86e540a9b1370b7d9559a62d (tag: 1.1.2-beta5)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 21:45:23 2003 +0000

    release 1.1.2beta5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@254 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 12fc4900dfa48789cd028c49c7914b5990bb1644
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 21:44:42 2003 +0000

    remove $ac_aux_dir/aclocal.m4 after use to limit the size of the .tar.gz
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@253 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 013b9fdcf6e3a447af3351345e39bba07712c1fb
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 20:46:44 2003 +0000

    remove winscard_msg.c from pcscd_SOURCES since it is already included
    in libpcsclite_core_la_SOURCES used by pcscd_LDADD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@252 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 97184edf45e567bd3d45a24bd7fc8fd106b855a2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 20:34:56 2003 +0000

    new version from automake 1.7.5
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@251 0ce88b0d-b2fd-0310-8134-9614164e65ea

 build/install-sh    | 167 +++++++++++++++++++++++++++++++++-------------------
 build/missing       | 156 +++++++++++++++++++++++++++++++++++++++++++++---
 build/mkinstalldirs | 111 +++++++++++++++++++++++++++-------
 3 files changed, 343 insertions(+), 91 deletions(-)

commit 7c0ab25ec80d2b8e58cd584ac2504ef2bd9b47b1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 20:17:45 2003 +0000

    removed since generated from doc/Makefile.am
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@250 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.in | 436 --------------------------------------------------------
 1 file changed, 436 deletions(-)

commit 20c329723407a3f971dc1b4afca89bd0941e3d55
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 16:43:46 2003 +0000

    the CVS files are now on alioth.debian.org so change the path to remove
    to generate the ChangeLog.cvs file
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@249 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 43ca0a1f0a9df96ec5b29b9ccb3dc4f034c8ff2c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 15:50:44 2003 +0000

    SCardStatusTH(): simplify code and return correct results when buffers
    are too short or NULL is used
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@248 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 114 +++++++++++++++++++---------------------------------
 1 file changed, 41 insertions(+), 73 deletions(-)

commit cb76ab3ca0d35d2963d1f1f676c3378cfe4dd547
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 15:48:41 2003 +0000

    SCardStatus(): do not return before filling buffers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@247 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 438b289a01d79a1c7afa916107080f093b4d8f6e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 15:45:28 2003 +0000

    small cleanup
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@246 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 61 ++++++++++++++++++++----------------------
 1 file changed, 29 insertions(+), 32 deletions(-)

commit d0e133d25338e51d092a66193c2e3adea68ff23e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 11:35:57 2003 +0000

    removed from CVS since generated from doc/Makefile.am
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@245 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.in | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

commit 762573d0cc0b2a79b69bd9e2150333834dd6b0d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 11:34:03 2003 +0000

    regenerated but they should not be in CVS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@244 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.c  | 1316 ++++++++++++++++++++++++++----------------------
 src/tokenparser.c | 1438 +++++++++++++++++++++++++++++------------------------
 2 files changed, 1509 insertions(+), 1245 deletions(-)

commit 61aa336f8231dd0741d68902a1c6bfe34a78f9d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 11:33:05 2003 +0000

    define ret as int
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@243 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5cab6c60a30c0883cb428c3e8cf18678d8a9e403
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 11:27:41 2003 +0000

    correct arguments order of ylwrap script
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@242 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ec8f195aefd226ab0b7616d87df6c35cd66f5eba
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 30 11:26:25 2003 +0000

    replace gets() by fgets() to avoid buffer overflow.
    Use sizeof() instead of constants.
    do not use strdup() since it is useless.
    print error messages when needed.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@241 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/installifd.c | 106 +++++++++++++++++++++++--------------------------
 1 file changed, 50 insertions(+), 56 deletions(-)

commit 75b6717f8cdb490da3e182d4344dba4fdd72e0d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 28 07:26:17 2003 +0000

    used to generated a pkg-config ".pc" file (thanks to Andreas Jellinghaus
    for the idea and the patch)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@240 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/libpcsclite.pc.in | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit e694d1170a1c7ef2a64aff1590b0c5fee8f4b97a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 28 07:24:13 2003 +0000

    removed from CVS since they are (re)generated by ./bootstrap
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@239 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in           |   613 ---
 build/aclocal.m4      |   805 ----
 build/config.guess    |  1321 ------
 build/config.sub      |  1443 -------
 build/ltmain.sh       |  5029 ----------------------
 configure             | 11054 ------------------------------------------------
 etc/Makefile.in       |   326 --
 src/Makefile.in       |   992 -----
 src/utils/Makefile.in |   486 ---
 9 files changed, 22069 deletions(-)

commit d3efac7ed15fb595cb4306724ea64c0a305eea74
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed May 28 07:21:10 2003 +0000

    use directory names as use by ./configure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@238 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 8 +++++++-
 src/Makefile.am        | 3 +++
 src/utils/installifd.c | 4 +++-
 3 files changed, 13 insertions(+), 2 deletions(-)

commit e116da3adf918b4751574bea09698ebf9096e31c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 27 20:25:42 2003 +0000

    no more useful since tokenparser.* does a better job
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@237 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/driverparser.c | 1735 ----------------------------------------------------
 src/driverparser.l |  108 ----
 2 files changed, 1843 deletions(-)

commit 6d84b355604d902456e17921f67947661f7e9696
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 27 20:23:14 2003 +0000

    do not duplicate fclose/return lines
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@236 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)

commit c8828e810c1a6f9197bd8710ae05f448ba255865
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 25 21:38:17 2003 +0000

    include configured path appear in the docs (thanks to Ville SkyttÔøΩ)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@235 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/reader.conf.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a2e2eb253361e7a2ba4f268a0e5bf94a99c8b6da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun May 25 21:37:09 2003 +0000

    correct typos and include configured path appear in the docs (thanks to
    Ville SkyttÔøΩ)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@234 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in                                 | 36 +++++++++++++-------------
 libmusclecard/utils/bundleTool/bundleTool.8.in |  2 +-
 2 files changed, 19 insertions(+), 19 deletions(-)

commit 232747c2221e1610ce63761079cf678da0ece5de (tag: 1.1.2-beta4)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 20:40:27 2003 +0000

    release 1.1.2beta4
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@228 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 39 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 39 insertions(+)

commit 9364cc49d444c3fe46cae5a6d4296a0e2cac55c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 20:39:44 2003 +0000

    regenerated from src/configfile.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@227 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.c | 1799 ++++++++++++++++++++++++++----------------------------
 1 file changed, 858 insertions(+), 941 deletions(-)

commit d585e64a4c0f28167423a09230c66ff6df68b260
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 20:37:49 2003 +0000

    regenerated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@226 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in           | 228 +++++++++++++++++++++-------
 configure             | 111 ++++++++++----
 doc/Makefile.in       | 164 +++++++++++++++-----
 etc/Makefile.in       | 150 +++++++++++++-----
 src/Makefile.in       | 412 +++++++++++++++++++++++++++++++++-----------------
 src/utils/Makefile.in | 218 ++++++++++++++++++--------
 6 files changed, 920 insertions(+), 363 deletions(-)

commit 531c46169c87c35ff34a4d212500455d4548ed7e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 20:31:18 2003 +0000

    regeneration from src/tokenparser.l
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@225 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.c | 1671 ++++++++++++++++++++++++++---------------------------
 1 file changed, 804 insertions(+), 867 deletions(-)

commit f61b566999e40c13bb97b9b2cffbdf92a28a17f2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 20:30:58 2003 +0000

    code reindentation, use DebugLogB()/DebugLogC with correct number of
    arguments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@224 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 2a1ae18216feb5a5d4edc2fa68cdccd0218644ff
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 20:22:15 2003 +0000

    avoid possible buffer overflow in pcsc_stringify_error()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@223 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 75 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 37 insertions(+), 38 deletions(-)

commit d804ac7674212e988cb1f7a3a70814e639a224f4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 15:54:09 2003 +0000

    add -pthread for xBSD, use AM_CFLAGS instead of CFLAGS, driverparser.c
    no more exists
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@222 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit 5167bcc4a9a61955988d5a44717a393a0911a48c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 15:52:55 2003 +0000

    use automake 1.7.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@221 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit d937add94e8f4eee9417eac138bdc11364e7aaa5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon May 5 15:52:25 2003 +0000

    also tested on Debian 3.0 and OpenBSD 3.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@220 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 08ce18f463cdef5af51025526a65845c1e6de397
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 20:43:26 2003 +0000

    reindent, use DebugLogB instead of DebugLogC, add indice number in debug
    message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@219 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/tokenparser.l | 153 +++++++++++++++++++++++++++++-------------------------
 1 file changed, 82 insertions(+), 71 deletions(-)

commit d36df4034bbd64f57f0d112306e17919d5c194da
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 20:25:34 2003 +0000

    support driver aliases in Info.plist
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@218 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 70 +++++++++++++++++++++++++++--------------------------
 1 file changed, 36 insertions(+), 34 deletions(-)

commit 4a4af62a617437797f378e34792c3af6d225875b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 19:29:39 2003 +0000

    use LTPBundleFindValueWithKey(.., 0) instead of
    LCFBundleFindValueWithKey()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@217 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 9ceb3ea5da0273a9bee4e8da1befe5fcb10c16ed
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 19:28:10 2003 +0000

    reindent
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@216 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 137 ++++++++++++++++++++++++++--------------------------
 1 file changed, 68 insertions(+), 69 deletions(-)

commit 4e69cb594c5340ba39fe92e0f40b57faa07717d4
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 19:21:35 2003 +0000

    code simplification
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@215 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 52 +++++++++++++++++-----------------------------------
 1 file changed, 17 insertions(+), 35 deletions(-)

commit aa26283da9d9b7c9a218cfc648b1e9a82e9db51f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Mon Apr 7 19:09:45 2003 +0000

    add directory name to error message
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@214 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit fc0d57672957f5f944864d53631e299ef2349e3a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Jan 9 21:02:17 2003 +0000

    the log output mode (syslog, stdout, stderr) can't be combined. stderr
    had precedence (in the code) over stdout that was _never_ used.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@213 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b0c6c6c859a40d849d26ec0de304903ad84af64
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Dec 8 23:00:03 2002 +0000

    use pcscd.* instead of pcsc.* to be unoform with pcscd.pid
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@212 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ee7ece3a41a74a1820ca4a9b23a9b47bb8aa0dbd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:38:46 2002 +0000

    remove pcscd.startup since it is now in etc/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@211 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 26a6c57feab13e988ae3334aa2065a0b6a2522cd (tag: 1.1.2-beta3)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:35:42 2002 +0000

    release 1.1.2beta3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@209 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit d9605f5f7ef5436d22af895ae1c5f3144219c33f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:25:38 2002 +0000

    regenerated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@208 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in     |   490 ++-
 config.h.in     |   149 +-
 configure       | 11693 +++++++++++++++++++++++++++++++++++++++++++++---------
 doc/Makefile.in |   287 +-
 etc/Makefile.in |   222 +-
 5 files changed, 10415 insertions(+), 2426 deletions(-)

commit f903421d611385a6e3a8d8acc6238e74025ada38
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:21:23 2002 +0000

    regenarated
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@207 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.in       | 20664 ++----------------------------------------------
 src/utils/Makefile.in |   440 +-
 2 files changed, 811 insertions(+), 20293 deletions(-)

commit f1459382279533e28b70bfcd1b855d75e90d809c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:20:23 2002 +0000

    create PCSCLITE_IPC_DIR if it does not exist. For example when it is set
    to /tmp/pcsc/ (default now is /var/run/)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@206 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit e506decf43b8619341169df7ce23c307c20fe32e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:19:30 2002 +0000

    use pcsc.comm instead of pcsc.omm
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@205 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 12d4d4f6b476e6c08bd5a3135cfeef94994428fd
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 22:04:30 2002 +0000

    removed. The startup script is in etc/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@204 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.startup | 67 -------------------------------------------------------
 1 file changed, 67 deletions(-)

commit ad5195393f573a0f72e04139dc675651f919012d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:35:28 2002 +0000

    small source code reformating
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@203 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 77 +++++++++++++++++++++++-------------------------------
 1 file changed, 32 insertions(+), 45 deletions(-)

commit 78242af929db851a1ae5f4ef5dea77ad85ddc6a3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:29:56 2002 +0000

    use DebugLogB() for logs with 2 parameters and not DebugLogC()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@202 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 22 +++++++++++-----------
 libmusclecard/src/tokenfactory.c | 14 +++++++-------
 src/tokenparser.c                |  4 ++--
 3 files changed, 20 insertions(+), 20 deletions(-)

commit e8f64ecb489093d8fccf4d49ba41eb58e88bb373
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:29:12 2002 +0000

    DebugLogC() uses 3 parameters not 2 (use DebugLogB() for that)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@201 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4d35b23cab99139c32d971b7fd0b8e737dc54677
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:26:38 2002 +0000

    add filename and error message to error logs for /var/run/pcsc.pub
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@200 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 82f35dc718962de272bef86f5491d3644e1a7f26
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:14:59 2002 +0000

    add support of --enable-ipcdir=DIR
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@199 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 10 +++++++---
 src/pcscdaemon.c       | 48 ++++++++++++------------------------------------
 2 files changed, 19 insertions(+), 39 deletions(-)

commit d49b67e47d759686ad0b996dd6385f615d575ca1
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:13:25 2002 +0000

    reorganise conditionals to to have a src/Makefile.in file 142 (yes 142) times
    smaller (33 KB instead of 4.7 MB)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@198 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 33 +++++++++++++++++----------------
 1 file changed, 17 insertions(+), 16 deletions(-)

commit 8db55575b86041ecb95718dab4650681f113c40a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:11:35 2002 +0000

    also distribute etc/pcscd.startup
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@197 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f80bf92719cd94841fb07823f3a3dd560efd626
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:11:05 2002 +0000

    update to autoconf 2.56 (lot of changes).
    add --enable-ipcdir=DIR option. Default is now /var/run/ instead of /tmp/pcsc/
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@196 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 170 ++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 99 insertions(+), 71 deletions(-)

commit 560c195672430e1b1012766f2e67cacc219d748f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:09:29 2002 +0000

    update for autoconf 2.57 and automake 1.6.3
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@195 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 27 +++++++++++++++++++++++----
 1 file changed, 23 insertions(+), 4 deletions(-)

commit 6ad7a45f84fcb65f96ad4f213e1159f108cfdae7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Dec 7 21:08:50 2002 +0000

    add win32/ files and some rework
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@194 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 27 ++++++++++++++++++++-------
 1 file changed, 20 insertions(+), 7 deletions(-)

commit 5ad716d8dd3b26b9890118a1e02a3b5003cfa9df
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 6 20:14:39 2002 +0000

    accept pioRecvPci == NULL in SCardTransmit()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@193 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit beb032ec31c14f12b5e3bdec714807bd1ed47c6a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 6 18:20:13 2002 +0000

    source code reformating
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@192 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 398 +++++++++++++++++-----------------------------------
 1 file changed, 130 insertions(+), 268 deletions(-)

commit 4abea3eecee7c6e5a30937fc6a6bb2c4c1ddc5c8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 6 18:08:26 2002 +0000

    correct an overflow in SCardGetStatusChange()
    replace "if (cReaders > PCSCLITE_MAX_CONTEXTS)" by
    "if (cReaders >= PCSCLITE_MAX_CONTEXTS)". Thanks to Michael Nidd
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@191 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d3c95b1ddafda283e9f9eedb5fdbdd872f1e5fc2
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Dec 6 18:05:53 2002 +0000

    init g_rgSCard??Pci variable at compile time
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@190 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 12ae09c1c54a4f2d0c3c9818768458832f85baa6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Dec 4 21:46:29 2002 +0000

    add Dmitry Djachenko pacthes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@189 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit d088a1a5822c949d32df0d450249ae9d8bcaee3d
Author: David Corcoran <invalid@example.com>
Date:   Mon Dec 2 21:52:22 2002 +0000

    Included changes from Citrix
     - Support for AIX in configure.in and Makefile.am
     - added ifdef for SNPRINTF and VSNPRINTF
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@188 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in                                 |    12 +
 configure                                   |   214 +-
 configure.in                                |    10 +
 libmusclecard/src/musclecard.c              |     4 +-
 libmusclecard/utils/bundleTool/bundleTool.c |    11 +
 src/Makefile.am                             |    11 +
 src/Makefile.in                             | 29512 +++++++++++++++++---------
 src/debuglog.c                              |     4 +
 src/pcscdaemon.c                            |     9 +
 9 files changed, 19901 insertions(+), 9886 deletions(-)

commit fa6df118e121abbd65498a43f467a9cd458e3f1f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 29 22:55:04 2002 +0000

    code reformatting
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@187 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 305 ++++++++++++++++++++-------------------------------------
 1 file changed, 105 insertions(+), 200 deletions(-)

commit c161fd793a5ad33a78de5eb7cf729d8c7ebb25c7
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 29 22:45:17 2002 +0000

    initialise g_rgSCard??Pci globals at compile time
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@186 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 97825ec6d2b793284efc34edcc1a509f3eb75913
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 29 22:42:39 2002 +0000

    SCardStatus(): set more return values
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@185 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 70 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 70 insertions(+)

commit 850a81dc14a0593379c3e2b3b8a805576da97df9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 29 22:39:39 2002 +0000

    Check reader name and ATR size are correct (no buffer oveflow)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@184 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 4 ++++
 1 file changed, 4 insertions(+)

commit f1953b58ff4a5ffb9ce39a9b29d1b397bb8abb6b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 29 22:37:28 2002 +0000

    check pioRecvPci is non NULL before assignment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@183 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 2a52f7d20810d007fb7d018ed3de85ebb3f33ee3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Nov 29 22:36:09 2002 +0000

    SCardReconnect() returns more interesting error codes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@182 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 96 +++++++++++++++++++++++++++++++++++++---------------------
 1 file changed, 61 insertions(+), 35 deletions(-)

commit b04ccae8bbc390e1e9a682c6a47fa38801b535e3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 30 17:45:34 2002 +0000

    PHSetProtocol() returns a DWORD and not a UCHAR since
    rContext->dwProtocol is a DWORD. Thanks to Oleg Makarenko.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@181 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/prothandler.c | 2 +-
 src/prothandler.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 18337be245c651f5f865c685a01af802d5ac3103
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Wed Oct 30 17:42:41 2002 +0000

    include some missing .h files. Thanks to Oleg Makarenko
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@180 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c   | 1 +
 src/eventhandler.c | 2 ++
 src/prothandler.c  | 2 ++
 src/winscard.c     | 1 +
 4 files changed, 6 insertions(+)

commit 337ab7d288a3d4ea725ad8b7d82f39beb673f402
Author: David Corcoran <invalid@example.com>
Date:   Wed Oct 16 20:09:31 2002 +0000

    some changes for the Mac
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@179 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/SmartcardServices | 1 +
 pbx/config.h          | 9 ++++-----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 854f4a63949145442750e14e02536b09544919ad
Author: David Corcoran <invalid@example.com>
Date:   Tue Oct 15 19:48:30 2002 +0000

    Some changes to make SCF easier to use
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@178 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog             |     6 +-
 Makefile.in           |    10 +-
 build/aclocal.m4      |  3614 ++-------------
 config.h.in           |    18 +-
 configure             |  4257 ++----------------
 configure.in          |     4 -
 doc/Makefile.in       |     6 +-
 etc/Makefile.in       |     6 +-
 src/Makefile.am       |    10 +-
 src/Makefile.in       | 11480 ++++++++++++++++++++++++++++++++----------------
 src/utils/Makefile.in |     8 +-
 11 files changed, 8213 insertions(+), 11206 deletions(-)

commit 1c14f34b0e9a1f88ac6abaa4f3efc4f272c06e75
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 12 21:51:12 2002 +0000

    use autoconf instead of autoreconf to not reuse an old config
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@176 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 631f7a9e45ee39a1e6918d7a902196a2afdcb1e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 12 21:37:08 2002 +0000

    new version of autoregenerating files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@175 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure             |  4 +--
 doc/Makefile.in       |  9 ++++--
 etc/Makefile.in       |  9 ++++--
 src/Makefile.in       | 85 +++++++++++++++++++++++++++++++++++++++------------
 src/utils/Makefile.in | 72 +++++++++++++++++++++++++++++++------------
 5 files changed, 134 insertions(+), 45 deletions(-)

commit 12f7944f7034ff406f6d7789a43b03487fa21c92 (tag: 1.1.2-beta2)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 12 21:27:29 2002 +0000

    release 1.1.2beta2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@174 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 000a3a5d3ea8da68f3cddba6cc59e09c6b7b6859
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 8 22:13:27 2002 +0000

    do not link with -lpthread under bsd as it breaks under OpenBSD and
    FreeBSD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@173 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ebdcdfa725099af6bb98f727953f1225de523f9d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Oct 8 21:56:13 2002 +0000

    use "test x${usbdropdir} = xfalse" instead of "test x${usbdropdir} ==
    xfalse" since it generates an error under FreeBSD (test: xfalse:
    unexpected operator). For a strange reason the bug was not detected
    earlier.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@172 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7feb40f90fca047c9a0f6f9d408694a6c147b6fa
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 21:43:56 2002 +0000

    use -rdynamic instead of -Wl,--export-dynamic since some systems
    (OpenBSD) did not support it
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@171 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9223aa4819152d11017540942b3672f1083b9fcc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 20:59:50 2002 +0000

    add --apdu documentation in --help message
    support -a argument even when HAVE_GETOPT_LONG not supported
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@170 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit fdc8d7e8d1b82c07b864c00b6d29eb4870c5d266
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 18:22:25 2002 +0000

    add a (char *) cast to avoid a compilation warning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@169 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6ed1e8759ff86c2b7b0b54deb22bde6f1b2c3b17
Author: Jean-Luc Giraud <invalid@example.cominvalid@example.com>
Date:   Sun Oct 6 14:25:59 2002 +0000

    Added support for start/stop/restart invocation parameters
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@168 0ce88b0d-b2fd-0310-8134-9614164e65ea

 etc/SmartcardServices | 30 +++++++++++++++++++++++++++++-
 1 file changed, 29 insertions(+), 1 deletion(-)

commit 39e10ab58283f7049365bdf37d08abe87170fc6d
Author: Jean-Luc Giraud <invalid@example.cominvalid@example.com>
Date:   Sun Oct 6 14:24:39 2002 +0000

    Added #define for support of /var/run/pid. pid file is /var/run/pcscd.pid
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@167 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/config.h | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 681cfee33c1e8360929bf6eea7acebea885cfa51
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 10:50:02 2002 +0000

    new version of autoregenerating files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@166 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in           |   10 +-
 build/aclocal.m4      | 3624 ++++++++++++++++++++++++++++++++++++++---
 config.h.in           |   18 +-
 configure             | 4255 +++++++++++++++++++++++++++++++++++++++++++++----
 doc/Makefile.in       |   15 +-
 etc/Makefile.in       |   15 +-
 src/Makefile.in       |   96 +-
 src/utils/Makefile.in |   80 +-
 stamp-h.in            |    1 +
 9 files changed, 7420 insertions(+), 694 deletions(-)

commit dc84a2185ffa84f1b1e3dbf75b351b9ba39c68a0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 10:48:52 2002 +0000

    add -DPACKAGE and -DVERSION to compilation flags. They are no more
    included in config.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@165 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit c8fb1257ec86b0856af9b2b19cc92386c5500dc3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 10:47:45 2002 +0000

    change version from 1.1.2beta1 to 1.1.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@164 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f4cbd05ddf6af290dd031003f6a924e2d0e435ee
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Oct 6 10:46:33 2002 +0000

    remove config.h.in to be sure to regenerate it
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@163 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 1 +
 1 file changed, 1 insertion(+)

commit 3ba636aa7cf195b7ca08451f604f13a865827256
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 5 21:58:29 2002 +0000

    change VERSION number from 1.1.2beta1 to 1.1.2
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@162 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e104c5625493bf18f546d98992a04ada81fc770a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Oct 5 20:29:35 2002 +0000

    print an error message if the --debug argument is not known
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@161 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 1 +
 1 file changed, 1 insertion(+)

commit 87e568a6986e6b63f5ebcd32e158cb335e1a8d5a
Author: David Corcoran <invalid@example.com>
Date:   Fri Oct 4 20:47:00 2002 +0000

    quick fix
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@160 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 7b4857614415880c48a871dd8f392e7cfbf9b5ec
Author: David Corcoran <invalid@example.com>
Date:   Fri Oct 4 20:43:43 2002 +0000

    added scf compatibility
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@159 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_scf.c | 1719 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 1719 insertions(+)

commit ca9e72e7c9472369d575dc180ee778f8298b6559
Author: David Corcoran <invalid@example.com>
Date:   Fri Oct 4 20:21:53 2002 +0000

    added helge's fix to WORD
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@158 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 328ca674d96336214c91a74f1c1c34c631c1d166
Author: David Corcoran <invalid@example.com>
Date:   Fri Oct 4 19:31:05 2002 +0000

    fix for osx deadlock on sleep
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@157 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/powermgt_macosx.c | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 34640f560f2e6e97c29f58f5bfd5be225f315a03
Author: David Corcoran <invalid@example.com>
Date:   Thu Oct 3 23:35:03 2002 +0000

    some changes to support multiplle usb readers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@156 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 154 +++++++++++++++++++++++++++++++---------------------
 1 file changed, 93 insertions(+), 61 deletions(-)

commit c3a769ab39f4a3074078ba706c1bd533de74d51e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Oct 3 21:17:21 2002 +0000

    close PCSCLITE_HP_DROPDIR (/usr/local/pcsc/drivers/) after use
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@155 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_linux.c | 2 ++
 1 file changed, 2 insertions(+)

commit f070d48939322a211a362014e6acef1a0832fc35
Author: David Corcoran <invalid@example.com>
Date:   Thu Oct 3 05:47:49 2002 +0000

    added fix by amira
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@154 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)

commit 1ee160094500983dbf2e3de155ee891df2c08435
Author: David Corcoran <invalid@example.com>
Date:   Wed Oct 2 22:36:41 2002 +0000

    added default dropdir
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@153 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit a1edd38fb4b5ff52b9b9725ec9501db0e1bd5a7e
Author: David Corcoran <invalid@example.com>
Date:   Wed Oct 2 21:29:18 2002 +0000

    added athena patch for SCARD_PROTOCOL_ANY in SCardConnect
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@152 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 32df3299842749034feeb7ed6cdabb385b03b80a
Author: David Corcoran <invalid@example.com>
Date:   Wed Oct 2 21:15:43 2002 +0000

    Fixed multi-reader + sleep problem
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@151 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 3 +++
 src/readerfactory.c | 5 ++++-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit b0a325c68aa9d454b57b9b4edc8e66063017c87a
Author: David Corcoran <invalid@example.com>
Date:   Wed Oct 2 20:27:47 2002 +0000

    Re-importing autoconf stuff
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@150 0ce88b0d-b2fd-0310-8134-9614164e65ea

 build/aclocal.m4 | 3614 ++++--------------------------------------------------
 config.h.in      |    6 +
 configure        |  216 ++--
 doc/Makefile.in  |   59 +-
 src/Makefile.in  |    6 +-
 5 files changed, 433 insertions(+), 3468 deletions(-)

commit 7ffae181bd6ee18b60d6857d4cf7af03b9118895
Author: Jean-Luc Giraud <invalid@example.cominvalid@example.com>
Date:   Wed Oct 2 17:52:51 2002 +0000

    Modified version number from 1.1.0 to 1.1.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@149 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/config.h        | 2 +-
 src/readerfactory.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit db6a89195fd899a4a27114b7bc979b25a3f4584e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Sep 7 15:50:24 2002 +0000

    Log to stderr by default. Print an error message if --debug argument is
    not known.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@147 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 30 ++++++++++++++++++++----------
 1 file changed, 20 insertions(+), 10 deletions(-)

commit 82a32e33573ec11c66c99c8f58cb8d74c9bdcb02 (tag: 1.1.2-beta1)
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 21:23:41 2002 +0000

    release 1.1.2beta1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@145 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 6cf4ed3302cd359c197f4a0242fcc1eeb2cca495
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 21:18:14 2002 +0000

    forgot to add support of --enable-muscledropdir in bundleTool.c
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@144 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 27 ++++++++++++++++++++++++++-
 1 file changed, 26 insertions(+), 1 deletion(-)

commit b9727b0c121b9b4842ab00ad70075aa968be3ed6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 21:12:00 2002 +0000

    add support for --enable-muscledropdir
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@143 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 225c432616bec1ad91f8280156a72633b387925a
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 20:31:16 2002 +0000

    add support for --enable-muscledropdir
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@142 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in                     | 32 ++++++++++++++++++++------------
 libmusclecard/src/tokenfactory.c | 17 ++++++++++-------
 2 files changed, 30 insertions(+), 19 deletions(-)

commit 50ef38cf4fcf4dbd0e2c506bbcfe1791bab3c543
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 20:30:32 2002 +0000

    new versions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@141 0ce88b0d-b2fd-0310-8134-9614164e65ea

 build/aclocal.m4   | 3624 ++++++++++++++++++++++++++++++++++++++++++++++++----
 build/config.guess |   44 +-
 build/config.sub   |   95 +-
 build/install-sh   |    2 +-
 build/ltmain.sh    |  333 +++--
 build/missing      |   24 +-
 build/ylwrap       |  107 +-
 7 files changed, 3737 insertions(+), 492 deletions(-)

commit 52efd18263fa870fcb7dfcd6c91da7c7af4e26d8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 20:29:20 2002 +0000

    do not restart ./configure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@140 0ce88b0d-b2fd-0310-8134-9614164e65ea

 reconf | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c9c25042fe21a79c861cc6548d6c23d9e3c31b35
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 20:28:13 2002 +0000

    test if a Makfile exists before make distclean
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@139 0ce88b0d-b2fd-0310-8134-9614164e65ea

 bootstrap | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 3a2b05d1b39b46b3e8c10db2eea751865ef5fc62
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Sep 6 19:26:05 2002 +0000

    The licence file is COPYING and not LICENSE (thanks to Juha Tuomala)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@138 0ce88b0d-b2fd-0310-8134-9614164e65ea

 README | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 26946d3605d6ce93f8ded392d4a1e8714307ef11
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Aug 18 20:09:25 2002 +0000

    add formaticc.1 from Debian
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@131 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am |  2 +-
 doc/Makefile.in | 55 ++++++++++---------------------------------------------
 doc/formaticc.1 | 44 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 55 insertions(+), 46 deletions(-)

commit 7e217ab07ccdd94561f88a7a31de2f0168811600
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Aug 16 20:08:19 2002 +0000

    typo (add a space)
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@130 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 864016e3503df7a677b8cdf05c3fe380e477ecc3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 15 22:49:01 2002 +0000

    lots of debug and buffer overflow removal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@129 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 125 +++++++++++++++++++++++++++++++++-----------------
 1 file changed, 84 insertions(+), 41 deletions(-)

commit e9c9beb491202d15c357f5afab5a639e7f8003d6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 15 15:26:29 2002 +0000

    print usage in cas of wrong arguments
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@128 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 2e440f6573c42f5b8168b286ca71f015433e1f13
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Aug 15 15:11:55 2002 +0000

    update and rename bundleTool.1
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@127 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am                                    |  2 +-
 doc/Makefile.in                                    |  4 +--
 .../utils/bundleTool/bundleTool.8.in               | 42 ++++++++--------------
 3 files changed, 17 insertions(+), 31 deletions(-)

commit c5817191cd69873ea71e950245f6d600b8d8d463
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 22:19:09 2002 +0000

    switch from version 1.1.1 to 1.1.2 for cvs snapshots
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@126 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 38e33c73b5a646e04685a3ca3b87edd17b8c682e
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    add support for --apdu, test if the pcscd is still running before
    complaining that /tmp/pcsc is present
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@125 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 62 ++++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 56 insertions(+), 6 deletions(-)

commit f5e05a07f734eb7691424e1f74db355318f9afe3
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    add support for --apdu
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@124 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 9afc1abba1e59c3b387ad6c6e19c771e8f593f22
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    typo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@123 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c | 1 -
 1 file changed, 1 deletion(-)

commit f7ca1af935217f96fc8827ed8292e20e8b4e8546
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    add a return NULL;
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@122 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 1 +
 1 file changed, 1 insertion(+)

commit c43151d731797456eb4b8df48251841e017d23e8
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    add support for --apdu and other same log messages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@121 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h | 32 +++++++++++++++++++------------
 src/debuglog.c      | 54 ++++++++++++++++++++++++++++++++++++++++++++---------
 2 files changed, 65 insertions(+), 21 deletions(-)

commit df8f70df743039b03a911bd175c0a83dd581b19c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    properly initialise rv
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@120 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b5204523f97687efb037b26b9c8c079c1fe1daec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:15:13 2002 +0000

    add -Wl,--export-dynamic link option
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@119 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 2 +-
 src/Makefile.in | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 0ec2d500f16d414acac96451892cf6e49f8365e0
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:13:17 2002 +0000

    add the -a|--apdu option + some cleaning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@118 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 130 ++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 74 insertions(+), 56 deletions(-)

commit a67bb8c5b97400f425468d981eedcecadc1a0cf6
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:12:00 2002 +0000

    make distclean before autoreconf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@117 0ce88b0d-b2fd-0310-8134-9614164e65ea

 reconf | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit af26ceeabdccab106f4288169661304fc2eb5411
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:10:55 2002 +0000

    *** empty log message ***
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@116 0ce88b0d-b2fd-0310-8134-9614164e65ea

 reconf | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit 2794841fd5c1a516d112931f02a7fd5a2d143381
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Aug 13 21:10:28 2002 +0000

    set the PCSCLITE_HP_DROPDIR as a ./configure option
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@115 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in        | 11 +++++++++++
 src/hotplug_linux.c | 26 ++++++++++++++------------
 2 files changed, 25 insertions(+), 12 deletions(-)

commit ba2737bdfd29718df13363879805b7e9850bed72
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue Jul 30 21:40:17 2002 +0000

    add #ifdef USE_THREAD_SAFETY otherwise it wont compile with
    --disable-threadsafe
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@114 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 2 ++
 1 file changed, 2 insertions(+)

commit ca4afc09b8d2719ac0db69dd090e43022ef27bb3
Author: David Corcoran <invalid@example.com>
Date:   Mon Jul 1 20:14:09 2002 +0000

    readding
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@113 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.startup | 67 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 67 insertions(+)

commit 24bc35c7db2e38941d8d873d2cbb3cae1082309e
Author: David Corcoran <invalid@example.com>
Date:   Mon Jul 1 20:08:53 2002 +0000

    moved location
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@112 0ce88b0d-b2fd-0310-8134-9614164e65ea

 {doc => etc}/pcscd.startup | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit 670abc29b12a2a4dfbbea3674fc2f265bb0d6c43
Author: David Corcoran <invalid@example.com>
Date:   Thu Jun 27 22:21:23 2002 +0000

    Win32
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@111 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c   | 8 +++++++-
 libmusclecard/src/tokenfactory.c | 2 +-
 win32/PCSC.dsp                   | 2 +-
 3 files changed, 9 insertions(+), 3 deletions(-)

commit efea5dd33eb01b97f60b6fa99ebf69381e264391
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 19 22:05:46 2002 +0000

    removed printf
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@107 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 1 -
 1 file changed, 1 deletion(-)

commit d5b96f5d1d3ee1843b8872fdf61788d8e3fc4973
Author: David Corcoran <invalid@example.com>
Date:   Tue Jun 18 18:16:48 2002 +0000

    MSCPUChar8 -> MSCUChar8
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@106 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f6b3da3efb6214d7b3382d6a3a0448545da19410
Author: David Corcoran <invalid@example.com>
Date:   Tue Jun 11 20:07:26 2002 +0000

    Added more Initialization parameters ...
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@105 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 22 +++++++++++++++++++++-
 1 file changed, 21 insertions(+), 1 deletion(-)

commit 73c060f8468f2bd30a349bbb9bf8183c61bd98c4
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 19:48:13 2002 +0000

    hello
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@104 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

commit 42d6f32e1abb1d84ffb265e74601700e36440585
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 18:47:13 2002 +0000

    ;lkj
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@103 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 1 +
 1 file changed, 1 insertion(+)

commit 388a060b4e3a9cd28e5c26e795adb2b6495785fc
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 18:42:30 2002 +0000

    bad if then
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@102 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ca5ea492fc2cda36dcf24e465a2e567f78dd73dc
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 18:31:04 2002 +0000

    some changes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@101 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c46434704b06a02768019dd32baf6488a13746b8
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 18:11:32 2002 +0000

    Added generic thread support to musclecard.c and added pthread_join
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@100 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 26 ++++++++++++--------------
 src/PCSC/thread_generic.h      |  2 ++
 src/thread_macosx.c            | 15 +++++++++++++++
 src/thread_unix.c              | 15 +++++++++++++++
 4 files changed, 44 insertions(+), 14 deletions(-)

commit c05a9f893d778383209de027d1873879802c4de6
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 17:57:33 2002 +0000

    Added join to cancelcallback
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@99 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 55 ++++++++++++++++++++++++------------------
 1 file changed, 32 insertions(+), 23 deletions(-)

commit 002335215e148d7b45783fb8a87285bd6786fcc4
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 17:56:06 2002 +0000

    Fixed problem with MSC_SHARE_DIRECT connections
    Added changes to docs
    Cancel with join
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@98 0ce88b0d-b2fd-0310-8134-9614164e65ea

 COPYING   | 2 +-
 ChangeLog | 6 ++++++
 NEWS      | 2 +-
 README    | 2 +-
 4 files changed, 9 insertions(+), 3 deletions(-)

commit 7425f0b1f64e2b52747f13219542935e29690558
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 16:04:16 2002 +0000

    Changed versioning
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@97 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure              | 2 +-
 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 197d62ae3672be87a8b11a4f6c0b6a5b4c98a23a
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 15:59:40 2002 +0000

    removed unused variable i
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@96 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 1 -
 1 file changed, 1 deletion(-)

commit a72179bf678f97791b02eade38b4e45b68a3bffe
Author: David Corcoran <invalid@example.com>
Date:   Wed Jun 5 15:41:26 2002 +0000

    Fix for bug which wouldn't work with multi-slot readers.  Slots weren't managing the dwFeeds variable in the structure so the library was closed prematurely.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@95 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 80 +++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 65 insertions(+), 15 deletions(-)

commit ef04a35354c5e253c5182383348d45a8994c27fa
Author: David Corcoran <invalid@example.com>
Date:   Mon Jun 3 19:43:08 2002 +0000

    replaced magic number with constant 16->PCSCLITE_MAX_CONTEXTS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@94 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 0e59b6a9179e9371bfce7eadf385522e2ea3eb84
Author: David Corcoran <invalid@example.com>
Date:   Fri May 31 21:18:30 2002 +0000

    Removed bug: line 1986 SCardCleanupClient would release the socket too early
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@93 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 27 ---------------------------
 1 file changed, 27 deletions(-)

commit fce2557abd6a4b12cd617465f3cfb01f56a86f39
Author: David Corcoran <invalid@example.com>
Date:   Tue May 28 19:25:11 2002 +0000

    Added muscle-docs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@92 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/doc/muscle-api-1.3.0.pdf | Bin 0 -> 195231 bytes
 1 file changed, 0 insertions(+), 0 deletions(-)

commit 8d0f3b0a6f56db92c11f63bd584297fd6b9055f4
Author: David Corcoran <invalid@example.com>
Date:   Tue May 28 17:36:12 2002 +0000

    Finalizing for the release
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@91 0ce88b0d-b2fd-0310-8134-9614164e65ea

 AUTHORS                     |   2 +
 ChangeLog                   |  19 +++++
 NEWS                        |   4 +-
 README                      |   7 +-
 SECURITY                    |   5 --
 configure                   | 190 ++++++++++++++++++++++++++------------------
 configure.in                |  15 ++++
 doc/Makefile.am             |   2 +-
 doc/Makefile.in             |   2 +-
 doc/pcscd.startup           |   2 +-
 etc/SmartcardServices       |   2 +-
 etc/StartupParameters.plist |   2 +-
 src/Makefile.am             |   7 ++
 src/Makefile.in             |   4 +-
 14 files changed, 169 insertions(+), 94 deletions(-)

commit f0a6c6ccd91f00954d212b5d99e47b279ec1e755
Author: David Corcoran <invalid@example.com>
Date:   Tue May 28 16:17:09 2002 +0000

    Added wintypes.h
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@90 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/utils/formaticc.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7fd43f4952434e762d020b47fc42fd1c76a27685
Author: David Corcoran <invalid@example.com>
Date:   Tue May 28 16:04:10 2002 +0000

    fixes for the build
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@89 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in     |   5 +-
 build/ltmain.sh | 333 +++++++++++++++++++++-----------------------------------
 doc/Makefile.in |   4 +-
 src/Makefile.am |   2 +-
 src/Makefile.in |  26 ++++-
 5 files changed, 156 insertions(+), 214 deletions(-)

commit 9bdc4b2e56e0149d0e951522861f4ccdf5c0a4a5
Author: phuang <invalid@example.com>
Date:   Tue May 28 05:00:57 2002 +0000

    hpux need <errno.h> to compile correctly
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@88 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_hpux.c | 1 +
 1 file changed, 1 insertion(+)

commit d9de08de2ea96e06b521c293fbd2591c24835421
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Tue May 21 20:55:46 2002 +0000

    patch the generated ChangeLog.cvs to have correct file and author names
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@87 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 3adcb8811547468ffae8309627c08c3a07276804
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 10 19:02:36 2002 +0000

    added the .h files in the distibution but they will not be installed by
    a 'make install'
    So now 'make test' and 'make testcheck' should work again.
    Sorry Dave for my mistake in v1.3 you corrected in v1.4. I hope it is OK
    this time.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@86 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 256e3590df10c82270114869968ce5324e1b1c04
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri May 10 18:59:46 2002 +0000

    add pcscd.startup in the distribution
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@85 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 49f6a1f6402791cca82989d84f95a9e4ccd7cebf (tag: 1.1.0)
Author: David Corcoran <invalid@example.com>
Date:   Tue May 7 22:05:15 2002 +0000

    Updated version to 1.1.0
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@84 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in           | 2 +-
 configure             | 2 +-
 configure.in          | 2 +-
 doc/Makefile.in       | 2 +-
 etc/Makefile.in       | 2 +-
 src/Makefile.in       | 2 +-
 src/utils/Makefile.in | 2 +-
 7 files changed, 7 insertions(+), 7 deletions(-)

commit 7ae3463b44ade06bf9f9b62da383e4ea7f524ad8
Author: David Corcoran <invalid@example.com>
Date:   Tue May 7 02:33:44 2002 +0000

    Fixing so that --disable-threadsafe works !!!
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@83 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in     |   2 +-
 config.h.in     |   6 +++
 configure       | 132 ++++++++++++++++++++++++++++++++++++++++++++++++--------
 configure.in    |   9 ++--
 doc/Makefile.in |   2 +-
 etc/Makefile.in |   2 +-
 6 files changed, 128 insertions(+), 25 deletions(-)

commit c2672edb8a17e69b0a36c6de98a8fa4e6982e5c4
Author: David Corcoran <invalid@example.com>
Date:   Tue May 7 02:33:17 2002 +0000

    Adding Makefile.am with -lpthread for PCSCD_INCLUDE_LIBS
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@82 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am       |  9 ++++++++-
 src/Makefile.in       | 11 +++++++++--
 src/utils/Makefile.in |  2 +-
 3 files changed, 18 insertions(+), 4 deletions(-)

commit 5e652c38479dedc0bd6ea863a470b334f97905db
Author: David Corcoran <invalid@example.com>
Date:   Tue May 7 02:02:55 2002 +0000

    Added Win32 dynamic lib loading
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@81 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_win32.c | 81 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 81 insertions(+)

commit cc70e69f66dbf20494f56949c22098eb25a410ec
Author: David Corcoran <invalid@example.com>
Date:   Mon May 6 23:23:13 2002 +0000

    Added real time card reset/removed checking.  Fixed bug which begin/end transaction would not return this.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@80 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 51 ++++++++++++++++++++++++++++++++++++++----
 1 file changed, 47 insertions(+), 4 deletions(-)

commit 6e21ec8e3ad998e48c0190167a0914d097250072
Author: David Corcoran <invalid@example.com>
Date:   Mon May 6 23:01:24 2002 +0000

    Added support for Win32 based platforms for Muscle Framework.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@79 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h |    4 +
 libmusclecard/src/PCSC/musclecard.h |  126 +++-
 libmusclecard/src/musclecard.c      |   11 +-
 libmusclecard/src/tokenfactory.c    |   59 +-
 src/debuglog.c                      |   20 +
 src/thread_unix.c                   |    7 +
 src/tokenparser.c                   |   10 +
 win32/PCSC.cpp                      |   39 ++
 win32/PCSC.dsp                      |  174 +++++
 win32/PCSC.h                        |   24 +
 win32/StdAfx.cpp                    |    8 +
 win32/StdAfx.h                      |   24 +
 win32/pthread.h                     | 1273 +++++++++++++++++++++++++++++++++++
 win32/sched.h                       |  174 +++++
 win32/win32_config.h                |   77 +++
 win32/win32_pcsclite.h              |  198 ++++++
 16 files changed, 2223 insertions(+), 5 deletions(-)

commit e4541aa3430ce4936e335fa5a4e5c988b050b85c
Author: David Corcoran <invalid@example.com>
Date:   Mon May 6 19:55:11 2002 +0000

    Checking in new project file for project builder
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@78 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pcsc.pbproj/project.pbxproj | 32 +++++++++++++++-----------------
 1 file changed, 15 insertions(+), 17 deletions(-)

commit 5ddbc94eb59c88ebf9c1f8407abee3b23f4e0336
Author: David Corcoran <invalid@example.com>
Date:   Sat Apr 27 01:11:27 2002 +0000

    Added versioning to pbxproj file, updated config.h.  Fixed Plugin->PlugIn.h in hotplug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@74 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pcsc.pbproj/project.pbxproj | 246 ++++----------------------------------------
 src/hotplug_macosx.c        |   2 +-
 2 files changed, 22 insertions(+), 226 deletions(-)

commit 3a620a280a2f5c18c08c40ad5355f7eff10da497
Author: David Corcoran <invalid@example.com>
Date:   Fri Apr 26 18:47:36 2002 +0000

    Updated the man page
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@73 0ce88b0d-b2fd-0310-8134-9614164e65ea

 doc/pcscd.8.in | 19 ++++++++-----------
 1 file changed, 8 insertions(+), 11 deletions(-)

commit d66d78e9cc05456fd213617bc99aaee7359614c6
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 25 18:25:38 2002 +0000

    Added bundle header information for buildit
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@72 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pcsc.pbproj/project.pbxproj | 57 +++++++++++----------------------------------
 1 file changed, 13 insertions(+), 44 deletions(-)

commit 9bdd64f23ebe2c2a9ed8c142f5f57c79a9f2579a
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 25 18:23:35 2002 +0000

    Added new version numbering
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@71 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/config.h           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 src/pcscdaemon.c       | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 504b2033e71fb3fd469df3b03cf718a704008b8b
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 25 17:56:41 2002 +0000

    removed printf debugging for release
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@70 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/eventhandler.c  | 1 -
 src/readerfactory.c | 2 --
 2 files changed, 3 deletions(-)

commit c34fb14bc0df2b0ccf522801f87c3992a34f65fe
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 25 17:07:37 2002 +0000

    Changes to the power management behavior
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@69 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/hotplug_macosx.c  | 179 +++++++++++++++++++++++---------------------------
 src/powermgt_macosx.c |   2 +-
 2 files changed, 85 insertions(+), 96 deletions(-)

commit 802e0b4ea5688f61e30a3d2193e9fab784d4acfc
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 24 20:28:38 2002 +0000

    Removal
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@68 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/PCSC.pbproj/project.pbxproj | 1509 ---------------------------------------
 1 file changed, 1509 deletions(-)

commit e38150f9d7563ea8c5daeb1126cafde8fb6bb1ca
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 24 20:23:42 2002 +0000

    moved project builderstuff and removed some files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@67 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pcsc.pbproj/project.pbxproj | 1509 +++++++++++++++++++++++++++++++++++++++++++
 src/eventhandler.c          |   10 +-
 src/hotplug_macosx.c        |   19 +-
 src/powermgt_macosx.c       |   13 +-
 src/readerfactory.c         |   63 ++
 src/readerfactory.h         |    2 +
 src/winscard.c              |    2 +
 7 files changed, 1602 insertions(+), 16 deletions(-)

commit fb3709dfe44a1eefc0e2c63782c697017da8652c
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 24 00:45:57 2002 +0000

    changes
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@66 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 48 +++++++++----------------------------
 libmusclecard/src/musclecard.c      | 11 ++++-----
 libmusclecard/src/muscletest.c      | 11 +++++----
 pbx/PCSC.pbproj/project.pbxproj     |  2 +-
 src/powermgt_macosx.c               |  3 ++-
 5 files changed, 25 insertions(+), 50 deletions(-)

commit 4032a6700e2e6fef1332236d8e03ee41e8c10340
Author: David Corcoran <invalid@example.com>
Date:   Tue Apr 23 17:49:17 2002 +0000

    No changes, just time/date issues
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@65 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/PCSC.pbproj/project.pbxproj |  29 ++++++++++-
 src/eventhandler.c              |   1 -
 src/hotplug_macosx.c            |  67 +++++++++++++++++++------
 src/pcscdaemon.c                |  16 +++++-
 src/powermgt_generic.h          |  36 ++++++++++++++
 src/powermgt_macosx.c           | 105 ++++++++++++++++++++++++++++++++++++++++
 src/readerfactory.c             |  14 ++++--
 src/readerfactory.h             |   2 +-
 8 files changed, 246 insertions(+), 24 deletions(-)

commit fe5fed2689034cab67130b0d976071cf93a4057b
Author: David Corcoran <invalid@example.com>
Date:   Mon Apr 22 18:42:44 2002 +0000

    config.h -> added cvs to version
    project.pbx -> modified project builder attributes
    pcsclite.h -> __APPLE__
    mscdefines.h -> __APPLE__
    sys_generic.h, sys_hpux.c sys_solaris.c sys_unix.c
    int SYS_Exit to void SYS_Exit
    winscard_msg.c removed message in CommonSegment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@64 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h |  2 +-
 pbx/PCSC.pbproj/project.pbxproj     | 99 +++++++++++++++++++++++++++++++++++--
 pbx/config.h                        |  2 +-
 src/PCSC/pcsclite.h.in              |  2 +-
 src/PCSC/sys_generic.h              |  2 +-
 src/PCSC/winscard.h                 |  2 +-
 src/sys_hpux.c                      |  2 +-
 src/sys_solaris.c                   |  2 +-
 src/sys_unix.c                      |  2 +-
 src/winscard_msg.c                  |  7 ++-
 src/winscard_svc.c                  |  1 +
 11 files changed, 107 insertions(+), 16 deletions(-)

commit 04e3ed1fe7545f68879df03ebabdefc1b78414a1
Author: Carlos Prados <invalid@example.com>
Date:   Sun Apr 21 16:44:51 2002 +0000

    Added autoconf check for getopt.h header
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@63 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in     | 2 ++
 src/pcscdaemon.c | 5 +++--
 2 files changed, 5 insertions(+), 2 deletions(-)

commit 4d2553e824e30b010d366c3c7fab26cdd74c3f50
Author: David Corcoran <invalid@example.com>
Date:   Tue Apr 16 19:41:32 2002 +0000

    Added #ifdef around #include <getopt.h>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@62 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 3 +++
 1 file changed, 3 insertions(+)

commit df45f1f207c08f4fa6f588a2a0dedaee23b22b8f
Author: Carlos Prados <invalid@example.com>
Date:   Sun Apr 14 15:30:13 2002 +0000

    Added getopt_long() check.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@61 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2a1e44367f3aff10c36a07d6b8f021383eddf858
Author: Carlos Prados <invalid@example.com>
Date:   Sun Apr 14 15:28:54 2002 +0000

    Added getopt and getopt_long support for command line parsing.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@60 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 140 +++++++++++++++++++++++++++++++++----------------------
 1 file changed, 85 insertions(+), 55 deletions(-)

commit 98a719340095d527e50007bae3ba01a2174f3e7e
Author: David Corcoran <invalid@example.com>
Date:   Fri Apr 12 22:05:37 2002 +0000

    Added wait for thread return for the callback
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@59 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit c0dad8d94248c5b20986d807b1afb85c06ff3835
Author: David Corcoran <invalid@example.com>
Date:   Fri Apr 12 21:30:09 2002 +0000

    Added BLOCKSTATUS defines and checks in the Callbacks so that the
    race condition would go away.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@58 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h |  5 ++++
 libmusclecard/src/musclecard.c      | 58 +++++++++++++++++++++++++------------
 2 files changed, 45 insertions(+), 18 deletions(-)

commit 82a7818aa8e0125237b3a09040f070e7b66ebbf3
Author: David Corcoran <invalid@example.com>
Date:   Fri Apr 12 19:42:44 2002 +0000

    Removed MSCCertInfo
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@57 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 14 --------------
 1 file changed, 14 deletions(-)

commit 8a45c9cb49729640f48f2638d278c16fd44e0a6f
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 11 21:43:59 2002 +0000

    removed cert function pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@56 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h | 44 ++++++++++++++++---------------------
 1 file changed, 19 insertions(+), 25 deletions(-)

commit 6190aaa2507682a251355ffe5a2ddfa8ebab7a0b
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 11 17:24:05 2002 +0000

    removed certificate function pointers
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@55 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/tokenfactory.c | 52 ----------------------------------------
 1 file changed, 52 deletions(-)

commit df9702c7c2f0b0ec72ac2051e4350ebfae579a88
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 11 17:23:40 2002 +0000

    Removed all certificate handling functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@54 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h |  57 ++++++----------
 libmusclecard/src/musclecard.c      | 132 ------------------------------------
 2 files changed, 20 insertions(+), 169 deletions(-)

commit 28c077a72df993ba817d47f8f11d7a38bbeb5b0c
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 10 23:11:26 2002 +0000

    Added extern int errno - wouldn't build on Solaris
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@53 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 1 +
 1 file changed, 1 insertion(+)

commit b8f7dac64e99ee9d78a660993551827cefa6312b
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 10 22:37:30 2002 +0000

    Removed atexit() put cleanup code in SCardReleaseContext
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@52 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/winscard_clnt.c | 33 +++++++++++++++++++++++----------
 1 file changed, 23 insertions(+), 10 deletions(-)

commit 222993981b953c5ba8ad33a4fff8f32d675af86c
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 10 22:36:52 2002 +0000

    some modifications for tabs.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@51 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 81 +++++++++++++++++++++++++-----------------
 1 file changed, 49 insertions(+), 32 deletions(-)

commit fc6336bcff0e55d06290433b80f7c24a2348c111
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 10 22:36:06 2002 +0000

    Removed SetCapabilities -> put into 1.0 version for performance reasons
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@50 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/ifdwrapper.c | 62 ++++++++++++++++++++++++++++++++++----------------------
 1 file changed, 38 insertions(+), 24 deletions(-)

commit 6e40f6d8a55406f669b18f3e156189dbaf5f861d
Author: David Corcoran <invalid@example.com>
Date:   Wed Apr 10 01:11:57 2002 +0000

    Removed extra Read/Write functions
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@49 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h |  57 +---
 libmusclecard/src/musclecard.c      | 551 ++++++++++--------------------------
 2 files changed, 155 insertions(+), 453 deletions(-)

commit f0c1ca45ee4e50a48cf2535fdcfe5f58fd99fd8a
Author: David Corcoran <invalid@example.com>
Date:   Tue Apr 9 20:56:06 2002 +0000

    Added keyPartner to MSCImportKey.  Added keyMapping to MSCKeyInfo structure
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@48 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h |  2 ++
 libmusclecard/src/musclecard.c      | 33 ++++++++++++++++++++-------------
 2 files changed, 22 insertions(+), 13 deletions(-)

commit 146dc7db0f14a8a3661d948e73e9ded0d6a1b5a4
Author: David Corcoran <invalid@example.com>
Date:   Mon Apr 8 20:23:31 2002 +0000

    Fixed a security vulnerability in winscard_svc.c.  Removed /tmp/pcsc/.pcsctmp
    and replaced it with a stat /tmp/pcsc on the client side.  Modified Makefile.am
    to only install needed include files to /usr/local/include
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@47 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.in            | 10 +++++++++-
 configure              |  4 ++--
 src/Makefile.am        |  6 +-----
 src/Makefile.in        | 17 +++++++++--------
 src/PCSC/pcsclite.h.in |  2 --
 src/pcscdaemon.c       |  5 -----
 src/readerfactory.c    | 46 ++--------------------------------------------
 src/readerfactory.h    |  2 +-
 src/winscard_clnt.c    | 26 ++++++--------------------
 src/winscard_svc.c     | 44 ++++++++++++++++++++++++++++++++++++++++++++
 10 files changed, 74 insertions(+), 88 deletions(-)

commit 69fad48d1631911688cf217fcfa095caf37d76a4
Author: Michael Gile <invalid@example.com>
Date:   Mon Apr 8 17:19:36 2002 +0000

    initialized return value to -1 in RFSetReaderName
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@46 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/readerfactory.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9dc1d8c80321a066180eb64fceea5db60defdc4c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sun Apr 7 08:43:36 2002 +0000

    Allow pcscd to do bulk transfers for devices with high speed:
    
     Enhanced messaging has been added to accomodate newer devices which
    have more advanced capabilites, such as dedicated secure co-processors
    which can stream and encrypt data over USB.  In order to used enhanced
    messaging you must define PCSCLITE_ENHANCED_MESSAGING in the
    framework(library), the daemon, and your application
    
    Thanks to Michael Gile <mgile@mac.com> for the patch
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@45 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/pcsclite.h.in | 40 ++++++++++++++++++++++++++++++----------
 src/pcscdaemon.c       |  3 ++-
 src/readerfactory.c    | 26 ++++++++++++++++----------
 3 files changed, 48 insertions(+), 21 deletions(-)

commit c135c70e29ed967654f1bb22ac77a731a6af12ec
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 22:58:11 2002 +0000

    Added my name as suggested by David
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@44 0ce88b0d-b2fd-0310-8134-9614164e65ea

 AUTHORS | 1 +
 1 file changed, 1 insertion(+)

commit 29f5f6756f34984f023871fa2e298d8c35663a37
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 20:48:47 2002 +0000

    using -d1 (debug to stderr) or -d2 (debug to stdout) also activate the
    -fg option (foreground). Otherwise pcscd is started as a daemon
    (default) and stdout and stderr file descriptors are closed and then
    debug is useless since sent to /dev/null
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@43 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 16bf92c011db7a7f9cc14a14b9dc96df3d90868c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 20:46:26 2002 +0000

    renamed 1.0.2.beta5 to 1.0.2.cvs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@42 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in           | 2 +-
 src/PCSC/pcsclite.h.in | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f096c7c75b68e87072b85b1ddd45a991356b46db
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 17:12:13 2002 +0000

    make the ChangeLog.cvs rule .PHONY
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@41 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 8685e1aefc6f2edd1990785caa5c57c3b80fae5f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 16:53:55 2002 +0000

    use SYS_CloseFile() instead of close()
    use SYS_OpenFile() instead of open()
    use SYS_Chdir() instead of chdir()
    use SYS_Daemon() instead of daemon()
    test return values and print a debug message when necessary
    
    patch provided by Toni Andjelkovic <toni@soth.at>
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@40 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/sys_generic.h | 25 ++++++++++++++++---------
 src/pcscdaemon.c       | 22 ++++++++++++++++------
 src/sys_hpux.c         | 31 +++++++++++++++++++++++--------
 src/sys_solaris.c      | 31 +++++++++++++++++++++++--------
 src/sys_unix.c         | 31 +++++++++++++++++++++++--------
 src/winscard_clnt.c    | 43 ++++++++++++++++++++++++-------------------
 src/winscard_msg.c     | 17 +++++++++--------
 7 files changed, 134 insertions(+), 66 deletions(-)

commit 0979fac6eeb62a693d577f1d13232c6d7ed60a50
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 16:46:04 2002 +0000

    add a rule to create ChangeLog.cvs
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@39 0ce88b0d-b2fd-0310-8134-9614164e65ea

 Makefile.am | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit c555139dd53cde5866131e13322d1f824274b5c5
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 16:22:58 2002 +0000

     #include <stdlib.h> for malloc() declaration
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@38 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.c | 25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)

commit a01dd6675b8d9c02d6ed7f48cdbced108a405bbc
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Sat Apr 6 15:53:37 2002 +0000

    add error code management for SHMProcessEvents returned value
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@37 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 319d84c80e9be41c14db7c45c25beae74ad7869c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 5 00:20:01 2002 +0000

    correct text alignment
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@36 0ce88b0d-b2fd-0310-8134-9614164e65ea

 configure.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e7437255c572cc198ec0d1547399b6ddfe679a9f
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 5 00:15:33 2002 +0000

    removed since generated automatically by automake
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@35 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 940f78bb1c448b2ddde370b42c38c6ae35c4be0b
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 5 00:13:51 2002 +0000

    USE_SYSLOG is no more used. code rewrote with debug_msg()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@34 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/atrhandler.c | 28 +++++-----------------------
 1 file changed, 5 insertions(+), 23 deletions(-)

commit 68a36ec43c90c30a4fa440060f0745b2d8e1c072
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 5 00:12:57 2002 +0000

    debug_xxd(): also use the debug_msg_type way
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@33 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/debuglog.c | 38 ++++++++++++++++++++++++++------------
 1 file changed, 26 insertions(+), 12 deletions(-)

commit 3c3837829ef79ee838a2ed08b4c5515c1832746c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Fri Apr 5 00:11:27 2002 +0000

    removed since generated automatically from configure.in by autoheader
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@32 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 0b1363cd854b49c04fa2324d2a55d3729556d285
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 23:54:34 2002 +0000

    removed since automatically generated from Makefile.am
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@31 0ce88b0d-b2fd-0310-8134-9614164e65ea

commit 64711e56b3f2ff9e105d83cce050ba71c560f79c
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 23:51:02 2002 +0000

    src/winscard_msg.c: SHMProcessEvents() timeout on the select and go back
    into src/pcscdaemon.c: SVCServiceRunLoop()
    This is used to catch the Ctrl-C signal (in SVCServiceRunLoop) at some
    time when nothing else happens
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@30 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c   | 34 +++++++++++++++++++---------------
 src/winscard_msg.c | 26 ++++++++++++++++++--------
 2 files changed, 37 insertions(+), 23 deletions(-)

commit 3cd444a235fae63790afdd44b08986d8c3185ffe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 23:47:24 2002 +0000

    removed dlerror() from if tests since it is not the best way to test for
    errors
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@29 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_unix.c | 56 ++++++++++++++++++++------------------------------------
 1 file changed, 20 insertions(+), 36 deletions(-)

commit 18c53b091a87d562f39e72e999a7603b64c855a9
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 23:46:26 2002 +0000

    DYN_GetAddress() now correctly handles errors by not using dlerror() to
    know if an error occured since the error may have occured in a previous
    call
    Also removed dlerror() from if tests everywhere else
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@28 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/dyn_bsd.c | 59 ++++++++++++++++++++---------------------------------------
 1 file changed, 20 insertions(+), 39 deletions(-)

commit 2104173eff915b7330b077d5175313b4e75a906d
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 23:43:40 2002 +0000

    add many .h files in include_HEADERS so that 'make dist' include all the
    useful files
    add muscletest.c in EXTRA_libpcsclite_core_la_SOURCES
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@27 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 885e76887b530406af7d5e4c6df136d1e6bc2ff2
Author: David Corcoran <invalid@example.com>
Date:   Thu Apr 4 22:45:31 2002 +0000

    Some event changes, begin/end transaction.  Added IdentifyToken
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@26 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/musclecard.c | 28 +++++++++++++++++++++++++---
 1 file changed, 25 insertions(+), 3 deletions(-)

commit e1ab50031394a360df88d8e51228b214d40fae96
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 21:50:24 2002 +0000

    removed unused variable char tempString[1024];
    add a return 0 for main()
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@25 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/utils/bundleTool/bundleTool.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 9218a8010b9c9124e69e901884489c0e702de4fe
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 19:03:36 2002 +0000

    complete and automatic reindentation of *.c and *.h files
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@24 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/mscdefines.h         |  214 +-
 libmusclecard/src/PCSC/musclecard.h         | 1423 +++++-----
 libmusclecard/src/musclecard.c              | 4047 +++++++++++++++------------
 libmusclecard/src/muscletest.c              |  618 ++--
 libmusclecard/src/tokenfactory.c            | 1257 +++++----
 libmusclecard/src/tokenfactory.h            |   21 +-
 libmusclecard/utils/bundleTool/bundleTool.c |  328 +--
 src/PCSC/debuglog.h                         |   25 +-
 src/PCSC/dyn_generic.h                      |    9 +-
 src/PCSC/ifdhandler.h                       |  238 +-
 src/PCSC/pcsclite.h.in                      |  221 +-
 src/PCSC/sys_generic.h                      |   99 +-
 src/PCSC/thread_generic.h                   |   25 +-
 src/PCSC/winscard.h                         |  138 +-
 src/PCSC/wintypes.h                         |   52 +-
 src/atrhandler.c                            |  321 ++-
 src/atrhandler.h                            |  127 +-
 src/configfile.c                            | 1768 ++++++------
 src/configfile.h                            |    8 +-
 src/debuglog.c                              |  282 +-
 src/driverparser.c                          | 1702 +++++------
 src/dyn_bsd.c                               |  127 +-
 src/dyn_hpux.c                              |   94 +-
 src/dyn_macosx.c                            |  150 +-
 src/dyn_unix.c                              |   92 +-
 src/eventhandler.c                          |  813 +++---
 src/eventhandler.h                          |   51 +-
 src/hotplug.h                               |   12 +-
 src/hotplug_generic.c                       |    4 +-
 src/hotplug_linux.c                         |  545 ++--
 src/hotplug_macosx.c                        |  905 +++---
 src/ifdwrapper.c                            | 1200 ++++----
 src/ifdwrapper.h                            |   30 +-
 src/pcscdaemon.c                            |  601 ++--
 src/powermgt_macosx.c                       |    1 -
 src/prothandler.c                           |  255 +-
 src/prothandler.h                           |   12 +-
 src/readerfactory.c                         | 2526 +++++++++--------
 src/readerfactory.h                         |  251 +-
 src/sys_hpux.c                              |  303 +-
 src/sys_solaris.c                           |  303 +-
 src/sys_unix.c                              |  257 +-
 src/testpcsc.c                              |  287 +-
 src/thread_macosx.c                         |  105 +-
 src/thread_unix.c                           |  123 +-
 src/tokenparser.c                           | 1719 ++++++------
 src/utils/formaticc.c                       |  345 +--
 src/utils/installifd.c                      |  253 +-
 src/winscard.c                              | 2065 ++++++++------
 src/winscard_clnt.c                         | 3385 ++++++++++++----------
 src/winscard_msg.c                          |  821 +++---
 src/winscard_msg.h                          |  315 ++-
 src/winscard_svc.c                          |  471 ++--
 src/winscard_svc.h                          |   21 +-
 54 files changed, 17213 insertions(+), 14152 deletions(-)

commit 347ceee961106a2a28d385983618592fafca00ea
Author: Ludovic Rousseau <ludovic.rousseau@free.fr>
Date:   Thu Apr 4 18:23:23 2002 +0000

    test
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@23 0ce88b0d-b2fd-0310-8134-9614164e65ea

 ChangeLog | 1 +
 1 file changed, 1 insertion(+)

commit bdc4c9d251fd56a53c36c0d1098e5a4cb90adb84
Author: Jean-Luc Giraud <invalid@example.cominvalid@example.com>
Date:   Mon Apr 1 02:57:57 2002 +0000

    musclecard:
    - replaced PCSC_TARGET_OSX with __APPLE__ in #ifndef for mscdefines.h inclusion
    pbproj:
    - no meaningful modifications
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@22 0ce88b0d-b2fd-0310-8134-9614164e65ea

 libmusclecard/src/PCSC/musclecard.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d0b76a9fcf2bea4f134ce9b9edde7ce2fef6dc8b
Author: Jean-Luc Giraud <invalid@example.cominvalid@example.com>
Date:   Sun Mar 31 23:51:03 2002 +0000

    Fix 1 issue in readerfactory.c
    - valueLength=sizeof(tagValue) in RFSetReaderName to allow IFDHandlers to know
    how much space is available
    
    Modified PB project to allow build in proper order and have testpcsc used
    the new PCSC framework available in the build folder.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@21 0ce88b0d-b2fd-0310-8134-9614164e65ea

 pbx/PCSC.pbproj/project.pbxproj | 68 ++++++++++++++++++++++++++++-------------
 src/readerfactory.c             |  2 +-
 2 files changed, 47 insertions(+), 23 deletions(-)

commit 76e69d3b13252cd9775653f01521a603f1a22ee7
Author: David Corcoran <invalid@example.com>
Date:   Sun Mar 31 07:05:07 2002 +0000

    Added this
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@20 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6103e842d475ce23a824c0e5733299c357a3e5d1
Author: David Corcoran <invalid@example.com>
Date:   Sun Mar 31 03:42:59 2002 +0000

    Big Ass Error badError = 1 instead of ==
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@19 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/configfile.l | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 59a4fd10a79f886ea4441c896a931fc8113e9b8e
Author: David Corcoran <invalid@example.com>
Date:   Sat Mar 30 23:38:35 2002 +0000

    removed crap PCSC_DEBUG
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@18 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/pcscdaemon.c | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit 2f2c6e36ae856533f3ab8a3290e4330056f6621a
Author: David Corcoran <invalid@example.com>
Date:   Sat Mar 30 23:29:28 2002 +0000

    Fixed multi-reader bug, also fixed wintypes bug
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@17 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/wintypes.h | 2 ++
 src/readerfactory.c | 8 ++++----
 2 files changed, 6 insertions(+), 4 deletions(-)

commit 52c8e4ff51f687fa73044f889ef0dbbb9b59c205
Author: David Corcoran <invalid@example.com>
Date:   Sat Mar 30 23:02:06 2002 +0000

    added the man pages
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@16 0ce88b0d-b2fd-0310-8134-9614164e65ea

 config.h.in           |   6 --
 configure             | 197 +++++++++++++++++++-------------------------------
 configure.in          |  31 +-------
 doc/Makefile.am       |   3 +-
 doc/Makefile.in       | 100 ++++++++++++++++++++++---
 doc/bundleTool.1      |   6 +-
 doc/pcscd.8.in        |  55 ++++++++------
 src/pcscdaemon.c      |   9 ++-
 src/utils/Makefile.am |   4 +-
 src/utils/Makefile.in |  17 ++++-
 10 files changed, 225 insertions(+), 203 deletions(-)

commit 487aed812bc23fd6733803c5de4c97628daa8f14
Author: David Corcoran <invalid@example.com>
Date:   Sat Mar 30 22:20:33 2002 +0000

    Added some command line arguments.
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@15 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/Makefile.am  |  2 --
 src/configfile.c | 72 +++++++++++++++++++++++++++++++-------------------------
 src/configfile.l | 48 +++++++++++++++++++++----------------
 src/pcscdaemon.c | 42 ++++++++++++++++++++-------------
 4 files changed, 94 insertions(+), 70 deletions(-)

commit d259a617b8aaf818e90aab1b7a64ed74e348d270
Author: David Corcoran <invalid@example.com>
Date:   Sat Mar 30 20:59:07 2002 +0000

    Added command line debug options
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@14 0ce88b0d-b2fd-0310-8134-9614164e65ea

 src/PCSC/debuglog.h    |  6 ++++
 src/PCSC/pcsclite.h.in |  1 +
 src/debuglog.c         | 23 +++++++++---
 src/pcscdaemon.c       | 94 +++++++++++++++++++++++++++++++-------------------
 4 files changed, 83 insertions(+), 41 deletions(-)

commit 01f328565614092c83e375ff558e7be80e9d43c0
Author: David Corcoran <invalid@example.com>
Date:   Sat Mar 30 18:13:58 2002 +0000

    Initial revision
    
    
    git-svn-id: svn://anonscm.debian.org/svn/pcsclite/trunk/PCSC@11 0ce88b0d-b2fd-0310-8134-9614164e65ea

 AUTHORS                                     |    1 +
 COPYING                                     |   33 +
 ChangeLog                                   |  376 ++
 DRIVERS                                     |   29 +
 HELP                                        |   11 +
 INSTALL                                     |  182 +
 Makefile.am                                 |   25 +
 Makefile.in                                 |  370 ++
 NEWS                                        |    7 +
 README                                      |  107 +
 SECURITY                                    |   21 +
 bootstrap                                   |   11 +
 build/acinclude.m4                          |    0
 build/aclocal.m4                            |  805 ++++
 build/acx_pthread.m4                        |  222 +
 build/config.guess                          | 1319 ++++++
 build/config.sub                            | 1440 ++++++
 build/install-sh                            |  251 +
 build/ltconfig                              | 3017 ++++++++++++
 build/ltmain.sh                             | 5029 ++++++++++++++++++++
 build/missing                               |  190 +
 build/mkinstalldirs                         |   40 +
 build/ylwrap                                |  123 +
 config.h.in                                 |   81 +
 configure                                   | 3089 +++++++++++++
 configure.in                                |  263 ++
 doc/Makefile.am                             |    5 +
 doc/Makefile.in                             |  209 +
 doc/README.DAEMON                           |   15 +
 doc/bundleTool.1                            |   51 +
 doc/pcsc-lite-0.8.7.pdf                     |  Bin 0 -> 127963 bytes
 doc/pcscd.8.in                              |  115 +
 doc/pcscd.startup                           |   67 +
 etc/Makefile.am                             |    9 +
 etc/Makefile.in                             |  210 +
 etc/SmartcardServices                       |   11 +
 etc/StartupParameters.plist                 |   11 +
 etc/reader.conf.in                          |   11 +
 libmusclecard/src/PCSC/mscdefines.h         |  148 +
 libmusclecard/src/PCSC/musclecard.h         |  896 ++++
 libmusclecard/src/musclecard.c              | 2099 +++++++++
 libmusclecard/src/muscletest.c              |  328 ++
 libmusclecard/src/tokenfactory.c            |  698 +++
 libmusclecard/src/tokenfactory.h            |   32 +
 libmusclecard/utils/bundleTool/bundleTool.c |  194 +
 pbx/PCSC.pbproj/project.pbxproj             | 1367 ++++++
 pbx/config.h                                |   36 +
 reconf                                      |    4 +
 src/Makefile.am                             |  125 +
 src/Makefile.in                             | 6629 +++++++++++++++++++++++++++
 src/PCSC/debuglog.h                         |   65 +
 src/PCSC/dyn_generic.h                      |   30 +
 src/PCSC/ifdhandler.h                       |  158 +
 src/PCSC/pcsclite.h.in                      |  191 +
 src/PCSC/sys_generic.h                      |   96 +
 src/PCSC/thread_generic.h                   |   47 +
 src/PCSC/winscard.h                         |  103 +
 src/PCSC/wintypes.h                         |   52 +
 src/README_INTERNALS.txt                    |   76 +
 src/atrhandler.c                            |  183 +
 src/atrhandler.h                            |   80 +
 src/configfile.c                            | 1654 +++++++
 src/configfile.h                            |   27 +
 src/configfile.l                            |  134 +
 src/debuglog.c                              |  202 +
 src/driverparser.c                          | 1659 +++++++
 src/driverparser.l                          |  108 +
 src/dyn_bsd.c                               |   94 +
 src/dyn_hpux.c                              |   80 +
 src/dyn_macosx.c                            |  104 +
 src/dyn_unix.c                              |   83 +
 src/eventhandler.c                          |  424 ++
 src/eventhandler.h                          |   47 +
 src/hotplug.h                               |   29 +
 src/hotplug_generic.c                       |   23 +
 src/hotplug_linux.c                         |  313 ++
 src/hotplug_macosx.c                        |  486 ++
 src/ifdwrapper.c                            |  677 +++
 src/ifdwrapper.h                            |   38 +
 src/pcscdaemon.c                            |  328 ++
 src/powermgt_macosx.c                       |    1 +
 src/prothandler.c                           |  136 +
 src/prothandler.h                           |   29 +
 src/readerfactory.c                         | 1287 ++++++
 src/readerfactory.h                         |  145 +
 src/sys_hpux.c                              |  252 +
 src/sys_solaris.c                           |  252 +
 src/sys_unix.c                              |  226 +
 src/testpcsc.c                              |  182 +
 src/thread_macosx.c                         |   88 +
 src/thread_unix.c                           |   95 +
 src/tokenparser.c                           | 1665 +++++++
 src/tokenparser.l                           |  114 +
 src/utils/Makefile.am                       |   12 +
 src/utils/Makefile.in                       |  359 ++
 src/utils/README                            |   27 +
 src/utils/formaticc.c                       |  179 +
 src/utils/installifd.c                      |  139 +
 src/utils/sample.ibm                        |    1 +
 src/utils/sample.in                         |    6 +
 src/utils/sample.out                        |    1 +
 src/winscard.c                              |  952 ++++
 src/winscard_clnt.c                         | 1737 +++++++
 src/winscard_msg.c                          |  420 ++
 src/winscard_msg.h                          |  174 +
 src/winscard_svc.c                          |  265 ++
 src/winscard_svc.h                          |   34 +
 stamp-h.in                                  |    0
 108 files changed, 46681 insertions(+)
